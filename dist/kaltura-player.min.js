!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("KalturaPlayer",[],t):"object"==typeof exports?exports.KalturaPlayer=t():e.KalturaPlayer=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=21)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this._id=t.id,this._active=t.active,this._label=t.label,this._language=t.language,this._index=t.index}return i(e,[{key:"id",get:function(){return this._id}},{key:"active",get:function(){return this._active},set:function(e){this._active=e}},{key:"label",get:function(){return this._label}},{key:"language",get:function(){return this._language}},{key:"index",get:function(){return this._index}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_LEVEL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(27),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:o.DEBUG,INFO:o.INFO,TIME:o.TIME,WARN:o.WARN,ERROR:o.ERROR,OFF:o.OFF},u=function(){function e(t){r(this,e),o.useDefaults(t||{})}return i(e,[{key:"getLogger",value:function(e){return e?o.get(e):o}}]),e}(),l=new u({defaultLevel:o.DEBUG});t.default=l,t.LOG_LEVEL=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1,this.payload=n}return i(e,[{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._kind=e.kind,n}return a(t,e),o(t,[{key:"kind",get:function(){return this._kind}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._bandwidth=e.bandwidth,n._width=e.width,n._height=e.height,n}return a(t,e),o(t,[{key:"bandwidth",get:function(){return this._bandwidth}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return Number(e)===e}function o(e){return a(e)&&e%1==0}function s(e){return a(e)&&e%1!=0}function u(e){var t={},n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;Object.assign(t,s)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return t}function l(e){return e&&"object"===(void 0===e?"undefined":y(e))&&!Array.isArray(e)}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var o=n.shift();if(l(e)&&l(o))for(var s in o)l(o[s])?(e[s]||Object.assign(e,i({},s,{})),c(e[s],o[s])):Object.assign(e,i({},s,o[s]));return c.apply(void 0,[e].concat(r(n)))}function f(e){var t=void 0;return Array.isArray(e)?(t=e.length>0?e.slice(0):[],t.forEach(function(e,n){("object"===(void 0===e?"undefined":y(e))&&e!=={}||Array.isArray(e)&&e.length>0)&&(t[n]=f(e))})):"object"===(void 0===e?"undefined":y(e))?(t=Object.assign({},e),Object.keys(t).forEach(function(e){("object"===y(t[e])&&t[e]!=={}||Array.isArray(t[e])&&t[e].length>0)&&(t[e]=f(t[e]))})):t=e,t}function d(e){var t=2+(!e||e<0?0:e-2);return"_"+Math.random().toString(36).substr(2,t)}function h(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function p(e,t){return t.split(".").reduce(function(e,t){return void 0===e||null===e?e:e[t]},e)}function v(e,t){if(!t)return!1;for(var n=t.split("."),r=0;r<n.length;r++){var i=n[r];if(!e||!e.hasOwnProperty(i))return!1;e=e[i]}return!0}Object.defineProperty(t,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isNumber=a,t.isInt=o,t.isFloat=s,t.isObject=l,t.merge=u,t.mergeDeep=c,t.copyDeep=f,t.uniqueId=d,t.isEmptyObject=h,t.getPropertyPath=p,t.hasPropertyPath=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(17),s=r(o),u=n(2),l=(r(u),function(){function e(){i(this,e),this._bindingMap=new s.default}return a(e,[{key:"destroy",value:function(){return this.removeAll(),this._bindingMap=null,Promise.resolve()}},{key:"listen",value:function(e,t,n){var r=new c(e,t,n);this._bindingMap&&this._bindingMap.push(t,r)}},{key:"unlisten",value:function(e,t){if(this._bindingMap)for(var n=this._bindingMap.get(t),r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.unlisten(),this._bindingMap&&this._bindingMap.remove(t,i))}}},{key:"removeAll",value:function(){if(this._bindingMap){var e=this._bindingMap.getAll(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.unlisten()}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this._bindingMap&&this._bindingMap.clear()}}}]),e}()),c=function(){function e(t,n,r){i(this,e),this.target=t,this.type=n,this.listener=r,this.target.addEventListener(n,r,!1)}return a(e,[{key:"unlisten",value:function(){this.target&&(this.target.removeEventListener(this.type,this.listener,!1),this.target=null,this.listener=null)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM_EVENTS=t.HTML5_EVENTS=t.PLAYER_EVENTS=void 0;var r=n(6),i={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting"},a={VIDEO_TRACK_CHANGED:"videotrackchanged",AUDIO_TRACK_CHANGED:"audiotrackchanged",TEXT_TRACK_CHANGED:"texttrackchanged",TRACKS_CHANGED:"trackschanged",PLAYER_STATE_CHANGED:"playerstatechanged",FIRST_PLAY:"firstplay",SOURCE_SELECTED:"sourceselected"},o=(0,r.merge)([i,a]);t.PLAYER_EVENTS=o,t.HTML5_EVENTS=i,t.CUSTOM_EVENTS=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),c=r(l),f=n(2),d=r(f),h=n(10),p=r(h),v=n(8),y=n(16),g=r(y),m=n(6),b=n(1),_=r(b),E=n(19),T=r(E),w=n(15),k=r(w),S=n(22),O=r(S),A=n(24),P=r(A),R=n(0),D=(r(R),n(5)),x=r(D),L=n(3),I=r(L),M=n(4),C=r(M),N=n(31),U=r(N);n(28);var j=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._tracks=[],r._config={},r._firstPlay=!0,r._stateManager=new O.default(r),r._pluginManager=new k.default,r._eventManager=new c.default,r._createReadyPromise(),r._appendPlayerContainer(e),r.configure(n),r}return o(t,e),u(t,[{key:"configure",value:function(e){var n=this._engine;this._maybeResetPlayer(e),this._config=(0,m.mergeDeep)((0,m.isEmptyObject)(this._config)?t._defaultConfig:this._config,e),this._selectEngine()&&(this._appendEngineEl(),this._attachMedia(),this._maybeLoadPlugins(n),this._handlePlaybackConfig())}},{key:"_maybeResetPlayer",value:function(e){this._engine&&e.sources&&(t._logger.debug("New sources on existing engine: reset engine to change media"),this._reset())}},{key:"_maybeLoadPlugins",value:function(e){this._engine&&!e&&(t._logger.debug("Engine created for the first time: load plugins"),this._loadPlugins())}},{key:"_reset",value:function(){this._engine&&this._engine.destroy(),this._config={},this._tracks=[],this._firstPlay=!0,this._eventManager.removeAll(),this._createReadyPromise()}},{key:"_createReadyPromise",value:function(){var e=this;this._readyPromise=new Promise(function(t,n){e._eventManager.listen(e,v.CUSTOM_EVENTS.TRACKS_CHANGED,function(){t()}),e._eventManager.listen(e,v.HTML5_EVENTS.ERROR,n)})}},{key:"destroy",value:function(){this._engine&&this._engine.destroy(),this._eventManager.destroy(),this._pluginManager.destroy(),this._stateManager.destroy(),this._config={},this._tracks=[],this._readyPromise=null,this._firstPlay=!0}},{key:"_loadPlugins",value:function(){var e=this._config.plugins;for(var t in e)this._pluginManager.load(t,this,e[t])}},{key:"_selectEngine",value:function(){return!!(this._config.sources&&this._config.playback&&this._config.playback.streamPriority)&&this._selectEngineByPriority()}},{key:"_selectEngineByPriority",value:function(){var e=this,n=this._config.playback.streamPriority,r=this._config.sources,i=!0,a=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=function(){var n=u.value,i="string"==typeof n.engine?n.engine.toLowerCase():"",a="string"==typeof n.format?n.format.toLowerCase():"",o=t._engines.find(function(e){return e.id===i});if(o){var s=r[a];if(s&&s.length>0){var l=s[0];if(o.canPlayType(l.mimetype))return e._loadEngine(o,l),{v:!0}}}}();if("object"===(void 0===c?"undefined":s(c)))return c.v}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return t._logger.warn("No playable engines was found to play the given sources"),!1}},{key:"_loadEngine",value:function(e,t){this.dispatchEvent(new d.default(v.CUSTOM_EVENTS.SOURCE_SELECTED,{selectedSource:t})),this._engine=e.createEngine(t,this._config)}},{key:"_attachMedia",value:function(){var e=this;if(this._engine){for(var t in v.HTML5_EVENTS)this._eventManager.listen(this._engine,v.HTML5_EVENTS[t],function(t){return e.dispatchEvent(t)});this._eventManager.listen(this._engine,v.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedVideoTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,v.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedAudioTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,v.CUSTOM_EVENTS.TEXT_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedTextTrack),e.dispatchEvent(t)}),this._eventManager.listen(this,v.HTML5_EVENTS.PLAY,this._onPlay.bind(this))}}},{key:"_handlePlaybackConfig",value:function(){this._config.playback&&(this._config.playback.muted&&(this.muted=!0),"auto"===this._config.playback.preload&&this.load(),this._config.playback.autoplay&&this.play())}},{key:"_appendPlayerContainer",value:function(e){if(!e)throw new Error("targetId is not found, it must be pass on initialization");if(void 0===this._el){this._createPlayerContainer();var t=document.getElementById(e);null!=t&&null!=this._el&&t.appendChild(this._el)}}},{key:"_createPlayerContainer",value:function(){this._el=document.createElement("div"),this._el.id=(0,m.uniqueId)(5),this._el.className="playkit-container",this._el.setAttribute("tabindex","-1")}},{key:"_appendEngineEl",value:function(){null!=this._el&&null!=this._engine&&this._el.appendChild(this._engine.getVideoElement())}},{key:"getTracks",value:function(e){return this._getTracksByType(e)}},{key:"_getTracksByType",value:function(e){return e?this._tracks.filter(function(t){return e===P.default.VIDEO?t instanceof x.default:e===P.default.AUDIO?t instanceof I.default:e!==P.default.TEXT||t instanceof C.default}):this._tracks}},{key:"getActiveTracks",value:function(){return{video:this._getTracksByType(P.default.VIDEO).find(function(e){return e.active}),audio:this._getTracksByType(P.default.AUDIO).find(function(e){return e.active}),text:this._getTracksByType(P.default.TEXT).find(function(e){return e.active})}}},{key:"selectTrack",value:function(e){this._engine&&(e instanceof x.default?this._engine.selectVideoTrack(e):e instanceof I.default?this._engine.selectAudioTrack(e):e instanceof C.default&&this._engine.selectTextTrack(e))}},{key:"hideTextTrack",value:function(){this._engine&&(this._engine.hideTextTrack(),this._getTracksByType(P.default.TEXT).map(function(e){return e.active=!1}))}},{key:"enableAdaptiveBitrate",value:function(){this._engine&&this._engine.enableAdaptiveBitrate()}},{key:"_markActiveTrack",value:function(e){var t=void 0;if(e instanceof x.default?t=P.default.VIDEO:e instanceof I.default?t=P.default.AUDIO:e instanceof C.default&&(t=P.default.TEXT),t)for(var n=this.getTracks(t),r=0;r<n.length;r++)n[r].active=e.index===r}},{key:"_onPlay",value:function(){this._firstPlay&&(this._firstPlay=!1,this.dispatchEvent(new d.default(v.CUSTOM_EVENTS.FIRST_PLAY)))}},{key:"ready",value:function(){return this._readyPromise?this._readyPromise:Promise.resolve()}},{key:"load",value:function(){var e=this;this._engine&&this._engine.load().then(function(t){e._tracks=t.tracks,e.dispatchEvent(new d.default(v.CUSTOM_EVENTS.TRACKS_CHANGED,{tracks:e._tracks}))}).catch(function(t){e.dispatchEvent(new d.default(v.HTML5_EVENTS.ERROR,t))})}},{key:"play",value:function(){var e=this;this._engine&&(this._engine.src?this._engine.play():(this.load(),this.ready().then(function(){e._engine.play()})))}},{key:"pause",value:function(){if(this._engine)return this._engine.pause()}},{key:"buffered",value:function(){}},{key:"config",get:function(){return this._config}},{key:"sessionId",set:function(e){this._config.session=this._config.session||{},this._config.session.id=e}},{key:"currentTime",set:function(e){if(this._engine&&(0,m.isNumber)(e)){var t=e;e<0&&(t=0),t>this._engine.duration&&(t=this._engine.duration),this._engine.currentTime=t}},get:function(){if(this._engine)return this._engine.currentTime}},{key:"duration",get:function(){if(this._engine)return this._engine.duration}},{key:"volume",set:function(e){if(this._engine&&(0,m.isFloat)(e)){var t=e;t<0&&(t=0),t>1&&(t=1),this._engine.volume=t}},get:function(){if(this._engine)return this._engine.volume}},{key:"paused",get:function(){if(this._engine)return this._engine.paused}},{key:"seeking",get:function(){if(this._engine)return this._engine.seeking}},{key:"muted",set:function(e){this._engine&&(this._engine.muted=e)},get:function(){if(this._engine)return this._engine.muted}},{key:"src",get:function(){if(this._engine)return this._engine.src}},{key:"Event",get:function(){return v.PLAYER_EVENTS}},{key:"State",get:function(){return g.default}},{key:"Track",get:function(){return P.default}}],[{key:"_defaultConfig",get:function(){return(0,m.copyDeep)(U.default)}}]),t}(p.default);j._logger=_.default.getLogger("Player"),j._engines=[T.default],t.default=j},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),s=(r(o),n(17)),u=r(s),l=function(){function e(){i(this,e),this._listeners=new u.default,this.dispatchTarget=this}return a(e,[{key:"addEventListener",value:function(e,t){this._listeners.push(e,t)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"dispatchEvent",value:function(e){for(var t=this._listeners.get(e.type)||[],n=0;n<t.length;++n){e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.stopped)break}return e.defaultPrevented}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.name=t.name,this.message=t.message(n)}return i(e,[{key:"getError",value:function(){return{name:this.name,message:this.message}}}]),e}();a.TYPE={NOT_REGISTERED_PLUGIN:{name:"PluginNotRegisteredException",message:function(e){return"Cannot load "+e+" plugin. Name not found in the registry"}},NOT_VALID_HANDLER:{name:"PluginHandlerIsNotValidException",message:function(){return"To activate plugin you must provide a class derived from BasePlugin"}},NOT_IMPLEMENTED_METHOD:{name:"NotImplementedException",message:function(e){return e+" method not implemented"}}},t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(10),f=r(c),d=n(11),h=r(d),p=n(8),v=n(1),y=r(v),g=n(0),m=(r(g),n(5)),b=r(m),_=n(3),E=r(_),T=n(4),w=r(T),k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._videoElement=e,o._sourceObj=n,o._config=r,o}return o(t,e),s(t,null,[{key:"isSupported",value:function(){return!0}},{key:"createAdapter",value:function(e,t,n){return new this(e,t,n)}}]),s(t,[{key:"destroy",value:function(){this._sourceObj=null,this._config=null}},{key:"_onTrackChanged",value:function(e){e instanceof b.default?this._trigger(t.CustomEvents.VIDEO_TRACK_CHANGED,{selectedVideoTrack:e}):e instanceof E.default?this._trigger(t.CustomEvents.AUDIO_TRACK_CHANGED,{selectedAudioTrack:e}):e instanceof w.default&&this._trigger(t.CustomEvents.TEXT_TRACK_CHANGED,{selectedTextTrack:e})}},{key:"_trigger",value:function(e,t){this.dispatchEvent(new l.default(e,t))}},{key:"load",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"load").getError()}},{key:"selectVideoTrack",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectVideoTrack").getError()}},{key:"selectAudioTrack",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectAudioTrack").getError()}},{key:"selectTextTrack",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectTextTrack").getError()}},{key:"hideTextTrack",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"hideTextTrack").getError()}},{key:"enableAdaptiveBitrate",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"enableAdaptiveBitrate").getError()}},{key:"src",get:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"get src").getError()}}],[{key:"canPlayType",value:function(e){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"static canPlayType").getError()}}]),t}(f.default);k.CustomEvents=p.CUSTOM_EVENTS,k.getLogger=y.default.getLogger,t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerMediaSourceAdapter=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(20),s=r(o),u=n(1),l=r(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(t){t&&(e._mediaSourceAdapters.includes(t)?e._logger.debug("Adapter <"+t.id+"> is already registered, do not register again"):(e._logger.debug("Adapter <"+t.id+"> has been registered successfully"),e._mediaSourceAdapters.push(t)))}},{key:"unRegister",value:function(t){var n=e._mediaSourceAdapters.indexOf(t);n>-1&&(e._logger.debug("Unregistered <"+t.id+"> adapter"),e._mediaSourceAdapters.splice(n,1))}},{key:"canPlayType",value:function(t){for(var n=e._mediaSourceAdapters,r=0;r<n.length;r++)if(n[r].canPlayType(t))return e._selectedAdapter=n[r],e._logger.debug("Selected adapter is <"+e._selectedAdapter.id+">"),!0;return!1}},{key:"getMediaSourceAdapter",value:function(t,n,r){return t&&n&&r?(e._selectedAdapter||e.canPlayType(n.mimetype),e._selectedAdapter?e._selectedAdapter.createAdapter(t,n,r):null):null}},{key:"destroy",value:function(){e._selectedAdapter=null}}]),e}();c._logger=l.default.getLogger("MediaSourceProvider"),c._mediaSourceAdapters=[s.default],c._selectedAdapter=null,t.default=c;var f=c.register;t.registerMediaSourceAdapter=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9),s=(r(o),n(1)),u=r(s),l=n(6),c=n(7),f=r(c),d=n(11),h=r(d),p=function(){function e(t,n,r){i(this,e),this.name=t,this.player=n,this.eventManager=new f.default,this.logger=u.default.getLogger(this.name),this.config=(0,l.merge)([this.constructor.defaultConfig,r])}return a(e,null,[{key:"createPlugin",value:function(e,t){return new this(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"isValid",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"isValid()").getError()}}]),a(e,[{key:"getConfig",value:function(e){return e?this.config[e]:this.config}},{key:"updateConfig",value:function(e){this.config=(0,l.merge)([this.config,e])}},{key:"destroy",value:function(){throw new h.default(h.default.TYPE.NOT_IMPLEMENTED_METHOD,"destroy()").getError()}},{key:"getName",value:function(){return this.name}}]),e}();p.defaultConfig={},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPlugin=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),s=r(o),u=n(11),l=r(u),c=n(9),f=(r(c),n(1)),d=r(f),h=d.default.getLogger("PluginManager"),p=function(){function e(){i(this,e),this._plugins=new Map}return a(e,[{key:"load",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e._registry.has(t))throw new l.default(l.default.TYPE.NOT_REGISTERED_PLUGIN,t).getError();var i=e._registry.get(t);return null!=i&&i.isValid()?(this._plugins.set(t,i.createPlugin(t,n,r)),h.debug("Plugin <"+t+"> has been loaded"),!0):(h.debug("Plugin <"+t+"> isn't loaded, isValid()=false"),!1)}},{key:"destroy",value:function(){this._plugins.forEach(this._destroy.bind(this))}},{key:"_destroy",value:function(e,t){e.destroy(),this._plugins.delete(t)}},{key:"get",value:function(e){return this._plugins.get(e)}}],[{key:"register",value:function(t,n){if("function"!=typeof n||n.prototype instanceof s.default==!1)throw new l.default(l.default.TYPE.NOT_VALID_HANDLER).getError();return e._registry.has(t)?(h.debug("Plugin <"+t+"> is already registered, do not register again"),!1):(e._registry.set(t,n),h.debug("Plugin <"+t+"> has been registered successfully"),!0)}},{key:"unRegister",value:function(t){e._registry.has(t)&&(e._registry.delete(t),h.debug("Unregistered <"+t+"> plugin."))}}]),e}();p._registry=new Map,t.default=p;var v=p.register;t.registerPlugin=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={IDLE:"idle",LOADING:"loading",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering"};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this._map=new Map}return i(e,[{key:"push",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);Array.isArray(n)&&(n.push(t),this._map.set(e,n))}else this._map.set(e,[t])}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=this._map.get(e);return t?t.slice():[]}},{key:"getAll",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this._map.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e=e.concat(o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}},{key:"remove",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);if(Array.isArray(n))for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}}},{key:"keys",value:function(){return this._map.keys()}},{key:"clear",value:function(){this._map.clear()}}]),e}();t.default=a},function(e,t){e.exports={name:"playkit-js",version:"0.2.0",main:"dist/playkit.js",scripts:{clean:"rm -rf ./dist",prebuild:"npm run clean","build:prod":"NODE_ENV=production webpack",build:"webpack",dev:"webpack --progress --colors --watch",test:"NODE_ENV=test karma start --color","test:chrome":"NODE_ENV=test karma start --color --browsers Chrome","test:chrome:dots":"NODE_ENV=test karma start --color --browsers Chrome --reporters dots","test:firefox":"NODE_ENV=test karma start --color --browsers Firefox","test:safari":"NODE_ENV=test karma start --color --browsers Safari","test:watch":"NODE_ENV=test karma start --color --auto-watch",start:"webpack-dev-server",release:"npm run build:prod && npm run commit:dist && standard-version",publish:"git push --follow-tags --no-verify origin develop",eslint:"eslint . --color",flow:"flow check","eslint:flow:test":"npm run eslint && npm run flow && npm run test","commit:dist":"git add --all dist && (git commit -m 'chore: update dist' || exit 0)","prepush-msg:build":"echo '\nRunning build before push...\n' && exit 0","prepush-msg:dist":"echo '\nAdding dist files to a seperate commit...\n' && exit 0","prepush-msg:done":"echo '\nPre push tasks are done.\n' && exit 0"},"pre-push":["prepush-msg:build","prebuild","build","build:prod","prepush-msg:dist","commit:dist","prepush-msg:done"],devDependencies:{"babel-cli":"^6.18.0","babel-core":"^6.18.2","babel-eslint":"^7.1.1","babel-loader":"^6.2.7","babel-plugin-istanbul":"^4.0.0","babel-plugin-transform-class-properties":"^6.22.0","babel-plugin-transform-flow-strip-types":"^6.22.0","babel-preset-es2015":"^6.18.0","babel-register":"^6.23.0",chai:"^3.5.0","cross-env":"^3.1.4","css-loader":"^0.28.4",eslint:"^3.10.0","eslint-loader":"^1.6.1","eslint-plugin-flowtype":"^2.30.0","eslint-plugin-import":"^2.2.0","eslint-plugin-mocha-no-only":"^0.0.5","flow-bin":"latest",istanbul:"^0.4.5",karma:"^1.5.0","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-cli":"^1.0.1","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.0.1","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.2",mocha:"^3.2.0","mocha-cli":"^1.0.1","pre-push":"^0.1.1",sinon:"^2.0.0","sinon-chai":"^2.8.0","standard-version":"^4.0.0","style-loader":"^0.18.2","uglifyjs-webpack-plugin":"^0.4.3",webpack:"latest","webpack-dev-server":"latest"},repository:{type:"git",url:"https://github.com/kaltura/playkit-js"},keywords:["kaltura","player","html5 player"],license:"AGPLV3",bugs:{url:"https://github.com/kaltura/playkit-js/issues"},homepage:"https://github.com/kaltura/playkit-js",dependencies:{"js-logger":"^1.3.0"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),l=r(u),c=n(2),f=r(c),d=n(7),h=r(d),p=n(8),v=n(13),y=r(v),g=n(5),m=(r(g),n(3)),b=(r(m),n(4)),_=(r(b),n(6)),E=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._eventManager=new h.default,r._createVideoElement(),r._loadMediaSourceAdapter(e,n),r.attach(),r}return o(t,e),s(t,null,[{key:"createEngine",value:function(e,t){return new this(e,t)}},{key:"canPlayType",value:function(e){return y.default.canPlayType(e)}}]),s(t,[{key:"destroy",value:function(){this.detach(),this._mediaSourceAdapter&&(this._mediaSourceAdapter.destroy(),y.default.destroy()),this._el&&(this.pause(),this._el.removeAttribute("src"),this._el.parentNode&&this._el.parentNode.removeChild(this._el)),this._eventManager.destroy()}},{key:"attach",value:function(){var e=this;for(var t in p.HTML5_EVENTS)!function(t){e._eventManager.listen(e._el,p.HTML5_EVENTS[t],function(){e.dispatchEvent(new f.default(p.HTML5_EVENTS[t]))})}(t);this._mediaSourceAdapter&&(this._eventManager.listen(this._mediaSourceAdapter,p.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED,function(t){e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,p.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,p.CUSTOM_EVENTS.TEXT_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}))}},{key:"detach",value:function(){for(var e in p.HTML5_EVENTS)this._eventManager.unlisten(this._el,p.HTML5_EVENTS[e]);this._mediaSourceAdapter&&(this._eventManager.unlisten(this._mediaSourceAdapter,p.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,p.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,p.CUSTOM_EVENTS.TEXT_TRACK_CHANGED))}},{key:"getVideoElement",value:function(){return this._el}},{key:"_createVideoElement",value:function(){this._el=document.createElement("video"),this._el.id=(0,_.uniqueId)(5),this._el.className="playkit-engine-html5",this._el.controls=!1}},{key:"_loadMediaSourceAdapter",value:function(e,t){this._mediaSourceAdapter=y.default.getMediaSourceAdapter(this.getVideoElement(),e,t)}},{key:"selectVideoTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectVideoTrack(e)}},{key:"selectAudioTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectAudioTrack(e)}},{key:"selectTextTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectTextTrack(e)}},{key:"hideTextTrack",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.hideTextTrack()}},{key:"enableAdaptiveBitrate",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.enableAdaptiveBitrate()}},{key:"play",value:function(){return this._el.play()}},{key:"pause",value:function(){return this._el.pause()}},{key:"load",value:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.load():Promise.resolve({})}},{key:"ready",value:function(){}},{key:"id",get:function(){return t.id}},{key:"src",set:function(e){this._el.src=e},get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.src:""}},{key:"currentTime",get:function(){return this._el.currentTime},set:function(e){this._el.currentTime=e}},{key:"duration",get:function(){return this._el.duration}},{key:"volume",set:function(e){this._el.volume=e},get:function(){return this._el.volume}},{key:"paused",get:function(){return this._el.paused}},{key:"seeking",get:function(){return this._el.seeking}},{key:"seekable",get:function(){return this._el.seekable}},{key:"played",get:function(){return this._el.played}},{key:"buffered",get:function(){return this._el.buffered}},{key:"muted",set:function(e){this._el.muted=e},get:function(){return this._el.muted}},{key:"defaultMuted",get:function(){return this._el.defaultMuted}},{key:"poster",set:function(e){this._el.poster=e},get:function(){return this._el.poster}},{key:"preload",set:function(e){this._el.preload=e},get:function(){return this._el.preload}},{key:"autoplay",set:function(e){this._el.autoplay=e},get:function(){return this._el.autoplay}},{key:"loop",set:function(e){this._el.loop=e},get:function(){return this._el.loop}},{key:"controls",set:function(e){this._el.controls=e},get:function(){return this._el.controls}},{key:"playbackRate",set:function(e){this._el.playbackRate=e},get:function(){return this._el.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this._el.defaultPlaybackRate=e},get:function(){return this._el.defaultPlaybackRate}},{key:"ended",get:function(){return this._el.ended}},{key:"error",get:function(){return this._el.error}},{key:"networkState",get:function(){return this._el.networkState}},{key:"readyState",get:function(){return this._el.readyState}},{key:"videoHeight",get:function(){return this._el.videoHeight}},{key:"videoWidth",get:function(){return this._el.videoWidth}}],[{key:"isSupported",value:function(){try{t.TEST_VID=document.createElement("video"),t.TEST_VID.volume=.5}catch(e){return!1}return!!t.TEST_VID.canPlayType}}]),t}(l.default);E.id="html5",t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),c=r(l),f=n(8),d=n(0),h=(r(d),n(5)),p=r(h),v=n(3),y=r(v),g=n(4),m=r(g),b=n(12),_=r(b),E=function(e){function t(e,n){i(this,t),t._logger.debug("Creating adapter");var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._eventManager=new c.default,r}return o(t,e),u(t,null,[{key:"canPlayType",value:function(e){var n="string"==typeof e&&!!document.createElement("video").canPlayType(e.toLowerCase());return t._logger.debug("canPlayType result for mimeType:"+e+" is "+n.toString()),n}}]),u(t,[{key:"load",value:function(){var e=this;return this._loadPromise||(this._loadPromise=new Promise(function(n,r){e._eventManager.listen(e._videoElement,f.HTML5_EVENTS.LOADED_DATA,function(){e._eventManager.unlisten(e._videoElement,f.HTML5_EVENTS.LOADED_DATA);var r={tracks:e._getParsedTracks()};t._logger.debug("The source has been loaded successfully"),n(r)}),e._eventManager.listen(e._videoElement,f.HTML5_EVENTS.ERROR,function(n){e._eventManager.unlisten(e._videoElement,f.HTML5_EVENTS.ERROR),t._logger.error(n),r(n)}),e._sourceObj&&e._sourceObj.url&&(e._videoElement.src=e._sourceObj.url)})),this._loadPromise}},{key:"destroy",value:function(){t._logger.debug("destroy"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._eventManager.destroy(),this._loadPromise=null}},{key:"_getParsedTracks",value:function(){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),n=this._getParsedTextTracks();return e.concat(t).concat(n)}},{key:"_getParsedVideoTracks",value:function(){var e=this._videoElement.videoTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].selected,label:e[n].label,language:e[n].language,index:n};t.push(new p.default(r))}return t}},{key:"_getParsedAudioTracks",value:function(){var e=this._videoElement.audioTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].enabled,label:e[n].label,language:e[n].language,index:n};t.push(new y.default(r))}return t}},{key:"_getParsedTextTracks",value:function(){var e=this._videoElement.textTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={kind:e[n].kind,active:"showing"===e[n].mode,label:e[n].label,language:e[n].language,index:n};t.push(new m.default(r))}return t}},{key:"selectVideoTrack",value:function(e){var t=this._videoElement.videoTracks;e instanceof p.default&&t&&t[e.index]&&(this._disableVideoTracks(),t[e.index].selected=!0,this._onTrackChanged(e))}},{key:"selectAudioTrack",value:function(e){var t=this._videoElement.audioTracks;e instanceof y.default&&t&&t[e.index]&&(this._disableAudioTracks(),t[e.index].enabled=!0,this._onTrackChanged(e))}},{key:"selectTextTrack",value:function(e){var t=this._videoElement.textTracks;e instanceof m.default&&("subtitles"===e.kind||"captions"===e.kind)&&t&&t[e.index]&&(this._disableTextTracks(),t[e.index].mode="showing",this._onTrackChanged(e))}},{key:"hideTextTrack",value:function(){this._disableTextTracks()}},{key:"enableAdaptiveBitrate",value:function(){t._logger.debug("Enabling adaptive bitrate not supported")}},{key:"_disableVideoTracks",value:function(){var e=this._videoElement.videoTracks;if(e)for(var t=0;t<e.length;t++)e[t].selected=!1}},{key:"_disableAudioTracks",value:function(){var e=this._videoElement.audioTracks;if(e)for(var t=0;t<e.length;t++)e[t].enabled=!1}},{key:"_disableTextTracks",value:function(){var e=this._videoElement.textTracks;if(e)for(var t=0;t<e.length;t++)e[t].mode="disabled"}},{key:"src",get:function(){return this._videoElement.src}}]),t}(_.default);E.id="NativeAdapter",E._logger=_.default.getLogger(E.id),t.default=E},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return new s.default(e,t||{})}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.Utils=t.TextTrack=t.AudioTrack=t.VideoTrack=t.Track=t.BasePlugin=t.registerPlugin=t.BaseMediaSourceAdapter=t.registerMediaSourceAdapter=void 0,t.loadPlayer=a;var o=n(9),s=i(o),u=n(1),l=i(u),c=n(18),f=r(c),d=n(12),h=i(d),p=n(13),v=n(15),y=n(14),g=i(y),m=n(0),b=i(m),_=n(5),E=i(_),T=n(3),w=i(T),k=n(4),S=i(k),O=n(6),A=r(O),P=f.version;l.default.getLogger().log("%c Playkit "+P,"color: yellow; font-size: large"),l.default.getLogger().log("%c For more details see https://github.com/kaltura/playkit-js","color: yellow;"),t.registerMediaSourceAdapter=p.registerMediaSourceAdapter,t.BaseMediaSourceAdapter=h.default,t.registerPlugin=v.registerPlugin,t.BasePlugin=g.default,t.Track=b.default,t.VideoTrack=E.default,t.AudioTrack=w.default,t.TextTrack=S.default,t.Utils=A,t.VERSION=P,t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),u=(r(s),n(7)),l=r(u),c=n(23),f=r(c),d=n(16),h=r(d),p=n(8),v=n(2),y=r(v),g=n(1),m=r(g),b=function(){function e(t){var n,r,o,s,u,c,d=this;a(this,e),this._transitions=(c={},i(c,h.default.IDLE,(n={},i(n,p.HTML5_EVENTS.LOAD_START,function(){d._updateState(h.default.LOADING),d._dispatchEvent()}),i(n,p.HTML5_EVENTS.PLAY,function(){d._updateState(h.default.BUFFERING),d._dispatchEvent()}),n)),i(c,h.default.LOADING,(r={},i(r,p.HTML5_EVENTS.LOADED_METADATA,function(){d._player.config.playback.autoplay?d._updateState(h.default.PLAYING):d._updateState(h.default.PAUSED),d._dispatchEvent()}),i(r,p.HTML5_EVENTS.ERROR,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),r)),i(c,h.default.PAUSED,(o={},i(o,p.HTML5_EVENTS.PLAY,function(){d._updateState(h.default.PLAYING),d._dispatchEvent()}),i(o,p.HTML5_EVENTS.PLAYING,function(){d._updateState(h.default.PLAYING),d._dispatchEvent()}),i(o,p.HTML5_EVENTS.ENDED,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),o)),i(c,h.default.PLAYING,(s={},i(s,p.HTML5_EVENTS.PAUSE,function(){d._updateState(h.default.PAUSED),d._dispatchEvent()}),i(s,p.HTML5_EVENTS.WAITING,function(){d._updateState(h.default.BUFFERING),d._dispatchEvent()}),i(s,p.HTML5_EVENTS.ENDED,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),i(s,p.HTML5_EVENTS.ERROR,function(){d._updateState(h.default.IDLE),d._dispatchEvent()}),s)),i(c,h.default.BUFFERING,(u={},i(u,p.HTML5_EVENTS.PLAYING,function(){d._updateState(h.default.PLAYING),d._dispatchEvent()}),i(u,p.HTML5_EVENTS.PAUSE,function(){d._updateState(h.default.PAUSED),d._dispatchEvent()}),u)),c),this._player=t,this._logger=m.default.getLogger("StateManager"),this._eventManager=new l.default,this._history=[],this._prevState=null,this._curState=new f.default(h.default.IDLE),this._attachListeners()}return o(e,[{key:"_attachListeners",value:function(){this._eventManager.listen(this._player,p.HTML5_EVENTS.ERROR,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.ENDED,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.PLAY,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.LOAD_START,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.PLAYING,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.LOADED_METADATA,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.PAUSE,this._doTransition.bind(this)),this._eventManager.listen(this._player,p.HTML5_EVENTS.WAITING,this._doTransition.bind(this))}},{key:"_doTransition",value:function(e){this._logger.debug("Do transition request",e);var t=this._transitions[this._curState.type];"function"==typeof t[e.type]&&t[e.type]()}},{key:"_updateState",value:function(e){this._curState.type!==e&&(this._curState.duration=Date.now()/1e3,this._history.push(this._curState),this._prevState=this._curState,this._curState=new f.default(e),this._logger.debug("Switch player state: from "+this._prevState.type+" to "+this._curState.type))}},{key:"_dispatchEvent",value:function(){var e=new y.default(p.CUSTOM_EVENTS.PLAYER_STATE_CHANGED,{oldState:this._prevState,newState:this._curState});this._player.dispatchEvent(e)}},{key:"destroy",value:function(){this._history=[],this._eventManager.destroy()}},{key:"currentState",get:function(){return this._curState}},{key:"previousState",get:function(){return this._prevState}},{key:"history",get:function(){return this._history}}]),e}();t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.type=t,this._duration=0,this._timestamp=Date.now()/1e3}return i(e,[{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e-this._timestamp}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={VIDEO:"video",AUDIO:"audio",TEXT:"text"};t.default=r},function(e,t,n){t=e.exports=n(26)(void 0),t.push([e.i,'.playkit-container {\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  color: #fff;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n*[class^="playkit-engine-"] {\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n}\n',""])},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=r(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([a]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.3.0";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){h.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.get=function(e){return u[e]||(u[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info&&(s=console.info),e.formatter(r,i),n(s,r))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},r=o,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i)}()},function(e,t,n){var r=n(25);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(29)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(c(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(c(r.parts[a],t));p[r.id]={id:r.id,refs:1,parts:o}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],u=a[2],l=a[3],c={css:s,media:u,sourceMap:l};r[o]?r[o].parts.push(c):n.push(r[o]={id:o,parts:[c]})}return n}function a(e,t){var n=y(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=m++;n=g||(g=s(t)),r=f.bind(null,n,l,!1),i=f.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=h.bind(null,n,t),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=d.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function f(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=_(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var p={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),y=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),g=null,m=0,b=[],_=n(30);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=p[s.id];u.refs--,a.push(u)}if(e){r(i(e,t),t)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var E=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(e,t){e.exports={playback:{preload:"none",autoplay:!1,muted:!1,options:{html5:{hls:{},dash:{}}},streamPriority:[{engine:"html5",format:"hls"},{engine:"html5",format:"dash"},{engine:"html5",format:"progressive"}]}}}])})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=25)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t,this.headers.set("Content-Type","application/json")}return a(e,[{key:"getUrl",value:function(){if(!this.baseUrl)throw new Error("baseUrl is mandatory for request builder");return this.baseUrl+"/service/"+this.service+(this.action?"/action/"+this.action:"")}},{key:"doHttpRequest",value:function(){var e=this,t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&"object"===(void 0===e?"undefined":i(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.getUrl()),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={beUrl:"http://www.kaltura.com/api_v3",baseUrl:"https://cdnapisec.kaltura.com",serviceParams:{clientTag:"playkit-js",apiVersion:"3.3.0",format:1}},o=function(){function e(){r(this,e)}return i(e,null,[{key:"set",value:function(e){e&&Object.assign(a,e)}},{key:"get",value:function(){return a}}]),e}();t.default=o,t.Configuration=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UIConfCreationMode=t.UIConfType=t.MediaEntryType=t.MediaType=t.EntryType=t.EntryModerationStatus=t.EntryStatus=t.MetadataStatus=t.MetadataObjectType=t.Status=t.KalturaRuleActionType=t.Scheme=void 0;var o=n(18);(t.Scheme=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({PLAYREADY_CENC:"drm.PLAYREADY_CENC",WIDEVINE_CENC:"drm.WIDEVINE_CENC",FAIRPLAY:"fairplay.FAIRPLAY",PLAYREADY:"playReady.PLAYREADY",WIDEVINE:"widevine.WIDEVINE"}),(t.KalturaRuleActionType=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({DRM_POLICY:"drm.DRM_POLICY",BLOCK:1,PREVIEW:2,LIMIT_FLAVORS:3,ADD_TO_STORAGE:4,LIMIT_DELIVERY_PROFILES:5,SERVE_FROM_REMOTE_SERVER:6,REQUEST_HOST_REGEX:7,LIMIT_THUMBNAIL_CAPTURE:8}),(t.Status=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({ERROR:-1,QUEUED:0,CONVERTING:1,READY:2,DELETED:3,NOT_APPLICABLE:4,TEMP:5,WAIT_FOR_CONVERT:6,IMPORTING:7,VALIDATING:8,EXPORTING:9}),(t.MetadataObjectType=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({AD_CUE_POINT:"adCuePointMetadata.AdCuePoint",ANNOTATION:"annotationMetadata.Annotation",CODE_CUE_POINT:"codeCuePointMetadata.CodeCuePoint",THUMB_CUE_POINT:"thumbCuePointMetadata.thumbCuePoint",ENTRY:1,CATEGORY:2,USER:3,PARTNER:4,DYNAMIC_OBJECT:5}),(t.MetadataStatus=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({VALID:1,INVALID:2,DELETED:3}),(t.EntryStatus=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({ERROR_IMPORTING:-2,ERROR_CONVERTING:-1,SCAN_FAILURE:"virusScan.ScanFailure",IMPORT:0,INFECTED:"virusScan.Infected",PRECONVERT:1,READY:2,DELETED:3,PENDING:4,MODERATE:5,BLOCKED:6,NO_CONTENT:7}),(t.EntryModerationStatus=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({PENDING_MODERATION:1,APPROVED:2,REJECTED:3,FLAGGED_FOR_REVIEW:4,MODERATE:5,AUTO_APPROVED:6}),(t.EntryType=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({AUTOMATIC:{value:-1},EXTERNAL_MEDIA:{value:"externalMedia.externalMedia"},MEDIA_CLIP:{value:1},MIX:{value:2},PLAYLIST:{value:5},DATA:{value:6},LIVE_STREAM:{value:7},LIVE_CHANNEL:{value:8},DOCUMENT:{value:10}}),(t.MediaType=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({VIDEO:{value:1},IMAGE:{value:2},AUDIO:{value:5},LIVE_STREAM_FLASH:{value:201},LIVE_STREAM_WINDOWS_MEDIA:{value:202},LIVE_STREAM_REAL_MEDIA:{value:203},LIVE_STREAM_QUICKTIME:{value:204}}),(t.MediaEntryType=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum(["Vod","Live","Image","Audio","Unknown"]),(t.UIConfType=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({PLAYER:1,CONTRIBUTION_WIZARD:2,SIMPLE_EDITOR:3,ADVANCED_EDITOR:4,PLAYLIST:5,APP_STUDIO:6,KRECORD:7,PLAYER_V3:8,KMC_ACCOUNT:9,KMC_ANALYTICS:10,KMC_CONTENT:11,KMC_DASHBOARD:12,KMC_LOGIN:13,PLAYER_SL:14,CLIENTSIDE_ENCODER:15,KMC_GENERAL:16,KMC_ROLES_AND_PERMISSIONS:17,CLIPPER:18,KSR:19,KUPLOAD:20,WEBCASTING:21}),(t.UIConfCreationMode=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({WIZARD:2,ADVANCED:3})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),s=r(o),u=n(1),l=r(u),c=l.default.get(),f=function(){function e(){i(this,e)}return a(e,null,[{key:"getMultirequest",value:function(e,t){var n=c.serviceParams;Object.assign(n,{ks:e}),t&&Object.assign(n,{partnerId:t});var r=new s.default;return r.method="POST",r.service="multirequest",r.baseUrl=c.beUrl,r.params=n,r}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){r(this,e),this.hasError=!1,"KalturaAPIException"===t.objectType?(this.hasError=!0,this.error=new a(t.code,t.message)):this.data=t};t.default=i;var a=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_LEVEL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(8),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=function(){function e(t){r(this,e),o.useDefaults(t||{})}return i(e,[{key:"get",value:function(e){return e?o.get(e):o}}]),e}(),u=new s({defaultLevel:o.DEBUG}),l={DEBUG:o.DEBUG,INFO:o.INFO,TIME:o.TIME,WARN:o.WARN,ERROR:o.ERROR,OFF:o.OFF};t.default=u,t.LOG_LEVEL=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiRequestResult=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(4),d=r(f),h=n(5),p=r(h),v=p.default.get("OvpProvider"),y=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.requests=[],e}return s(t,e),u(t,[{key:"add",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,i({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:"execute",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){v.error(""+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new g(e))},function(e){n("Error on multiRequest execution, error <"+e+">.")})})}}]),t}(c.default);t.default=y;var g=t.MultiRequestResult=function e(t){var n=this;a(this,e),this.results=[],this.success=!0,t.forEach(function(e){var t=new d.default(e);if(n.results.push(t),t.hasError)return v.error("Service returned an error with error code: "+t.error.code+" and message: "+t.error.message+"."),void(n.success=!1)})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(12),o=(function(e){e&&e.__esModule}(a),n(11),function(){function e(){r(this,e),this.progressive=[],this.dash=[],this.hls=[]}return i(e,[{key:"map",value:function(e,t){if(t)switch(t.name){case"mp4":this.progressive.push(e);break;case"dash":this.dash.push(e);break;case"hls":this.hls.push(e)}}}]),e}());t.default=o},function(e,t,n){var r,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.3.0";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){h.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.get=function(e){return u[e]||(u[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info&&(s=console.info),e.formatter(r,i),n(s,r))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},r=o,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(7),o=(function(e){e&&e.__esModule}(a),function e(){r(this,e),this.metaData=new Map,this.type=i.MediaEntryType.Unknown});t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(2),function e(t,n){r(this,e),this.licenseUrl=t,this.scheme=n});t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaFormat=void 0;var o=n(18);(t.MediaFormat=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(o.Enum)).initEnum({dash:{get mimeType(){return"application/dash+xml"},get pathExt(){return"mpd"}},hls:{get mimeType(){return"application/x-mpegURL"},get pathExt(){return"m3u8"}},wvm:{get mimeType(){return"video/wvm"},get pathExt(){return"wvm"}},mp4:{get mimeType(){return"video/mp4"},get pathExt(){return"mp4"}},mp3:{get mimeType(){return"audio/mpeg"},get pathExt(){return"mp3"}}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=(function(e){e&&e.__esModule}(i),function e(){r(this,e)});t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(2),function e(t){r(this,e),this.id=t.id,this.flavorParamsId=t.flavorParamsId,this.fileExt=t.fileExt,this.bitrate=t.bitrate,this.width=t.width,this.height=t.height,this.id=t.id,this.frameRate=t.frameRate,this.isOriginal=t.isOriginal,this.isWeb=t.isWeb,this.containerFormat=t.containerFormat,this.videoCodecId=t.videoCodecId,this.status=t.status,this.language=t.language,this.label=t.label});t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(2),function e(t){r(this,e),this.id=t.id,this.name=t.name,this.dataUrl=t.dataUrl,this.type=t.type,this.entryType=t.mediaType,this.flavorParamsIds=t.flavorParamsIds,this.duration=t.duration});t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u=r(s),l=n(30),c=r(l),f=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasError||(n.totalCount=e.totalCount,n.totalCount>0&&(n.metas=[],e.objects.map(function(e){return n.metas.push(new c.default(e))}))),n}return o(t,e),t}(u.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u=r(s),l=n(27),c=r(l),f=n(17),d=r(f),h=n(31),p=r(h),v=n(13),y=r(v),g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.sources=[],n.actions=[],n.messages=[],n.flavorAssets=[],!n.hasError){var r=e.messages;r&&r.map(function(e){return n.messages.push(new c.default(e))});var o=e.actions;o&&o.map(function(e){return n.actions.push(new p.default(e))});var s=e.sources;s&&s.map(function(e){return n.sources.push(new d.default(e))});var u=e.flavorAssets;u&&u.map(function(e){return n.flavorAssets.push(new y.default(e))})}return n}return o(t,e),t}(u.default);t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(29),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t){var n=this;r(this,e),this.drm=[],this.format=t.format,this.deliveryProfileId=t.deliveryProfileId,this.url=t.url,this.protocols=t.protocols,this.flavorIds=t.flavorIds,t.drm&&t.drm.map(function(e){return n.drm.push(new o.default(e))})}return i(e,[{key:"hasDrmData",value:function(){return this.drm&&this.drm.length>0}},{key:"hasFlavorIds",value:function(){return!!this.flavorIds&&this.flavorIds.length>0}},{key:"getProtocol",value:function(e){var t="";if(this.protocols&&this.protocols.length>0){this.protocols.split(",").forEach(function(n){n==e&&(t=n)})}else if("http"==e)return e;return t}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,u)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return e}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.copyProperties=i;var s=Symbol();t.Enum=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];if(r(this,e),{}.hasOwnProperty.call(this.constructor,s))throw new Error("Enum classes cant be instantiated");"object"===(void 0===t?"undefined":a(t))&&null!==t&&i(this,t)}return o(e,[{key:"toString",value:function(){return this.constructor.name+"."+this.name}}],[{key:"initEnum",value:function(e){return Object.defineProperty(this,"enumValues",{value:[],configurable:!1,writable:!1,enumerable:!0}),Array.isArray(e)?this._enumValuesFromArray(e):this._enumValuesFromObject(e),Object.freeze(this.enumValues),this[s]=!0,this}},{key:"_enumValuesFromArray",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this._pushEnumValue(new this,o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"_enumValuesFromObject",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=new this(e[o]);this._pushEnumValue(s,o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"_pushEnumValue",value:function(e,t){e.name=t,e.ordinal=this.enumValues.length,Object.defineProperty(this,t,{value:e,configurable:!1,writable:!1,enumerable:!0}),this.enumValues.push(e)}},{key:"enumValueOf",value:function(e){return this.enumValues.find(function(t){return t.name===e})}},{key:Symbol.iterator,value:function(){return this.enumValues[Symbol.iterator]()}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),s=r(o),u=n(6),l=(r(u),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(this,e),this._loaders=new Map,this._multiRequest=s.default.getMultirequest(n,t)}return a(e,[{key:"add",value:function(t,n){var r=this,i=new t(n);if(i.isValid()){this._loaders.set(t.name,i);var a=this._multiRequest.requests.length,o=i.requests;o.forEach(function(e){r._multiRequest.add(e)});var s=Array.from(new Array(o.length),function(e,t){return t+a});e._loadersResponseMap.set(t.name,s)}}},{key:"fetchData",value:function(){var e=this;return new Promise(function(t,n){e._multiRequest.execute().then(function(r){if(e._multiResponse=r,r.success){var i=e.prepareData(r);i.success?t(e._loaders):n({success:!1,data:i.error})}else n(r)},function(e){n(e)})})}},{key:"prepareData",value:function(t){return this._loaders.forEach(function(n,r){var i=e._loadersResponseMap.get(r);try{null!=i&&(n.response=t.results.slice(i[0],i[i.length-1]+1))}catch(e){return{success:!1,error:e}}}),{success:!0,data:this._loaders}}}]),e}());l._loadersResponseMap=new Map,t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),s=(r(o),n(33)),u=r(s),l=n(34),c=r(l),f=n(1),d=r(f),h=n(16),p=r(h),v=n(15),y=r(v),g=n(28),m=r(g),b=d.default.get(),_=function(){function e(t){i(this,e),this._response={},this.requests=this.buildRequests(t),this._entryId=t.entryId}return a(e,null,[{key:"name",get:function(){return"media"}}]),a(e,[{key:"buildRequests",value:function(e){var t=[];return t.push(u.default.list(b.beUrl,e.ks,e.entryId)),t.push(u.default.getPlaybackContext(b.beUrl,e.ks,e.entryId)),t.push(c.default.list(b.beUrl,e.ks,e.entryId)),t}},{key:"isValid",value:function(){return!!this._entryId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){var t=new m.default(e[0].data);this._response.entry=t.entries[0],this._response.playBackContextResult=new p.default(e[1].data),this._response.metadataListResult=new y.default(e[2].data)},get:function(){return this._response}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(35),s=r(o),u=n(1),l=r(u),c=n(0),f=(r(c),l.default.get()),d=function(){function e(t){i(this,e),this._response={},this.requests=this.buildRequests(t),this._partnerId=t.partnerId}return a(e,null,[{key:"name",get:function(){return"session"}}]),a(e,[{key:"buildRequests",value:function(e){var t=[];return t.push(s.default.anonymousSession(f.beUrl,e.partnerId)),t}},{key:"isValid",value:function(){return!!this._partnerId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){this._response.ks=e[0].data.ks},get:function(){return this._response.ks}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(37),s=r(o),u=n(32),l=r(u),c=n(1),f=r(c),d=n(0),h=(r(d),f.default.get()),p=function(){function e(t){i(this,e),this._response={},this.requests=this.buildRequests(t),this._uiConfId=t.uiConfId}return a(e,null,[{key:"name",get:function(){return"uiConf"}}]),a(e,[{key:"buildRequests",value:function(e){var t=[];return t.push(s.default.get(h.beUrl,e.ks,e.uiConfId)),t}},{key:"isValid",value:function(){return!!this._uiConfId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){this._response.uiConf=new l.default(e[0].data)},get:function(){if(null==this._response||null==this._response.uiConf||null==this._response.uiConf.config)return null;try{return JSON.parse(this._response.uiConf.config).plugins}catch(e){return null}}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),s=(r(o),n(16)),u=(r(s),n(17)),l=(r(u),n(13)),c=(r(l),n(15)),f=(r(c),n(26)),d=r(f),h=n(38),p=r(h),v=n(2),y=n(5),g=r(y),m=n(1),b=r(m),_=n(11),E=n(9),T=r(E),w=n(10),k=r(w),S=n(12),O=r(S),A=n(7),P=r(A),R=b.default.get(),D=g.default.get("OvpProvider"),x=new Map([["mpegdash",_.MediaFormat.dash],["applehttp",_.MediaFormat.hls],["url",_.MediaFormat.mp4]]),L=function(){function e(){i(this,e)}return a(e,null,[{key:"getMediaEntry",value:function(e,t,n,r){var i=this,a=new T.default,o=r.entry,s=r.playBackContextResult,u=r.metadataListResult,l=s.sources,c=new P.default;l&&l.length>0&&l.forEach(function(r){var a=i.parseSource(r,e,t,n,o,s),u=x.get(r.format);c.map(a,u)}),a.sources=c;var f=this.parseMetaData(u);a.metaData=f,a.id=o.id,a.duration=o.duration;var d=v.MediaEntryType.Unknown;switch(o.entryType){case v.MediaType.IMAGE.value:d=v.MediaEntryType.Image;break;case v.MediaType.AUDIO.value:d=v.MediaEntryType.Audio;break;default:switch(o.type){case v.EntryType.MEDIA_CLIP.value:d=v.MediaEntryType.Vod;break;case v.EntryType.LIVE_STREAM.value:case v.EntryType.LIVE_CHANNEL.value:d=v.MediaEntryType.Live;break;default:d=v.MediaEntryType.Unknown}}return a.type=d,a}},{key:"parseSource",value:function(e,t,n,r,i,a){var o="",s=x.get(e.format),u=new O.default;if(e.hasFlavorIds()){var l=R.baseUrl.split("/"),c=void 0;c=l&&l.length>0?l[0].substring(0,l[0].length-1):"http";var f="";if(s)f=s.pathExt,u.mimetype=s.mimeType;else{var h=e.flavorIds.split(","),p=a.flavorAssets.filter(function(e){return-1!=h.indexOf(e.id)});p&&p.length>0&&(f=p[0].fileExt)}o=d.default.build({entryId:i.id,flavorIds:e.flavorIds,format:e.format,ks:t,partnerId:n,uiConfId:r,extension:f,protocol:e.getProtocol(c)})}else o=e.url;if(""==o)return D.error("failed to create play url from source, discarding source: ("+i.id+"_"+e.deliveryProfileId+"), "+e.format+"."),u;if(u.url=o,u.id=i.id+"_"+e.deliveryProfileId+","+e.format,e.hasDrmData()){var v=[];e.drm.forEach(function(e){v.push(new k.default(e.licenseURL,e.scheme))}),u.drmData=v}return u}},{key:"parseMetaData",value:function(e){var t={};return e&&e.metas&&e.metas.length>0&&e.metas.forEach(function(e){var n=void 0,r=new DOMParser;e.xml=e.xml.replace(/\r?\n|\r/g,""),e.xml=e.xml.replace(/>\s*/g,">"),e.xml=e.xml.replace(/>\s*/g,">"),n=r.parseFromString(e.xml,"text/xml");var i=p.default.xmlToJson(n);Object.keys(i.metadata).forEach(function(e){t[e]=i.metadata[e]["#text"]})}),t}}]),e}();t.default=L},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OvpProvider=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),s=r(o),u=n(23),l=r(u),c=n(19),f=r(c),d=n(20),h=r(d),p=n(21),v=r(p),y=n(22),g=r(y),m=n(1),b=r(m),_=n(9),E=(r(_),n(7)),T=r(E),w=s.default.get("OvpProvider"),k=t.OvpProvider=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2];i(this,e),this.partnerID=t,this.ks=n,this._isAnonymous=!this.ks,b.default.set(r)}return a(e,[{key:"getConfig",value:function(e,t){var n=this;return null!=t&&(this._uiConfId=t),this._dataLoader=new f.default(this.partnerID,this.ks),new Promise(function(r,i){if(n.validateParams(e,t)){var a=n.ks;n._isAnonymous&&(a="{1:result:ks}",n._dataLoader.add(v.default,{partnerId:n.partnerID})),n._dataLoader.add(h.default,{entryId:e,ks:a}),n._dataLoader.add(g.default,{uiConfId:t,ks:a}),n._dataLoader.fetchData().then(function(e){r(n.parseDataFromResponse(e))},function(e){i(e)})}else i({success:!1,data:"Missing mandatory parameter"})})}},{key:"parseDataFromResponse",value:function(e){w.debug("Data parsing started");var t={id:"",session:{partnerID:this.partnerID,uiConfID:this._uiConfId},sources:new T.default,duration:0,type:"Unknown",metadata:{},plugins:{}};if(null!=e){if(e.has(v.default.name)){var n=e.get(v.default.name);null!=n&&null!=n.response&&(this.ks=n.response,this._isAnonymous=!this.ks,t.session.ks=this.ks)}if(e.has(g.default.name)){var r=e.get(g.default.name),i={};null!=r&&(i=r.response),t.plugins=i}if(e.has(h.default.name)){var a=e.get(h.default.name);if(null!=a&&null!=a.response){var o=l.default.getMediaEntry(this.ks,this.partnerID,this._uiConfId,a.response);t.id=o.id,t.sources=o.sources,t.duration=o.duration,t.type=o.type.name,t.metadata=o.metaData}}}return w.debug("Data parsing finished",t),t}},{key:"validateParams",value:function(e,t){return!!e||!!t}}]),e}();t.default=k},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=o.default.get(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"build",value:function(t){var n=s.baseUrl,r=t.partnerId,i=t.entryId,a=t.ks,o=t.uiConfId,u=t.format,l=t.protocol,c=t.extension,f=t.flavorIds;if(""==n&&""==r&&""==i&&""==c&&""==u)return"";var d=n;return e.endsWith(n,"/")||(d+="/"),d+="p/"+r+"/sp/"+r+"00/playManifest/entryId/"+i+"/protocol/"+l+"/format/"+u,""!=f?d+="/falvorIds/"+f:""!=o&&(d+="/uiConfId/"+o),""!=this.ks&&(d+="/ks/"+a),d+="/a."+c,o&&""!=f&&(d+="?uiConfId=."+o),d}},{key:"endsWith",value:function(e,t){return"string"==typeof e&&("string"==typeof t&&-1!=e.indexOf(t,e.length-t.length))}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){r(this,e),this.message=t.message,this.code=t.code};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u=r(s),l=n(14),c=r(l),f=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasError||(n.totalCount=e.totalCount,n.totalCount>0&&(n.entries=[],e.objects.map(function(e){return n.entries.push(new c.default(e))}))),n}return o(t,e),t}(u.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(2),function e(t){r(this,e),this.scheme=t.scheme,this.licenseURL=t.licenseURL});t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(2),function e(t){r(this,e),this.id=t.id,this.metadataProfileId=t.metadataProfileId,this.metadataProfileVersion=t.metadataProfileVersion,this.metadataProfileId=t.metadataProfileId,this.metadataObjectType=t.metadataObjectType,this.objectId=t.objectId,this.version=t.version,this.created=new Date(0),this.created.setUTCSeconds(t.createdAt),this.updated=new Date(0),this.updated.setUTCSeconds(t.updatedAt),this.status=t.status,this.xml=t.xml});t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(2),function e(t){r(this,e),this.type=t.type});t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=(n(2),function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasError||(n.name=e.name,n.description=e.description,n.objTypeAsString=e.objTypeAsString,n.width=e.width,n.height=e.height,n.htmlParams=e.htmlParams,n.swfUrl=e.swfUrl,n.confFilePath=e.confFilePath,n.confFile=e.confFile,n.confFileFeatures=e.confFileFeatures,n.config=e.config,n.confVars=e.confVars,n.useCdn=e.useCdn,n.tags=e.tags,n.swfUrlVersion=e.swfUrlVersion,n.created=new Date(0),n.created.setUTCSeconds(e.createdAt),n.updated=new Date(0),n.updated.setUTCSeconds(e.updatedAt),n.html5Url=e.description,n.version=e.description,n.partnerTags=e.description,n.objType=e.description,n.creationMode=e.description),n}return a(t,e),t}(s.default));t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(0),f=r(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"getPlaybackContext",value:function(e,t,n){var r=new f.default;r.service="baseEntry",r.action="getPlaybackContext",r.method="POST",r.baseUrl=e,r.tag="baseEntry-getPlaybackContext";var i={objectType:"KalturaContextDataParams",flavorTags:"all"},a={entryId:n,ks:t,contextDataParams:i};return r.params=a,r}},{key:"list",value:function(e,n,r){var i=new f.default;return i.service="baseEntry",i.action="list",i.method="POST",i.baseUrl=e,i.tag="list",i.params=t.getEntryListReqParams(r,n),i}},{key:"getEntryListReqParams",value:function(e,t){return{ks:t,filter:{redirectFromEntryId:e},responseProfile:{fields:"id,name,dataUrl,duration,msDuration,flavorParamsIds,mediaType,type,tags",type:1}}}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(0),f=r(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"list",value:function(e,t,n){var r=new f.default;r.service="metadata_metadata",r.action="list",r.method="POST",r.baseUrl=e,r.tag="metadata_metadata-list";var i={objectType:"KalturaMetadataFilter",objectIdEqual:n,metadataObjectTypeEqual:"1"},a={filter:i,ks:t};return r.params=a,r}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(0),f=r(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"anonymousSession",value:function(e,t){var n=new f.default;return n.service="session",n.action="startWidgetSession",n.method="POST",n.baseUrl=e,n.tag="session-startWidget",n.params={widgetId:"_"+t},n}}]),t}(l.default);t.default=d},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),l=r(u),c=n(0),f=r(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"get",value:function(e,t,n){var r=new f.default;r.service="uiconf",r.action="get",r.method="POST",r.baseUrl=e,r.tag="uiconf-get";var i={fields:"config",type:1};return r.params={id:n,responseProfile:i,ks:t},r}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"xmlToJson",value:function(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3==e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var a=e.childNodes.item(i),o=a.nodeName;if(void 0===t[o])t[o]=this.xmlToJson(a);else{if(void 0===t[o].push){var s=t[o];t[o]=[],t[o].push(s)}t[o].push(this.xmlToJson(a))}}return t}}]),e}();t.default=a}])})},function(e,t,n){!function(t,r){e.exports=r(n(0))}(0,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=29)}([function(e,t,n){!function(){"use strict";function t(){}function n(e,n){var r,i,a,o,s=I;for(o=arguments.length;o-- >2;)L.push(arguments[o]);for(n&&null!=n.children&&(L.length||L.push(n.children),delete n.children);L.length;)if((i=L.pop())&&void 0!==i.pop)for(o=i.length;o--;)L.push(i[o]);else!0!==i&&!1!==i||(i=null),(a="function"!=typeof e)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(a=!1)),a&&r?s[s.length-1]+=i:s===I?s=[i]:s.push(i),r=a;var u=new t;return u.nodeName=e,u.children=s,u.attributes=null==n?void 0:n,u.key=null==n?void 0:n.key,void 0!==x.vnode&&x.vnode(u),u}function r(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t){return n(e.nodeName,r(r({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function a(e){!e.__d&&(e.__d=!0)&&1==C.push(e)&&(x.debounceRendering||setTimeout)(o)}function o(){var e,t=C;for(C=[];e=t.pop();)e.__d&&O(e)}function s(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&u(e,t.nodeName):n||e._componentConstructor===t.nodeName}function u(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function l(e){var t=r({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);return t}function c(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.__n=e,n}function f(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"==typeof r[a]&&!1===M.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,p,o):e.removeEventListener(t,p,o),(e.__l||(e.__l={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e)h(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var s=i&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function h(e,t,n){try{e[t]=n}catch(e){}}function p(e){return this.__l[e.type](x.event&&x.event(e)||e)}function v(){for(var e;e=N.pop();)x.afterMount&&x.afterMount(e),e.componentDidMount&&e.componentDidMount()}function y(e,t,n,r,i,a){U++||(j=null!=i&&void 0!==i.ownerSVGElement,F=null!=e&&!("__preactattr_"in e));var o=g(e,t,n,r,a);return i&&o.parentNode!==i&&i.appendChild(o),--U||(F=!1,a||v()),o}function g(e,t,n,r,i){var a=e,o=j;if(null==t&&(t=""),"string"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(a=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),b(e,!0))),a.__preactattr_=!0,a;if("function"==typeof t.nodeName)return A(e,t,n,r);if(j="svg"===t.nodeName||"foreignObject"!==t.nodeName&&j,(!e||!u(e,String(t.nodeName)))&&(a=c(String(t.nodeName),j),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),b(e,!0)}var s=a.firstChild,l=a.__preactattr_||(a.__preactattr_={}),f=t.children;return!F&&f&&1===f.length&&"string"==typeof f[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=f[0]&&(s.nodeValue=f[0]):(f&&f.length||null!=s)&&m(a,f,n,r,F||null!=l.dangerouslySetInnerHTML),E(a,t.attributes,l),j=o,a}function m(e,t,n,r,i){var a,o,u,l,c=e.childNodes,d=[],h={},p=0,v=0,y=c.length,m=0,_=t?t.length:0;if(0!==y)for(var E=0;E<y;E++){var T=c[E],w=T.__preactattr_,k=_&&w?T._component?T._component.__k:w.key:null;null!=k?(p++,h[k]=T):(w||(void 0!==T.splitText?!i||T.nodeValue.trim():i))&&(d[m++]=T)}if(0!==_)for(var E=0;E<_;E++){u=t[E],l=null;var k=u.key;if(null!=k)p&&void 0!==h[k]&&(l=h[k],h[k]=void 0,p--);else if(!l&&v<m)for(a=v;a<m;a++)if(void 0!==d[a]&&s(o=d[a],u,i)){l=o,d[a]=void 0,a===m-1&&m--,a===v&&v++;break}l=g(l,u,n,r),l&&l!==e&&(E>=y?e.appendChild(l):l!==c[E]&&(l===c[E+1]?f(c[E]):e.insertBefore(l,c[E]||null)))}if(p)for(var E in h)void 0!==h[E]&&b(h[E],!1);for(;v<=m;)void 0!==(l=d[m--])&&b(l,!1)}function b(e,t){var n=e._component;n?P(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||f(e),_(e))}function _(e){for(e=e.lastChild;e;){var t=e.previousSibling;b(e,!0),e=t}}function E(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||d(e,r,n[r],n[r]=void 0,j);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||d(e,r,n[r],n[r]=t[r],j)}function T(e){var t=e.constructor.name;(B[t]||(B[t]=[])).push(e)}function w(e,t,n){var r,i=B[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),R.call(r,t,n)):(r=new R(t,n),r.constructor=e,r.render=k),i)for(var a=i.length;a--;)if(i[a].constructor===e){r.__b=i[a].__b,i.splice(a,1);break}return r}function k(e,t,n){return this.constructor(e,n)}function S(e,t,n,r,i){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.__c||(e.__c=e.context),e.context=r),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===x.syncComponentUpdates&&e.base?a(e):O(e,1,i)),e.__r&&e.__r(e))}function O(e,t,n,i){if(!e.__x){var a,o,s,u=e.props,c=e.state,f=e.context,d=e.__p||u,h=e.__s||c,p=e.__c||f,g=e.base,m=e.__b,_=g||m,E=e._component,T=!1;if(g&&(e.props=d,e.state=h,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,f)?T=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,f),e.props=u,e.state=c,e.context=f),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!T){a=e.render(u,c,f),e.getChildContext&&(f=r(r({},f),e.getChildContext()));var k,A,R=a&&a.nodeName;if("function"==typeof R){var D=l(a);o=E,o&&o.constructor===R&&D.key==o.__k?S(o,D,1,f,!1):(k=o,e._component=o=w(R,D,f),o.__b=o.__b||m,o.__u=e,S(o,D,0,f,!1),O(o,1,n,!0)),A=o.base}else s=_,k=E,k&&(s=e._component=null),(_||1===t)&&(s&&(s._component=null),A=y(s,a,f,n||!g,_&&_.parentNode,!0));if(_&&A!==_&&o!==E){var L=_.parentNode;L&&A!==L&&(L.replaceChild(A,_),k||(_._component=null,b(_,!1)))}if(k&&P(k),e.base=A,A&&!i){for(var I=e,M=e;M=M.__u;)(I=M).base=A;A._component=I,A._componentConstructor=I.constructor}}if(!g||n?N.unshift(e):T||(v(),e.componentDidUpdate&&e.componentDidUpdate(d,h,p),x.afterUpdate&&x.afterUpdate(e)),null!=e.__h)for(;e.__h.length;)e.__h.pop().call(e);U||i||v()}}function A(e,t,n,r){for(var i=e&&e._component,a=i,o=e,s=i&&e._componentConstructor===t.nodeName,u=s,c=l(t);i&&!u&&(i=i.__u);)u=i.constructor===t.nodeName;return i&&u&&(!r||i._component)?(S(i,c,3,n,r),e=i.base):(a&&!s&&(P(a),e=o=null),i=w(t.nodeName,c,n),e&&!i.__b&&(i.__b=e,o=null),S(i,c,1,n,r),e=i.base,o&&e!==o&&(o._component=null,b(o,!1))),e}function P(e){x.beforeUnmount&&x.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?P(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.__b=t,f(t),T(e),_(t)),e.__r&&e.__r(null)}function R(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}function D(e,t,n){return y(n,e,{},!1,t,!1)}var x={},L=[],I=[],M=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,C=[],N=[],U=0,j=!1,F=!1,B={};r(R.prototype,{setState:function(e,t){var n=this.state;this.__s||(this.__s=r({},n)),r(n,"function"==typeof e?e(n,this.props):e),t&&(this.__h=this.__h||[]).push(t),a(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),O(this,2)},render:function(){}});var G={h:n,createElement:n,cloneElement:i,Component:R,render:D,rerender:o,options:x};e.exports=G}()},function(e,t,n){!function(t,r){e.exports=r(n(0),n(6))}(0,function(e,t){function n(){}function r(){var e=[],t=[];return{clear:function(){t=B,e=B},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==B&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}function i(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function a(){K||(K=!0,i("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/reactjs/react-redux/releases/tag/v2.0.0 for the migration instructions."))}function o(t){var n,r,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=i.getDisplayName,o=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,s=i.methodName,u=void 0===s?"connectAdvanced":s,l=i.renderCountProp,c=void 0===l?void 0:l,f=i.shouldHandleStateChanges,d=void 0===f||f,h=i.storeKey,p=void 0===h?"store":h,v=i.withRef,y=void 0!==v&&v,g=j(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),m=p+"Subscription",b=J++,_=(n={},n[p]=H,n[m]=I.instanceOf(V),n),E=(r={},r[m]=I.instanceOf(V),r);return function(n){$("function"==typeof n,"You must pass a component to the function returned by connect. Instead received "+n);var r=n.displayName||n.name||"Component",i=o(r),a=N({},g,{getDisplayName:o,methodName:u,renderCountProp:c,shouldHandleStateChanges:d,storeKey:p,withRef:y,displayName:i,wrappedComponentName:r,WrappedComponent:n}),s=function(r){function o(e,t){C(this,o);var n=F(this,r.call(this,e,t));return n.version=b,n.state={},n.renderCount=0,n.store=n.props[p]||n.context[p],n.parentSub=e[m]||t[m],n.setWrappedInstance=n.setWrappedInstance.bind(n),$(n.store,'Could not find "'+p+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+p+'" as a prop to "'+i+'".'),n.getState=n.store.getState.bind(n.store),n.initSelector(),n.initSubscription(),n}return U(o,r),o.prototype.getChildContext=function(){var e;return e={},e[m]=this.subscription||this.parentSub,e},o.prototype.componentDidMount=function(){d&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},o.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},o.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},o.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.store=null,this.parentSub=null,this.selector.run=function(){}},o.prototype.getWrappedInstance=function(){return $(y,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},o.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},o.prototype.initSelector=function(){var e=this.store.dispatch,n=this.getState,r=t(e,a),i=this.selector={shouldComponentUpdate:!0,props:r(n(),this.props),run:function(e){try{var t=r(n(),e);(i.error||t!==i.props)&&(i.shouldComponentUpdate=!0,i.props=t,i.error=null)}catch(e){i.shouldComponentUpdate=!0,i.error=e}}}},o.prototype.initSubscription=function(){var e=this;d&&function(){var t=e.subscription=new V(e.store,e.parentSub),n={};t.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=function(){this.componentDidUpdate=void 0,t.notifyNestedSubs()},this.setState(n)):t.notifyNestedSubs()}.bind(e)}()},o.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},o.prototype.addExtraProps=function(e){if(!y&&!c)return e;var t=N({},e);return y&&(t.ref=this.setWrappedInstance),c&&(t[c]=this.renderCount++),t},o.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return e.h(n,this.addExtraProps(t.props))},o}(e.Component);return s.WrappedComponent=n,s.displayName=i,s.childContextTypes=E,s.contextTypes=_,s.prototype.componentWillUpdate=function(){this.version!==b&&(this.version=b,this.initSelector(),this.subscription&&this.subscription.tryUnsubscribe(),this.initSubscription(),d&&this.subscription.trySubscribe())},X(s,n)}}function s(e,t){if(e===t)return!0;var n=0,r=0;for(var i in e){if(Q.call(e,i)&&e[i]!==t[i])return!1;n++}for(var a in t)Q.call(t,a)&&r++;return n===r}function u(e){return Z(Object(e))}function l(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function c(e){return!!e&&"object"==(void 0===e?"undefined":M(e))}function f(e){if(!c(e)||ae.call(e)!=ee||l(e))return!1;var t=u(e);if(null===t)return!0;var n=re.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ne.call(n)==ie}function d(e,t,n){f(e)||i(n+"() in "+t+" must return a plain object. Instead received "+e+".")}function h(e){return function(t,n){function r(){return i}var i=e(t,n);return r.dependsOnOwnProps=!1,r}}function p(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function v(e,t){return function(n,r){var i=r.displayName,a=function(e,t){return a.dependsOnOwnProps?a.mapToProps(e,t):a.mapToProps(e)};return a.dependsOnOwnProps=p(e),a.mapToProps=function(n,r){a.mapToProps=e;var o=a(n,r);return"function"==typeof o&&(a.mapToProps=o,a.dependsOnOwnProps=p(o),o=a(n,r)),d(o,i,t),o},a}}function y(e){return"function"==typeof e?v(e,"mapDispatchToProps"):void 0}function g(e){return e?void 0:h(function(e){return{dispatch:e}})}function m(e){return e&&"object"===(void 0===e?"undefined":M(e))?h(function(n){return t.bindActionCreators(e,n)}):void 0}function b(e){return"function"==typeof e?v(e,"mapStateToProps"):void 0}function _(e){return e?void 0:h(function(){return{}})}function E(e,t,n){return N({},n,e,t)}function T(e){return function(t,n){var r=n.displayName,i=n.pure,a=n.areMergedPropsEqual,o=!1,s=void 0;return function(t,n,u){var l=e(t,n,u);return o?i&&a(l,s)||(s=l):(o=!0,s=l,d(s,r,"mergeProps")),s}}}function w(e){return"function"==typeof e?T(e):void 0}function k(e){return e?void 0:function(){return E}}function S(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||i("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}function O(e,t,n,r){S(e,"mapStateToProps",r),S(t,"mapDispatchToProps",r),S(n,"mergeProps",r)}function A(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function P(e,t,n,r,i){function a(i,a){return p=i,v=a,y=e(p,v),g=t(r,v),m=n(y,g,v),h=!0,m}function o(){return y=e(p,v),t.dependsOnOwnProps&&(g=t(r,v)),m=n(y,g,v)}function s(){return e.dependsOnOwnProps&&(y=e(p,v)),t.dependsOnOwnProps&&(g=t(r,v)),m=n(y,g,v)}function u(){var t=e(p,v),r=!d(t,y);return y=t,r&&(m=n(y,g,v)),m}function l(e,t){var n=!f(t,v),r=!c(e,p);return p=e,v=t,n&&r?o():n?s():r?u():m}var c=i.areStatesEqual,f=i.areOwnPropsEqual,d=i.areStatePropsEqual,h=!1,p=void 0,v=void 0,y=void 0,g=void 0,m=void 0;return function(e,t){return h?l(e,t):a(e,t)}}function R(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=j(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,a),s=r(e,a),u=i(e,a);return O(o,s,u,a.displayName),(a.pure?P:A)(o,s,u,e,a)}function D(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+(void 0===e?"undefined":M(e))+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function x(e,t){return e===t}var L={only:function(e){return e&&e[0]||null}};n.isRequired=n;var I={element:n,func:n,shape:function(){return n},instanceOf:function(){return n}},M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},C=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},j=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},F=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},B=null,G={notify:function(){}},V=function(){function e(t,n){C(this,e),this.store=t,this.parentSub=n,this.unsubscribe=null,this.listeners=G}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=r())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=G)},e}(),H=I.shape({subscribe:I.func.isRequired,dispatch:I.func.isRequired,getState:I.func.isRequired}),K=!1,Y=function(e){function t(n,r){C(this,t);var i=F(this,e.call(this,n,r));return i.store=n.store,i}return U(t,e),t.prototype.getChildContext=function(){return{store:this.store,storeSubscription:null}},t.prototype.render=function(){return L.only(this.props.children)},t}(e.Component);Y.prototype.componentWillReceiveProps=function(e){this.store!==e.store&&a()},Y.childContextTypes={store:H.isRequired,storeSubscription:I.instanceOf(V)},Y.displayName="Provider";var W={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},q={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},z="function"==typeof Object.getOwnPropertySymbols,X=function(e,t,n){if("string"!=typeof t){var r=Object.getOwnPropertyNames(t);z&&(r=r.concat(Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;++i)if(!(W[r[i]]||q[r[i]]||n&&n[r[i]]))try{e[r[i]]=t[r[i]]}catch(e){}}return e},$=function(){},J=0,Q=Object.prototype.hasOwnProperty,Z=Object.getPrototypeOf,ee="[object Object]",te=Object.prototype,ne=Function.prototype.toString,re=te.hasOwnProperty,ie=ne.call(Object),ae=te.toString,oe=[y,g,m],se=[b,_],ue=[w,k];return{Provider:Y,connect:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.connectHOC,n=void 0===t?o:t,r=e.mapStateToPropsFactories,i=void 0===r?se:r,a=e.mapDispatchToPropsFactories,u=void 0===a?oe:a,l=e.mergePropsFactories,c=void 0===l?ue:l,f=e.selectorFactory,d=void 0===f?R:f;return function(e,t,r){var a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=a.pure,l=void 0===o||o,f=a.areStatesEqual,h=void 0===f?x:f,p=a.areOwnPropsEqual,v=void 0===p?s:p,y=a.areStatePropsEqual,g=void 0===y?s:y,m=a.areMergedPropsEqual,b=void 0===m?s:m,_=j(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),E=D(e,i,"mapStateToProps"),T=D(t,u,"mapDispatchToProps"),w=D(r,c,"mergeProps");return n(d,N({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:E,initMapDispatchToProps:T,initMergeProps:w,pure:l,areStatesEqual:h,areOwnPropsEqual:v,areStatePropsEqual:g,areMergedPropsEqual:b},_))}}(),connectAdvanced:o}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=n(49),c=(r(l),n(50)),f=r(c),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{config:{}};i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.name=e.name,n.player=e.player,n.config=e.config,n.logger=f.default.getLogger("UI "+n.name),n.logger.debug("Initialized"),n}return o(t,e),s(t,[{key:"getConfig",value:function(e){return e?this.config[e]:this.config}},{key:"defaultConfig",get:function(){return{}}}]),t}(u.Component);t.default=d},function(e,t,n){"use strict";function r(e){return function(t){return i({},(0,a.bindActionCreators)(e,t))}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.bindActions=r;var a=n(6)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"render",value:function(e){switch(e.type){case"maximize":return(0,s.h)("svg",{className:"icon icon-maximize",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M800 269.255v114.745c0 17.673 14.327 32 32 32s32-14.327 32-32v-192c0-17.673-14.327-32-32-32h-192c-17.673 0-32 14.327-32 32s14.327 32 32 32h114.745l-137.373 137.373c-12.497 12.497-12.497 32.758 0 45.255s32.758 12.497 45.255 0l137.373-137.373z"}),(0,s.h)("path",{d:"M224 754.745v-114.745c0-17.673-14.327-32-32-32s-32 14.327-32 32v192c0 17.673 14.327 32 32 32h192c17.673 0 32-14.327 32-32s-14.327-32-32-32h-114.745l137.373-137.373c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0l-137.373 137.373z"}));case"minimize":return(0,s.h)("svg",{className:"icon icon-minimize",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M672 306.745v-114.745c0-17.673-14.327-32-32-32s-32 14.327-32 32v192c0 17.673 14.327 32 32 32h192c17.673 0 32-14.327 32-32s-14.327-32-32-32h-114.745l137.373-137.373c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0l-137.373 137.373z"}),(0,s.h)("path",{d:"M352 717.255v114.745c0 17.673 14.327 32 32 32s32-14.327 32-32v-192c0-17.673-14.327-32-32-32h-192c-17.673 0-32 14.327-32 32s14.327 32 32 32h114.745l-137.373 137.373c-12.497 12.497-12.497 32.758 0 45.255s32.758 12.497 45.255 0l137.373-137.373z"}));case"play":return(0,s.h)("svg",{className:"icon icon-play",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M796.806 461.202c44.919 28.075 44.739 73.706 0 101.668l-459.472 287.171c-44.919 28.075-81.334 7.915-81.334-45.305v-585.4c0-53.096 36.595-73.266 81.334-45.305l459.472 287.171z"}));case"pause":return(0,s.h)("svg",{className:"icon icon-pause",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M256 287.843c0-35.259 28.407-63.843 64-63.843 35.346 0 64 28.564 64 63.843v448.314c0 35.259-28.407 63.843-64 63.843-35.346 0-64-28.564-64-63.843v-448.314zM640 287.843c0-35.259 28.407-63.843 64-63.843 35.346 0 64 28.564 64 63.843v448.314c0 35.259-28.407 63.843-64 63.843-35.346 0-64-28.564-64-63.843v-448.314z"}));case"volume-base":return(0,s.h)("svg",{className:"icon volume-base",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M224 352l234.504-156.336c29.545-19.697 53.496-7.194 53.496 28.053v576.566c0 35.19-24.059 47.677-53.496 28.053l-234.504-156.336h-127.906c-17.725 0-32.094-14.581-32.094-31.853v-256.295c0-17.592 14.012-31.853 32.094-31.853h127.906zM288 637.748l160 106.667v-464.83l-160 106.667v251.496zM128 416v192h96v-192h-96z"}));case"volume-waves":return(0,s.h)("svg",{className:"icon volume-waves",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M802.017 837.177c82.359-86.627 129.183-201.774 129.183-324.26 0-123.976-47.976-240.409-132.127-327.329-12.293-12.697-32.552-13.025-45.249-0.732s-13.025 32.552-0.732 45.249c72.692 75.084 114.109 175.597 114.109 282.812 0 105.928-40.422 205.331-111.566 280.162-12.177 12.808-11.666 33.063 1.143 45.24s33.063 11.666 45.24-1.143z"}),(0,s.h)("path",{d:"M667.436 743.221c67.761-60.884 107.273-147.888 107.273-241.233 0-87.318-34.552-169.203-94.836-229.446-12.501-12.493-32.762-12.486-45.255 0.015s-12.486 32.762 0.015 45.255c48.375 48.342 76.075 113.989 76.075 184.176 0 75.021-31.679 144.776-86.048 193.627-13.146 11.812-14.227 32.044-2.416 45.19s32.044 14.227 45.19 2.416z"}));case"volume-mute":return(0,s.h)("svg",{className:"icon volume-mute",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M768 466.745l-67.986-67.986c-12.213-12.213-32.654-12.393-45.151 0.104-12.584 12.584-12.543 32.711-0.104 45.151l67.986 67.986-67.986 67.986c-12.213 12.213-12.393 32.654 0.104 45.151 12.584 12.584 32.711 12.543 45.151 0.104l67.986-67.986 67.986 67.986c12.213 12.213 32.654 12.393 45.151-0.104 12.584-12.584 12.543-32.711 0.104-45.151l-67.986-67.986 67.986-67.986c12.213-12.213 12.393-32.654-0.104-45.151-12.584-12.584-32.711-12.543-45.151-0.104l-67.986 67.986z"}));case"close":return(0,s.h)("svg",{className:"icon icon-close",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M573.162 512l214.269-214.269c16.772-16.772 16.688-44.071-0.202-60.96-17.007-17.007-44.182-16.98-60.96-0.202l-214.269 214.269-214.269-214.269c-16.772-16.772-44.071-16.688-60.96 0.202-17.007 17.007-16.98 44.182-0.202 60.96l214.269 214.269-214.269 214.269c-16.772 16.772-16.688 44.071 0.202 60.96 17.007 17.007 44.182 16.98 60.96 0.202l214.269-214.269 214.269 214.269c16.772 16.772 44.071 16.688 60.96-0.202 17.007-17.007 16.98-44.182 0.202-60.96l-214.269-214.269z"}));case"share":return(0,s.h)("svg",{className:"icon icon-share",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M318.641 446.219l236.155-142.257c-0.086-1.754-0.129-3.52-0.129-5.295 0-58.91 47.756-106.667 106.667-106.667s106.667 47.756 106.667 106.667c0 58.91-47.756 106.667-106.667 106.667-33.894 0-64.095-15.808-83.633-40.454l-236.467 142.445c-0.132-3.064-0.394-6.095-0.779-9.087l7.271-12.835-0.117 53.333-7.183-12.743c0.399-3.046 0.67-6.131 0.806-9.252l236.467 142.383c19.538-24.648 49.741-40.457 83.636-40.457 58.91 0 106.667 47.756 106.667 106.667s-47.756 106.667-106.667 106.667c-58.91 0-106.667-47.756-106.667-106.667 0-1.775 0.043-3.539 0.129-5.293l-236.19-142.216c-19.528 24.867-49.868 40.841-83.939 40.841-58.91 0-106.667-47.756-106.667-106.667s47.756-106.667 106.667-106.667c34.091 0 64.447 15.993 83.974 40.886zM234.667 554.667c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667zM661.333 341.333c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667zM661.333 768c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667z"}));case"settings":return(0,s.h)("svg",{className:"icon icon-share",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M829.945 549.126c2.784-24.116 2.784-48.445 0.269-70.702-1.182-6.772-7.090-11.696-13.674-11.641-33.039 0.582-62.975-19.389-75.126-50.118s-3.971-65.772 20.504-87.92c4.293-3.894 4.818-10.455 1.003-15.228-14.831-18.927-31.796-36.079-50.521-51.087-4.614-3.687-11.301-3.148-16.127 2.145-15.732 16.059-37.322 25.023-59.382 24.831-9.828 0.044-19.574-1.802-29.307-5.686-30.997-13.082-50.429-44.232-48.535-78.046 0.365-5.803-3.87-10.878-9.583-11.551-23.919-2.769-48.074-2.831-71.958-0.192-5.836 0.654-10.191 5.68-10.009 11.47 1.121 33.146-18.329 63.547-49.925 76.834-8.987 3.423-18.538 5.129-27.498 5.028-22.472 0.224-44.067-8.707-60.526-25.487-2.197-2.386-5.29-3.748-8.24-3.758-2.663 0.016-5.248 0.905-7.105 2.334-19.136 15.052-36.496 32.233-51.558 50.977-3.729 4.732-3.187 11.536 1.058 15.449 24.89 22.573 32.935 58.34 19.426 90.928-14.22 29.886-44.875 48.43-77.941 47.151-5.576-0.215-10.363 3.934-11.003 10.013-2.916 24.025-2.916 48.315-0.231 70.764 1.178 6.84 7.155 11.808 14.518 11.713l2.428 0.007c31.565 0.659 59.701 20.063 71.6 49.499 12.239 30.769 4.278 65.898-20.252 88.586-4.217 3.829-4.736 10.275-0.976 14.991 14.777 18.932 31.665 36.115 50.227 51.128 4.694 3.762 11.505 3.223 16.349-2.081 15.725-16.101 37.337-25.092 59.378-24.895 9.894-0.057 19.705 1.819 29.5 5.78 30.753 13.169 50.063 44.084 48.378 77.965-0.373 5.795 3.857 10.867 9.602 11.539 23.908 2.78 48.053 2.842 71.923 0.192 5.851-0.659 10.215-5.702 10.027-11.562-1.088-33.118 18.371-63.473 49.584-76.583 9.014-3.552 18.622-5.354 27.841-5.307 22.555-0.225 44.218 8.804 60.434 25.505 2.224 2.395 5.343 3.76 8.371 3.769 2.474-0.012 4.874-0.847 6.896-2.43 19.227-14.971 36.653-32.121 51.726-50.848 3.737-4.743 3.194-11.563-0.941-15.379-24.391-21.907-32.789-56.564-21.134-87.207s40.964-50.957 73.904-51.116h5.704c5.586-0.028 10.269-4.227 10.905-9.777zM893.526 556.438c-4.321 37.715-36.171 66.271-74.323 66.464h-5.711c-6.33 0.031-11.99 3.953-14.24 9.87s-0.629 12.609 4.385 17.116c29.020 26.748 32.567 71.325 7.936 102.582-18.378 22.837-39.342 43.468-62.397 61.42-13.128 10.284-29.303 15.909-46.22 15.991-21.004-0.056-41.043-8.825-54.839-23.692-3.514-3.616-8.356-5.634-13.867-5.583-1.555-0.007-3.097 0.282-3.877 0.581-6.088 2.559-9.967 8.609-9.749 15.235 1.257 39.227-27.828 72.841-66.88 77.241-28.725 3.189-57.719 3.114-86.45-0.227-39.585-4.631-68.615-39.444-66.083-78.749 0.331-6.679-3.529-12.859-9.057-15.234-1.449-0.585-2.998-0.881-5.025-0.873-5.074-0.045-9.947 1.982-12.693 4.763-26.775 29.494-71.875 33.067-103.071 8.066-22.458-18.164-42.771-38.831-60.335-61.337-24.602-30.847-21.012-75.5 7.982-101.818 4.881-4.515 6.479-11.568 4.088-17.58-2.239-5.538-7.562-9.209-12.866-9.327-39.748 0.506-72.828-26.991-79.581-66.425-3.538-29.147-3.538-58.616-0.060-87.234 4.085-39.084 37.791-68.296 77.064-66.784 7.502 0.29 14.456-3.916 17.001-9.164 2.519-6.098 0.94-13.122-4.133-17.724-29.022-26.738-32.57-71.311-7.956-102.538 18.292-22.765 39.115-43.375 62.322-61.626 13.199-10.169 29.368-15.731 46.323-15.833 21.063 0.065 41.146 8.908 54.704 23.656 3.559 3.623 8.44 5.642 14.175 5.592 1.605 0.017 3.199-0.268 3.668-0.426 6.11-2.574 9.998-8.651 9.771-15.356-1.228-39.209 27.864-72.786 66.897-77.161 28.715-3.173 57.697-3.098 86.456 0.231 39.539 4.653 68.54 39.409 66.051 78.92-0.369 6.596 3.446 12.713 8.931 15.035 1.507 0.6 3.114 0.905 5.156 0.898 5.087 0.044 9.973-1.985 12.671-4.704 26.66-29.444 71.625-33.068 102.694-8.244 22.604 18.117 43.043 38.781 60.715 61.337 24.728 30.927 21.142 75.751-8.215 102.378-4.724 4.275-6.301 11.031-3.958 16.955s8.114 9.775 14.774 9.659c38.18-0.325 70.992 27.018 77.822 66.463 3.343 28.966 3.343 58.22 0 87.185zM511.951 597.037c47.144-0.118 85.24-38.367 85.169-85.511 0-34.617-20.872-65.819-52.867-79.034s-68.802-5.836-93.231 18.69c-24.429 24.527-31.66 61.363-18.317 93.305s44.628 52.688 79.245 52.55zM512.158 661.036c-60.477 0.242-115.178-36.032-138.507-91.881s-10.686-120.254 32.026-163.138c42.712-42.884 107.066-55.785 163.008-32.679s92.434 77.661 92.434 138.139c0.124 82.417-66.545 149.353-148.962 149.559z"}));case"check":return(0,s.h)("svg",{className:"icon check-icon",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M342.481 563.894c-12.577-12.416-32.838-12.285-45.254 0.292s-12.285 32.838 0.292 45.254l118.857 117.333c13.275 13.105 34.901 12.123 46.933-2.131l297.143-352c11.4-13.505 9.694-33.694-3.811-45.094s-33.694-9.694-45.094 3.811l-274.828 325.566-94.238-93.030z"}));case"language":return(0,s.h)("svg",{className:"icon language-icon",viewBox:"0 0 1024 1024"},(0,s.h)("path",{d:"M625.773 808.031c29.752-39.944 63.443-97.069 83.311-168.977 41.798-3.715 74.872-8.022 98.271-11.57-32.456 82.71-98.638 148.558-181.582 180.547zM216.562 627.283c23.516 3.506 56.799 7.797 98.279 11.528 19.868 72.017 53.601 129.224 83.378 169.219-83.002-32.014-149.226-97.945-181.657-180.747zM400.147 215.201c-29.835 40.32-64.161 98.037-84.572 169.695-42.123 3.731-75.423 8.072-98.938 11.629 32.698-83.353 99.656-149.61 183.51-181.323zM807.438 396.725c-23.641-3.523-57.158-7.847-98.947-11.587-20.402-71.766-54.778-129.567-84.639-169.937 83.912 31.73 150.912 98.070 183.585 181.523zM720.095 436.644c48.952 4.817 84.472 10.209 102.995 13.331 3.99 20.068 6.127 40.796 6.127 62.024 0 21.262-2.137 42.031-6.152 62.141-18.248 3.172-53.376 8.615-102.753 13.448 3.84-23.908 6.069-49.102 6.069-75.59 0-26.296-2.304-51.431-6.286-75.356zM537.043 597.206v-170.396c48.576 0.551 92.653 2.646 131.178 5.426 5.050 25.119 8.072 51.74 8.072 79.763 0 28.216-2.913 54.87-7.789 79.939-38.283 2.713-82.343 4.742-131.462 5.267zM486.957 195.859v180.856c-43.175 0.442-82.443 1.995-117.429 4.149 31.939-95.382 89.99-161.656 112.237-184.612 1.72-0.159 3.464-0.259 5.192-0.392zM542.286 196.26c22.297 22.906 80.456 89.080 112.345 184.771-35.261-2.229-74.646-3.848-117.587-4.307v-180.864c1.745 0.142 3.506 0.234 5.242 0.401zM347.706 512c0-28.074 3.047-54.762 8.156-79.955 38.191-2.696 82.134-4.708 131.094-5.234v170.387c-48.71-0.551-92.895-2.655-131.495-5.443-4.858-25.018-7.755-51.606-7.755-79.755zM194.783 512c0-21.262 2.137-42.031 6.144-62.125 18.282-3.181 53.501-8.64 103.012-13.482-4.007 24-6.319 49.219-6.319 75.606 0 26.396 2.221 51.506 6.027 75.339-48.826-4.808-84.246-10.184-102.737-13.306-3.99-20.068-6.127-40.804-6.127-62.033zM481.338 827.706c-22.389-22.314-81.016-87.469-112.662-184.779 35.437 2.262 75.047 3.898 118.28 4.366v180.839c-1.87-0.142-3.757-0.25-5.618-0.426zM542.653 827.706c-1.862 0.175-3.74 0.284-5.61 0.426v-180.839c43.509-0.442 83.044-2.012 118.222-4.199-31.672 97.244-90.265 162.349-112.612 184.612zM512 128c-211.734 0-384 172.257-384 384 0 211.734 172.266 384 384 384s384-172.266 384-384c0-211.743-172.266-384-384-384z"}))}}}]),t}(s.Component);t.default=u},function(e,t,n){function r(e){return null!==e&&void 0!==e}function i(e,t){var n=a({},e);for(var r in t)t.hasOwnProperty(r)&&(n[r]=e[r]&&t[r]&&"object"==typeof e[r]&&"object"==typeof t[r]?i(e[r],t[r]):e[r]||t[r]);return n}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(e){if(e=e||{},"string"==typeof e&&(e=e.split(",")),"join"in e){for(var t={},n=0;n<e.length;n++){var r=e[n].trim();r&&(t[r.split(".").pop()]=r)}return t}return e}function s(e,t){return f=t||m,e&&e.replace(/\{\{([\w.-]+)\}\}/g,u)}function u(e,t){for(var n=t.split("."),r=f,i=0;i<n.length;i++)if(null==(r=r[n[i]]))return"";return"string"==typeof r&&r.match(/\{\{/)&&(r=s(r,f)),r}function l(e,t,n,i,a,o){t&&(e=t+"."+e);var u=n&&h(n,e);return(a||0===a)&&u&&"object"==typeof u&&(u=u.splice?u[a]||u[0]:0===a&&r(u.none)?u.none:1===a&&r(u.one||u.singular)?u.one||u.singular:u.some||u.many||u.plural||u.other||u),u&&s(u,i)||o||null}function c(e,t,n){var r={};t=t||{},e=o(e);for(var i in e)if(e.hasOwnProperty(i)&&e[i]){var s=e[i];n||"string"!=typeof s?s.nodeName===b&&(s=a({fallback:s.children&&s.children[0]},s.attributes),r[i]=l(s.id,t.scope,t.dictionary,s.fields,s.plural,s.fallback)):r[i]=l(s,t.scope,t.dictionary)}return r}var f,d=n(0),h=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(n(45)),p=/[?&#]intl=show/,v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getChildContext=function(){var e=this.props,t=e.scope,n=e.definition,r=e.mark,o=a({},this.context.intl||{});return t&&(o.scope=t),n&&(o.dictionary=i(o.dictionary||{},n)),(r||"undefined"!=typeof location&&String(location).match(p))&&(o.mark=!0),{intl:o}},t.prototype.render=function(e){var t=e.children;return t&&t[0]||null},t}(d.Component),y=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e.length>1)return g(e[0],e[1]);var n=e[0];return function(e){return g(e,n)}},g=function(e,t){return function(n){return d.h(v,t||{},d.h(e,n))}},m={},b=function(e,t){var n=e.id,r=e.children,i=e.plural,a=e.fields,o=t.intl,s=r&&r[0],u=l(n,o&&o.scope,o&&o.dictionary,a,i,s);if(o&&o.mark){var c="dictionary"+(o&&o.scope?"."+o.scope:"")+"."+n;return d.h("mark",{style:"background: "+(u?h(o,c)?"rgba(119,231,117,.5)":"rgba(229,226,41,.5)":"rgba(228,147,51,.5)"),title:n},u)}return u},_=function(e,t){var n=e.children,r=t.intl,i=n&&n[0];return i&&d.cloneElement(i,c(i.attributes,r,!0))},E=function(e){return function(t){return function(n,r){var i="function"==typeof e?e(n):e,a=c(i,r.intl);return d.h(t,assign({},n,a))}}};y.intl=y,y.IntlProvider=v,y.Text=b,y.Localizer=_,y.withText=E,e.exports=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(){}var i=n(13),a=n(42),o=n(43),s=n(44),u=n(17),l=n(8);n.d(t,"createStore",function(){return i.b}),n.d(t,"combineReducers",function(){return a.a}),n.d(t,"bindActionCreators",function(){return o.a}),n.d(t,"applyMiddleware",function(){return s.a}),n.d(t,"compose",function(){return u.a}),"production"!==e.env.NODE_ENV&&"string"==typeof r.name&&"isCrushed"!==r.name&&l.a("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build.")}.call(t,n(12))},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=t.types={ADD_PLAYER_CLASS:"shell/ADD_PLAYER_CLASS",REMOVE_PLAYER_CLASS:"shell/REMOVE_PLAYER_CLASS",UPDATE_IS_MOBILE:"shell/UPDATE_IS_MOBILE"},o=t.initialState={playerClasses:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case a.ADD_PLAYER_CLASS:return e.playerClasses.includes(t.className)?e:i({},e,{playerClasses:[].concat(r(e.playerClasses),[t.className])});case a.REMOVE_PLAYER_CLASS:return i({},e,{playerClasses:e.playerClasses.filter(function(e){return e!==t.className})});case a.UPDATE_IS_MOBILE:return i({},e,{isMobile:t.isMobile});default:return e}};t.actions={addPlayerClass:function(e){return{type:a.ADD_PLAYER_CLASS,className:e}},removePlayerClass:function(e){return{type:a.REMOVE_PLAYER_CLASS,className:e}},updateIsMobile:function(e){return{type:a.UPDATE_IS_MOBILE,isMobile:e}}}},function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={TOGGLE_PLAY:"play-pause/TOGGLE_PLAY"},a=t.initialState={isPlaying:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.TOGGLE_PLAY:return r({},e,{isPlaying:t.isPlaying});default:return e}};t.actions={toggleIsPlaying:function(e){return{type:i.TOGGLE_PLAY,isPlaying:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={TOGGLE_SHARE_OVERLAY:"share/TOGGLE_SHARE_OVERLAY"},a=t.initialState={overlayOpen:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.TOGGLE_SHARE_OVERLAY:return r({},e,{overlayOpen:t.show});default:return e}};t.actions={toggleShareOverlay:function(e){return{type:i.TOGGLE_SHARE_OVERLAY,show:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={TOGGLE_CVAA_OVERLAY:"cvaa/TOGGLE_CVAA_OVERLAY",UPDATE_CAPTIONS_STYLE:"cvaa/UPDATE_CAPTIONS_STYLE"},a=t.initialState={overlayOpen:!1,style:"default"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.TOGGLE_CVAA_OVERLAY:return r({},e,{overlayOpen:t.show});case i.UPDATE_CAPTIONS_STYLE:return r({},e,{style:t.style});default:return e}};t.actions={toggleCVAAOverlay:function(e){return{type:i.TOGGLE_CVAA_OVERLAY,show:e}},updateCaptionsStyle:function(e){return{type:i.UPDATE_CAPTIONS_STYLE,style:e}}}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){v&&h&&(v=!1,h.length?p=h.concat(p):y=-1,p.length&&s())}function s(){if(!v){var e=i(o);v=!0;for(var t=p.length;t;){for(h=p,p=[];++y<t;)h&&h[y].run();y=-1,t=p.length}h=null,v=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t,n){function a(){g===y&&(g=y.slice())}function u(){return v}function l(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return a(),g.push(e),function(){if(t){t=!1,a();var n=g.indexOf(e);g.splice(n,1)}}}function c(e){if(!i.a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw new Error("Reducers may not dispatch actions.");try{m=!0,v=p(v,e)}finally{m=!1}for(var t=y=g,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");p=e,c({type:s.INIT})}function d(){var e,t=l;return e={subscribe:function(e){function n(){e.next&&e.next(u())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[o.a]=function(){return this},e}var h;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var p=e,v=t,y=[],g=y,m=!1;return c({type:s.INIT}),h={dispatch:c,subscribe:l,getState:u,replaceReducer:f},h[o.a]=d,h}n.d(t,"a",function(){return s}),t.b=r;var i=n(14),a=n(38),o=n.n(a),s={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";function r(e){if(!o.a(e)||i.a(e)!=s)return!1;var t=a.a(e);if(null===t)return!0;var n=f.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}var i=n(30),a=n(35),o=n(37),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,f=l.hasOwnProperty,d=c.call(Object);t.a=r},function(e,t,n){"use strict";var r=n(31),i=r.a.Symbol;t.a=i},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={UPDATE_PLAYER_STATE:"engine/UPDATE_PLAYER_STATE",UPDATE_IS_PLAYING:"engine/UPDATE_IS_PLAYING",UPDATE_CURRENT_TIME:"engine/UPDATE_CURRENT_TIME",UPDATE_DURATION:"engine/UPDATE_DURATION",UPDATE_VOLUME:"engine/UPDATE_VOLUME",UPDATE_MUTED:"engine/UPDATE_MUTED",UPDATE_METADATA_LOADING_STATUS:"engine/UPDATE_METADATA_LOADING_STATUS",UPDATE_AUDIO_TRACKS:"engine/UPDATE_AUDIO_TRACKS",UPDATE_VIDEO_TRACKS:"engine/UPDATE_VIDEO_TRACKS",UPDATE_TEXT_TRACKS:"engine/UPDATE_TEXT_TRACKS"},a=t.initialState={isPlaying:!1,metadataLoaded:!1,playerState:{previousState:"",currentState:""},currentTime:0,duration:0,volume:1,muted:!1,videoTracks:[],audioTracks:[],textTracks:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.UPDATE_PLAYER_STATE:return r({},e,{playerState:t.playerState});case i.UPDATE_IS_PLAYING:return r({},e,{isPlaying:t.isPlaying});case i.UPDATE_CURRENT_TIME:return r({},e,{currentTime:t.currentTime});case i.UPDATE_DURATION:return r({},e,{duration:t.duration});case i.UPDATE_VOLUME:return r({},e,{volume:t.volume});case i.UPDATE_MUTED:return r({},e,{muted:t.muted});case i.UPDATE_METADATA_LOADING_STATUS:return r({},e,{metadataLoaded:t.metadataLoaded});case i.UPDATE_AUDIO_TRACKS:return r({},e,{audioTracks:t.tracks});case i.UPDATE_VIDEO_TRACKS:return r({},e,{videoTracks:t.tracks});case i.UPDATE_TEXT_TRACKS:return r({},e,{textTracks:t.tracks});default:return e}};t.actions={updatePlayerState:function(e,t){return{type:i.UPDATE_PLAYER_STATE,playerState:{prevoiusState:e,currentState:t}}},updateIsPlaying:function(e){return{type:i.UPDATE_IS_PLAYING,isPlaying:e}},updateCurrentTime:function(e){return{type:i.UPDATE_CURRENT_TIME,currentTime:e}},updateDuration:function(e){return{type:i.UPDATE_DURATION,duration:e}},updateVolume:function(e){return{type:i.UPDATE_VOLUME,volume:e}},updateMuted:function(e){return{type:i.UPDATE_MUTED,muted:e}},updateMetadataLoadingStatus:function(e){return{type:i.UPDATE_METADATA_LOADING_STATUS,metadataLoaded:e}},updateAudioTracks:function(e){return{type:i.UPDATE_AUDIO_TRACKS,tracks:e}},updateVideoTracks:function(e){return{type:i.UPDATE_VIDEO_TRACKS,tracks:e}},updateTextTracks:function(e){return{type:i.UPDATE_TEXT_TRACKS,tracks:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={UPDATE_SEEKBAR_DRAGGING_STATUS:"seekbar/UPDATE_SEEKBAR_DRAGGING_STATUS",UPDATE_CURRENT_TIME:"seekbar/UPDATE_CURRENT_TIME",UPDATE_DURATION:"seekbar/UPDATE_DURATION"},a=t.initialState={currentTime:0,duration:0,draggingActive:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.UPDATE_SEEKBAR_DRAGGING_STATUS:return r({},e,{draggingActive:t.draggingActive});case i.UPDATE_CURRENT_TIME:return r({},e,{currentTime:t.currentTime});case i.UPDATE_DURATION:return r({},e,{duration:t.duration});default:return e}};t.actions={updateSeekbarDraggingStatus:function(e){return{type:i.UPDATE_SEEKBAR_DRAGGING_STATUS,draggingActive:e}},updateDuration:function(e){return{type:i.UPDATE_DURATION,duration:e}},updateCurrentTime:function(e){return{type:i.UPDATE_CURRENT_TIME,currentTime:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={UPDATE_VOLUME:"volume/UPDATE_VOLUME",UPDATE_VOLUME_DRAGGING_STATUS:"volume/UPDATE_VOLUME_DRAGGING_STATUS",UPDATE_MUTED:"volume/UPDATE_MUTED"},a=t.initialState={draggingActive:!1,volume:1,muted:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.UPDATE_VOLUME:return r({},e,{volume:t.volume});case i.UPDATE_VOLUME_DRAGGING_STATUS:return r({},e,{draggingActive:t.draggingActive});case i.UPDATE_MUTED:return r({},e,{muted:t.muted});default:return e}};t.actions={updateVolume:function(e){return{type:i.UPDATE_VOLUME,volume:e}},updateVolumeDraggingStatus:function(e){return{type:i.UPDATE_VOLUME_DRAGGING_STATUS,draggingActive:e}},updateMuted:function(e){return{type:i.UPDATE_MUTED,muted:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={UPDATE_FULLSCREEN:"fullscreen/UPDATE_FULLSCREEN"},a=t.initialState={fullscreen:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.UPDATE_FULLSCREEN:return r({},e,{fullscreen:t.fullscreen});default:return e}};t.actions={updateFullscreen:function(e){return{type:i.UPDATE_FULLSCREEN,fullscreen:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={UPDATE_LOADING_SPINNER_STATE:"loading/UPDATE_LOADING_SPINNER_STATE"},a=t.initialState={showLoadingSpinner:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.UPDATE_LOADING_SPINNER_STATE:return r({},e,{show:t.show});default:return e}};t.actions={updateLoadingSpinnerState:function(e){return{type:i.UPDATE_LOADING_SPINNER_STATE,show:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.types={UPDATE_QUALITY:"settings/UPDATE_QUALITY",UPDATE_SPEED:"settings/UPDATE_SPEED"},a=t.initialState={quality:1,speed:2};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case i.UPDATE_QUALITY:return r({},e,{quality:t.quality});case i.UPDATE_SPEED:return r({},e,{speed:t.speed});default:return e}};t.actions={updateQuality:function(e){return{type:i.UPDATE_QUALITY,quality:e}},updateSpeed:function(e){return{type:i.UPDATE_SPEED,speed:e}}}},function(e,t,n){"use strict";function r(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),i=t-3600*n-60*r;return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),r+":"+i}Object.defineProperty(t,"__esModule",{value:!0}),t.toHHMMSS=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"render",value:function(e){return(0,s.h)("div",{className:"smart-container top left"},e.children)}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=n(27),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"render",value:function(e){return(0,s.h)("div",{className:"smart-container-item select-menu-item"},(0,s.h)("label",{htmlFor:"quality"},e.label),(0,s.h)(l.default,{onSelect:function(t){return e.onSelect(t)},options:e.options}))}}]),t}(s.Component);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=n(4),f=function(e){return e&&e.__esModule?e:{default:e}}(c),d=n(1),h=function(e){return{isMobile:e.shell.isMobile}},p=(o=(0,d.connect)(h))(s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"componentWillMount",value:function(){this.setState({dropMenuActive:!1})}},{key:"isSelected",value:function(e){return e.active}},{key:"onSelect",value:function(e){this.props.onSelect(e.value),this.setState({dropMenuActive:!1})}},{key:"getActiveOptionLabel",value:function(){var e=this.props.options.filter(function(e){return e.active});return e.length>0?e[0].label:this.props.options[0].label}},{key:"renderNativeSelect",value:function(){var e=this;return(0,l.h)("select",{onChange:function(t){return e.onSelect(e.props.options[t.target.value])}},this.props.options.map(function(t,n){return(0,l.h)("option",{selected:e.isSelected(t),value:n},t.label)}))}},{key:"render",value:function(e){var t=this;return e.isMobile?this.renderNativeSelect():(0,l.h)("div",{className:"dropdown top left"},(0,l.h)("div",{className:"dropdown-button",onClick:function(){return t.setState({dropMenuActive:!t.state.dropMenuActive})}},this.getActiveOptionLabel()),this.state.dropMenuActive?(0,l.h)("div",{className:"dropdown-menu"},e.options.map(function(e){return(0,l.h)("div",{className:t.isSelected(e)?"dropdown-menu-item active":"dropdown-menu-item",onClick:function(){return t.onSelect(e)}},(0,l.h)("span",null,e.label),t.isSelected(e)?(0,l.h)(f.default,{type:"check"}):"")})):"")}}]),t}(l.Component))||s;t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=n(5),f=n(1),d=n(3),h=n(7),p=n(4),v=function(e){return e&&e.__esModule?e:{default:e}}(p),y=(o=(0,f.connect)(null,(0,d.bindActions)(h.actions)))(s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"componentWillUnmount",value:function(){this.props.removePlayerClass("overlay-active")}},{key:"componentWillMount",value:function(){this.props.addPlayerClass("overlay-active")}},{key:"render",value:function(e){var t="overlay";return e.type&&(t+=" "+e.type+"-overlay"),e.open&&(t+=" active"),(0,l.h)("div",{className:t,role:"dialog"},(0,l.h)(c.Localizer,null,(0,l.h)("a",{onClick:function(){return e.onClose()},"aria-label":(0,l.h)(c.Text,{id:"core.close"}),className:"close-overlay"},(0,l.h)(v.default,{type:"close"}))),e.children)}}]),t}(l.Component))||s;t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),s=n(1),u=n(5),l=n(6),c=n(46),f=r(c),d=n(47),h=r(d),p=n(48),v=r(p),y=n(52),g=r(y),m=n(54),b=r(m),_=n(55),E=r(_),T=n(56),w=r(T),k=n(57),S=r(k),O=n(58),A=r(O),P=n(59),R=r(P),D=n(60),x=r(D),L=n(61),I=r(L),M=n(62),C=r(M),N=n(63),U=r(N),j=n(64),F=r(j),B=n(65),G=r(B),V=n(66),H=r(V),K=n(67),Y=r(K),W=n(68),q=r(W),z=function(){function e(t,n){i(this,e),this.player=t,this.config=n,this.config.ui={translations:{controls:{language:""}},components:{Loading:{enabled:!0},OverlayPlay:{enabled:!0}}}}return a(e,[{key:"buildCustomUI",value:function(e){this._buildUI(e)}},{key:"buildDefaultUI",value:function(){var e=(0,l.createStore)(f.default,window.devToolsExtension&&window.devToolsExtension({name:"playkit #"+this.config.target,instanceId:this.config.target})),t=(0,o.h)(s.Provider,{store:e},(0,o.h)(u.IntlProvider,{definition:h.default},(0,o.h)(g.default,null,(0,o.h)("div",{className:"player-holder"}),(0,o.h)(v.default,{player:this.player}),(0,o.h)(q.default,{player:this.player}),(0,o.h)(E.default,{player:this.player}),(0,o.h)("div",{className:"player-gui"},(0,o.h)(b.default,{player:this.player}),(0,o.h)(F.default,null,(0,o.h)("div",{className:"left-controls"},(0,o.h)("div",{className:"video-playing-title"},"L21 Earth Time Lapse View from Space, ISS")),(0,o.h)("div",{className:"right-controls"},(0,o.h)(R.default,{player:this.player}))),(0,o.h)(G.default,null,(0,o.h)(S.default,{showFramePreview:!0,showTimeBubble:!0,player:this.player}),(0,o.h)("div",{className:"left-controls"},(0,o.h)(w.default,{player:this.player}),(0,o.h)(U.default,{format:"current / total",player:this.player})),(0,o.h)("div",{className:"right-controls"},(0,o.h)(A.default,{player:this.player}),(0,o.h)(I.default,{player:this.player}),(0,o.h)(x.default,{player:this.player}),(0,o.h)(C.default,{player:this.player}))),(0,o.h)(H.default,null),(0,o.h)(Y.default,null)))));this._buildUI(t)}},{key:"_buildUI",value:function(e){if(this.player){var t=document.getElementById(this.config.targetId);(0,o.render)(e,t)}}},{key:"release",value:function(){}}]),e}();t.default=z},function(e,t,n){"use strict";function r(e){return null==e?void 0===e?u:s:l&&l in Object(e)?a.a(e):o.a(e)}var i=n(15),a=n(33),o=n(34),s="[object Null]",u="[object Undefined]",l=i.a?i.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";var r=n(32),i="object"==typeof self&&self&&self.Object===Object&&self,a=r.a||i||Function("return this")();t.a=a},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(t,n(16))},function(e,t,n){"use strict";function r(e){var t=o.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[u]=n:delete e[u]),i}var i=n(15),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,u=i.a?i.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";function r(e){return a.call(e)}var i=Object.prototype,a=i.toString;t.a=r},function(e,t,n){"use strict";var r=n(36),i=r.a(Object.getPrototypeOf,Object);t.a=i},function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}t.a=r},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.a=r},function(e,t,n){e.exports=n(39)},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(41),o=function(e){return e&&e.__esModule?e:{default:e}}(a);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=(0,o.default)(i);t.default=s}).call(t,n(16),n(40)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";(function(e){function r(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function i(e,t,n,r){var i=Object.keys(t),a=n&&n.type===s.a.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===i.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!u.a(e))return"The "+a+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+i.join('", "')+'"';var o=Object.keys(e).filter(function(e){return!t.hasOwnProperty(e)&&!r[e]});return o.forEach(function(e){r[e]=!0}),o.length>0?"Unexpected "+(o.length>1?"keys":"key")+' "'+o.join('", "')+'" found in '+a+'. Expected to find one of the known reducer keys instead: "'+i.join('", "')+'". Unexpected keys will be ignored.':void 0}function a(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:s.a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(t){for(var n=Object.keys(t),o={},s=0;s<n.length;s++){var u=n[s];"production"!==e.env.NODE_ENV&&void 0===t[u]&&l.a('No reducer provided for key "'+u+'"'),"function"==typeof t[u]&&(o[u]=t[u])}var c=Object.keys(o),f=void 0;"production"!==e.env.NODE_ENV&&(f={});var d=void 0;try{a(o)}catch(e){d=e}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];if(d)throw d;if("production"!==e.env.NODE_ENV){var a=i(t,o,n,f);a&&l.a(a)}for(var s=!1,u={},h=0;h<c.length;h++){var p=c[h],v=o[p],y=t[p],g=v(y,n);if(void 0===g){var m=r(p,n);throw new Error(m)}u[p]=g,s=s||g!==y}return s?u:t}}t.a=o;var s=n(13),u=n(14),l=n(8)}).call(t,n(12))},function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),i={},o=0;o<n.length;o++){var s=n[o],u=e[s];"function"==typeof u?i[s]=r(u,t):a.a("bindActionCreators expected a function actionCreator for key '"+s+"', instead received type '"+typeof u+"'.")}return i}t.a=i;var a=n(8)},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,o){var s=e(n,r,o),u=s.dispatch,l=[],c={getState:s.getState,dispatch:function(e){return u(e)}};return l=t.map(function(e){return e(c)}),u=i.a.apply(void 0,l)(s.dispatch),a({},s,{dispatch:u})}}}t.a=r;var i=n(17),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){function e(e,t,n,r){for(r=0,t=t.split?t.split("."):t;e&&r<t.length;)e=e[t[r++]];return void 0===e?n:e}return e})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(18),o=r(a),s=n(7),u=r(s),l=n(9),c=r(l),f=n(19),d=r(f),h=n(20),p=r(h),v=n(21),y=r(v),g=n(22),m=r(g),b=n(10),_=r(b),E=n(11),T=r(E),w=n(23),k=r(w),S=(0,i.combineReducers)({engine:o.default,shell:u.default,seekbar:d.default,volume:p.default,fullscreen:y.default,loading:m.default,playPause:c.default,share:_.default,cvaa:T.default,settings:k.default});t.default=S},function(e,t){e.exports={core:{disable:"Disable",auto:"Auto",close:"Close"},controls:{play:"Play",pause:"Pause",share:"Share",language:"Language",settings:"Settings",fullscreen:"Fullscreen"},settings:{quality:"Quality",speed:"Speed"},language:{audio:"Audio",captions:"Captions",advanced_captions_settings:"Advanced captions settings"},share:{share_title:"Share",link_options:"Link options"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(1),d=n(3),h=n(18),p=r(h),v=n(2),y=r(v),g=(s=(0,f.connect)(p.default,(0,d.bindActions)(h.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"EngineConnector",player:e.player}))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.player.Track;this.player.addEventListener(this.player.Event.PLAYER_STATE_CHANGED,function(t){e.props.updatePlayerState(t.payload.oldState.type,t.payload.newState.type)}),this.player.addEventListener(this.player.Event.TIME_UPDATE,function(){e.props.updateCurrentTime(e.player.currentTime)}),this.player.addEventListener(this.player.Event.LOADED_METADATA,function(){e.props.updateDuration(e.player.duration),e.props.updateMetadataLoadingStatus(!0)}),this.player.addEventListener(this.player.Event.VOLUME_CHANGE,function(){e.props.updateVolume(e.player.volume)}),this.player.addEventListener(this.player.Event.PLAY,function(){e.props.updateIsPlaying(!0)}),this.player.addEventListener(this.player.Event.PAUSE,function(){e.props.updateIsPlaying(!1)}),this.player.addEventListener(this.player.Event.TRACKS_CHANGED,function(){var n=e.player.getTracks(t.AUDIO),r=e.player.getTracks(t.VIDEO),i=e.player.getTracks(t.TEXT);e.props.updateAudioTracks(n),e.props.updateVideoTracks(r),e.props.updateTextTracks(i)}),this.player.addEventListener(this.player.Event.TEXT_TRACK_CHANGED,function(){var n=e.player.getTracks(t.TEXT);e.props.updateTextTracks(n)}),this.player.addEventListener(this.player.Event.AUDIO_TRACK_CHANGED,function(){var n=e.player.getTracks(t.AUDIO);e.props.updateAudioTracks(n)}),this.player.addEventListener(this.player.Event.VIDEO_TRACK_CHANGED,function(){var n=e.player.getTracks(t.VIDEO);e.props.updateVideoTracks(n)})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return(0,c.h)("span",null)}}]),t}(y.default))||u;t.default=g},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_LEVEL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(51),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:o.DEBUG,INFO:o.INFO,TIME:o.TIME,WARN:o.WARN,ERROR:o.ERROR,OFF:o.OFF},u=function(){function e(t){r(this,e),o.useDefaults(t||{})}return i(e,[{key:"getLogger",value:function(e){return e?o.get(e):o}}]),e}(),l=new u({defaultLevel:o.DEBUG});t.default=l,t.LOG_LEVEL=s},function(e,t,n){var r,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.3.0";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){h.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.get=function(e){return u[e]||(u[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info&&(s=console.info),e.formatter(r,i),n(s,r))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},r=o,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=n(2),f=function(e){return e&&e.__esModule?e:{default:e}}(c),d=n(1),h=n(3),p=n(7),v=n(53),y=function(e){return{metadataLoaded:e.engine.metadataLoaded,currentState:e.engine.playerState.currentState,playerClasses:e.shell.playerClasses,isMobile:e.shell.isMobile}},g=(o=(0,d.connect)(y,(0,h.bindActions)(p.actions)))(s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"Shell"}))}return a(t,e),u(t,[{key:"onMouseOver",value:function(){this.state.hover||(this.props.addPlayerClass("hover"),this.setState({hover:!0}))}},{key:"onMouseLeave",value:function(){this.state.hover&&(this.setState({hover:!1}),this.props.removePlayerClass("hover"))}},{key:"onMouseMove",value:function(){this.state.hover||(this.setState({hover:!0}),this.props.addPlayerClass("hover"))}},{key:"componentDidMount",value:function(){this.props.updateIsMobile((0,v.isMobile)()),(0,v.isMobile)()&&this.props.addPlayerClass("touch")}},{key:"render",value:function(e){var t=this,n="player skin-default";return n+=" "+e.playerClasses.join(" "),this.props.metadataLoaded&&(n+=" metadata-loaded"),this.props.metadataLoaded&&(n+=" state-"+this.props.currentState),(0,l.h)("div",{className:n,onMouseOver:function(){return t.onMouseOver()},onMouseMove:function(){return t.onMouseMove()},onMouseLeave:function(){return t.onMouseLeave()}},e.children)}}]),t}(f.default))||s;t.default=g},function(e,t,n){"use strict";function r(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(1),d=n(3),h=n(9),p=n(2),v=r(p),y=n(4),g=r(y),m=function(e){return{isPlaying:e.engine.isPlaying}},b=(s=(0,f.connect)(m,(0,d.bindActions)(h.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"OverlayPlay",player:e.player}))}return o(t,e),l(t,[{key:"togglePlayPause",value:function(){var e=this;this.logger.debug("Toggle play"),this.setState({animation:!0}),setTimeout(function(){e.setState({animation:!1})},400),this.player.paused?this.player.play():this.player.pause()}},{key:"render",value:function(e){var t=this;return(0,c.h)("div",{className:"overlay-play "+(this.state.animation?"in":""),onClick:function(){return t.togglePlayPause()}},e.isPlaying?(0,c.h)(g.default,{type:"play"}):(0,c.h)(g.default,{type:"pause"}))}}]),t}(v.default))||u;t.default=b},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(1),d=n(3),h=n(22),p=n(2),v=function(e){return e&&e.__esModule?e:{default:e}}(p),y=function(e){return{show:e.loading.show}},g=(s=(0,f.connect)(y,(0,d.bindActions)(h.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"Loading",player:e.player}))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.player.addEventListener(this.player.Event.PLAYER_STATE_CHANGED,function(t){"idle"===t.payload.newState.type||"playing"===t.payload.newState.type||"paused"===t.payload.newState.type?e.props.updateLoadingSpinnerState(!1):e.props.updateLoadingSpinnerState(!0)})}},{key:"render",value:function(e){return(0,c.h)("div",{className:e.show?"loading-backdrop show":"loading-backdrop"},(0,c.h)("div",{className:"spinner-container"},(0,c.h)("div",{className:"spinner"},[].concat(r(Array(8))).map(function(){return(0,c.h)("span",null)}))))}}]),t}(v.default))||u;t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(5),d=n(1),h=n(3),p=n(9),v=n(2),y=r(v),g=n(4),m=r(g),b=function(e){return{isPlaying:e.engine.isPlaying}},_=(s=(0,d.connect)(b,(0,h.bindActions)(p.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"PlayPause",player:e.player}))}return o(t,e),l(t,[{key:"togglePlayPause",value:function(){this.logger.debug("Toggle play"),this.player.paused?this.player.play():this.player.pause()}},{key:"render",value:function(){var e=this,t=this.props.isPlaying?"control-button is-playing":"control-button";return(0,c.h)("div",{className:"control-button-container control-play-pause"},(0,c.h)(f.Localizer,null,(0,c.h)("button",{"aria-label":(0,c.h)(f.Text,{id:this.props.isPlaying?"controls.pause":"controls.play"}),className:t,onClick:function(){return e.togglePlayPause()}},(0,c.h)(m.default,{type:"play"}),(0,c.h)(m.default,{type:"pause"}))))}}]),t}(y.default))||u;t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=n(1),f=n(3),d=n(19),h=n(2),p=function(e){return e&&e.__esModule?e:{default:e}}(h),v=n(24),y=function(e){return{virtualProgress:e.seekbar.virtualTime,currentTime:e.seekbar.currentTime,duration:e.engine.duration,isDraggingActive:e.seekbar.draggingActive}},g=(o=(0,c.connect)(y,(0,f.bindActions)(d.actions)))(s=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"SeekBar",player:e.player}));return n.onSeekbarMouseDown=function(e){if(n.props.updateSeekbarDraggingStatus(!0),n.props.isDraggingActive){var t=n.getTime(e);n.updateSeekBarProgress(t,n.player.duration)}},n.onSeekbarMouseUp=function(e){var t=n.getTime(e);n.player.currentTime=t,n.updateSeekBarProgress(t,n.player.duration),n.props.updateSeekbarDraggingStatus(!1),n.logger.debug("Seek to "+t+"s")},n.onSeekbarMouseMove=function(e){var t=n.getTime(e);n.updateSeekBarProgress(t,n.player.duration,!0),n.props.isDraggingActive&&n.updateSeekBarProgress(t,n.player.duration)},n.onSeekbarTouchStart=function(e){if(n.props.updateSeekbarDraggingStatus(!0),n.props.isDraggingActive){var t=n.getTime(e);n.updateSeekBarProgress(t,n.player.duration)}},n.onSeekbarTouchMove=function(e){var t=n.getTime(e);n._movex=t,n.updateSeekBarProgress(t,n.player.duration,!0),n.props.isDraggingActive&&n.updateSeekBarProgress(t,n.player.duration)},n.onSeekbarTouchEnd=function(e){var t=n._movex;n.player.currentTime=t,n.updateSeekBarProgress(t,n.player.duration),n.props.updateSeekbarDraggingStatus(!1),n.logger.debug("Seek to "+t+"s")},n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;this._playerElement=document.getElementById("player-placeholder"),this.setState({virtualTime:0}),this.player.addEventListener(this.player.Event.TIME_UPDATE,function(){e.props.isDraggingActive||e.props.updateCurrentTime(e.player.currentTime)})}},{key:"updateSeekBarProgress",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.setState({virtualTime:e}):this.props.updateCurrentTime(e)}},{key:"getTime",value:function(e){var t=e instanceof TouchEvent?e.touches[0].clientX:e.clientX,n=this.player.duration*((t-this._seekBarElement.offsetLeft-this._playerElement.offsetLeft)/this._seekBarElement.clientWidth);return n=parseFloat(n.toFixed(2)),n<0?0:n>this.player.duration?this.player.duration:n}},{key:"getThumbSpriteOffset",value:function(){return-160*Math.ceil(100*this.state.virtualTime/this.player.duration)+"px 0px"}},{key:"getFramePreviewOffset",value:function(){if(this._seekBarElement){var e=this.state.virtualTime/this.props.duration*this._seekBarElement.clientWidth-this._framePreviewElement.clientWidth/2;return e<0?0:e>this._seekBarElement.clientWidth-this._framePreviewElement.clientWidth?this._seekBarElement.clientWidth-this._framePreviewElement.clientWidth:e}}},{key:"getTimeBubbleOffset",value:function(){if(this._timeBubbleElement){var e=this.state.virtualTime/this.props.duration*this._seekBarElement.clientWidth-this._timeBubbleElement.clientWidth/2;return e<0?0:e>this._seekBarElement.clientWidth-this._timeBubbleElement.clientWidth?this._seekBarElement.clientWidth-this._timeBubbleElement.clientWidth:e}}},{key:"renderFramePreview",value:function(){var e=this;if(this.props.showFramePreview){var t="left: "+this.getFramePreviewOffset()+"px",n="background-image: url(http://cfvod.kaltura.com/p/1914121/sp/191412100/thumbnail/entry_id/1_umer46fd/version/100001/width/160/vid_slices/100); ";return n+="background-position: "+this.getThumbSpriteOffset(),(0,l.h)("div",{className:"frame-preview",style:t,ref:function(t){return e._framePreviewElement=t}},(0,l.h)("div",{className:"frame-preview-img",style:n}))}}},{key:"renderTimeBubble",value:function(){var e=this;if(this.props.showTimeBubble){var t="left: "+this.getTimeBubbleOffset()+"px";return(0,l.h)("div",{className:"time-preview",style:t,ref:function(t){return e._timeBubbleElement=t}},(0,v.toHHMMSS)(this.state.virtualTime))}}},{key:"render",value:function(e){var t=this,n=this.state.virtualTime/e.duration*100+"%",r=e.currentTime/e.duration*100+"%";return(0,l.h)("div",{className:"seek-bar",ref:function(e){return t._seekBarElement=e},role:"slider","aria-label":"Seek slider","aria-valuemin":"0","aria-valuemax":Math.round(this.player.duration),"aria-valuenow":Math.round(this.player.currentTime),"aria-valuetext":(0,v.toHHMMSS)(this.player.currentTime)+" of "+(0,v.toHHMMSS)(this.player.duration),onMouseMove:function(e){return t.onSeekbarMouseMove(e)},onMouseDown:function(e){return t.onSeekbarMouseDown(e)},onMouseUp:function(e){return t.onSeekbarMouseUp(e)},onTouchStart:function(e){return t.onSeekbarTouchStart(e)},onTouchMove:function(e){return t.onSeekbarTouchMove(e)},onTouchEnd:function(e){return t.onSeekbarTouchEnd(e)}},(0,l.h)("div",{className:"progress-bar"},(0,l.h)("div",{className:"progress",style:{width:r}},(0,l.h)("a",{className:"scrubber"})),(0,l.h)("div",{className:"virtual-progress",style:{width:n}}),this.renderTimeBubble(),this.renderFramePreview(),(0,l.h)("div",{className:"buffered",style:"width: 60%;"})))}}]),t}(p.default))||s;t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(1),d=n(3),h=n(20),p=n(2),v=r(p),y=n(4),g=r(y),m=function(e){return{isDraggingActive:e.volume.isDraggingActive,volume:e.volume.volume,muted:e.volume.muted,isMobile:e.shell.isMobile}},b=(s=(0,f.connect)(m,(0,d.bindActions)(h.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"Volume",player:e.player}))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this._volumeControlElement=document.getElementsByClassName("volume-control")[0],this._volumeProgressBarElement=this._volumeControlElement.getElementsByClassName("bar")[0],this.player.addEventListener(this.player.Event.LOADED_METADATA,function(){e.props.updateVolume(e.player.volume)}),this.player.addEventListener(this.player.Event.VOLUME_CHANGE,function(){e.props.updateVolume(e.player.volume)})}},{key:"getVolumeProgessHeight",value:function(){return this.props.muted?"0%":Math.round(100*this.props.volume)+"%"}},{key:"onVolumeProgressBarMouseDown",value:function(){this.props.updateVolumeDraggingStatus(!0)}},{key:"onVolumeProgressBarClick",value:function(e){this.changeVolume(e)}},{key:"onVolumeControlButtonClick",value:function(){this.logger.debug("Toggle mute. "+this.player.muted+" => "+!this.player.muted),this.props.updateMuted(!this.props.muted),this.player.muted=!this.player.muted}},{key:"changeVolume",value:function(e){var t=this._volumeProgressBarElement.clientHeight,n=this.getCoords(this._volumeProgressBarElement).top,r=e.clientY,i=1-(r-n)/t;i=parseFloat(i.toFixed(2)),this.logger.debug("Change volume from "+this.player.volume+" => "+i),this.player.volume=i,this.props.muted&&(this.player.muted=!1,this.props.updateMuted(!1))}},{key:"getCoords",value:function(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}}},{key:"render",value:function(){var e=this,t="control-button-container volume-control";return this.props.isDraggingActive&&(t+=" dragging-active"),(this.props.muted||0===this.props.volume)&&(t+=" is-muted"),(0,c.h)("div",{className:t},(0,c.h)("button",{className:"control-button",onClick:function(){return e.onVolumeControlButtonClick()},"aria-label":"Volume"},(0,c.h)(g.default,{type:"volume-base"}),(0,c.h)(g.default,{type:"volume-waves"}),(0,c.h)(g.default,{type:"volume-mute"})),(0,c.h)("div",{className:"volume-control-bar",role:"slider","aria-valuemin":"0","aria-valuemaz":"100","aria-valuenow":100*this.player.volume,"aria-valuetext":100*this.player.volume+"% volume "+(this.player.muted?"muted":"")},(0,c.h)("div",{className:"bar",onMouseDown:function(){return e.onVolumeProgressBarMouseDown()},onClick:function(t){return e.onVolumeProgressBarClick(t)}},(0,c.h)("div",{className:"progress",style:{height:this.getVolumeProgessHeight()}}))))}}]),t}(v.default))||u;t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(1),d=n(3),h=n(10),p=n(2),v=r(p),y=n(4),g=r(y),m=function(e){return{overlayOpen:e.share.overlayOpen}},b=(s=(0,f.connect)(m,(0,d.bindActions)(h.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"Share",player:e.player}))}return o(t,e),l(t,[{key:"render",value:function(e){return(0,c.h)("div",{className:"control-button-container control-share"},(0,c.h)("button",{className:"control-button control-button-rounded",onClick:function(){return e.toggleShareOverlay(!e.overlayOpen)},"aria-label":"Share"},(0,c.h)(g.default,{type:"share"})))}}]),t}(v.default))||u;t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(5),d=n(1),h=n(3),p=n(23),v=n(2),y=r(v),g=n(25),m=r(g),b=n(26),_=r(b),E=n(4),T=r(E),w=function(e){return{videoTracks:e.engine.videoTracks}},k=(s=(0,d.connect)(w,(0,h.bindActions)(p.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"Settings",player:e.player}))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.setState({smartContainerOpen:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside.bind(this),!1)}},{key:"componentWillUnMount",value:function(){document.removeEventListener("click",this.handleClickOutside.bind(this),!1)}},{key:"handleClickOutside",value:function(){var e=this._controlSettingsElement;e&&e.contains(event.target)||this.setState({smartContainerOpen:!1})}},{key:"onControlButtonClick",value:function(){this.setState({smartContainerOpen:!this.state.smartContainerOpen})}},{key:"onSpeedChange",value:function(e){this.props.updateSpeed(e.value)}},{key:"onQualityChange",value:function(e){this.player.selectTrack(e)}},{key:"render",value:function(e){var t=this,n=[{value:1,label:"Auto (360)",active:!0},{value:2,label:"240"},{value:3,label:"144"}],r=e.videoTracks.map(function(e){return{label:e.label||e.language||e.bandwidth,active:e.active,value:e}});return(0,c.h)("div",{ref:function(e){return t._controlSettingsElement=e},className:"control-button-container control-settings"},(0,c.h)(f.Localizer,null,(0,c.h)("button",{"aria-label":(0,c.h)(f.Text,{id:"controls.settings"}),className:this.state.smartContainerOpen?"control-button active":"control-button",onClick:function(){return t.onControlButtonClick()}},(0,c.h)(T.default,{type:"settings"}))),this.state.smartContainerOpen?(0,c.h)(m.default,null,e.videoTracks.length<=0?"":(0,c.h)(f.Localizer,null,(0,c.h)(_.default,{label:(0,c.h)(f.Text,{id:"settings.quality"}),options:r,onSelect:function(e){return t.onQualityChange(e)}})),(0,c.h)(f.Localizer,null,(0,c.h)(_.default,{label:(0,c.h)(f.Text,{id:"settings.speed"}),options:n,onSelect:function(e){return t.onSpeedChange(e)}}))):"")}}]),t}(y.default))||u;t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(5),d=n(1),h=n(3),p=n(11),v=n(2),y=r(v),g=n(25),m=r(g),b=n(26),_=r(b),E=n(4),T=r(E),w=function(e){return{audioTracks:e.engine.audioTracks,textTracks:e.engine.textTracks,overlayOpen:e.cvaa.overlayOpen}},k=(s=(0,d.connect)(w,(0,h.bindActions)(p.actions)))(u=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"LanguageControl",player:e.player}))}return o(t,e),l(t,[{key:"componentWillMount",value:function(){this.setState({smartContainerOpen:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside.bind(this),!1)}},{key:"componentWillUnMount",value:function(){document.removeEventListener("click",this.handleClickOutside.bind(this),!1)}},{key:"handleClickOutside",value:function(){var e=this._controlLanguageElement;e&&e.contains(event.target)||this.setState({smartContainerOpen:!1})}},{key:"onControlButtonClick",value:function(){this.setState({smartContainerOpen:!this.state.smartContainerOpen})}},{key:"onAudioChange",value:function(e){this.player.selectTrack(e)}},{key:"onCaptionsChange",value:function(e){this.player.selectTrack(e)}},{key:"render",value:function(e){var t=this,n=e.audioTracks.map(function(e){return{label:e.label||e.language,active:e.active,value:e}}),r=e.textTracks.filter(function(e){return"subtitles"===e.kind}).map(function(e){return{label:e.label||e.language,active:e.active,value:e}});return(0!==e.audioTracks.length||0!==e.audioTracks.length)&&(0,c.h)("div",{ref:function(e){return t._controlLanguageElement=e},className:"control-button-container control-language"},(0,c.h)(f.Localizer,null,(0,c.h)("button",{"aria-label":(0,c.h)(f.Text,{id:"controls.language"}),className:this.state.smartContainerOpen?"control-button active":"control-button",onClick:function(){return t.onControlButtonClick()}},(0,c.h)(T.default,{type:"language"}))),this.state.smartContainerOpen?(0,c.h)(m.default,null,e.audioTracks.length<=0?"":(0,c.h)(f.Localizer,null,(0,c.h)(_.default,{label:(0,c.h)(f.Text,{id:"language.audio"}),options:n,onSelect:function(e){return t.onAudioChange(e)}})),e.textTracks.length<=0?"":(0,c.h)(f.Localizer,null,(0,c.h)(_.default,{label:(0,c.h)(f.Text,{id:"language.captions"}),options:r,onSelect:function(e){return t.onCaptionsChange(e)}})),e.textTracks.length<=0?"":(0,c.h)("div",{className:"smart-container-item"},(0,c.h)("a",{onClick:function(){return e.toggleCVAAOverlay(!e.overlayOpen)}},(0,c.h)(f.Text,{id:"language.advanced_captions_settings"},"Advanced captions settings")))):"")}}]),t}(y.default))||u;t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(5),d=n(1),h=n(3),p=n(21),v=n(2),y=r(v),g=n(4),m=r(g),b=function(e){return{fullscreen:e.fullscreen.fullscreen}},_=(s=(0,d.connect)(b,(0,h.bindActions)(p.actions)))(u=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"Fullscreen"}))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this._playerElement=document.getElementById("playerPlaceHolder"),document.addEventListener("webkitfullscreenchange",function(){e.props.updateFullscreen(document.webkitIsFullScreen)})}},{key:"enterFullscreen",value:function(){this._playerElement.webkitRequestFullscreen()}},{key:"exitFullscreen",value:function(){document.webkitCancelFullScreen()}},{key:"toggleFullscreen",value:function(){this.logger.debug("Toggle fullscreen"),this.props.fullscreen?this.exitFullscreen():this.enterFullscreen()}},{key:"render",value:function(){var e=this;return(0,c.h)("div",{className:"control-button-container control-fullscreen"},(0,c.h)(f.Localizer,null,(0,c.h)("button",{"aria-label":(0,c.h)(f.Text,{id:"controls.fullscreen"}),className:this.props.fullscreen?"control-button is-fullscreen":"control-button",onClick:function(){return e.toggleFullscreen()}},(0,c.h)(m.default,{type:"maximize"}),(0,c.h)(m.default,{type:"minimize"}))))}}]),t}(y.default))||u;t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=n(1),f=n(2),d=function(e){return e&&e.__esModule?e:{default:e}}(f),h=n(24),p=function(e){return{currentTime:e.seekbar.currentTime,duration:e.engine.duration}},v=(o=(0,c.connect)(p))(s=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"TimeDisplay",player:e.player,config:e.config}))}return a(t,e),u(t,[{key:"getTimeDisplay",value:function(){var e=this.props.format?this.props.format:"current / total",t=(0,h.toHHMMSS)(this.props.currentTime),n=(0,h.toHHMMSS)(this.props.duration),r=(0,h.toHHMMSS)(this.props.duration-this.props.currentTime);return e=e.replace(/current/g,t),e=e.replace(/total/g,n),e=e.replace(/left/g,r)}},{key:"render",value:function(){return(0,l.h)("div",{className:"time-display"},(0,l.h)("span",null,this.getTimeDisplay()))}}]),t}(d.default))||s;t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"render",value:function(e){return(0,s.h)("div",{className:"top-bar"},e.children)}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"render",value:function(e){return(0,s.h)("div",{className:"bottom-bar"},e.children)}}]),t}(s.Component);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(5),d=n(1),h=n(3),p=n(10),v=n(2),y=r(v),g=n(28),m=r(g),b=function(e){return{open:e.share.overlayOpen}},_=(s=(0,d.connect)(b,(0,h.bindActions)(p.actions)))(u=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"ShareOverlay"}))}return o(t,e),l(t,[{key:"render",value:function(e){return e.open?(0,c.h)(m.default,{open:e.open,onClose:function(){return e.toggleShareOverlay(!1)},type:"share"},(0,c.h)("div",{className:"title"},(0,c.h)(f.Text,{id:"share.share_title"})),(0,c.h)("div",{className:"share-icons"},(0,c.h)("a",{className:"share-btn facebook-share-btn"},(0,c.h)("svg",{style:"width:32px;height:32px",viewBox:"0 0 1024 1024"},(0,c.h)("path",{fill:"#fff",d:"M432 405.333h-80v106.667h80v320h133.333v-320h97.12l9.547-106.667h-106.667v-44.453c0-25.467 5.12-35.547 29.733-35.547h76.933v-133.333h-101.547c-95.893 0-138.453 42.213-138.453 123.067v90.267z"}))),(0,c.h)("a",{className:"share-btn twitter-share-btn"},(0,c.h)("svg",{style:"width:32px;height:32px",viewBox:"0 0 1024 1024"},(0,c.h)("path",{fill:"#fff",d:"M832 316.614c-23.547 10.29-48.853 17.221-75.413 20.345 27.12-15.987 47.947-41.319 57.733-71.508-25.36 14.806-53.467 25.568-83.387 31.37-23.92-25.122-58.080-40.82-95.84-40.82-84.773 0-147.067 77.861-127.92 158.687-109.093-5.381-205.84-56.833-270.613-135.035-34.4 58.094-17.84 134.090 40.613 172.574-21.493-0.683-41.76-6.484-59.44-16.171-1.44 59.879 42.16 115.898 105.307 128.368-18.48 4.935-38.72 6.090-59.307 2.205 16.693 51.347 65.173 88.702 122.667 89.752-55.2 42.605-124.747 61.637-194.4 53.552 58.107 36.673 127.147 58.067 201.28 58.067 243.787 0 381.52-202.684 373.2-384.473 25.653-18.244 47.92-41.004 65.52-66.914v0z"}))),(0,c.h)("a",{className:"share-btn google-plus-share-btn"},(0,c.h)("svg",{style:"width:32px;height:32px",viewBox:"0 0 1024 1024"},(0,c.h)("path",{fill:"#fff",d:"M352 556.8h127.040c-5.12 32.928-38.4 96.64-127.040 96.64-76.48 0-138.88-63.328-138.88-141.44 0-78.080 62.4-141.44 138.88-141.44 43.52 0 72.64 18.56 89.28 34.56l60.8-58.56c-39.040-36.48-89.6-58.56-150.080-58.56-123.84 0-224 100.16-224 224s100.16 224 224 224c129.28 0 215.072-90.88 215.072-218.88 0-14.72-1.632-25.92-3.552-37.12h-211.52v76.8zM800 544v96h-64v-96h-96v-64h96v-96h64v96h96v64h-96z"}))),(0,c.h)("a",{className:"share-btn linkedin-share-btn"},(0,c.h)("svg",{style:"width:32px;height:32px",viewBox:"0 0 1024 1024"},(0,c.h)("path",{fill:"#fff",d:"M324.8 290.087c0 36.506-29.6 66.087-66.133 66.087s-66.133-29.581-66.133-66.087c0-36.48 29.6-66.087 66.133-66.087s66.133 29.607 66.133 66.087zM325.333 409.043h-133.333v422.957h133.333v-422.957zM538.187 409.043h-132.48v422.957h132.507v-222.026c0-123.45 160.773-133.549 160.773 0v222.026h133.013v-267.811c0-208.306-237.92-200.719-293.813-98.179v-56.967z"}))),(0,c.h)("a",{className:"share-btn email-share-btn"},(0,c.h)("svg",{style:"width:32px;height:32px",viewBox:"0 0 1024 1024"},(0,c.h)("path",{fill:"#fff",d:"M256 768c-35.346 0-64-28.654-64-64v-352c0-35.346 28.654-64 64-64h512c35.346 0 64 28.654 64 64v352c0 35.346-28.654 64-64 64h-512zM512 467.488l147.52-115.488h-295.040l147.52 115.488zM748.48 352l-211.2 179.2c-0.713 1.308-1.572 2.532-2.56 3.648-12.707 12.158-32.733 12.158-45.44 0-0.988-1.116-1.847-2.34-2.56-3.648l-211.2-179.2h-19.52v352h512v-352h-19.52z"}))),(0,c.h)("a",{className:"share-btn embed-share-btn"},(0,c.h)("svg",{style:"width:32px;height:32px",viewBox:"0 0 1024 1024"},(0,c.h)("path",{fill:"#fff",d:"M377.989 579.335c12.669 12.904 12.669 33.777 0 46.68-12.733 12.969-33.427 12.969-46.16 0l-104.727-106.667c-12.669-12.904-12.669-33.777 0-46.68l104.727-106.667c12.733-12.969 33.427-12.969 46.16 0 12.669 12.904 12.669 33.777 0 46.68l-81.812 83.327 81.812 83.327zM646.011 412.68c-12.669-12.904-12.669-33.777 0-46.68 12.733-12.969 33.427-12.969 46.16 0l104.727 106.667c12.669 12.904 12.669 33.777 0 46.68l-104.727 106.667c-12.733 12.969-33.427 12.969-46.16 0-12.669-12.904-12.669-33.777 0-46.68l81.812-83.327-81.812-83.327zM572.293 250.6c17.455 4.445 28.025 22.388 23.686 40.066l-104.727 426.669c-4.349 17.719-22.048 28.535-39.545 24.079-17.455-4.445-28.025-22.388-23.686-40.066l104.727-426.669c4.349-17.719 22.048-28.535 39.545-24.079z"})))),(0,c.h)("div",null,(0,c.h)("div",{className:"form-group has-icon",style:"width: 300px;"},(0,c.h)("input",{type:"text",placeholder:"Share URL",className:"form-control",value:"https://cdnapisec.kaltura.com/index.php?assetId=123456",readOnly:!0}),(0,c.h)("svg",{className:"icon",style:"width:32px;height:32px;",viewBox:"0 0 1024 1024"},(0,c.h)("path",{d:"M355.028 445.537c12.497 12.497 12.497 32.758 0 45.255s-32.758 12.497-45.255 0l-24.141-24.141c-49.92-49.92-49.832-130.999 0.094-180.925 49.984-49.984 130.995-50.025 180.955-0.064l113.266 113.266c49.964 49.964 49.935 130.955-0.064 180.955-12.497 12.497-32.758 12.497-45.255 0s-12.497-32.758 0-45.255c25.013-25.013 25.027-65.482 0.064-90.445l-113.266-113.266c-24.957-24.957-65.445-24.936-90.445 0.064-24.955 24.955-24.998 65.511-0.094 90.416l24.141 24.141zM668.972 578.463c-12.497-12.497-12.497-32.758 0-45.255s32.758-12.497 45.255 0l24.141 24.141c49.92 49.92 49.832 130.999-0.094 180.925-49.984 49.984-130.995 50.025-180.955 0.064l-113.266-113.266c-49.964-49.964-49.935-130.955 0.064-180.955 12.497-12.497 32.758-12.497 45.255 0s12.497 32.758 0 45.255c-25.013 25.013-25.027 65.482-0.064 90.445l113.266 113.266c24.957 24.957 65.445 24.936 90.445-0.064 24.955-24.955 24.998-65.511 0.094-90.416l-24.141-24.141z"})))),(0,c.h)("a",null,(0,c.h)(f.Text,{id:"share.link_options"}))):""}}]),t}(y.default))||u;t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(0),d=n(1),h=n(3),p=n(11),v=n(7),y=n(2),g=r(y),m=n(28),b=r(m),_=n(27),E=(r(_),function(e){return{open:e.cvaa.overlayOpen,style:e.cvaa.style}}),T=(s=(0,d.connect)(E,(0,h.bindActions)(c({},p.actions,v.actions))))(u=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"CVAAOverlay"}))}return o(t,e),l(t,[{key:"changeCaptionsStyle",value:function(e){this.props.removePlayerClass("captions-"+this.props.style),this.props.addPlayerClass("captions-"+e),this.props.updateCaptionsStyle(e),this.props.toggleCVAAOverlay(!1)}},{key:"render",value:function(e){var t=this;return e.open?(0,f.h)(b.default,{open:e.open,onClose:function(){return e.toggleCVAAOverlay(!1)},type:"cvaa"},(0,f.h)("div",{className:"title"},"Advanced captions settings"),(0,f.h)("div",null,(0,f.h)("div",{className:"sample",onClick:function(){return t.changeCaptionsStyle("default")}},"Sample"),(0,f.h)("div",{className:"sample black-bg",onClick:function(){return t.changeCaptionsStyle("black-bg")}},"Sample"),(0,f.h)("div",{className:"sample yellow-text",onClick:function(){return t.changeCaptionsStyle("yellow-text")}},"Sample")),(0,f.h)("a",{className:"button-save-cvaa"},"Set custom caption")):""}}]),t}(g.default))||u;t.default=T},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:"Keyboard",player:e.player}));return document.body.onkeydown=function(e){var t=void 0,r=void 0;switch(e.which){case 32:n.logger.debug("Keydown space"),n.player.paused?n.player.play():n.player.pause();break;case 38:n.logger.debug("Keydown up"),r=Math.round(100*n.player.volume)+5,n.logger.debug("Changing volume. "+n.player.volume+" => "+r),n.player.muted&&(n.player.muted=!1),n.player.volume=r/100;break;case 40:if(n.logger.debug("Keydown down"),(r=Math.round(100*n.player.volume)-5)<5)return void(n.player.muted=!0);n.logger.debug("Changing volume. "+n.player.volume+" => "+r),n.player.volume=r/100;break;case 37:n.logger.debug("Keydown left"),t=n.player.currentTime-5>0?n.player.currentTime-5:0,n.player.currentTime=t;break;case 39:n.logger.debug("Keydown right"),t=n.player.currentTime+5>n.player.duration?n.player.duration:n.player.currentTime+5,n.player.currentTime=t;break;default:return}},n.disableKeyboardCommandsOnControls(),n}return a(t,e),o(t,[{key:"disableKeyboardCommandsOnControls",value:function(){Array.from(document.getElementsByClassName("control-button")).forEach(function(e){e.onkeydown=function(e){return e.preventDefault()}})}}]),t}(u.default);t.default=l}])})},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=r(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([a]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(c(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(c(r.parts[a],t));p[r.id]={id:r.id,refs:1,parts:o}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],u=a[2],l=a[3],c={css:s,media:u,sourceMap:l};r[o]?r[o].parts.push(c):n.push(r[o]={id:o,parts:[c]})}return n}function a(e,t){var n=y(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=m++;n=g||(g=s(t)),r=f.bind(null,n,l,!1),i=f.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=h.bind(null,n,t),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=d.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function f(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=_(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var p={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),y=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),g=null,m=0,b=[],_=n(8);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=p[s.id];u.refs--,a.push(u)}if(e){r(i(e,t),t)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var E=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PlaykitUI=t.OvpProvider=t.Playkit=void 0;var i=n(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),o=n(1),s=r(o),u=n(2),l=r(u);n(6),n(9),n(11);var c=n(13),f=r(c);t.Playkit=a,t.OvpProvider=s.default,t.PlaykitUI=l.default,t.setup=f.default},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(4)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(void 0),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Lato);",""]),t.push([e.i,".row{display:block}.row:after{content:'';clear:both;display:block}.form-group{margin:10px auto;position:relative;max-width:100%}.form-group.has-error .form-control{border-color:#db1f26}.form-group.has-error .form-control:focus{border-color:#fff}.form-group.has-icon .form-control{padding-left:34px}.form-group .icon{position:absolute;top:2px;left:2px;fill:rgba(255,255,255,0.4)}.form-control{height:36px;width:100%;min-width:72px;border:2px solid rgba(255,255,255,0.2);border-radius:4px;background-color:rgba(0,0,0,0.4);font-size:15px;line-height:18px;color:#fff;padding:8px 10px;text-overflow:ellipsis}.form-control::-webkit-input-placeholder{color:rgba(255,255,255,0.6)}.form-control:focus{background-color:#fff;border-color:#fff;color:#333}.form-control:focus::-webkit-input-placeholder{color:#ccc}.form-control:focus+.icon{fill:#999}textarea.form-control{min-height:72px}select{font-size:15px;font-family:\"Lato\",sans-serif;color:#fff;-webkit-appearance:none;background:none;border:0}@-webkit-keyframes openDropmenu{from{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes openDropmenu{from{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.dropdown{position:relative}.dropdown.active .dropdown-menu{display:block;opacity:1}.dropdown.top .dropdown-menu{margin-bottom:10px;bottom:100%}.dropdown.bottom .dropdown-menu{margin-top:10px;top:100%}.dropdown.right .dropdown-menu{left:0}.dropdown.left .dropdown-menu{right:0}.dropdown .dropdown-button{font-size:15px;font-weight:bold;line-height:18px;color:#fff;cursor:pointer}.dropdown .dropdown-menu{display:block;opacity:1;position:absolute;background-color:#333333;box-shadow:0 2px 8px 0 rgba(0,0,0,0.3);border-radius:4px;padding:6px 0;z-index:5;-webkit-animation:openDropmenu 100ms ease-out forwards;animation:openDropmenu 100ms ease-out forwards;max-height:173px;overflow-y:auto}.dropdown .dropdown-menu .dropdown-menu-item{padding:2px 10px 2px 16px;white-space:nowrap;min-height:30px;cursor:pointer}.dropdown .dropdown-menu .dropdown-menu-item:hover{color:#fff}.dropdown .dropdown-menu .dropdown-menu-item.active{color:#01ACCD;fill:#01ACCD}.dropdown .dropdown-menu .dropdown-menu-item .check-icon{display:inline-block;margin-left:16px;vertical-align:middle;width:24px;height:24px}.dropdown .dropdown-menu .dropdown-menu-item span{vertical-align:middle;line-height:26px}.tooltip{display:inline-block;height:22px;border-radius:4px;background-color:#FFFFFF;padding:3px 13px;color:#333333;font-size:13px;font-weight:bold;line-height:16px;box-shadow:0 0 8px 0 rgba(0,0,0,0.3)}.player .control-button{width:32px;height:32px;background:transparent;display:inline-block;opacity:0.8;border:none;padding:0;cursor:pointer;fill:#fff}.player .control-button svg{width:32px;height:32px}.player .control-button:hover,.player .control-button.active{opacity:1}.player .control-button.control-button-rounded{width:36px;height:36px;padding:2px}.player .control-button.control-button-rounded:hover{background-color:rgba(0,0,0,0.4);border-radius:18px}.player .control-button-container{display:inline-block;position:relative;vertical-align:top}a{color:#01ACCD;text-decoration:underline;font-size:15px;line-height:18px}a:hover{color:#01819a}a:active{opacity:0.7}.player{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;top:0;left:0;width:100%;height:100%}.player:-webkit-full-screen{width:100%;height:100%;max-width:none}.player *{box-sizing:border-box;outline:none}.player ::-moz-selection{background-color:rgba(0,0,0,0.1)}.player ::selection{background-color:rgba(0,0,0,0.1)}.player video{width:100%}.player .player-gui{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:hidden;font-size:0;font-family:\"Lato\",sans-serif}.player .player-gui input,.player .player-gui textarea{font-family:\"Lato\",sans-serif}.player.metadata-loaded .player-gui,.player.state-paused .player-gui,.player.overlay-active .player-gui,.player.menu-active .player-gui{opacity:1}video::-webkit-media-controls{display:none !important;-webkit-appearance:none}video::-webkit-media-controls-start-playback-button{display:none !important;-webkit-appearance:none}video::cue{background-color:transparent;font-family:\"Lato\",sans-serif}.player.captions-yellow-text video::cue{color:#FAFF00}.player.captions-black-bg video::cue{background-color:#000}.player video::-webkit-media-text-track-display{-webkit-transform:translateY(0px);transform:translateY(0px);-webkit-transition:ease-in 100ms;transition:ease-in 100ms}.player.state-paused video::-webkit-media-text-track-display,.player.hover video::-webkit-media-text-track-display{-webkit-transform:translateY(-60px);transform:translateY(-60px);-webkit-transition:ease-out 100ms;transition:ease-out 100ms}@-webkit-keyframes openOverlay{from{opacity:0}to{opacity:1}}@keyframes openOverlay{from{opacity:0}to{opacity:1}}.overlay{position:absolute;display:none;opacity:0;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.42);z-index:4;text-align:center;color:#fff;padding:80px 20px 0;-webkit-animation:openOverlay 100ms ease-in-out forwards;animation:openOverlay 100ms ease-in-out forwards}.overlay.active{display:block;opacity:1}.overlay .title{font-size:24px;font-weight:bold;line-height:29px;margin-bottom:60px}.overlay .close-overlay{position:absolute;top:48px;right:48px;z-index:5;fill:#fff;cursor:pointer}.overlay .close-overlay .icon-close{width:24px;height:24px}@media screen and (max-width: 768px){.overlay{padding:36px 20px 0}.overlay .close-overlay{top:38px}.overlay .title{margin-bottom:24px}}@media screen and (max-width: 480px){.overlay{padding:16px 24px 0}.overlay .close-overlay{top:15px;right:24px}.overlay .title{font-size:16px;line-height:19px;margin-bottom:36px}}@-webkit-keyframes openSmartContainer{from{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes openSmartContainer{from{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.smart-container{background-color:#222222;box-shadow:0 2px 8px 0 rgba(0,0,0,0.3);border-radius:4px;position:absolute;right:0px;min-width:193px;font-size:15px;z-index:5;display:block;-webkit-animation:openSmartContainer 100ms ease-out forwards;animation:openSmartContainer 100ms ease-out forwards}.smart-container.top{bottom:100%;margin-bottom:6px}.smart-container.top:before{display:block;content:' ';position:absolute;bottom:-6px;left:0;width:100%;height:6px}.smart-container.bottom{top:100%;margin-top:6px}.smart-container.right{left:0px}.smart-container.left{right:0px}.smart-container .smart-container-item{margin:16px;color:rgba(244,244,244,0.8);white-space:nowrap}.smart-container .smart-container-item:after{display:block;content:' ';clear:both}.smart-container .smart-container-item.select-menu-item label{float:left}.smart-container .smart-container-item.select-menu-item .dropdown,.smart-container .smart-container-item.select-menu-item select{float:right}.smart-container .smart-container-item.select-menu-item select{text-align-last:right}.overlay.share-overlay .share-icons{margin:60px 0}.overlay.share-overlay .share-btn{height:36px;width:36px;border-radius:18px;background-color:rgba(0,0,0,0.4);display:inline-block;margin:0 8px;-webkit-transition:-webkit-transform 100ms;transition:transform 100ms;will-change:transform;padding:2px}.overlay.share-overlay .share-btn:hover{-webkit-transform:scale(1.1667);-ms-transform:scale(1.1667);transform:scale(1.1667)}.overlay.share-overlay .share-btn.facebook-share-btn{background-color:#3B5998}.overlay.share-overlay .share-btn.twitter-share-btn{background-color:#1DA1F2}.overlay.share-overlay .share-btn.google-plus-share-btn{background-color:#DD4B39}.overlay.share-overlay .share-btn.linkedin-share-btn{background-color:#00A0DC}@media screen and (max-width: 768px){.overlay.share-overlay .share-icons{margin:40px 0}}@media screen and (max-width: 480px){.overlay.share-overlay .share-icons{margin:20px 0}}.overlay.cvaa-overlay .sample{border:2px solid rgba(255,255,255,0.2);border-radius:4px;font-size:16px;font-weight:bold;line-height:36px;text-align:center;padding:0 31px;display:inline-block;margin:0 12px;cursor:pointer}.overlay.cvaa-overlay .sample.black-bg{background-color:#000}.overlay.cvaa-overlay .sample.yellow-text{color:#FAFF00}.overlay.cvaa-overlay .button-save-cvaa{margin-top:50px;height:40px;width:400px;border:2px solid rgba(255,255,255,0.2);border-radius:4px;font-size:16px;font-weight:bold;line-height:38px;text-align:center;display:inline-block;color:#fff;text-decoration:none;cursor:pointer}@-webkit-keyframes kaltura-spinner{0%{-webkit-transform:rotate(0deg) scale(0.7);transform:rotate(0deg) scale(0.7);opacity:1}70%{-webkit-transform:rotate(360deg) scale(0.7);transform:rotate(360deg) scale(0.7);opacity:1}82%{-webkit-transform:rotate(360deg) scale(0);transform:rotate(360deg) scale(0);opacity:0}87%{-webkit-transform:rotate(360deg) scale(0.9);transform:rotate(360deg) scale(0.9);opacity:1}100%{-webkit-transform:rotate(360deg) scale(0.7);transform:rotate(360deg) scale(0.7);opacity:1}}@keyframes kaltura-spinner{0%{-webkit-transform:rotate(0deg) scale(0.7);transform:rotate(0deg) scale(0.7);opacity:1}70%{-webkit-transform:rotate(360deg) scale(0.7);transform:rotate(360deg) scale(0.7);opacity:1}82%{-webkit-transform:rotate(360deg) scale(0);transform:rotate(360deg) scale(0);opacity:0}87%{-webkit-transform:rotate(360deg) scale(0.9);transform:rotate(360deg) scale(0.9);opacity:1}100%{-webkit-transform:rotate(360deg) scale(0.7);transform:rotate(360deg) scale(0.7);opacity:1}}.loading-backdrop{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.3);-webkit-transition:100ms opacity;transition:100ms opacity;opacity:0}.loading-backdrop.show{opacity:1}.loading-backdrop.show .spinner-container{display:block}.loading-backdrop .spinner-container{display:none;position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50px, -50px, 0);transform:translate3d(-50px, -50px, 0)}.spinner{width:100px;height:100px;position:relative;-webkit-animation:kaltura-spinner 2.5s infinite;animation:kaltura-spinner 2.5s infinite}.spinner span{width:8px;height:8px;background-color:#fff;display:block;border-radius:8px;position:absolute;top:50%;left:50%;margin-top:-4px;margin-left:-4px}.spinner span:nth-child(1){-webkit-transform:rotate(45deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(45deg) translateX(-25px) translateY(-25px);transform:rotate(45deg) translateX(-25px) translateY(-25px);background-color:#da1f26}.spinner span:nth-child(2){-webkit-transform:rotate(90deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(90deg) translateX(-25px) translateY(-25px);transform:rotate(90deg) translateX(-25px) translateY(-25px);background-color:#06a885}.spinner span:nth-child(3){-webkit-transform:rotate(135deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(135deg) translateX(-25px) translateY(-25px);transform:rotate(135deg) translateX(-25px) translateY(-25px);background-color:#009344}.spinner span:nth-child(4){-webkit-transform:rotate(180deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(180deg) translateX(-25px) translateY(-25px);transform:rotate(180deg) translateX(-25px) translateY(-25px);background-color:#f8a61a}.spinner span:nth-child(5){-webkit-transform:rotate(225deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(225deg) translateX(-25px) translateY(-25px);transform:rotate(225deg) translateX(-25px) translateY(-25px);background-color:#1b4a97}.spinner span:nth-child(6){-webkit-transform:rotate(270deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(270deg) translateX(-25px) translateY(-25px);transform:rotate(270deg) translateX(-25px) translateY(-25px);background-color:#00abcc}.spinner span:nth-child(7){-webkit-transform:rotate(315deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(315deg) translateX(-25px) translateY(-25px);transform:rotate(315deg) translateX(-25px) translateY(-25px);background-color:#b1d238}.spinner span:nth-child(8){-webkit-transform:rotate(360deg) translateX(-25px) translateY(-25px);-ms-transform:rotate(360deg) translateX(-25px) translateY(-25px);transform:rotate(360deg) translateX(-25px) translateY(-25px);background-color:#fcd203}.control-button-container.control-play-pause .control-button{-webkit-transition:400ms -webkit-transform;transition:400ms transform}.control-button-container.control-play-pause .control-button .icon-pause{-webkit-transition:400ms opacity;transition:400ms opacity;opacity:0;display:none}.control-button-container.control-play-pause .control-button .icon-play{-webkit-transition:400ms opacity;transition:400ms opacity;opacity:1;display:block}.control-button-container.control-play-pause .control-button.is-playing{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}.control-button-container.control-play-pause .control-button.is-playing .icon-pause{opacity:1;display:block}.control-button-container.control-play-pause .control-button.is-playing .icon-play{opacity:0;display:none}.touch .control-button-container.control-play-pause{display:none}@media screen and (max-width: 480px){.control-button-container.control-play-pause{display:none}}.control-button-container.volume-control:hover .volume-control-bar{display:block !important}.control-button-container.volume-control.is-muted .volume-waves{opacity:0;-webkit-transform:translateX(-5px);-ms-transform:translateX(-5px);transform:translateX(-5px)}.control-button-container.volume-control.is-muted .volume-mute{opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.control-button-container.volume-control.dragging-active .volume-control-bar{display:block}.control-button-container.volume-control .volume-waves{-webkit-transform:translateX(0px);-ms-transform:translateX(0px);transform:translateX(0px)}.control-button-container.volume-control .volume-mute{opacity:1;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}.control-button-container.volume-control .volume-waves,.control-button-container.volume-control .volume-mute{-webkit-transition:300ms -webkit-transform, 300ms opacity;transition:300ms transform, 300ms opacity}.control-button-container.volume-control svg{position:absolute;top:0;left:0}.volume-control-bar{position:absolute;z-index:2;bottom:38px;left:0px;display:block;height:112px;width:34px;border-radius:4px;box-shadow:0 2px 8px 0 rgba(0,0,0,0.3);background-color:#333333;padding:6px;display:none}.volume-control-bar:before{position:absolute;width:34px;height:14px;bottom:-8px;left:0;content:' ';display:block}.volume-control-bar .bar{background-color:#424242;height:100%;position:relative;cursor:ns-resize}.volume-control-bar .progress{position:absolute;bottom:0px;left:0px;width:100%;border-radius:0 0 2px 2px;background-color:#01ACCD}.touch .control-button-container.volume-control{display:none}@media screen and (max-width: 480px){.control-button-container.volume-control{display:none}}.control-button-container.control-fullscreen .control-button{-webkit-transition:100ms -webkit-transform;transition:100ms transform;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.control-button-container.control-fullscreen .control-button .icon-minimize{display:none}.control-button-container.control-fullscreen .control-button:hover{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1)}.control-button-container.control-fullscreen .control-button.is-fullscreen .icon-maximize{display:none}.control-button-container.control-fullscreen .control-button.is-fullscreen .icon-minimize{display:block}.player .seek-bar{padding:6px 0;cursor:pointer}.player .seek-bar:hover .time-preview,.player .seek-bar:hover .frame-preview,.player .seek-bar.dragging-active .time-preview,.player .seek-bar.dragging-active .frame-preview{display:block}.player .seek-bar:hover .progress-bar .scrubber,.player .seek-bar.dragging-active .progress-bar .scrubber{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.player .seek-bar:hover .progress-bar .virtual-progress,.player .seek-bar.dragging-active .progress-bar .virtual-progress{display:block}.player .seek-bar .progress-bar{height:4px;background-color:rgba(255,255,255,0.3);border-radius:2px;position:relative}.player .seek-bar .progress-bar .progress{position:absolute;top:0;left:0;height:100%;z-index:2;border-radius:2px 0 0 2px;background-color:#01ACCD}.player .seek-bar .progress-bar .virtual-progress{display:none}.player .seek-bar .progress-bar .buffered,.player .seek-bar .progress-bar .virtual-progress{position:absolute;top:0;left:0;height:100%;z-index:1;border-radius:2px 0 0 2px;background-color:rgba(255,255,255,0.3)}.player .seek-bar .progress-bar .scrubber{position:absolute;z-index:3;cursor:pointer;display:block;top:-6px;right:-8px;border-radius:8px;height:16px;width:16px;background-color:#FFFFFF;box-shadow:0 0 31px 0 rgba(0,0,0,0.3);-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:100ms -webkit-transform;transition:100ms transform}.player .seek-bar .progress-bar .scrubber:active{opacity:1;cursor:-webkit-grabbing;cursor:grabbing}.player .seek-bar .frame-preview{position:absolute;bottom:16px;left:0;height:94px;width:164px;border:2px solid rgba(255,255,255,0.2);border-radius:4px}.player .seek-bar .frame-preview .frame-preview-img{background-size:auto 100%;width:100%;height:100%;position:relative}.player .seek-bar .time-preview{position:absolute;bottom:22px;left:0;z-index:10;height:22px;min-width:48px;padding:0 3px;text-align:center;border-radius:3px;background-color:rgba(0,0,0,0.7);font-size:13px;font-weight:bold;line-height:22px;color:#fff}.player .seek-bar .time-preview,.player .seek-bar .frame-preview{display:none}.touch .virtual-progress,.touch .time-preview,.touch .frame-preview{display:none !important}@media screen and (max-width: 480px){.virtual-progress,.time-preview,.frame-preview{display:none}}.player .time-display{display:inline-block;line-height:32px;vertical-align:top;font-size:14px;padding:0 23px;font-weight:bold}.touch .time-display{padding-left:0}@media screen and (max-width: 480px){.player .time-display{padding:0 12px 0 0}}.player .video-playing-title{font-size:15px;font-weight:bold;line-height:18px;padding:6px 0;max-width:80%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player .bottom-bar{position:absolute;bottom:0;left:0;width:100%;background:-webkit-linear-gradient(270deg, transparent 0%, rgba(0,0,0,0.6) 100%);background:linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.6) 100%);padding:6px 16px;color:#fff;opacity:0;-webkit-transition:100ms opacity;transition:100ms opacity}.player .bottom-bar .left-controls{float:left;text-align:left}.player .bottom-bar .right-controls{float:right;text-align:left}.player .bottom-bar .right-controls .control-button-container{margin:0 6px}.player .bottom-bar .right-controls .control-button-container:last-child{margin-right:0}.player.hover .bottom-bar,.player.state-paused .bottom-bar,.player.menu-active .bottom-bar{opacity:1}.player.overlay-active .bottom-bar{opacity:0}@media screen and (max-width: 480px){.player .bottom-bar{padding:6px 8px}}.player .top-bar{position:absolute;top:0;left:0;width:100%;background:-webkit-linear-gradient(90deg, transparent 0%, rgba(0,0,0,0.6) 100%);background:linear-gradient(0deg, transparent 0%, rgba(0,0,0,0.6) 100%);padding:14px 16px;color:#fff;opacity:0;-webkit-transition:100ms opacity;transition:100ms opacity}.player .top-bar .left-controls{float:left;text-align:left}.player .top-bar .right-controls{float:right;text-align:left}.player .top-bar .right-controls .control-button-container{margin:0 6px}.player .top-bar .right-controls .control-button-container:last-child{margin-right:0}.player.hover .top-bar,.player.state-paused .top-bar,.player.menu-active .top-bar{opacity:1}.player.overlay-active .top-bar{opacity:0}@media screen and (max-width: 480px){.player .top-bar{padding:8px 8px 20px 8px}}@-webkit-keyframes overlayPlayIconIn{from{opacity:1;-webkit-transform:scale(0);transform:scale(0)}to{opacity:0;-webkit-transform:scale(1);transform:scale(1)}}@keyframes overlayPlayIconIn{from{opacity:1;-webkit-transform:scale(0);transform:scale(0)}to{opacity:0;-webkit-transform:scale(1);transform:scale(1)}}.overlay-play{position:absolute;top:0;left:0;width:100%;height:100%}.overlay-play.in .icon{-webkit-animation:overlayPlayIconIn 400ms linear forwards;animation:overlayPlayIconIn 400ms linear forwards}.overlay-play .icon{width:144px;height:144px;fill:#fff;position:absolute;top:50%;left:50%;margin:-72px 0 0 -72px;opacity:0}",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(e,t,n){!function(t,r){e.exports=r(n(10),n(0))}(0,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(2),f=function(e){function t(e,n,a){r(this,t),t._logger.debug("Creating adapter. Hls version: "+l.default.version);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a));return o._hls=new l.default(o._config),o._addBindings(),o}return a(t,e),s(t,null,[{key:"canPlayType",value:function(e){var n="string"==typeof e&&t._hlsMimeTypes.includes(e.toLowerCase());return t._logger.debug("canPlayType result for mimeType:"+e+" is "+n.toString()),n}},{key:"isSupported",value:function(){var e=l.default.isSupported();return t._logger.debug("isSupported:"+e),e}}]),s(t,[{key:"_addBindings",value:function(){this._hls.on(l.default.Events.ERROR,this._onError.bind(this)),this._hls.on(l.default.Events.LEVEL_SWITCHED,this._onLevelSwitched.bind(this)),this._hls.on(l.default.Events.AUDIO_TRACK_SWITCHED,this._onAudioTrackSwitched.bind(this))}},{key:"load",value:function(){var e=this;return this._loadPromise||(this._loadPromise=new Promise(function(n){e._hls.on(l.default.Events.MANIFEST_LOADED,function(r,i){t._logger.debug("The source has been loaded successfully"),e._playerTracks=e._parseTracks(i),n({tracks:e._playerTracks})}),e._sourceObj&&e._sourceObj.url&&(e._hls.loadSource(e._sourceObj.url),e._hls.attachMedia(e._videoElement))})),this._loadPromise}},{key:"destroy",value:function(){t._logger.debug("destroy"),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._loadPromise=null,this._removeBindings(),this._hls.detachMedia(),this._hls.destroy()}},{key:"_parseTracks",value:function(e){var t=this._parseAudioTracks(e.audioTracks||[]),n=this._parseVideoTracks(e.levels||[]),r=this._parseTextTracks(this._videoElement.textTracks||[]);return t.concat(n).concat(r)}},{key:"_parseAudioTracks",value:function(e){for(var t=[],n=0;n<e.length;n++){var r={id:e[n].id,active:this._hls.audioTrack===e[n].id,label:e[n].name,language:e[n].lang,index:n};t.push(new c.AudioTrack(r))}return t}},{key:"_parseVideoTracks",value:function(e){for(var t=[],n=0;n<e.length;n++){var r={active:this._hls.startLevel===n,label:e[n].name,bandwidth:e[n].bitrate,language:"",index:n};t.push(new c.VideoTrack(r))}return t}},{key:"_parseTextTracks",value:function(e){for(var t=[],n=0;n<e.length;n++){var r={active:"showing"===e[n].mode,label:e[n].label,kind:e[n].kind,language:e[n].language,index:n};t.push(new c.TextTrack(r))}return t}},{key:"selectAudioTrack",value:function(e){e instanceof c.AudioTrack&&!e.active&&this._hls.audioTracks&&(this._hls.audioTrack=e.id)}},{key:"selectVideoTrack",value:function(e){e instanceof c.VideoTrack&&(!e.active||this._hls.autoLevelEnabled)&&this._hls.levels&&(this._hls.nextLevel=e.index)}},{key:"selectTextTrack",value:function(e){e instanceof c.TextTrack&&!e.active&&this._videoElement.textTracks&&(this._disableAllTextTracks(),this._videoElement.textTracks[e.index].mode="showing",t._logger.debug("Text track changed",e),this._onTrackChanged(e))}},{key:"hideTextTrack",value:function(){this._disableAllTextTracks()}},{key:"enableAdaptiveBitrate",value:function(){this._hls.nextLevel=-1}},{key:"_onLevelSwitched",value:function(e,n){var r=this._playerTracks.find(function(e){return e instanceof c.VideoTrack&&e.index===n.level});t._logger.debug("Video track changed",r),this._onTrackChanged(r)}},{key:"_onAudioTrackSwitched",value:function(e,n){var r=this._playerTracks.find(function(e){return e instanceof c.AudioTrack&&e.id===n.id});t._logger.debug("Audio track changed",r),this._onTrackChanged(r)}},{key:"_disableAllTextTracks",value:function(){for(var e=this._videoElement.textTracks,t=0;t<e.length;t++)e[t].mode="hidden"}},{key:"_onError",value:function(e,n){var r=n.type,i=n.details;if(n.fatal)switch(r){case l.default.ErrorTypes.NETWORK_ERROR:t._logger.error("fatal network error encountered, try to recover"),this._hls.startLoad();break;case l.default.ErrorTypes.MEDIA_ERROR:t._logger.error("fatal media error encountered, try to recover"),this._hls.recoverMediaError();break;default:t._logger.error("fatal error, cannot recover"),this.destroy()}else switch(i){case l.default.ErrorDetails.MANIFEST_LOAD_ERROR:case l.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case l.default.ErrorDetails.MANIFEST_PARSING_ERROR:case l.default.ErrorDetails.LEVEL_LOAD_ERROR:case l.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:case l.default.ErrorDetails.LEVEL_SWITCH_ERROR:case l.default.ErrorDetails.FRAG_LOAD_ERROR:case l.default.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case l.default.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.default.ErrorDetails.FRAG_PARSING_ERROR:case l.default.ErrorDetails.BUFFER_APPEND_ERROR:case l.default.ErrorDetails.BUFFER_APPENDING_ERROR:t._logger.error(r,i)}}},{key:"_removeBindings",value:function(){this._hls.off(l.default.Events.ERROR,this._onError),this._hls.off(l.default.Events.LEVEL_SWITCHED,this._onLevelSwitched),this._hls.off(l.default.Events.AUDIO_TRACK_SWITCHED,this._onAudioTrackSwitched)}},{key:"src",get:function(){return this._loadPromise&&this._sourceObj?this._sourceObj.url:""}}]),t}(c.BaseMediaSourceAdapter);f.id="HlsAdapter",f._logger=c.BaseMediaSourceAdapter.getLogger(f.id),f._hlsMimeTypes=["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],t.default=f,f.isSupported()&&(0,c.registerMediaSourceAdapter)(f)},function(t,n){t.exports=e},function(e,n){e.exports=t}])})},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){var e;return function e(t,n,i){function a(s,u){if(!n[s]){if(!t[s]){var l="function"==typeof r&&r;if(!u&&l)return r(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return a(n||e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof r&&r,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(t,n,r){!function(t){var i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/;?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return r.path=u.normalizePath(r.path),u.buildURLFromParts(r)}var i=this.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=u.normalizePath(i.path),u.buildURLFromParts(i)):t;var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var s=a.exec(o.path);o.netLoc=s[1],o.path=s[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=o.netLoc,"/"!==i.path[0]))if(i.path){var c=o.path,f=c.substring(0,c.lastIndexOf("/")+1)+i.path;l.path=u.normalizePath(f)}else l.path=o.path,i.params||(l.params=o.params,i.query||(l.query=o.query));return null===l.path&&(l.path=n.alwaysNormalize?u.normalizePath(i.path):i.path),u.buildURLFromParts(l)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof r&&"object"==typeof n?n.exports=u:"function"==typeof e&&e.amd?e([],function(){return u}):"object"==typeof r?r.URLToolkit=u:t.URLToolkit=u}(this)},{}],3:[function(e,t,n){var r=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){function n(e){y[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];y[r]||n(r)}}for(var s,u=Object.keys(a),l=0,c=u.length;l<c;l++){var f=u[l],d=a[f].exports;if(d===e||d&&d.default===e){s=f;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},l=0,c=u.length;l<c;l++){var f=u[l];h[f]=f}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,i[p]=[Function(["require"],"var f = require("+o(s)+");(f.default ? f.default : f)(self);"),v];var y={};n(p);var g="("+r+")({"+Object.keys(y).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(p)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return b;var _=m.createObjectURL(b),E=new Worker(_);return E.objectURL=_,E}},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.hlsDefaultConfig=void 0;var i=e(5),a=r(i),o=e(8),s=r(o),u=e(9),l=r(u),c=e(10),f=r(c),d=e(59),h=r(d),p=e(7),v=r(p),y=e(6),g=r(y),m=e(50),b=r(m),_=e(16),E=r(_),T=e(15),w=r(T),k=e(14),S=r(k);n.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:h.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:a.default,bufferController:s.default,capLevelController:l.default,fpsController:f.default,audioStreamController:g.default,audioTrackController:v.default,subtitleStreamController:S.default,subtitleTrackController:w.default,timelineController:E.default,cueHandler:b.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,14:14,15:15,16:16,5:5,50:50,59:59,6:6,7:7,8:8,9:9}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(37),h=r(d),p=e(33),v=e(54),y=e(52),g=r(y),m=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){this.clearTimer(),f.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,r=e.frag.level,i=n.levels[r].details.live,a=n.config,o=void 0,s=void 0;i?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this._bwEstimator=new g.default(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,n=this.fragCurrent,r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return v.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=r.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*n.duration/s){var u=e.levels,c=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),f=u[n.level],d=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*d/8)),y=t.currentTime,g=(p-a.loaded)/c,m=(h.default.bufferInfo(t,y,e.config.maxBufferHole).end-y)/s;if(m<2*n.duration/s&&g>m){var b=void 0,_=void 0;for(_=n.level-1;_>i;_--){var E=u[_].realBitrate?Math.max(u[_].realBitrate,u[_].bitrate):u[_].bitrate;if((b=n.duration*E/(6.4*c))<m)break}b<g&&(v.logger.warn("loading too slow, abort fragment loading and switch to level "+_+":fragLoadedDelay["+_+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=_,this._bwEstimator.sample(o,a.loaded),r.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var r=t.tparsed-t.trequest;v.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"_findBestLevel",value:function(e,t,n,r,i,a,o,s,u){for(var l=i;l>=r;l--){var c=u[l],f=c.details,d=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,p=void 0;p=l<=e?o*n:s*n;var y=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,g=y*d/p;if(v.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(p)+"/"+y+"/"+d+"/"+a+"/"+g),p>y&&(!g||h&&!this.bitrateTestDelay||g<a))return l}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,f=(h.default.bufferInfo(a,u,r.maxBufferHole).end-u)/l,d=this._findBestLevel(o,s,c,i,t,f,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(d>=0)return d;v.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,y=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===f){var m=this.bitrateTestDelay;if(m){p=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,v.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),y=g=1}}return d=this._findBestLevel(o,s,c,i,t,f+p,y,g,n),Math.max(d,0)}}]),t}(f.default);n.default=m},{33:33,34:34,35:35,37:37,52:52,54:54}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(48),l=r(u),c=e(37),f=r(c),d=e(25),h=r(d),p=e(35),v=r(p),y=e(34),g=r(y),m=e(38),b=r(m),_=e(55),E=r(_),T=e(33),w=e(54),k=e(51),S={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},O=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.AUDIO_TRACKS_UPDATED,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED,v.default.INIT_PTS_FOUND));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=S.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return o(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),g.default.prototype.destroy.call(this),this.state=S.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,w.logger.log("InitPTS for cc:"+n+" found from video track:"+r),this.state===S.WAITING_INIT_PTS&&this.tick())}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(w.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=S.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=S.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=S.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=S.STOPPED}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case S.ERROR:case S.PAUSED:case S.BUFFER_FLUSHING:break;case S.STARTING:this.state=S.WAITING_TRACK,this.loadedmetadata=!1;break;case S.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=f.default.bufferInfo(o,e,i.maxBufferHole),u=s.len,c=s.end,d=this.fragPrevious,h=i.maxMaxBufferLength,p=this.audioSwitch,y=this.trackId;if((u<h||p)&&y<a.length){if(void 0===(n=a[y].details)){this.state=S.WAITING_TRACK;break}if(!p&&!n.live&&d&&d.sn===n.endSN&&(!this.media.seeking||this.media.duration-c<d.duration/2)){this.hls.trigger(v.default.BUFFER_EOS,{type:"audio"}),this.state=S.ENDED;break}var g=n.fragments,m=g.length,b=g[0].start,_=g[m-1].start+g[m-1].duration,E=void 0;if(p)if(n.live&&!n.PTSKnown)w.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=e,n.PTSKnown&&e<b){if(!(s.end>b||s.nextStart))return;w.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(n.initSegment&&!n.initSegment.data)E=n.initSegment;else if(c<=b){if(E=g[0],null!==this.videoTrackCC&&E.cc!==this.videoTrackCC&&(E=(0,k.findFragWithCC)(g,this.videoTrackCC)),n.live&&E.loadIdx&&E.loadIdx===this.fragLoadIdx){var O=s.nextStart?s.nextStart:b;return w.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(O+.05)),void(this.media.currentTime=O+.05)}}else{var A=void 0,P=i.maxFragLookUpTolerance,R=d?g[d.sn-g[0].sn+1]:void 0,D=function(e){var t=Math.min(P,e.duration);return e.start+e.duration-t<=c?1:e.start-t>c&&e.start?-1:0};c<_?(c>_-P&&(P=0),A=R&&!D(R)?R:l.default.search(g,D)):A=g[m-1],A&&(E=A,b=A.start,d&&E.level===d.level&&E.sn===d.sn&&(E.sn<n.endSN?(E=g[E.sn+1-n.startSN],w.logger.log("SN just loaded, load next one: "+E.sn)):E=null))}if(E)if(E.decryptdata&&null!=E.decryptdata.uri&&null==E.decryptdata.key)w.logger.log("Loading key for "+E.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+y),this.state=S.KEY_LOADING,r.trigger(v.default.KEY_LOADING,{frag:E});else{if(w.logger.log("Loading "+E.sn+", cc: "+E.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+y+", currentTime:"+e+",bufferEnd:"+c.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,E.loadCounter){E.loadCounter++;var x=i.fragLoadingLoopThreshold;if(E.loadCounter>x&&Math.abs(this.fragLoadIdx-E.loadIdx)<x)return void r.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:E})}else E.loadCounter=1;E.loadIdx=this.fragLoadIdx,this.fragCurrent=E,this.startFragRequested=!0,isNaN(E.sn)||(this.nextLoadPosition=E.start+E.duration),r.trigger(v.default.FRAG_LOADING,{frag:E}),this.state=S.FRAG_LOADING}}break;case S.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=S.IDLE);break;case S.FRAG_LOADING_WAITING_RETRY:var L=performance.now(),I=this.retryDate;o=this.media;var M=o&&o.seeking;(!I||L>=I||M)&&(w.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=S.IDLE);break;case S.WAITING_INIT_PTS:if(void 0===this.initPTS[this.videoTrackCC])break;var C=this.waitingFragment;if(C){var N=C.frag.cc;this.videoTrackCC!==N?(w.logger.warn("Waiting fragment CC ("+N+") does not match video track CC ("+this.videoTrackCC+")"),this.waitingFragment=null,this.state=S.IDLE):(this.state=S.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=S.IDLE;break;case S.STOPPED:case S.FRAG_LOADING:case S.PARSING:case S.PARSED:case S.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(w.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===S.ENDED&&(this.state=S.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){w.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=S.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=S.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,a=0;if(w.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=r.details;o&&t.fragments.length>0?(b.default.mergeDetails(o,t),a=t.fragments[0].start,t.PTSKnown?w.logger.log("live audio playlist sliding:"+a.toFixed(3)):w.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,w.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(w.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===S.WAITING_TRACK&&(this.state=S.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===S.KEY_LOADING&&(this.state=S.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===S.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,o=t.level,s=t.sn,u=t.cc,l=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",c=this.stats=e.stats;if("initSegment"===s)this.state=S.IDLE,c.tparsed=c.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(v.default.FRAG_BUFFERED,{stats:c,frag:t,id:"audio"}),this.tick();else{this.state=S.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new h.default(this.hls,"audio"));var f=this.initPTS[u],d=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==f){this.pendingBuffering=!0,w.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o);this.demuxer.push(e.payload,d,l,null,t,a,!1,f)}else w.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.state=S.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===S.PARSING){var r=e.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(v.default.BUFFER_CODECS,r),w.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,o))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&r.sn===n.sn&&r.level===n.level&&this.state===S.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),w.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),b.default.updateFragPTSDTS(a.details,n,e.startPTS,e.endPTS);var s=this.audioSwitch,u=this.media,l=!1;if(s&&u)if(u.readyState){var c=u.currentTime;w.logger.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(w.logger.log("switching audio track : flushing all audio"),this.state=S.BUFFER_FLUSHING,o.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,this.audioSwitch=!1,o.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:i});var f=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&f.push({type:e.type,data:t,parent:"audio",content:"data"})}),!l&&f.length&&(f.forEach(function(e){t.state===S.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(v.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===S.PARSING&&(this.stats.tparsed=performance.now(),this.state=S.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==S.PARSING&&t!==S.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==S.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(v.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;w.logger.log("audio buffered : "+E.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=S.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case T.ErrorDetails.FRAG_LOAD_ERROR:case T.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);w.logger.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=S.FRAG_LOADING_WAITING_RETRY}else w.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=S.ERROR}break;case T.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case T.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case T.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case T.ErrorDetails.KEY_LOAD_ERROR:case T.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==S.ERROR&&(this.state=e.fatal?S.ERROR:S.IDLE,w.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case T.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===S.PARSING||this.state===S.PARSED)){var a=this.mediaBuffer,o=this.media.currentTime;if(a&&f.default.isBuffered(a,o)&&f.default.isBuffered(a,o+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,w.logger.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*s.fragLoadingLoopThreshold),this.state=S.IDLE}else w.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=S.BUFFER_FLUSHING,this.hls.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(w.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(v.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=S.PARSED):(this.state=S.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,w.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(g.default);n.default=O},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,51:51,54:54,55:55}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(54),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.AUDIO_TRACK_LOADED));return n.ticks=0,n.ontick=n.tick.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(e){if(e.default)return t.audioTrack=i,void(r=!0);i++}),!1===r&&n.length&&(d.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(d.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,d.logger.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,r=t.type,i=t.url,a={id:e,type:r,url:i};n.trigger(l.default.AUDIO_TRACK_SWITCH,a),n.trigger(l.default.AUDIO_TRACK_SWITCHING,a);var o=t.details;!i||void 0!==o&&!0!==o.live||(d.logger.log("(re)loading playlist for audioTrack "+e),n.trigger(l.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,d.logger.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,r=t.details;!n||void 0!==r&&!0!==r.live||(d.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:n,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(f.default);n.default=h},{34:34,35:35,54:54}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(54),h=e(33),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){i=!0,d.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(d.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,n=e.video,r=0;e.altAudio&&(t||n)&&(r=(t?1:0)+(n?1:0),d.logger.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){d.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){d.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){d.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){d.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){d.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;d.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0);this.hls.trigger(l.default.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){d.logger.error("sourceBuffer error:",e),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;d.logger.log("creating sourceBuffer("+o+")");try{var s=t[r]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=s}catch(e){d.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){d.logger.error("sourceBuffer error:",e.event),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,d.logger.log(r+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}d.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){d.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,n=this.sourceBuffer,r=this._levelDuration;if(null!==r&&e&&t&&n&&0!==e.readyState&&"open"===t.readyState){for(var i in n)if(n[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var a=e.duration;(r>this._msDuration&&r>a||a===1/0||isNaN(a))&&(d.logger.log("Updating mediasource duration to "+r.toFixed(3)),this._msDuration=t.duration=r)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){d.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void d.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=r.type,a=t[i];a?a.updating?n.unshift(r):(a.ended=!1,this.parent=r.parent,a.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){d.logger.error("error while trying to append buffer:"+t.message),n.unshift(r);var o={type:h.ErrorTypes.MEDIA_ERROR,parent:r.parent};if(22===t.code)return this.segments=[],o.details=h.ErrorDetails.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(l.default.ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=h.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return d.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0,void e.trigger(l.default.ERROR,o);o.fatal=!1,e.trigger(l.default.ERROR,o)}}}}},{key:"flushBuffer",value:function(e,t,n){var r,i,a,o,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(d.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in l)if(!n||c===n){if(r=l[c],r.ended=!1,r.updating)return d.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(a=r.buffered.start(i),o=r.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,u=t):(s=Math.max(a,e),u=Math.min(o,t)),Math.min(u,o)-s>.5)return this.flushBufferCounter++,d.logger.log("flush "+c+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),r.remove(s,u),!1}catch(e){d.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else d.logger.warn("abort flushing too many retries");d.logger.log("buffer flushed")}return!0}}]),t}(f.default);n.default=p},{33:33,34:34,35:35,54:54}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED))}return o(t,e),s(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var n=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e});return t.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}},{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"isLevelAllowed",value:function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)}},{key:"getMaxLevelByMediaSize",value:function(e,t,n){if(!e||e&&!e.length)return-1;for(var r=e.length-1,i=0;i<e.length;i+=1){var a=e[i];if((a.width>=t||a.height>=n)&&function(e,t){return!t||(e.width!==t.width||e.height!==t.height)}(a,e[i+1])){r=i;break}}return r}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(f.default);n.default=d},{34:34,35:35}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(54),h=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING))}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){"function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,n){var r=performance.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var c=u.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(f.default);n.default=h},{34:34,35:35,54:54}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(27),h=r(d),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,n=e.samples,r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=h.default.getID3Frames(n[i].data);if(a){var o=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var u=0;u<a.length;u++){var l=a[u];if(!h.default.isTimeStampFrame(l)){var c=new r(o,s,"");c.value=l,this.id3Track.addCue(c)}}}}}}]),t}(f.default);n.default=p},{27:27,34:34,35:35}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(54),h=e(33),p=e(37),v=r(p),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.FRAG_LOADED,l.default.ERROR));return n.ontick=n.tick.bind(n),n._manualLevel=-1,n}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,n=[],r=[],i={},a=!1,o=!1,s=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(a=!0),u&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(o=!0);var t=i[e.bitrate];void 0===t?(i[e.bitrate]=n.length,e.url=[e.url],e.urlId=0,n.push(e)):n[t].url.push(e.url)}),a&&o?n.forEach(function(e){e.videoCodec&&r.push(e)}):r=n,r=r.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||c("audio",t))&&(!n||c("video",n))}),r.length){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var f=0;f<r.length;f++)if(r[f].bitrate===t){this._firstLevel=f,d.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}s.trigger(l.default.MANIFEST_PARSED,{levels:r,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:a,altAudio:e.audioTracks.length>0})}else s.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e){d.logger.log("switching to level "+e),this._level=e;var r=t[e];r.level=e,n.trigger(l.default.LEVEL_SWITCH,r),n.trigger(l.default.LEVEL_SWITCHING,r)}var i=t[e],a=i.details;if(!a||!0===a.live){var o=i.urlId;n.trigger(l.default.LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else n.trigger(l.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,n=this.hls,r=void 0,i=void 0,a=!1;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:r=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:r=e.context.level,a=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:r=e.level}if(void 0!==r){i=this._levels[r],i.loadError?i.loadError++:i.loadError=1;var o=i.url.length;if(o>1&&i.loadError<o)i.urlId=(i.urlId+1)%o,i.details=void 0,d.logger.warn("level controller,"+t+" for level "+r+": switching to redundant stream id "+i.urlId);else{if(-1===this._manualLevel&&r)d.logger.warn("level controller,"+t+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,r-1);else if(i&&i.details&&i.details.live)d.logger.warn("level controller,"+t+" on live stream, discard"),a&&(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var s=n.media,u=s&&v.default.isBuffered(s,s.currentTime)&&v.default.isBuffered(s,s.currentTime+.5);if(u){var l=n.config.levelLoadingRetryDelay;d.logger.warn("level controller,"+t+", but media buffered, retry in "+l+"ms"),this.timer=setTimeout(this.ontick,l),e.levelRetry=!0}else d.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0}}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var n=this._levels[t.level];n&&(n.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var n=this._levels[t];n.loadError=0;var r=e.details;if(r.live){var i=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),a=n.details;a&&r.endSN===a.endSN&&(i/=2,d.logger.log("same live playlist, reload twice faster")),i-=performance.now()-e.stats.trequest,i=Math.max(1e3,Math.round(i)),d.logger.log("live playlist, reload in "+i+" ms"),this.timer=setTimeout(this.ontick,i)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var n=t.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:t.url[n],level:e,id:n})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}(f.default);n.default=y},{33:33,34:34,35:35,37:37,54:54}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(48),l=r(u),c=e(37),f=r(c),d=e(25),h=r(d),p=e(35),v=r(p),y=e(34),g=r(y),m=e(38),b=r(m),_=e(55),E=r(_),T=e(33),w=e(54),k={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},S=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.MANIFEST_LOADING,v.default.MANIFEST_PARSED,v.default.LEVEL_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_LOAD_EMERGENCY_ABORTED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_SWITCHED,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=k.STOPPED,n.ontick=n.tick.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),g.default.prototype.destroy.call(this),this.state=k.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(w.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=k.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=k.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=k.STOPPED,this.forceStartLoad=!1}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case k.ERROR:break;case k.BUFFER_FLUSHING:this.fragLoadError=0;break;case k.IDLE:this._doTickIdle();break;case k.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=k.IDLE);break;case k.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(w.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=k.IDLE);break;case k.ERROR:case k.STOPPED:case k.FRAG_LOADING:case k.PARSING:case k.PARSED:case k.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,n=this.media;if(void 0===this.levelLastLoaded||n||!this.startFragRequested&&t.startFragPrefetch){var r=void 0;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o=a.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var u=f.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),l=u.len;if(!(l>=s)){w.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var c=a.details;if(void 0===c||c.live&&this.levelLastLoaded!==i)return void(this.state=k.WAITING_LEVEL);var d=this.fragPrevious;if(!c.live&&d&&d.sn===c.endSN&&l&&!u.nextStart){if(Math.min(n.duration,d.start+d.duration)-Math.max(u.end,d.start)<=Math.max(.2,d.duration)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(v.default.BUFFER_EOS,h),void(this.state=k.ENDED)}}this._fetchPayloadOrEos(r,u,c)}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0!==o){var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=t.end,c=void 0;if(n.initSegment&&!n.initSegment.data)c=n.initSegment;else if(n.live){var f=this.config.initialLiveManifestSize;if(o<f)return void w.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+f);if(null===(c=this._ensureFragmentAtLivePoint(n,l,s,u,r,a,o)))return}else l<s&&(c=a[0]);c||(c=this._findFragment(s,r,o,a,l,u,n)),c&&this._loadFragmentOrKey(c,i,n,e,l)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,n,r,i,a,o){var s=this.hls.config,u=this.media,l=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,r-c)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);w.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,u&&u.readyState&&u.duration>f&&(u.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>r&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i){var d=i.sn+1;d>=e.startSN&&d<=e.endSN&&(l=a[d-e.startSN],w.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=a[Math.min(o-1,Math.round(o/2))],w.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l}},{key:"_findFragment",value:function(e,t,n,r,i,a,o){var s=this.hls.config,u=void 0,c=void 0,f=s.maxFragLookUpTolerance,d=t?r[t.sn-r[0].sn+1]:void 0,h=function(e){var t=Math.min(f,e.duration);return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0};if(i<a?(i>a-f&&(f=0),c=d&&!h(d)?d:l.default.search(r,h)):c=r[n-1],c){u=c;var p=u.sn-o.startSN,v=t&&u.level===t.level,y=r[p-1],g=r[p+1];if(t&&u.sn===t.sn)if(v&&!u.backtracked)if(u.sn<o.endSN){var m=t.deltaPTS;m&&m>s.maxBufferHole&&t.dropped&&p?(u=y,w.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=g,w.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(g&&g.backtracked?(w.logger.warn("Already backtracked from fragment "+g.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+g.sn),u=g):(w.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,y?(y.loadCounter&&y.loadCounter--,u=y,u.backtracked=!0):p&&(u=null)))}return u}},{key:"_loadFragmentOrKey",value:function(e,t,n,r,i){var a=this.hls,o=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(w.logger.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var s=o.fragLoadingLoopThreshold;if(e.loadCounter>s&&Math.abs(this.fragLoadIdx-e.loadIdx)<s)return void a.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,a.trigger(v.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new h.default(a,"main")),void(this.state=k.FRAG_LOADING)}w.logger.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=k.KEY_LOADING,a.trigger(v.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return l.default.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&(t=n.currentTime,t>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),f.default.isBuffered(n,t)?e=this.getBufferedFrag(t):f.default.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(v.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(v.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}}},{key:"immediateLevelSwitch",value:function(){if(w.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,f.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,n=void 0,r=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferedFrag(e.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferedFrag(e.currentTime+t))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=k.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(v.default.BUFFER_FLUSHING,n)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(w.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||w.logger.log("media seeking to "+t.toFixed(3));var r=this.mediaBuffer?this.mediaBuffer:e,i=f.default.bufferInfo(r,t,this.config.maxBufferHole);if(this.state===k.FRAG_LOADING){var a=this.fragCurrent;if(0===i.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,u=a.start+a.duration+o;t<s||t>u?(a.loader&&(w.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=k.IDLE):w.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===k.ENDED&&(0===i.len&&(this.fragPrevious=0),this.state=k.IDLE);e&&(this.lastCurrentTime=t),this.state!==k.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||w.logger.log("media seeked to "+t.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){w.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){w.logger.log("trigger BUFFER_RESET"),this.hls.trigger(v.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&w.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,n=e.level,r=this.levels[n],i=t.totalduration,a=0;if(w.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=n,t.live){var o=r.details;o&&t.fragments.length>0?(b.default.mergeDetails(o,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,o),t.PTSKnown?w.logger.log("live playlist sliding:"+a.toFixed(3)):w.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,w.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,this.hls.trigger(v.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(a,t),w.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(w.logger.log("negative start time offset "+s+", count from end of last fragment"),s=a+i+s),w.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===k.WAITING_LEVEL&&(this.state=k.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===k.KEY_LOADING&&(this.state=k.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===k.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var r=e.stats,i=this.levels[t.level],a=i.details;if(w.logger.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=r,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=k.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=k.IDLE,r.tparsed=r.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=k.PARSING;var o=a.totalduration,s=t.level,u=t.sn,l=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(w.logger.log("swapping playlist audio codec"),void 0===l&&(l=this.lastAudioCodec),l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,w.logger.log("Parsing "+u+" of ["+a.startSN+" ,"+a.endSN+"],level "+s+", cc "+t.cc);var c=this.demuxer;c||(c=this.demuxer=new h.default(this.hls,"main"));var f=this.media,d=f&&f.seeking,p=!d&&(a.PTSKnown||!a.live),y=a.initSegment?a.initSegment.data:[];c.push(e.payload,y,l,i.videoCodec,t,o,p,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===k.PARSING){var r,i,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(w.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",w.logger.log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=e.id}i=a.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(v.default.BUFFER_CODECS,a);for(r in a){i=a[r],w.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"main"===e.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===k.PARSING){var i=this.levels[this.level],a=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),w.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped){if(!a.backtracked)return w.logger.warn("missing video frame(s), backtracking fragment"),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=k.IDLE,this.fragPrevious=a,void this.tick();w.logger.warn("Already backtracked on this fragment, appending with the gap")}else a.backtracked=!1;var o=b.default.updateFragPTSDTS(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(v.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:o,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===k.PARSING&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(v.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===k.PARSING&&(this.stats.tparsed=performance.now(),this.state=k.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){w.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(w.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=k.IDLE}var i=this.hls;i.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(w.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,n=void 0,r=void 0,i=!1;for(var a in t){var o=t[a];"main"===o.id?(r=a,n=o,"video"===a&&(this.videoBuffer=t[a].buffer)):i=!0}i&&n?(w.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==k.PARSING&&t!==k.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==k.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;w.logger.log("main buffered : "+E.default.toString(t.buffered));var n=this._bufferedFrags.filter(function(e){return f.default.isBuffered(t,(e.startPTS+e.endPTS)/2)});n.push(e),this._bufferedFrags=n.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var r=this.stats;r.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=k.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=this.media,r=n&&f.default.isBuffered(n,n.currentTime)&&f.default.isBuffered(n,n.currentTime+.5);switch(e.details){case T.ErrorDetails.FRAG_LOAD_ERROR:case T.ErrorDetails.FRAG_LOAD_TIMEOUT:case T.ErrorDetails.KEY_LOAD_ERROR:case T.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry||r||t.autoLevel&&t.level){this.fragLoadError=i,t.loadCounter=0;var o=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);w.logger.warn("mediaController: frag loading failed, retry in "+o+" ms"),this.retryDate=performance.now()+o,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=k.FRAG_LOADING_WAITING_RETRY}else w.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=k.ERROR}break;case T.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(r?(this._reduceMaxBufferLength(t.duration),this.state=k.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=k.ERROR));break;case T.ErrorDetails.LEVEL_LOAD_ERROR:case T.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==k.ERROR&&(e.fatal?(this.state=k.ERROR,w.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==k.WAITING_LEVEL||(this.state=k.IDLE));break;case T.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==k.PARSING&&this.state!==k.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=k.IDLE):(w.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,w.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,i=r.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var a=e.seeking?n:this.startPosition,o=f.default.isBuffered(r,a),s=i.start(0);(n!==a||!o&&Math.abs(a-s)<t.maxSeekHole)&&(w.logger.log("target start position:"+a),o||(a=s,w.logger.log("target start position not buffered, seek to buffered.start(0) "+a)),w.logger.log("adjust currentTime from "+n+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var u=f.default.bufferInfo(e,n,0),l=!(e.paused||e.ended||0===e.buffered.length),c=n!==this.lastCurrentTime;if(c)this.stallReported&&(w.logger.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(l){var d=performance.now(),h=this.hls;if(this.stalled){var p=d-this.stalled,y=u.len,g=this.nudgeRetry||0;if(y<=.5&&p>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,w.logger.warn("playback stalling in low buffer @"+n),h.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y}));var m=u.nextStart,b=m-n;if(m&&b<t.maxSeekHole&&b>0){this.nudgeRetry=++g;var _=g*t.nudgeOffset;w.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+m+" + nudge "+_),e.currentTime=m+_,this.stalled=void 0,h.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+_-n})}}else if(y>.5&&p>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,w.logger.warn("playback stalling in high buffer @"+n),h.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y})),this.stalled=void 0,this.nudgeRetry=++g,g<t.nudgeMaxRetry){var E=e.currentTime,k=E+g*t.nudgeOffset;w.logger.log("adjust currentTime from "+E+" to "+k),e.currentTime=k,h.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else w.logger.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),h.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=d,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=k.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return f.default.isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=k.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,w.logger.log("main stream:"+t+"->"+e),this.hls.trigger(v.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(g.default);n.default=S},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,54:54,55:55}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(54),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.ERROR,l.default.SUBTITLE_TRACKS_UPDATED,l.default.SUBTITLE_TRACK_SWITCH,l.default.SUBTITLE_TRACK_LOADED,l.default.SUBTITLE_FRAG_PROCESSED));return n.config=e.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.currentTrackId=-1,n}return o(t,e),s(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})}},{key:"nextFrag",value:function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(l.default.FRAG_LOADING,{frag:e})}}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;d.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this.vttFragSNsProcessed[e.id],n=this.vttFragQueues[e.id],r=this.currentlyProcessing?this.currentlyProcessing.sn:-1,i=function(e){return t.indexOf(e.sn)>-1},a=function(e){return n.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){i(t)||t.sn===r||a(t)||(t.trackId=e.id,n.push(t))}),this.nextFrag()}}]),t}(f.default);n.default=h},{34:34,35:35,54:54}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e(35),c=r(l),f=e(34),d=r(f),h=e(54),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n}return o(t,e),u(t,[{key:"_onTextTracksChanged",value:function(){if(this.media){for(var e=-1,t=s(this.media.textTracks),n=0;n<t.length;n++)"showing"===t[n].mode&&(e=n);this.subtitleTrack=e}}},{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.media.textTracks.addEventListener("change",this.trackChangeListener))}},{key:"onMediaDetaching",value:function(){this.media&&(this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.subtitles||[],r=!1;this.tracks=n,this.trackId=-1,this.hls.trigger(c.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.subtitleTrack=e.id,r=!0)})}},{key:"onTick",value:function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(h.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,h.logger.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(c.default.SUBTITLE_TRACK_SWITCH,{id:e});var n=t.details;void 0!==n&&!0!==n.live||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(d.default);n.default=p},{34:34,35:35,54:54}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function u(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function l(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=e(35),d=r(f),h=e(34),p=r(h),v=e(49),y=r(v),g=e(58),m=r(g),b=e(54),_=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MEDIA_ATTACHING,d.default.MEDIA_DETACHING,d.default.FRAG_PARSING_USERDATA,d.default.MANIFEST_LOADING,d.default.MANIFEST_LOADED,d.default.FRAG_LOADED,d.default.LEVEL_SWITCHING,d.default.INIT_PTS_FOUND));if(n.hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var r=n,o=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},u={newCue:function(e,t,n){if(!r.textTrack1){var i=r.getExistingTrack("1");if(i)r.textTrack1=i,s(r.textTrack1),o(r.textTrack1,r.media);else{var a=r.createTextTrack("captions",r.config.captionsTextTrack1Label,r.config.captionsTextTrack1LanguageCode);a&&(a.textTrack1=!0,r.textTrack1=a)}}r.addCues("textTrack1",e,t,n)}},l={newCue:function(e,t,n){if(!r.textTrack2){var i=r.getExistingTrack("2");if(i)r.textTrack2=i,s(r.textTrack2),o(r.textTrack2,r.media);else{var a=r.createTextTrack("captions",r.config.captionsTextTrack2Label,r.config.captionsTextTrack1LanguageCode);a&&(a.textTrack2=!0,r.textTrack2=a)}}r.addCues("textTrack2",e,t,n)}};n.cea608Parser=new y.default(0,u,l)}return n}return o(t,e),c(t,[{key:"addCues",value:function(e,t,n,r){for(var i=this.cueRanges,a=!1,o=i.length;o--;){var s=i[o],u=l(s[0],s[1],t,n);if(u>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],n),a=!0,u/(n-t)>.5))return}a||i.push([t,n]),this.Cues.newCue(this[e],t,n,r)}},{key:"onInitPtsFound",value:function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n],i="textTrack"+e;if(!0===r[i])return r}return null}},{key:"createTextTrack",value:function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)}},{key:"destroy",value:function(){p.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){s(this.textTrack1),s(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)s(t[n])}}},{key:"onManifestLoaded",value:function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,r){var i=void 0;if(r<n.length){var a=n[r];u(a,e)&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),i.mode=e.default?"showing":"hidden",t.textTracks.push(i)})}}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var t=e.frag,n=e.payload;if("main"===t.type){var r=t.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=this.vttCCs;a[t.cc]||(a[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var o=this.textTracks,s=this.hls;m.default.parse(n,this.initPTS,a,t.cc,function(e){var n=o[t.trackId];e.forEach(function(e){n.cues.getCueById(e.id)||n.addCue(e)}),s.trigger(d.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){b.logger.log("Failed to parse VTT cue: "+e),s.trigger(d.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(d.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}}},{key:"extractCea608Data",value:function(e){for(var t,n,r,i,a,o=31&e[0],s=2,u=[],l=0;l<o;l++)t=e[s++],n=127&e[s++],r=127&e[s++],i=0!=(4&t),a=3&t,0===n&&0===r||i&&0===a&&(u.push(n),u.push(r));return u}}]),t}(p.default);n.default=_},{34:34,35:35,49:49,54:54,58:58}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.subtle=t,this.aesIV=n}return i(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();n.default=a},{}],18:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],d=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)d[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,e[h]=y,t[y]=h;var g=d[h],m=d[g],b=d[m],_=257*d[y]^16843008*y;r[h]=_<<24|_>>>8,i[h]=_<<16|_>>>16,a[h]=_<<8|_>>>24,o[h]=_,_=16843009*b^65537*m^257*g^16843008*h,u[y]=_<<24|_>>>8,l[y]=_<<16|_>>>16,c[y]=_<<8|_>>>24,f[y]=_,h?(h=g^d[d[d[b^g]]],p^=d[d[p]]):h=p=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),c=this.sBox,f=this.rcon,d=this.invSubMix,h=d[0],p=d[1],v=d[2],y=d[3],g=void 0,m=void 0;for(o=0;o<a;o++)o<i?g=u[o]=t[o]:(m=g,o%i==0?(m=m<<8|m>>>24,m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m],m^=f[o/i|0]<<24):i>6&&o%i==4&&(m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m]),u[o]=g=(u[o-i]^m)>>>0);for(s=0;s<a;s++)o=a-s,m=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?m:h[c[m>>>24]]^p[c[m>>>16&255]]^v[c[m>>>8&255]]^y[c[255&m]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,n){for(var r,i,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,u=this.invSubMix,l=u[0],c=u[1],f=u[2],d=u[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],v=h[1],y=h[2],g=h[3],m=new Int32Array(e),b=new Int32Array(m.length),_=void 0,E=void 0,T=void 0,w=void 0,k=void 0,S=void 0,O=void 0,A=void 0,P=void 0,R=void 0,D=void 0,x=void 0,L=this.networkToHostOrderSwap;t<m.length;){for(P=L(m[t]),R=L(m[t+1]),D=L(m[t+2]),x=L(m[t+3]),k=P^o[0],S=x^o[1],O=D^o[2],A=R^o[3],r=4,i=1;i<a;i++)_=l[k>>>24]^c[S>>16&255]^f[O>>8&255]^d[255&A]^o[r],E=l[S>>>24]^c[O>>16&255]^f[A>>8&255]^d[255&k]^o[r+1],T=l[O>>>24]^c[A>>16&255]^f[k>>8&255]^d[255&S]^o[r+2],w=l[A>>>24]^c[k>>16&255]^f[S>>8&255]^d[255&O]^o[r+3],k=_,S=E,O=T,A=w,r+=4;_=s[k>>>24]<<24^s[S>>16&255]<<16^s[O>>8&255]<<8^s[255&A]^o[r],E=s[S>>>24]<<24^s[O>>16&255]<<16^s[A>>8&255]<<8^s[255&k]^o[r+1],T=s[O>>>24]<<24^s[A>>16&255]<<16^s[k>>8&255]<<8^s[255&S]^o[r+2],w=s[A>>>24]<<24^s[k>>16&255]<<16^s[S>>8&255]<<8^s[255&O]^o[r+3],r+=3,b[t]=L(_^p),b[t+1]=L(w^v),b[t+2]=L(T^y),b[t+3]=L(E^g),p=P,v=R,y=D,g=x,t+=4}return b.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();n.default=a},{}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(17),s=r(o),u=e(20),l=r(u),c=e(18),f=r(c),d=e(33),h=e(54),p=function(){function e(t,n){i(this,e),this.observer=t,this.config=n,this.logEnabled=!0;try{var r=crypto||self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return a(e,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(e,t,n,r){var i=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(h.logger.log("JS AES decrypt"),this.logEnabled=!1);var a=this.decryptor;a||(this.decryptor=a=new f.default),a.expandKey(t),r(a.decrypt(e,0,n))}else{this.logEnabled&&(h.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new l.default(o,t)),this.fastAesKey.expandKey().then(function(a){new s.default(o,n).decrypt(e,a).catch(function(a){i.onWebCryptoError(a,e,t,n,r)}).then(function(e){r(e)})}).catch(function(a){i.onWebCryptoError(a,e,t,n,r)})}}},{key:"onWebCryptoError",value:function(e,t,n,r,i){this.config.enableSoftwareAES?(h.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(h.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();n.default=p},{17:17,18:18,20:20,33:33,54:54}],20:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.subtle=t,this.key=n}return i(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();n.default=a},{}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(22),s=r(o),u=e(54),l=e(27),c=r(l),f=function(){function e(t,n,r){i(this,e),this.observer=t,this.config=r,this.remuxer=n}return a(e,[{key:"resetInitSegment",value:function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,r){for(var i=this._audioTrack,a=c.default.getID3Data(e,0),o=90*c.default.getTimeStamp(a),l=0,f=o,d=e.length,h=a.length,p=[{pts:f,dts:f,data:a}];h<d-1;)if(s.default.isHeader(e,h)&&h+5<d){s.default.initTrackConfig(i,this.observer,e,h,i.manifestCodec);var v=s.default.appendFrame(i,e,h,o,l);if(!v){u.logger.log("Unable to parse AAC frame");break}h+=v.length,f=v.sample.pts,l++}else c.default.isHeader(e,h)?(a=c.default.getID3Data(e,h),p.push({pts:f,dts:f,data:a}),h+=a.length):h++;this.remuxer.remux(i,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,n,r)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,r=c.default.getID3Data(e,0);if(r&&void 0!==c.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(s.default.probe(e,t))return u.logger.log("ADTS sync word found !"),!0;return!1}}]),e}();n.default=f},{22:22,27:27,54:54}],22:[function(e,t,n){"use strict";var r=e(54),i=e(33),a={getAudioConfig:function(e,t,n,a){var o,s,u,l,c,f=navigator.userAgent.toLowerCase(),d=a,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return o=1+((192&t[n+2])>>>6),(s=(60&t[n+2])>>>2)>h.length-1?void e.trigger(Event.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(l=(1&t[n+2])<<2,l|=(192&t[n+3])>>>6,r.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+l),/firefox/i.test(f)?s>=6?(o=5,c=new Array(4),u=s-3):(o=2,c=new Array(2),u=s):-1!==f.indexOf("android")?(o=2,c=new Array(2),u=s):(o=5,c=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&s>=6?u=s-3:((a&&-1!==a.indexOf("mp4a.40.2")&&s>=6&&1===l||!a&&1===l)&&(o=2,c=new Array(2)),u=s)),c[0]=o<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=l<<3,5===o&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[s],channelCount:l,codec:"mp4a.40."+o,manifestCodec:d})},isHeaderPattern:function(e,t){return 255===e[t]&&240==(246&e[t+1])},getHeaderLength:function(e,t){return 1&e[t+1]?7:9},getFullFrameLength:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.getHeaderLength(e,t),r=n;t+5<e.length&&(r=this.getFullFrameLength(e,t));var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1},initTrackConfig:function(e,t,n,i,a){if(!e.samplerate){var o=this.getAudioConfig(t,n,i,a);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,r.logger.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}},getFrameDuration:function(e){return 9216e4/e},appendFrame:function(e,t,n,r,i){var a=this.getFrameDuration(e.samplerate),o=this.parseFrameHeader(t,n,r,i,a);if(o){var s=o.stamp,u=o.headerLength,l=o.frameLength,c={unit:t.subarray(n+u,n+u+l),pts:s,dts:s};return e.samples.push(c),e.len+=l,{sample:c,length:l+u}}},parseFrameHeader:function(e,t,n,r,i){var a,o,s,u=e.length;if(a=this.getHeaderLength(e,t),o=this.getFullFrameLength(e,t),(o-=a)>0&&t+a+o<=u)return s=n+r*i,{headerLength:a,frameLength:o,stamp:s}}};t.exports=a},{33:33,54:54}],23:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(35),s=r(o),u=e(33),l=e(19),c=r(l),f=e(21),d=r(f),h=e(29),p=r(h),v=e(32),y=r(v),g=e(28),m=r(g),b=e(45),_=r(b),E=e(46),T=r(E),w=function(){function e(t,n,r,a){i(this,e),this.observer=t,this.typeSupported=n,this.config=r,this.vendor=a}return a(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,n,r,i,a,o,u,l,f,d,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new c.default(this.observer,this.config));var v,y=this;try{v=performance.now()}catch(e){v=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var c;try{c=performance.now()}catch(e){c=Date.now()}y.observer.trigger(s.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:c}}),y.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,i,a,o,u,l,f,d,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,i,a,o,u,l,f,d,h)}},{key:"pushDecrypted",value:function(e,t,n,r,i,a,o,l,c,f,h,v){var g=this.demuxer;if(!g||o&&!this.probe(e)){for(var b=this.observer,E=this.typeSupported,w=this.config,k=[{demux:d.default,remux:_.default},{demux:m.default,remux:_.default},{demux:y.default,remux:_.default},{demux:p.default,remux:T.default}],S=0,O=k.length;S<O;S++){var A=k[S],P=A.demux.probe;if(P(e)){var R=this.remuxer=new A.remux(b,w,E,this.vendor);g=new A.demux(b,R,w,E),this.probe=P;break}}if(!g)return void b.trigger(s.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=g}var D=this.remuxer;(o||l)&&(g.resetInitSegment(n,r,i,f),D.resetInitSegment()),o&&(g.resetTimeStamp(v),D.resetTimeStamp(v)),"function"==typeof g.setDecryptData&&g.setDecryptData(t),g.append(e,a,c,h)}}]),e}();n.default=w},{19:19,21:21,28:28,29:29,32:32,33:33,35:35,45:45,46:46}],24:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(23),a=r(i),o=e(35),s=r(o),u=e(54),l=e(1),c=r(l),f=function(e){var t=new c.default;t.trigger=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(r){var i=r.data;switch(i.cmd){case"init":var o=JSON.parse(i.config);e.demuxer=new a.default(t,i.typeSupported,o,i.vendor);try{(0,u.enableLogs)(!0===o.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS)}}),t.on(s.default.FRAG_DECRYPTED,n),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(s.default.FRAG_PARSED,n),t.on(s.default.ERROR,n),t.on(s.default.FRAG_PARSING_METADATA,n),t.on(s.default.FRAG_PARSING_USERDATA,n),t.on(s.default.INIT_PTS_FOUND,n),t.on(s.default.FRAG_PARSING_DATA,function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)})};n.default=f},{1:1,23:23,35:35,54:54}],25:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(35),s=r(o),u=e(23),l=r(u),c=e(24),f=r(c),d=e(54),h=e(33),p=e(1),v=r(p),y=function(){function t(n,r){i(this,t),this.hls=n,this.id=r;var a=this.observer=new v.default,o=n.config;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))};var u=function(e,t){t=t||{},t.frag=this.frag,t.id=this.id,n.trigger(e,t)}.bind(this);a.on(s.default.FRAG_DECRYPTED,u),a.on(s.default.FRAG_PARSING_INIT_SEGMENT,u),a.on(s.default.FRAG_PARSING_DATA,u),a.on(s.default.FRAG_PARSED,u),a.on(s.default.ERROR,u),a.on(s.default.FRAG_PARSING_METADATA,u),a.on(s.default.FRAG_PARSING_USERDATA,u),a.on(s.default.INIT_PTS_FOUND,u);var c={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(o.enableWorker&&"undefined"!=typeof Worker){d.logger.log("demuxing in webworker");var y=void 0;try{var g=e(3);y=this.w=g(f.default),this.onwmsg=this.onWorkerMessage.bind(this),y.addEventListener("message",this.onwmsg),y.onerror=function(e){n.trigger(s.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},y.postMessage({cmd:"init",typeSupported:c,vendor:p,id:r,config:JSON.stringify(o)})}catch(e){d.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),y&&URL.revokeObjectURL(y.objectURL),this.demuxer=new l.default(a,c,o,p),this.w=void 0}}else this.demuxer=new l.default(a,c,o,p)}return a(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,n,r,i,a,o,s){var u=this.w,l=isNaN(i.startDTS)?i.start:i.startDTS,c=i.decryptdata,f=this.frag,h=!(f&&i.cc===f.cc),p=!(f&&i.level===f.level),v=f&&i.sn===f.sn+1,y=!p&&v;if(h&&d.logger.log(this.id+":discontinuity detected"),p&&d.logger.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:l,discontinuity:h,trackSwitch:p,contiguous:y,duration:a,accurateTimeOffset:o,defaultInitPTS:s},[e]);else{var g=this.demuxer;g&&g.push(e,c,t,n,r,l,h,p,y,a,o,s)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}}]),t}();n.default=y},{1:1,23:23,24:24,3:3,33:33,35:35,54:54}],26:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(54),o=function(){function e(t){r(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return i(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,n,r=8,i=8;for(t=0;t<e;t++)0!==i&&(n=this.readEG(),i=(r+n+256)%256),r=0===i?r:i}},{key:"readSPS",value:function(){var e,t,n,r,i,a,o,s=0,u=0,l=0,c=0,f=this.readUByte.bind(this),d=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),y=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(f(),e=f(),d(5),v(3),f(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&&v(1),g(),g(),v(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&m(o<6?16:64)}g();var _=h();if(0===_)h();else if(1===_)for(v(1),y(),y(),t=h(),o=0;o<t;o++)y();g(),v(1),n=h(),r=h(),i=d(1),0===i&&v(1),v(1),p()&&(s=h(),u=h(),l=h(),c=h());var E=[1,1];if(p()&&p()){switch(f()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[f()<<8|f(),f()<<8|f()]}}return{width:Math.ceil(16*(n+1)-2*s-2*u),height:(2-i)*(r+1)*16-(i?2:4)*(l+c),pixelRatio:E}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();n.default=o},{54:54}],27:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",value:function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"getID3Data",value:function(t,n){for(var r=n,i=0;e.isHeader(t,n);){i+=10;i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i}if(i>0)return t.subarray(r,r+i)}},{key:"_readSize",value:function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]}},{key:"getTimeStamp",value:function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}}},{key:"isTimeStampFrame",value:function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}},{key:"_getFrameData",value:function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}}},{key:"getID3Frames",value:function(t){for(var n=0,r=[];e.isHeader(t,n);){var i=e._readSize(t,n+6);n+=10;for(var a=n+i;n+8<a;){var o=e._getFrameData(t.subarray(n)),s=e._decodeFrame(o);s&&r.push(s),n+=o.size+10}e.isFooter(t,n)&&(n+=10)}return r}},{key:"_decodeFrame",value:function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0}},{key:"_readTimeStamp",value:function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}}},{key:"_decodePrivFrame",value:function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}}},{key:"_decodeTextFrame",value:function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}}},{key:"_decodeURLFrame",value:function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}}},{key:"_utf8ArrayToStr",value:function(e){for(var t=void 0,n=void 0,r="",i=0,a=e.length;i<a;){var o=e[i++];switch(o>>4){case 0:return r;case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(o);break;case 12:case 13:t=e[i++],r+=String.fromCharCode((31&o)<<6|63&t);break;case 14:t=e[i++],n=e[i++],r+=String.fromCharCode((15&o)<<12|(63&t)<<6|(63&n)<<0)}}return r}}]),e}();n.default=a},{}],28:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(27),s=r(o),u=e(54),l=e(30),c=r(l),f=function(){function e(t,n,r){i(this,e),this.observer=t,this.config=r,this.remuxer=n}return a(e,[{key:"resetInitSegment",value:function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,r){for(var i=s.default.getID3Data(e,0),a=90*s.default.getTimeStamp(i),o=i.length,u=e.length,l=0,f=0,d=this._audioTrack,h=[{pts:a,dts:a,data:i}];o<u;)if(c.default.isHeader(e,o)){var p=c.default.appendFrame(d,e,o,a,l);if(!p)break;o+=p.length,f=p.sample.pts,l++}else s.default.isHeader(e,o)?(i=s.default.getID3Data(e,o),h.push({pts:f,dts:f,data:i}),o+=i.length):o++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,r)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,r=s.default.getID3Data(e,0);if(r&&void 0!==s.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(c.default.probe(e,t))return u.logger.log("MPEG Audio sync word found !"),!0;return!1}}]),e}();n.default=f},{27:27,30:30,54:54}],29:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(35),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=Math.pow(2,32)-1,u=function(){function e(t,n){r(this,e),this.observer=t,this.remuxer=n}return i(e,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(t,n,r,i){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t),s={};a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:i?t:null}),a.video&&(s.video={container:"video/mp4",codec:r,initSegment:i?t:null}),this.observer.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)}},{key:"append",value:function(t,n,r,i){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),a=this.initData);var s=void 0,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(a,t);this.initPTS=u=l-n,this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(a,t,u),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,r,i,t)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){if(t.length>=8){return["moof","ftyp","styp"].indexOf(e.bin2str(t.subarray(4,8)))>=0}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n}},{key:"writeUint32",value:function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}},{key:"findBox",value:function(t,n){var r,i,a,o,s,u,l,c=[];if(t.data?(u=t.start,o=t.end,t=t.data):(u=0,o=t.byteLength),!n.length)return null;for(r=u;r<o;)i=e.readUint32(t,r),a=e.bin2str(t.subarray(r+4,r+8)),l=i>1?r+i:o,a===n[0]&&(1===n.length?c.push({data:t,start:r+8,end:l}):(s=e.findBox({data:t,start:r+8,end:l},n.slice(1)),s.length&&(c=c.concat(s)))),r=l;return c}},{key:"parseInitSegment",value:function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var r=e.findBox(t,["tkhd"])[0];if(r){var i=r.data[r.start],a=0===i?12:20,o=e.readUint32(r,a),s=e.findBox(t,["mdia","mdhd"])[0];if(s){i=s.data[s.start],a=0===i?12:20;var u=e.readUint32(s,a),l=e.findBox(t,["mdia","hdlr"])[0];if(l){var c=e.bin2str(l.data.subarray(l.start+8,l.start+12)),f={soun:"audio",vide:"video"}[c];f&&(n[o]={timescale:u,type:f},n[f]={timescale:u,id:o})}}}}),n}},{key:"getStartDTS",value:function(t,n){var r,i,a;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var i,a,o;return i=e.readUint32(r,4),a=t[i].timescale||9e4,o=e.findBox(n,["tfdt"]).map(function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0],(o=o||1/0)/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0}},{key:"offsetStartDTS",value:function(t,n,r){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var a=e.readUint32(i,4),o=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*o);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*o;var a=Math.floor(i/(s+1)),u=Math.floor(i%(s+1));e.writeUint32(t,4,a),e.writeUint32(t,8,u)}})})})}}]),e}();n.default=u},{35:35}],30:[function(e,t,n){"use strict";var r={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=10368e4/a.sampleRate,s=r+i*o,u={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(u),e.len+=a.frameLength,{sample:u,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,a=e[t+2]>>4&15,o=e[t+2]>>2&3,s=!!(2&e[t+2]);if(1!==n&&0!==a&&15!==a&&3!==o){var u=3===n?3-i:3===i?3:4,l=1e3*r.BitratesMap[14*u+a-1],c=3===n?0:2===n?1:2,f=r.SamplingRateMap[3*c+o],d=s?1:0;return{sampleRate:f,channelCount:e[t+3]>>6==3?1:2,frameLength:3===i?(3===n?12:6)*l/f+d<<2:(3===n?144:72)*l/f+d|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.exports=r},{}],31:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(19),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i,a){r(this,e),this.decryptdata=i,this.discardEPB=a,this.decrypter=new o.default(t,n)}return i(e,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(e,t,n,r){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),i.set(a,16),r||s.decryptAacSamples(e,t+1,n)})}},{key:"decryptAacSamples",value:function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e}},{key:"decryptAvcSample",value:function(e,t,n,r,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(e,t,n+1,r)})}},{key:"decryptAvcSamples",value:function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}}}]),e}();n.default=s},{19:19}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(22),s=r(o),u=e(30),l=r(u),c=e(35),f=r(c),d=e(26),h=r(d),p=e(31),v=r(p),y=e(54),g=e(33),m=function(){function e(t,n,r,a){i(this,e),this.observer=t,this.config=r,this.typeSupported=a,this.remuxer=n,this.sampleAes=null}return a(e,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new v.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:r,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,n,r){var i,a,o,s,u,l=e.length,c=!1;this.contiguous=n;var d=this.pmtParsed,h=this._avcTrack,p=this._audioTrack,v=this._id3Track,m=h.id,b=p.id,_=v.id,E=this._pmtId,T=h.pesData,w=p.pesData,k=v.pesData,S=this._parsePAT,O=this._parsePMT,A=this._parsePES,P=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),x=this._parseID3PES.bind(this);for(l-=l%188,i=0;i<l;i+=188)if(71===e[i]){if(a=!!(64&e[i+1]),o=((31&e[i+1])<<8)+e[i+2],(48&e[i+3])>>4>1){if((s=i+5+e[i+4])===i+188)continue}else s=i+4;switch(o){case m:a&&(T&&(u=A(T))&&P(u,!1),T={data:[],size:0}),T&&(T.data.push(e.subarray(s,i+188)),T.size+=i+188-s);break;case b:a&&(w&&(u=A(w))&&(p.isAAC?R(u):D(u)),w={data:[],size:0}),w&&(w.data.push(e.subarray(s,i+188)),w.size+=i+188-s);break;case _:a&&(k&&(u=A(k))&&x(u),k={data:[],size:0}),k&&(k.data.push(e.subarray(s,i+188)),k.size+=i+188-s);break;case 0:a&&(s+=e[s]+1),E=this._pmtId=S(e,s);break;case E:a&&(s+=e[s]+1);var L=O(e,s,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);m=L.avc,m>0&&(h.id=m),b=L.audio,b>0&&(p.id=b,p.isAAC=L.isAAC),_=L.id3,_>0&&(v.id=_),c&&!d&&(y.logger.log("reparse from beginning"),c=!1,i=-188),d=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(f.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(u=A(T))?(P(u,!0),h.pesData=null):h.pesData=T,w&&(u=A(w))?(p.isAAC?R(u):D(u),p.pesData=null):(w&&w.size&&y.logger.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=w),k&&(u=A(k))?(x(u),v.pesData=null):v.pesData=k,null==this.sampleAes?this.remuxer.remux(p,h,v,this._txtTrack,t,n,r):this.decryptAndRemux(p,h,v,this._txtTrack,t,n,r)}},{key:"decryptAndRemux",value:function(e,t,n,r,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,a,o)})}else this.decryptAndRemuxAvc(e,t,n,r,i,a,o)}},{key:"decryptAndRemuxAvc",value:function(e,t,n,r,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,a,o)})}else this.remuxer.remux(e,t,n,r,i,a,o)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,n,r){var i,a,o,s,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;t<a;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){y.logger.log("unkown stream type:"+e[t]);break}case 15:-1===u.audio&&(u.audio=s);break;case 21:-1===u.id3&&(u.id3=s);break;case 219:if(!r){y.logger.log("unkown stream type:"+e[t]);break}case 27:-1===u.avc&&(u.avc=s);break;case 3:case 4:n?-1===u.audio&&(u.audio=s,u.isAAC=!1):y.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:y.logger.warn("HEVC stream type found, not supported for now");break;default:y.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return u}},{key:"_parsePES",value:function(e){var t,n,r,i,a,o,s,u,l=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var f=new Uint8Array(c[0].length+c[1].length);f.set(c[0]),f.set(c[1],c[0].length),c[0]=f,c.splice(1,1)}if(t=c[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;n=t[7],192&n&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,o>4294967295&&(o-=8589934592),64&n?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,s>4294967295&&(s-=8589934592),o-s>54e5&&(y.logger.warn(Math.round((o-s)/9e4)+"s delta between PTS and DTS, align them"),o=s)):s=o),i=t[8],u=i+9,e.size-=u,a=new Uint8Array(e.size);for(var d=0,h=c.length;d<h;d++){t=c[d];var p=t.byteLength;if(u){if(u>p){u-=p;continue}t=t.subarray(u),p-=u,u=0}a.set(t,l),l+=p}return r&&(r-=i+3),{data:a,pts:o,dts:s,len:r}}return null}},{key:"pushAccesUnit",value:function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&y.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(e,t){var n,r,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),u=this.avcSample,l=!1;e.data=null,s.forEach(function(t){switch(t.type){case 1:r=!0,u.frame=!0;var s=t.data;if(l&&s.length>4){var c=new h.default(s).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(u.key=!0)}break;case 5:r=!0,u||(u=a.avcSample=a._createAVCSample(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,n=new h.default(a.discardEPB(t.data)),n.readUByte();for(var f=0,d=0,p=!1,v=0;!p&&n.bytesAvailable>1;){f=0;do{v=n.readUByte(),f+=v}while(255===v);d=0;do{v=n.readUByte(),d+=v}while(255===v);if(4===f&&0!==n.bytesAvailable){p=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var y=n.readUByte(),g=n.readUByte(),m=31&y,b=[y,g];for(i=0;i<m;i++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}}}}else if(d<n.bytesAvailable)for(i=0;i<d;i++)n.readUByte()}break;case 7:if(r=!0,l=!0,!o.sps){n=new h.default(t.data);var _=n.readSPS();o.width=_.width,o.height=_.height,o.pixelRatio=_.pixelRatio,o.sps=[t.data],o.duration=a._duration;var E=t.data.subarray(1,4),T="avc1.";for(i=0;i<3;i++){var w=E[i].toString(16);w.length<2&&(w="0"+w),T+=w}o.codec=T}break;case 8:r=!0,o.pps||(o.pps=[t.data]);break;case 9:r=!1,u&&a.pushAccesUnit(u,o),u=a.avcSample=a._createAVCSample(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}if(u&&r){u.units.push(t)}}),t&&u&&(this.pushAccesUnit(u,o),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}}},{key:"_insertSampleInOrder",value:function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack,r=n.samples;e=r[r.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,n,r,i,a,o=0,s=e.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,f=[],d=-1;for(-1===l&&(d=0,a=31&e[0],l=0,o=1);o<s;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){if(d>=0)r={data:e.subarray(d,o-l-1),type:a},f.push(r);else{var h=this._getLastNalUnit();if(h&&(c&&o<=4-c&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),(n=o-l-1)>0)){var p=new Uint8Array(h.data.byteLength+n);p.set(h.data,0),p.set(e.subarray(0,n),h.data.byteLength),h.data=p}}o<s?(i=31&e[o],d=o,a=i,l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(r={data:e.subarray(d,s),type:a,state:l},f.push(r)),0===f.length){var v=this._getLastNalUnit();if(v){var y=new Uint8Array(v.data.byteLength+e.byteLength);y.set(v.data,0),y.set(e,v.data.byteLength),v.data=y}}return u.naluState=l,f}},{key:"discardEPB",value:function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n}},{key:"_parseAACPES",value:function(e){var t,n,r,i,a,o=this._audioTrack,u=e.data,l=e.pts,c=this.aacOverFlow,d=this.aacLastPTS;if(c){var h=new Uint8Array(c.byteLength+u.byteLength);h.set(c,0),h.set(u,c.byteLength),u=h}for(r=0,a=u.length;r<a-1&&!s.default.isHeader(u,r);r++);if(r){var p,v;if(r<a-1?(p="AAC PES did not start with ADTS header,offset:"+r,v=!1):(p="no ADTS header found in AAC PES",v=!0),y.logger.warn("parsing error:"+p),this.observer.trigger(f.default.ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:p}),v)return}if(s.default.initTrackConfig(o,this.observer,u,r,this.audioCodec),n=0,t=s.default.getFrameDuration(o.samplerate),c&&d){var m=d+t;Math.abs(m-l)>1&&(y.logger.log("AAC: align PTS for overlapping frames by "+Math.round((m-l)/90)),l=m)}for(;r<a;)if(s.default.isHeader(u,r)&&r+5<a){var b=s.default.appendFrame(o,u,r,l,n);if(!b)break;r+=b.length,i=b.sample.pts,n++}else r++;c=r<a?u.subarray(r,a):null,this.aacOverFlow=c,this.aacLastPTS=i}},{key:"_parseMPEGPES",value:function(e){for(var t=e.data,n=t.length,r=0,i=0,a=e.pts;i<n;)if(l.default.isHeader(t,i)){var o=l.default.appendFrame(this._audioTrack,t,i,a,r);if(!o)break;i+=o.length,r++}else i++}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();n.default=m},{22:22,26:26,30:30,31:31,33:33,35:35,54:54}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},n.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],34:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(54),s=e(33),u=e(35),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(){function e(t){r(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return a(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===i(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var n=function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)};try{n.call(this,e,t).call()}catch(t){o.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();n.default=c},{33:33,35:35,54:54}],35:[function(e,t,n){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],36:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();n.default=a},{}],37:[function(e,t,n){"use strict";var r={isBuffered:function(e,t){if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0;return!1},bufferInfo:function(e,t,n){if(e){var r,i=e.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,t,n)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var r,i,a,o,s,u=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var l=u.length;if(l){var c=u[l-1].end;e[s].start-c<n?e[s].end>c&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,r=0,i=a=t;s<u.length;s++){var f=u[s].start,d=u[s].end;if(t+n>=f&&t<d)i=f,a=d,r=a-t;else if(t+n<f){o=f;break}}return{len:r,start:i,end:a,nextStart:o}}};t.exports=r},{}],38:[function(e,t,n){"use strict";var r=e(54),i={mergeDetails:function(e,t){var n,a=Math.max(e.startSN,t.startSN)-t.startSN,o=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,u=e.fragments,l=t.fragments,c=0;if(o<a)return void(t.PTSKnown=!1);for(var f=a;f<=o;f++){var d=u[s+f],h=l[f];h&&d&&(c=d.cc-h.cc,isNaN(d.startPTS)||(h.start=h.startPTS=d.startPTS,h.endPTS=d.endPTS,h.duration=d.duration,h.backtracked=d.backtracked,h.dropped=d.dropped,n=h))}if(c)for(r.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<l.length;f++)l[f].cc+=c;if(n)i.updateFragPTSDTS(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(s>=0&&s<u.length){var p=u[s].start;for(f=0;f<l.length;f++)l[f].start+=p}t.PTSKnown=e.PTSKnown},updateFragPTSDTS:function(e,t,n,r,a,o){var s=n;if(!isNaN(t.startPTS)){var u=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=u:t.deltaPTS=Math.max(u,t.deltaPTS),s=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),a=Math.min(a,t.startDTS),o=Math.max(o,t.endDTS)}var l=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=s,t.endPTS=r,t.startDTS=a,t.endDTS=o,t.duration=r-n;var c=t.sn;if(!e||c<e.startSN||c>e.endSN)return 0;var f,d,h;for(f=c-e.startSN,d=e.fragments,t=d[f],h=f;h>0;h--)i.updatePTS(d,h,h-1);for(h=f;h<d.length-1;h++)i.updatePTS(d,h,h+1);return e.PTSKnown=!0,l},updatePTS:function(e,t,n){var i=e[t],a=e[n],o=a.startPTS;isNaN(o)?a.start=n>t?i.start+i.duration:Math.max(i.start-a.duration,0):n>t?(i.duration=o-i.start,i.duration<0&&r.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-o,a.duration<0&&r.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=i},{54:54}],39:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(2),s=r(o),u=e(35),l=r(u),c=e(33),f=e(43),d=r(f),h=e(41),p=r(h),v=e(42),y=r(v),g=e(13),m=r(g),b=e(12),_=r(b),E=e(11),T=r(E),w=e(54),k=e(1),S=r(k),O=e(4),A=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var r=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in r)a in n||(n[a]=r[a]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,w.enableLogs)(n.debug),this.config=n,this._autoLevelCapping=-1;var o=this.observer=new S.default;o.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e,e].concat(n))},o.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.removeListener.apply(o,[e].concat(n))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var s=this.abrController=new n.abrController(this),u=new n.bufferController(this),l=new n.capLevelController(this),c=new n.fpsController(this),f=new d.default(this),h=new p.default(this),v=new y.default(this),g=new T.default(this),b=this.levelController=new _.default(this),E=this.streamController=new m.default(this),k=[b,E],O=n.audioStreamController;O&&k.push(new O(this)),this.networkControllers=k;var A=[f,h,v,s,u,l,c,g];if(O=n.audioTrackController){var P=new O(this);this.audioTrackController=P,A.push(P)}if(O=n.subtitleTrackController){var R=new O(this);this.subtitleTrackController=R,A.push(R)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&A.push(new e(t))}),this.coreComponents=A}return a(e,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return n&&r}},{key:"version",get:function(){return"0.7.10"}},{key:"Events",get:function(){return l.default}},{key:"ErrorTypes",get:function(){return c.ErrorTypes}},{key:"ErrorDetails",get:function(){return c.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:O.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),a(e,[{key:"destroy",value:function(){w.logger.log("destroy"),this.trigger(l.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){w.logger.log("attachMedia"),this.media=e,this.trigger(l.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){w.logger.log("detachMedia"),this.trigger(l.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=s.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),w.logger.log("loadSource:"+e),this.url=e,this.trigger(l.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;w.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})}},{key:"stopLoad",value:function(){w.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){w.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){w.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){w.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){w.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){w.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){w.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){w.logger.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){w.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,n=e.config.minAutoBitrate,r=t?t.length:0,i=0;i<r;i++){if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>n)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,n=e.autoLevelCapping;return-1===n&&t&&t.length?t.length-1:n}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();n.default=A},{1:1,11:11,12:12,13:13,2:2,33:33,35:35,4:4,41:41,42:42,43:43,54:54}],40:[function(e,t,n){"use strict";t.exports=e(39).default},{39:39}],41:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(33),h=e(54),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING));return n.loaders={},n}return o(t,e),s(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=this.hls.config;t.loaded=0,r&&(h.logger.warn("abort previous fragment loader for type:"+n),r.abort()),r=this.loaders[n]=t.loader=void 0!==i.fLoader?new i.fLoader(i):new i.loader(i);var a=void 0,o=void 0,s=void 0;a={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,l=t.byteRangeEndOffset;isNaN(u)||isNaN(l)||(a.rangeStart=u,a.rangeEnd=l),o={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},r.load(a,o,s)}},{key:"loadsuccess",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})}},{key:"loaderror",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})}},{key:"loadtimeout",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})}},{key:"loadprogress",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.frag;i.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})}}]),t}(f.default);n.default=p},{33:33,34:34,35:35,54:54}],42:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(35),l=r(u),c=e(34),f=r(c),d=e(33),h=e(54),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},f.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;r&&(h.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var s=void 0,u=void 0,c=void 0;s={url:a,frag:t,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,u,c)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(l.default.KEY_LOADED,{frag:r})}},{key:"loaderror",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})}},{key:"loadtimeout",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})}}]),t}(f.default);n.default=p},{33:33,34:34,35:35,54:54}],43:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(2),l=r(u),c=e(35),f=r(c),d=e(34),h=r(d),p=e(33),v=e(47),y=r(v),g=e(54),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,b=/#EXT-X-MEDIA:(.*)/g,_=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),E=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,T=function(){function e(){o(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return s(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=l.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),w=function(){function e(){o(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return s(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&(n=new T,n.method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=l.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),k=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f.default.MANIFEST_LOADING,f.default.LEVEL_LOADING,f.default.AUDIO_TRACK_LOADING,f.default.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return a(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var n=this.loaders[t.type];if(n){var r=n.context;if(r&&r.url===e)return void g.logger.trace("playlist request ongoing");g.logger.warn("abort previous loader for type:"+t.type),n.abort()}var i=this.hls.config,a=void 0,o=void 0,s=void 0,u=void 0;"manifest"===t.type?(a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeout):(a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeout,g.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader=void 0!==i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var l=void 0,c=void 0;l={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:u},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,l,c)}},{key:"resolve",value:function(e,t){return l.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var n=[],r=void 0;for(m.lastIndex=0;null!=(r=m.exec(e));){var i={},a=i.attrs=new y.default(r[1]);i.url=this.resolve(r[2],t);var o=a.decimalResolution("RESOLUTION");o&&(i.width=o.width,i.height=o.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME;var s=a.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var l=s[u];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?i.videoCodec=l:i.audioCodec=l}}n.push(i)}return n}},{key:"parseMasterPlaylistMedia",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=void 0,a=[],o=0;for(b.lastIndex=0;null!=(i=b.exec(e));){var s={},u=new y.default(i[1]);u.TYPE===n&&(s.groupId=u["GROUP-ID"],s.name=u.NAME,s.type=n,s.default="YES"===u.DEFAULT,s.autoselect="YES"===u.AUTOSELECT,s.forced="YES"===u.FORCED,u.URI&&(s.url=this.resolve(u.URI,t)),s.lang=u.LANGUAGE,s.name||(s.name=s.lang),r&&(s.audioCodec=r),s.id=o++,a.push(s))}return a}},{key:"avc1toavcoti",value:function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,n,r){var i,a,o=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new T,c=0,f=null,d=new w;for(_.lastIndex=0;null!==(i=_.exec(e));){var h=i[1];if(h){d.duration=parseFloat(h);var p=(" "+i[2]).slice(1);d.title=p||null,d.tagList.push(p?["INF",h,p]:["INF",h])}else if(i[3]){if(!isNaN(d.duration)){var v=o++;d.type=r,d.start=s,d.levelkey=l,d.sn=v,d.level=n,d.cc=c,d.baseurl=t,d.relurl=(" "+i[3]).slice(1),u.fragments.push(d),f=d,s+=d.duration,d=new w}}else if(i[4]){if(d.rawByteRange=(" "+i[4]).slice(1),f){var m=f.byteRangeEndOffset;m&&(d.lastByteRangeEndOffset=m)}}else if(i[5])d.rawProgramDateTime=(" "+i[5]).slice(1),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]);else{for(i=i[0].match(E),a=1;a<i.length&&void 0===i[a];a++);var b=(" "+i[a+1]).slice(1),k=(" "+i[a+2]).slice(1);switch(i[a]){case"#":d.tagList.push(k?[b,k]:[b]);break;case"PLAYLIST-TYPE":u.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(b);break;case"TARGETDURATION":u.targetduration=parseFloat(b);break;case"VERSION":u.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(b);break;case"KEY":var S=b,O=new y.default(S),A=O.enumeratedString("METHOD"),P=O.URI,R=O.hexadecimalInteger("IV");A&&(l=new T,P&&["AES-128","SAMPLE-AES"].indexOf(A)>=0&&(l.method=A,l.baseuri=t,l.reluri=P,l.key=null,l.iv=R));break;case"START":var D=b,x=new y.default(D),L=x.decimalFloatingPoint("TIME-OFFSET");isNaN(L)||(u.startTimeOffset=L);break;case"MAP":var I=new y.default(b);d.relurl=I.URI,d.rawByteRange=I.BYTERANGE,d.baseurl=t,d.level=n,d.type=r,d.sn="initSegment",u.initSegment=d,d=new w;break;default:g.logger.warn("line parsed but not handled: "+i)}}}return d=f,d&&!d.relurl&&(u.fragments.pop(),s-=d.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u}},{key:"loadsuccess",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.data,a=e.url,o=n.type,s=n.id,u=n.level,l=this.hls;if(this.loaders[o]=void 0,void 0!==a&&0!==a.indexOf("data:")||(a=n.url),t.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var c="audioTrack"!==o&&"subtitleTrack"!==o,d=isNaN(u)?isNaN(s)?0:s:u,h=this.parseLevelPlaylist(i,a,d,"audioTrack"===o?"audio":"subtitleTrack"===o?"subtitle":"main");h.tload=t.tload,"manifest"===o&&l.trigger(f.default.MANIFEST_LOADED,{levels:[{url:a,details:h}],audioTracks:[],url:a,stats:t,networkDetails:r}),t.tparsed=performance.now(),h.targetduration?c?l.trigger(f.default.LEVEL_LOADED,{details:h,level:u||0,id:s||0,stats:t,networkDetails:r}):"audioTrack"===o?l.trigger(f.default.AUDIO_TRACK_LOADED,{details:h,id:s,stats:t,networkDetails:r}):"subtitleTrack"===o&&l.trigger(f.default.SUBTITLE_TRACK_LOADED,{details:h,id:s,stats:t,networkDetails:r}):l.trigger(f.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration",networkDetails:r})}else{var v=this.parseMasterPlaylist(i,a);if(v.length){var y=this.parseMasterPlaylistMedia(i,a,"AUDIO",v[0].audioCodec),m=this.parseMasterPlaylistMedia(i,a,"SUBTITLES");if(y.length){var b=!1;y.forEach(function(e){e.url||(b=!0)}),!1===b&&v[0].audioCodec&&!v[0].attrs.AUDIO&&(g.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main"}))}l.trigger(f.default.MANIFEST_LOADED,{levels:v,audioTracks:y,subtitles:m,url:a,stats:t,networkDetails:r})}else l.trigger(f.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest",networkDetails:r})}else l.trigger(f.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter",networkDetails:r})}},{key:"loaderror",value:function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_ERROR,r=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_ERROR,r=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,r=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:a.url,loader:a,response:e,context:t,networkDetails:i})}},{key:"loadtimeout",value:function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,r=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,r=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,r=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(f.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:a.url,loader:a,context:t,networkDetails:i})}}]),t}(h.default);n.default=k},{2:2,33:33,34:34,35:35,47:47,54:54}],44:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Math.pow(2,32)-1,o=function(){function e(){r(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for(t=new Uint8Array(r),t[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<a;i++)t.set(n[i],r),r+=n[i].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){n*=t;var r=Math.floor(n/(a+1)),i=Math.floor(n%(a+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))}},{key:"moov",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){n*=t;var r=Math.floor(n/(a+1)),i=Math.floor(n%(a+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)}},{key:"sdtp",value:function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n,r,i,a=[],o=[];for(n=0;n<t.sps.length;n++)r=t.sps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)r=t.pps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,c=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,f>>24,f>>16&255,f>>8&255,255&f])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,o=t.height,s=Math.floor(r/(a+1)),u=Math.floor(r%(a+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(t,n){var r=e.sdtp(t),i=t.id,o=Math.floor(n/(a+1)),s=Math.floor(n%(a+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r,i,a,o,s,u,l=t.samples||[],c=l.length,f=12+16*c,d=new Uint8Array(f);for(n+=8+f,d.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)i=l[r],a=i.duration,o=i.size,s=i.flags,u=i.cts,d.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return e.box(e.types.trun,d)}},{key:"initSegment",value:function(t){e.types||e.init();var n,r=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+r.byteLength),n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n}}]),e}();n.default=o},{}],45:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(36),s=r(o),u=e(35),l=r(u),c=e(54),f=e(44),d=r(f),h=e(33),p=function(){function e(t,n,r,a){i(this,e),this.observer=t,this.config=n,this.typeSupported=r;var o=navigator.userAgent;this.isSafari=a&&a.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return a(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,n,r,i,a,o){if(this.ISGenerated){if(o){var s=this._initPTS,u=this._PTSNormalize,f=e.inputTimeScale||t.inputTimeScale,d=1/0,h=1/0,p=e.samples;if(p.length&&(d=h=u(p[0].pts-f*i,s)),p=t.samples,p.length){var v=p[0];d=Math.min(d,u(v.pts-f*i,s)),h=Math.min(h,u(v.dts-f*i,s))}if(d!==1/0){var y=s-d;Math.abs(y)>10*f&&(c.logger.warn("timestamp inconsistency, "+(y/f).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=d,this._initDTS=h,this.observer.trigger(l.default.INIT_PTS_FOUND,{initPTS:d}))}}}else this.generateIS(e,t,i);if(this.ISGenerated)if(e.samples.length){e.timescale||(c.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var g=this.remuxAudio(e,i,a,o);if(t.samples.length){var m=void 0;g&&(m=g.endPTS-g.startPTS),t.timescale||(c.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,a,m,o)}}else{var b=void 0;t.samples.length&&(b=this.remuxVideo(t,i,a,o)),b&&e.codec&&this.remuxEmptyAudio(e,i,a,b)}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(l.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,n){var r,i,a=this.observer,o=e.samples,s=t.samples,u=this.typeSupported,f="audio/mp4",p={},v={tracks:p},y=void 0===this._initPTS;if(y&&(r=i=1/0),e.config&&o.length&&(e.timescale=e.samplerate,c.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(f="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),p.audio={container:f,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:d.default.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(r=i=o[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&s.length){var g=t.inputTimeScale;t.timescale=g,p.video={container:"video/mp4",codec:t.codec,initSegment:d.default.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(r=Math.min(r,s[0].pts-g*n),i=Math.min(i,s[0].dts-g*n),this.observer.trigger(l.default.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(p).length?(a.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,y&&(this._initPTS=r,this._initDTS=i)):a.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,n,r,i){var a,o,s,u,f,p,v,y=8,g=e.timescale,m=e.samples,b=[],_=m.length,E=this._PTSNormalize,T=this._initDTS,w=this.nextAvcDts,k=this.isSafari;k&&(n|=m.length&&w&&(i&&Math.abs(t-w/g)<.1||Math.abs(m[0].pts-w-T)<g/5)),n||(w=t*g),m.forEach(function(e){e.pts=E(e.pts-T,w),e.dts=E(e.dts-T,w)}),m.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||(r||e.id-t.id)});var S=m.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(S<0){c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue");for(var O=0;O<m.length;O++)m[O].dts+=S}var A=m[0];f=Math.max(A.dts,0),u=Math.max(A.pts,0);var P=Math.round((f-w)/90);n&&P&&(P>1?c.logger.log("AVC:"+P+" ms hole between fragments detected,filling it"):P<-1&&c.logger.log("AVC:"+-P+" ms overlapping between fragments detected"),f=w,m[0].dts=f,u=Math.max(u-P,w),m[0].pts=u,c.logger.log("Video/PTS/DTS adjusted: "+Math.round(u/90)+"/"+Math.round(f/90)+",delta:"+P+" ms")),A=m[m.length-1],v=Math.max(A.dts,0),p=Math.max(A.pts,0,v),k&&(a=Math.round((v-f)/(m.length-1)));for(var R=0,D=0,x=0;x<_;x++){for(var L=m[x],I=L.units,M=I.length,C=0,N=0;N<M;N++)C+=I[N].data.length;D+=C,R+=M,L.length=C,L.dts=k?f+x*a:Math.max(L.dts,f),L.pts=Math.max(L.pts,L.dts)}var U=D+4*R+8;try{o=new Uint8Array(U)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating video mdat "+U})}var j=new DataView(o.buffer);j.setUint32(0,U),o.set(d.default.types.mdat,4);for(var F=0;F<_;F++){for(var B=m[F],G=B.units,V=0,H=void 0,K=0,Y=G.length;K<Y;K++){var W=G[K],q=W.data,z=W.data.byteLength;j.setUint32(y,z),y+=4,o.set(q,y),y+=z,V+=4+z}if(k)H=Math.max(0,a*Math.round((B.pts-B.dts)/a));else{if(F<_-1)a=m[F+1].dts-B.dts;else{var X=this.config,$=B.dts-m[F>0?F-1:F].dts;if(X.stretchShortVideoTrack){var J=X.maxBufferHole,Q=X.maxSeekHole,Z=Math.floor(Math.min(J,Q)*g),ee=(r?u+r*g:this.nextAudioPts)-B.pts;ee>Z?(a=ee-$,a<0&&(a=$),c.logger.log("It is approximately "+ee/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=$}else a=$}H=Math.round(B.pts-B.dts)}b.push({size:V,duration:a,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=v+a;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=b[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=b,s=d.default.moof(e.sequenceNumber++,f,e),e.samples=[];var re={data1:s,data2:o,startPTS:u/g,endPTS:(p+a)/g,startDTS:f/g,endDTS:this.nextAvcDts/g,type:"video",nb:b.length,dropped:te};return this.observer.trigger(l.default.FRAG_PARSING_DATA,re),re}},{key:"remuxAudio",value:function(e,t,n,r){var i,a,o,u,f,p,v,y=e.inputTimeScale,g=e.timescale,m=y/g,b=e.isAAC?1024:1152,_=b*m,E=this._PTSNormalize,T=this._initDTS,w=!e.isAAC&&this.typeSupported.mpeg,k=e.samples,S=[],O=this.nextAudioPts;if(n|=k.length&&O&&(r&&Math.abs(t-O/y)<.1||Math.abs(k[0].pts-O-T)<20*_),n||(O=t*y),k.forEach(function(e){e.pts=e.dts=E(e.pts-T,O)}),k.sort(function(e,t){return e.pts-t.pts}),r&&e.isAAC)for(var A=0,P=O;A<k.length;){var R,D=k[A],x=D.pts;R=x-P;var L=Math.abs(1e3*R/y);if(R<=-_)c.logger.warn("Dropping 1 audio frame @ "+(P/y).toFixed(3)+"s due to "+L+" ms overlap."),k.splice(A,1),e.len-=D.unit.length;else if(R>=_&&L<1e4&&P){var I=Math.round(R/_);c.logger.warn("Injecting "+I+" audio frame @ "+(P/y).toFixed(3)+"s due to "+Math.round(1e3*R/y)+" ms gap.");for(var M=0;M<I;M++){var C=Math.max(P,0);o=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),o||(c.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),o=D.unit.subarray()),k.splice(A,0,{unit:o,pts:C,dts:C}),e.len+=o.length,P+=_,A++}D.pts=D.dts=P,P+=_,A++}else Math.abs(R),D.pts=D.dts=P,P+=_,A++}for(var N=0,U=k.length;N<U;N++){var j=k[N],F=j.unit,B=j.pts;if(void 0!==v)a.duration=Math.round((B-v)/m);else{var G=Math.round(1e3*(B-O)/y),V=0;if(n&&e.isAAC&&G){if(G>0&&G<1e4)V=Math.round((B-O)/_),c.logger.log(G+" ms hole between AAC samples detected,filling it"),V>0&&(o=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),o||(o=F.subarray()),e.len+=V*o.length);else if(G<-12){c.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(O/y).toFixed(3)+"s/"+(B/y).toFixed(3)+"s/"+-G+"ms"),e.len-=F.byteLength;continue}B=O}if(p=Math.max(0,B),!(e.len>0))return;var H=w?e.len:e.len+8;i=w?0:8;try{u=new Uint8Array(H)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating audio mdat "+H})}if(!w){new DataView(u.buffer).setUint32(0,H),u.set(d.default.types.mdat,4)}for(var K=0;K<V;K++)o=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),o||(c.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),o=F.subarray()),u.set(o,i),i+=o.byteLength,a={size:o.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(a)}u.set(F,i);var Y=F.byteLength;i+=Y,a={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(a),v=B}var W=0,q=S.length;if(q>=2&&(W=S[q-2].duration,a.duration=W),q){this.nextAudioPts=O=v+m*W,e.len=0,e.samples=S,f=w?new Uint8Array:d.default.moof(e.sequenceNumber++,p/m,e),e.samples=[];var z=p/y,X=O/y,$={data1:f,data2:u,startPTS:z,endPTS:X,startDTS:z,endDTS:X,type:"audio",nb:q};return this.observer.trigger(l.default.FRAG_PARSING_DATA,$),$}return null}},{key:"remuxEmptyAudio",value:function(e,t,n,r){var i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,u=this.nextAudioPts,l=(void 0!==u?u:r.startDTS*i)+this._initDTS,f=r.endDTS*i+this._initDTS,d=1024*o,h=Math.ceil((f-l)/d),p=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(c.logger.warn("remux empty Audio"),!p)return void c.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var v=[],y=0;y<h;y++){var g=l+y*d;v.push({unit:p,pts:g,dts:g}),e.len+=p.length}e.samples=v,this.remuxAudio(e,t,n)}},{key:"remuxID3",value:function(e,t){var n,r=e.samples.length,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(r){for(var s=0;s<r;s++)n=e.samples[s],n.pts=(n.pts-a)/i,n.dts=(n.dts-o)/i;this.observer.trigger(l.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,r=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(r){for(var o=0;o<r;o++)n=e.samples[o],n.pts=(n.pts-a)/i;this.observer.trigger(l.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}}]),e}();n.default=p},{33:33,35:35,36:36,44:44,54:54}],46:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(35),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t){r(this,e),this.observer=t}return i(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,n,r,i,a,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(o.default.FRAG_PARSING_DATA,{data1:u,startPTS:i,startDTS:i,type:c,nb:1,dropped:0}),l.trigger(o.default.FRAG_PARSED)}}]),e}();n.default=s},{35:35}],47:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function e(t){r(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=a.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,n={};for(o.lastIndex=0;null!==(t=o.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n}}]),e}();n.default=s},{}],48:[function(e,t,n){"use strict";var r={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){i=(n+r)/2|0,a=e[i];var o=t(a);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}};t.exports=r},{}],49:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,u=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},d={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},v=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},y=function(){function e(t,n,i,a,o){r(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=a||"black",this.flash=o||!1}return i(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),g=function(){function e(t,n,i,a,o,s){r(this,e),this.uchar=t||" ",this.penState=new y(n,i,a,o,s)}return i(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),m=function(){function e(){r(this,e),this.chars=[];for(var t=0;t<u;t++)this.chars.push(new g);this.pos=0,this.currPenState=new y}return i(e,[{key:"equals",value:function(e){for(var t=!0,n=0;n<u;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=o(e);if(this.pos>=u)return void p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<u;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,n=0;n<u;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}]),e}(),b=function(){function e(){r(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new m);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,n=0;n<s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){this.rows[this.currRow].backSpace()}},{key:"clearToEndOfRow",value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:"insertChar",value:function(e){this.rows[this.currRow].insertChar(e)}},{key:"setPen",value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:"moveCursor",value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)}},{key:"setPAC",value:function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<s;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<p.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=t;var u=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,c=Math.max(l-1,0);u.setCursor(e.indent),e.color=u.chars[c].penState.foreground}var f={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(f)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<s;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),_=function(){function e(t,n){r(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new b,this.nonDisplayedMemory=new b,this.lastOutputScreen=new b,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),E=function(){function e(t,n,i){r(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new _(1,n),new _(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return i(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var n,r,i,a=!1;this.lastTime=e,p.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(p.log("DATA","["+v([t[o],t[o+1]])+"] -> ("+v([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else p.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+v([r,i])+" orig: "+v([t[o],t[o+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var n=null,r=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+v([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"parseMidrow",value:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].ccMIDROW(t),p.log("DEBUG","MIDROW ("+v([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,a=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=64<=t&&t<=95?1===n?l[e]:f[e]:1===n?c[e]:d[e];var o=this.interpretPAC(r,t);return this.channels[n-1].setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"interpretPAC",value:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}},{key:"parseChars",value:function(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),17<=i&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,p.log("INFO","Special char '"+o(a)+"' in channel "+n),r=[a]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=v(r);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r}},{key:"parseBackgroundAttributes",value:function(e,t){var n,r,i,a,o=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!s)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=h[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();n.default=E},{}],50:[function(e,t,n){"use strict";var r=e(57),i={newCue:function(e,t,n,i){for(var a,o,s,u,l,c=window.VTTCue||window.TextTrackCue,f=0;f<i.rows.length;f++)if(a=i.rows[f],s=!0,u=0,l="",!a.isEmpty()){for(var d=0;d<a.chars.length;d++)a.chars[d].uchar.match(/\s/)&&s?u++:(l+=a.chars[d].uchar,s=!1);a.cueStartTime=t,t===n&&(n+=1e-4),o=new c(t,n,(0,r.fixLineBreaks)(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?o.line=f+1:o.line=f>7?f-2:f+1,o.align="left",o.position=Math.max(0,Math.min(100,u/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(o)}}};t.exports=i},{57:57}],51:[function(e,t,n){"use strict";function r(e,t){return a.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}Object.defineProperty(n,"__esModule",{value:!0}),n.findFragWithCC=r;var i=e(48),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},{48:48}],52:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(53),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i,a){r(this,e),this.hls=t,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o.default(n),this.fast_=new o.default(i)}return i(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var n=8e3*t/e,r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();n.default=s},{53:53}],53:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();n.default=a},{}],54:[function(e,t,n){"use strict";function r(){}function i(e,t){return t="["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];r[0]&&(r[0]=i(e,r[0])),t.apply(self.console,r)}:r}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){l[t]=e[t]?e[t].bind(e):a(t)})}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={trace:r,debug:r,log:r,warn:r,info:r,error:r},l=u;n.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":s(e))){o(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=u}}else l=u},n.logger=l},{}],55:[function(e,t,n){"use strict";var r={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};t.exports=r},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(e){return"string"==typeof e&&(!!a[e.toLowerCase()]&&e.toLowerCase())}function t(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function r(r,a,o){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",f=!1,d=r,h=a,p=o,v=null,y="",g=!0,m="auto",b="start",_=50,E="middle",T=50,w="middle";if(Object.defineProperty(s,"id",n({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",n({},l,{get:function(){return f},set:function(e){f=!!e}})),Object.defineProperty(s,"startTime",n({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},l,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},l,{get:function(){return y},set:function(t){var n=e(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");y=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},l,{get:function(){return m},set:function(e){if("number"!=typeof e&&e!==i)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},l,{get:function(){return b},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},l,{get:function(){return E},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");E=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},l,{get:function(){return w},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");w=n,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",a={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return r.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},r}()},{}],57:[function(e,t,n){"use strict";function r(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new f,this.regionList=[]}function i(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function a(){this.values=Object.create(null)}function o(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length){var s=o[0],u=o[1];t(s,u)}}}function s(e,t,n){function r(){var t=i(e);if(null===t)throw new Error("Malformed timestamp: "+u);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}var u=e;if(s(),t.startTime=r(),s(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+u);e=e.substr(3),s(),t.endTime=r(),s(),function(e,t){var r=new a;o(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",h,"end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",h,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",h,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===d.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",h);var s=r.get("position","auto");"auto"===s&&50===d.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function u(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(n,"__esModule",{value:!0}),n.fixLineBreaks=void 0;var l=e(56),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var d=new c.default(0,0,0),h="middle"===d.align?"middle":"center";r.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=u(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;r=t();var i=r.match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:r=t(),n.state){case"HEADER":/:/.test(r)?function(e){o(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new c.default(0,0,""),n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{s(r,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var l=-1!==r.indexOf("--\x3e");if(!r||l&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}},n.fixLineBreaks=u,n.default=r},{56:56}],58:[function(e,t,n){"use strict";var r=e(57),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(e,t,n){return e.substr(n||0,t.length)===t},o=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)?-1:(t+=1e3*n,t+=6e4*r,t+=36e5*i)},s=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},u=function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC];e.presentationOffset=n},l={parse:function(e,t,n,r,l,c){var f=/\r\n|\n\r|\n|\r/g,d=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(f,"\n").split("\n"),h="00:00.000",p=0,v=0,y=0,g=[],m=void 0,b=!0,_=new i.default;_.oncue=function(e){var t=n[r],i=n.ccOffset;t&&t.new&&(void 0!==v?i=n.ccOffset=t.start:u(n,r,y)),y&&(i=y+n.ccOffset-n.presentationOffset),e.startTime+=i-v,e.endTime+=i-v,e.id=s(e.startTime)+s(e.endTime)+s(e.text),e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&g.push(e)},_.onparsingerror=function(e){m=e},_.onflush=function(){if(m&&c)return void c(m);l(g)},d.forEach(function(e){if(b){if(a(e,"X-TIMESTAMP-MAP=")){b=!1,e.substr(16).split(",").forEach(function(e){a(e,"LOCAL:")?h=e.substr(6):a(e,"MPEGTS:")&&(p=parseInt(e.substr(7)))});try{t=t<0?t+8589934592:t,p-=t,v=o(h)/1e3,y=p/9e4,-1===v&&(m=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){m=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(b=!1)}_.parse(e+"\n")}),_.flush()}};t.exports=l},{57:57}],59:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(54),o=function(){function e(t){r(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return i(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,o=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var s=t.status;if(s>=200&&s<300){r.tload=Math.max(r.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===i.responseType?(u=t.response,l=u.byteLength):(u=t.responseText,l=u.length),r.loaded=r.total=l;var c={url:t.responseURL,data:u};this.callbacks.onSuccess(c,r,i,t)}else r.retry>=o.maxRetry||s>=400&&s<499?(a.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i,t)):(a.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},{key:"loadtimeout",value:function(){a.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)}}]),e}();n.default=o},{54:54}]},{},[40])(40)})},function(e,t,n){!function(t,r){e.exports=r(n(12),n(0))}(0,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(2),f=function(e){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),t._logger.debug("Creating adapter. Shaka version: "+l.default.Player.version);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a));return o._shaka=new l.default.Player(e),o._shaka.configure(a),o._addBindings(),o}return a(t,e),s(t,null,[{key:"canPlayType",value:function(e){var n="string"==typeof e&&e.toLowerCase()===t._dashMimeType;return t._logger.debug("canPlayType result for mimeType: "+e+" is "+n.toString()),n}},{key:"isSupported",value:function(){l.default.polyfill.installAll();var e=l.default.Player.isBrowserSupported();return t._logger.debug("isSupported:"+e),e}}]),s(t,[{key:"_addBindings",value:function(){this._shaka.addEventListener("adaptation",this._onAdaptation.bind(this)),this._shaka.addEventListener("error",this._onError.bind(this))}},{key:"_removeBindings",value:function(){this._shaka.removeEventListener("adaptation",this._onAdaptation),this._shaka.removeEventListener("error",this._onError)}},{key:"load",value:function(){var e=this;return this._loadPromise||(this._loadPromise=new Promise(function(n,r){e._sourceObj&&e._sourceObj.url&&e._shaka.load(e._sourceObj.url).then(function(){var r={tracks:e._getParsedTracks()};t._logger.debug("The source has been loaded successfully"),n(r)}).catch(function(t){r(t),e._onError(t)})})),this._loadPromise}},{key:"destroy",value:function(){t._logger.debug("destroy"),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._loadPromise=null,this._removeBindings(),this._shaka.destroy()}},{key:"_getVideoTracks",value:function(){var e=this._shaka.getVariantTracks(),t=e.filter(function(e){return e.active})[0];return e.filter(function(e){return e.audioId===t.audioId})}},{key:"_getAudioTracks",value:function(){var e=this._shaka.getVariantTracks(),t=e.filter(function(e){return e.active})[0];return e.filter(function(e){return e.videoId===t.videoId})}},{key:"_getParsedTracks",value:function(){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),n=this._getParsedTextTracks();return e.concat(t).concat(n)}},{key:"_getParsedVideoTracks",value:function(){var e=this._getVideoTracks(),t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,bandwidth:e[n].bandwidth,active:e[n].active,label:e[n].label,index:n};t.push(new c.VideoTrack(r))}return t}},{key:"_getParsedAudioTracks",value:function(){var e=this._getAudioTracks(),t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].active,label:e[n].label,language:e[n].language,index:n};t.push(new c.AudioTrack(r))}return t}},{key:"_getParsedTextTracks",value:function(){var e=this._shaka.getTextTracks(),t=[];if(e)for(var n=0;n<e.length;n++){var r={kind:e[n].kind?e[n].kind+"s":"",active:e[n].active,label:e[n].label,language:e[n].language,index:n};t.push(new c.TextTrack(r))}return t}},{key:"selectVideoTrack",value:function(e){var t=this._getVideoTracks();if(e instanceof c.VideoTrack&&t){var n=t[e.index];n&&(this._shaka.configure({abr:{enabled:!1}}),n.active||(this._shaka.selectVariantTrack(t[e.index],!0),this._onTrackChanged(e)))}}},{key:"selectAudioTrack",value:function(e){e instanceof c.AudioTrack&&!e.active&&(this._shaka.selectAudioLanguage(e.language),this._onTrackChanged(e))}},{key:"selectTextTrack",value:function(e){e instanceof c.TextTrack&&!e.active&&("subtitles"===e.kind||"captions"===e.kind)&&(this._shaka.selectTextLanguage(e.language),this._shaka.setTextTrackVisibility(!0),this._onTrackChanged(e))}},{key:"hideTextTrack",value:function(){this._shaka.setTextTrackVisibility(!1)}},{key:"enableAdaptiveBitrate",value:function(){this._shaka.configure({abr:{enabled:!0}})}},{key:"_onAdaptation",value:function(){var e=this._getParsedVideoTracks().filter(function(e){return e.active})[0];this._onTrackChanged(e)}},{key:"_onError",value:function(e){t._logger.error(e)}},{key:"src",get:function(){return this._loadPromise&&this._sourceObj?this._sourceObj.url:""}}]),t}(c.BaseMediaSourceAdapter);f.id="DashAdapter",f._logger=c.BaseMediaSourceAdapter.getLogger(f.id),f._dashMimeType="application/dash+xml",t.default=f,f.isSupported()&&(0,c.registerMediaSourceAdapter)(f)},function(t,n){t.exports=e},function(e,n){e.exports=t}])})},function(e,t,n){var r;!function(){var i={};(function(e){function t(e,t){var n=e.split("."),r=uo;n[0]in r||!r.execScript||r.execScript("var "+n[0]);for(var i;n.length&&(i=n.shift());)n.length||void 0===t?r=r[i]?r[i]:r[i]={}:r[i]=t}function n(e){function t(){}var n=pt;t.prototype=n.prototype,e.Be=n.prototype,e.prototype=new t,e.prototype.constructor=e,e.ye=function(e,t,r){return n.prototype[t].apply(e,Array.prototype.slice.call(arguments,2))}}function r(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function i(e,t,n){var r=Math.pow(e.c,t);n=n*(1-r)+r*e.a,isNaN(n)||(e.a=n,e.b+=t)}function a(e){return e.a/(1-Math.pow(e.c,e.b))}function o(){this.c=new r(2),this.f=new r(5),this.a=0,this.b=5e5}function s(){}function u(e,t,n,r){this.severity=e,this.category=t,this.code=n,this.data=Array.prototype.slice.call(arguments,3)}function l(e){var t;e instanceof l?(c(this,e.aa),this.Ba=e.Ba,this.ca=e.ca,f(this,e.Ja),this.W=e.W,d(this,g(e.a)),this.ta=e.ta):e&&(t=String(e).match(lo))?(c(this,t[1]||"",!0),this.Ba=h(t[2]||""),this.ca=h(t[3]||"",!0),f(this,t[4]),this.W=h(t[5]||"",!0),d(this,t[6]||"",!0),this.ta=h(t[7]||"")):this.a=new y(null)}function c(e,t,n){e.aa=n?h(t,!0):t,e.aa&&(e.aa=e.aa.replace(/:$/,""))}function f(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Ja=t}else e.Ja=null}function d(e,t,n){t instanceof y?e.a=t:(n||(t=p(t,po)),e.a=new y(t))}function h(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function p(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,v),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function v(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function y(e){this.b=e||null}function g(e){var t=new y;if(t.b=e.b,e.a){var n,r={};for(n in e.a)r[n]=e.a[n].concat();t.a=r,t.c=e.c}return t}function m(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())}function b(e,t){return e.concat(t)}function _(){}function E(e){return null!=e}function T(e){return function(t){return t!=e}}function w(e,t,n){return n.indexOf(e)==t}function k(e,t){if(!t.length)return e;var n=t.map(function(e){return new l(e)});return e.map(function(e){return new l(e)}).map(function(e){return n.map(e.resolve.bind(e))}).reduce(b,[]).map(function(e){return e.toString()})}function S(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}function O(e,t,n,r,i){var a,o=i in r;for(a in t){var s=i+"."+a,u=o?r[i]:n[a],l=!!{".abr.manager":!0}[s]||!!{serverCertificate:!0}[a];(o||a in e)&&(void 0===t[a]?void 0===u||o?delete e[a]:e[a]=u:l?e[a]=t[a]:"object"==typeof e[a]&&"object"==typeof t[a]?O(e[a],t[a],u,r,s):typeof t[a]==typeof u&&(e[a]=t[a]))}}function A(e){return JSON.parse(JSON.stringify(e))}function P(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function R(e){this.f=!1,this.a=[],this.b=[],this.c=[],this.h=e||null}function D(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function x(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t}}function L(e,t){for(var n=[],r=0;r<e.length;++r){for(var i=!1,a=0;a<n.length&&!(i=t?t(e[r],n[a]):e[r]===n[a]);++a);i||n.push(e[r])}return n}function I(e,t,n){for(var r=0;r<e.length;++r)if(n(e[r],t))return r;return-1}function M(){this.a={}}function C(){this.a=new M}function N(e,t,n,r){e.a&&(t=new F(t,n,r),e.a.push(n,t))}function U(e,t,n,r){N(e,t,n,function(e){this.ha(t,n),r(e)}.bind(e))}function j(e){if(e.a){var t,n=e.a,r=[];for(t in n.a)r.push.apply(r,n.a[t]);for(n=0;n<r.length;++n)r[n].ha();e.a.a={}}}function F(e,t,n){this.target=e,this.type=t,this.a=n,this.target.addEventListener(t,n,!1)}function B(e){return!e||!Object.keys(e).length}function G(e){return Object.keys(e).map(function(t){return e[t]})}function V(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r),n},{})}function H(e,t){return Object.keys(e).every(function(n){return t(n,e[n])})}function K(e,t){Object.keys(e).forEach(function(n){t(n,e[n])})}function Y(e){if(!e)return"";e=new Uint8Array(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=escape(X(e));try{return decodeURIComponent(e)}catch(e){throw new u(2,2,2004)}}function W(e,t,n){if(!e)return"";if(!n&&e.byteLength%2)throw new u(2,2,2004);if(e instanceof ArrayBuffer)var r=e;else n=new Uint8Array(e.byteLength),n.set(new Uint8Array(e)),r=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),r=new DataView(r);for(var i=0;i<e;i++)n[i]=r.getUint16(2*i,t);return X(n)}function q(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return Y(t);if(254==t[0]&&255==t[1])return W(t.subarray(2),!1);if(255==t[0]&&254==t[1])return W(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(!t[0]&&!t[2])return W(e,!1);if(!t[1]&&!t[3])return W(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return Y(e);throw new u(2,2,2003)}function z(e){e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function X(e){for(var t="",n=0;n<e.length;n+=16e3)t+=String.fromCharCode.apply(null,e.subarray(n,n+16e3));return t}function $(e){this.a=null,this.b=function(){this.a=null,e()}.bind(this)}function J(e){e.cancel(),e.a=setTimeout(e.b,500)}function Q(t,n){var r=void 0==n||n,i=e.btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_");return r?i:i.replace(/=*$/,"")}function Z(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function ee(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=e.parseInt(t.substr(r,2),16);return n}function te(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function ne(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function re(e,t,n,r){this.j=this.i=this.v=null,this.J=!1,this.b=null,this.f=new C,this.a=[],this.o=[],this.l=new P,this.ka=e,this.h=null,this.g=function(e){this.l.reject(e),t(e)}.bind(this),this.A={},this.Ca=n,this.la=r,this.B=new $(this.Kd.bind(this)),this.ja=this.c=!1,this.G=[],this.ia=!1,this.O=setInterval(this.Jd.bind(this),1e3),this.l.catch(function(){})}function ie(e,t){if(!e.i)return U(e.f,t,"encrypted",function(){this.g(new u(2,6,6010))}.bind(e)),Promise.resolve();e.j=t,U(e.f,e.j,"play",e.qd.bind(e));var n=e.j.setMediaKeys(e.i),n=n.catch(function(e){return Promise.reject(new u(2,6,6003,e.message))}),r=null;return e.b.serverCertificate&&(r=e.i.setServerCertificate(e.b.serverCertificate).then(function(){}).catch(function(e){return Promise.reject(new u(2,6,6004,e.message))})),Promise.all([n,r]).then(function(){if(this.c)return Promise.reject();oe(this),this.b.initData.length||this.o.length||N(this.f,this.j,"encrypted",this.fd.bind(this))}.bind(e)).catch(function(e){return this.c?Promise.resolve():Promise.reject(e)}.bind(e))}function ae(e,t){return Promise.all(t.map(function(e){return pe(this,e).then(function(e){if(e){for(var t=new P,n=0;n<this.a.length;n++)if(this.a[n].ba==e){this.a[n].ib=t;break}return Promise.all([e.remove(),t])}}.bind(this))}.bind(e)))}function oe(e){var t=e.b?e.b.initData:[];return t.forEach(function(e){ve(this,e.initDataType,e.initData)}.bind(e)),e.o.forEach(function(e){pe(this,e)}.bind(e)),t.length||e.o.length||e.l.resolve(),e.l}function se(e){return e.a.map(function(e){return e.ba.sessionId})}function ue(t,n,r,i,a){var o=fe(t);n.periods.forEach(function(t){t.variants.forEach(function(t){o&&(t.drmInfos=[o]),t.drmInfos.forEach(function(n){ce(this,n),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==n.keySystem&&(n.keySystem="com.chromecast.playready");var o=i[n.keySystem];o||(o={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:r?"required":"optional",sessionTypes:[r?"persistent-license":"temporary"],label:n.keySystem,drmInfos:[]},i[n.keySystem]=o,a.push(n.keySystem)),o.drmInfos.push(n),n.distinctiveIdentifierRequired&&(o.distinctiveIdentifier="required"),n.persistentStateRequired&&(o.persistentState="required");var s=[];t.video&&s.push(t.video),t.audio&&s.push(t.audio),s.forEach(function(e){var t="video"==e.type?o.videoCapabilities:o.audioCapabilities,r=("video"==e.type?n.videoRobustness:n.audioRobustness)||"",i=e.mimeType;e.codecs&&(i+='; codecs="'+e.codecs+'"'),t.push({robustness:r,contentType:i})}.bind(this))}.bind(this))}.bind(this))}.bind(t))}function le(e,t,n){if(1==n.length&&""==n[0])return Promise.reject(new u(2,6,6e3));var r=new P,i=r;return[!0,!1].forEach(function(e){n.forEach(function(n){var r=t[n];r.drmInfos.some(function(e){return!!e.licenseServerUri})==e&&(r.audioCapabilities.length||delete r.audioCapabilities,r.videoCapabilities.length||delete r.videoCapabilities,i=i.catch(function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(n,[r])}.bind(this)))}.bind(this))}.bind(e)),i=i.catch(function(){return Promise.reject(new u(2,6,6001))}),i=i.then(function(e){if(this.c)return Promise.reject();var n=0<=navigator.userAgent.indexOf("Edge/"),r=e.getConfiguration();return this.v=(r.audioCapabilities||[]).concat(r.videoCapabilities||[]).map(function(e){return e.contentType}),n&&(this.v=null),n=t[e.keySystem],de(this,e.keySystem,n,n.drmInfos),this.b.licenseServerUri?e.createMediaKeys():Promise.reject(new u(2,6,6012))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.i=e,this.J=!0}.bind(e)).catch(function(e){return this.c?Promise.resolve():(this.v=this.b=null,e instanceof u?Promise.reject(e):Promise.reject(new u(2,6,6002,e.message)))}.bind(e)),r.reject(),i}function ce(e,t){var n=t.keySystem;if(n){if(!t.licenseServerUri){var r=e.h.servers[n];r&&(t.licenseServerUri=r)}t.keyIds||(t.keyIds=[]),(n=e.h.advanced[n])&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=n.persistentStateRequired),t.videoRobustness||(t.videoRobustness=n.videoRobustness),t.audioRobustness||(t.audioRobustness=n.audioRobustness),t.serverCertificate||(t.serverCertificate=n.serverCertificate))}}function fe(t){if(B(t.h.clearKeys))return null;var n,r=[],i=[];for(n in t.h.clearKeys){var a=t.h.clearKeys[n],o=ee(n),a=ee(a),o={kty:"oct",kid:Q(o,!1),k:Q(a,!1)};r.push(o),i.push(o.kid)}return t=JSON.stringify({keys:r}),i=JSON.stringify({kids:i}),i=[{initData:new Uint8Array(z(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}function de(e,t,n,r){var i=[],a=[],o=[],s=[];he(r,i,a,o,s),e.b={keySystem:t,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:o,keyIds:s}}function he(e,t,n,r,i){function a(e,t){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&ne(e.initData,t.initData)}e.forEach(function(e){if(-1==t.indexOf(e.licenseServerUri)&&t.push(e.licenseServerUri),e.serverCertificate&&-1==I(n,e.serverCertificate,ne)&&n.push(e.serverCertificate),e.initData&&e.initData.forEach(function(e){-1==I(r,e,a)&&r.push(e)}),e.keyIds)for(var o=0;o<e.keyIds.length;++o)-1==i.indexOf(e.keyIds[o])&&i.push(e.keyIds[o])})}function pe(e,t){try{var n=e.i.createSession("persistent-license")}catch(t){var r=new u(2,6,6005,t.message);return e.g(r),Promise.reject(r)}N(e.f,n,"message",e.kc.bind(e)),N(e.f,n,"keystatuseschange",e.ec.bind(e));var i={initData:null,ba:n,loaded:!1,zb:1/0,ib:null};return e.a.push(i),n.load(t).then(function(e){if(!this.c){if(e)return i.loaded=!0,this.a.every(function(e){return e.loaded})&&this.l.resolve(),n;this.a.splice(this.a.indexOf(i),1),this.g(new u(2,6,6013))}}.bind(e),function(e){this.c||(this.a.splice(this.a.indexOf(i),1),this.g(new u(2,6,6005,e.message)))}.bind(e))}function ve(e,t,n){try{var r=e.ja?e.i.createSession("persistent-license"):e.i.createSession()}catch(t){return void e.g(new u(2,6,6005,t.message))}N(e.f,r,"message",e.kc.bind(e)),N(e.f,r,"keystatuseschange",e.ec.bind(e)),e.a.push({initData:n,ba:r,loaded:!1,zb:1/0,ib:null}),r.generateRequest(t,n.buffer).catch(function(e){if(!this.c){for(var t=0;t<this.a.length;++t)if(this.a[t].ba==r){this.a.splice(t,1);break}this.g(new u(2,6,6006,e.message))}}.bind(e))}function ye(e,t){for(var n,r=t.target,i=0;i<e.a.length;i++)if(e.a[i].ba==r){n=e.a[i].ib;break}i=x([e.b.licenseServerUri],e.h.retryParameters),i.body=t.message,i.method="POST","com.microsoft.playready"!=e.b.keySystem&&"com.chromecast.playready"!=e.b.keySystem||ge(i),e.ka.request(2,i).then(function(e){return this.c?Promise.reject():r.update(e.data).then(function(){n&&n.resolve()})}.bind(e),function(e){if(this.c)return Promise.resolve();e=new u(2,6,6007,e),this.g(e),n&&n.reject(e)}.bind(e)).catch(function(e){if(this.c)return Promise.resolve();e=new u(2,6,6008,e.message),this.g(e),n&&n.reject(e)}.bind(e))}function ge(e){var t=W(e.body,!0,!0);if(-1==t.indexOf("PlayReadyKeyMessage"))e.headers["Content-Type"]="text/xml; charset=utf-8";else{for(var t=(new DOMParser).parseFromString(t,"application/xml"),n=t.getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)e.headers[n[r].querySelector("name").textContent]=n[r].querySelector("value").textContent;e.body=Z(t.querySelector("Challenge").textContent).buffer}}function me(){var e=[],t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],r={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(t){var i=navigator.requestMediaKeySystemAccess(t,n).then(function(e){var n=e.getConfiguration().sessionTypes;return r[t]={persistentState:!!n&&0<=n.indexOf("persistent-license")},e.createMediaKeys()}).catch(function(){r[t]=null});e.push(i)}),Promise.all(e).then(function(){return r})}function be(e,t){var n=e.keySystem();return!t.drmInfos.length||t.drmInfos.some(function(e){return e.keySystem==n})}function _e(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].keySystem==t[i].keySystem){var a=e[r],i=t[i],o=[],o=o.concat(a.initData||[]),o=o.concat(i.initData||[]),s=[],s=s.concat(a.keyIds),s=s.concat(i.keyIds);n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||i.persistentStateRequired,videoRobustness:a.videoRobustness||i.videoRobustness,audioRobustness:a.audioRobustness||i.audioRobustness,serverCertificate:a.serverCertificate||i.serverCertificate,initData:o,keyIds:s});break}return n}function Ee(e){this.f=null,this.c=e,this.h=0,this.g=1/0,this.a=this.b=null}function Te(e,t){go[e]=t.length?Oe.bind(null,t):t}function we(e,t,n){return e>=t?null:new VTTCue(e,t,n)}function ke(e,t,n,r){return Promise.resolve().then(function(){if(this.c)if(null==n||null==r)this.f.parseInit(t);else{for(var e=this.f.parseMedia(t,{periodStart:this.h,segmentStart:n,segmentEnd:r}),i=0;i<e.length&&!(e[i].startTime>=this.g);++i)this.c.addCue(e[i]);null==this.b&&(this.b=n),this.a=Math.min(r,this.g)}}.bind(e))}function Se(e,t){for(var n=e.c.cues,r=[],i=0;i<n.length;++i)t(n[i])&&r.push(n[i]);for(i=0;i<r.length;++i)e.c.removeCue(r[i])}function Oe(e){this.Na=e}function Ae(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Pe(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))&&(t>=e.start(0)&&t<=e.end(e.length-1))}function Re(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=e.length-1;0<=r&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}function De(e,t,n){this.f=e,this.N=t,this.i=n,this.c={},this.a=null,this.b={},this.g=new C,this.h=!1}function xe(){var e={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hvc1.1.6.L93.90",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(t){e[t]=!!go[t]||MediaSource.isTypeSupported(t);var n=t.split(";")[0];e[n]=e[n]||e[t]}),e}function Le(e,t){e.a||(e.a=new Ee(e.i)),e.a.f=new go[t]}function Ie(e,t){if("text"==t)var n=e.a.b;else n=Me(e,t),n=!n||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Me(e,t){try{return e.c[t].buffered}catch(e){return null}}function Ce(e,t,n,r,i){return"text"==t?ke(e.a,n,r,i):je(e,t,e.ie.bind(e,t,n))}function Ne(e,t){return"text"==t?e.a.remove(0,1/0):je(e,t,e.qc.bind(e,t,0,e.N.duration))}function Ue(e,t,n,r){return"text"==t?(e.a.h=n,null!=r&&(e.a.g=r),Promise.resolve()):(null==r&&(r=1/0),Promise.all([je(e,t,e.Ec.bind(e,t)),je(e,t,e.Zd.bind(e,t,n)),je(e,t,e.Xd.bind(e,t,r))]))}function je(e,t,n){if(e.h)return Promise.reject();if(n={start:n,p:new P},e.b[t].push(n),1==e.b[t].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new u(2,3,3017,t)):n.p.reject(new u(2,3,3015,r)),Be(e,t)}return n.p}function Fe(e,t){if(e.h)return Promise.reject();var n,r=[];for(n in e.c){var i=new P,a={start:function(e){e.resolve()}.bind(null,i),p:i};e.b[n].push(a),r.push(i),1==e.b[n].length&&a.start()}return Promise.all(r).then(function(){var e;try{t()}catch(e){var n=Promise.reject(new u(2,3,3015,e))}for(e in this.c)Be(this,e);return n}.bind(e),function(){return Promise.reject()}.bind(e))}function Be(e,t){e.b[t].shift();var n=e.b[t][0];if(n)try{n.start()}catch(r){n.p.reject(new u(2,3,3015,r)),Be(e,t)}}function Ge(e,t,n){return n==t||e>=mo&&n==t.split("-")[0]||e>=bo&&n.split("-")[0]==t.split("-")[0]}function Ve(e){e=e.toLowerCase().split("-");var t=_o[e[0]];return t&&(e[0]=t),e.join("-")}function He(e,t,n){var r=e.video;return!(r&&(r.width<t.minWidth||r.width>t.maxWidth||r.width>n.width||r.height<t.minHeight||r.height>t.maxHeight||r.height>n.height||r.width*r.height<t.minPixels||r.width*r.height>t.maxPixels)||e.bandwidth<t.minBandwidth||e.bandwidth>t.maxBandwidth)}function Ke(e,t,n){var r=!1;return e.variants.forEach(function(e){var i=e.allowedByApplication;e.allowedByApplication=He(e,t,n),i!=e.allowedByApplication&&(r=!0)}),r}function Ye(e,t,n){var r=t.video,i=t.audio;for(t=0;t<n.variants.length;++t){var a=n.variants[t],o=e,s=i,u=r;(o&&o.J&&!be(o,a)?0:We(a.audio,o,s)&&We(a.video,o,u))||(n.variants.splice(t,1),--t)}for(t=0;t<n.textStreams.length;++t)e=n.textStreams[t],go[nt(e.mimeType,e.codecs)]||(n.textStreams.splice(t,1),--t)}function We(e,t,n){if(!e)return!0;var r=null;return t&&t.J&&(r=t.v),t=nt(e.mimeType,e.codecs),!(!go[t]&&!MediaSource.isTypeSupported(t)||r&&e.encrypted&&0>r.indexOf(t)||n&&(e.mimeType!=n.mimeType||e.codecs.split(".")[0]!=n.codecs.split(".")[0]))}function qe(e,t,n){var r=null;return Je(e.variants).map(function(e){var i;i=e.video&&e.audio?n==e.video.id&&t==e.audio.id:e.video&&n==e.video.id||e.audio&&t==e.audio.id;var a="";e.video&&(a+=e.video.codecs),e.audio&&(""!=a&&(a+=", "),a+=e.audio.codecs,r=e.audio.label);var o=e.audio?e.audio.codecs:null,s=e.video?e.video.codecs:null,u=null;e.video?u=e.video.mimeType:e.audio&&(u=e.audio.mimeType);var l=null;e.audio?l=e.audio.kind:e.video&&(l=e.video.kind);var c=L((e.audio?e.audio.roles:[]).concat(e.video?e.video.roles:[]));return{id:e.id,active:i,type:"variant",bandwidth:e.bandwidth,language:e.language,label:r,kind:l||null,width:e.video?e.video.width:null,height:e.video?e.video.height:null,frameRate:e.video?e.video.frameRate:void 0,mimeType:u,codecs:a,audioCodec:o,videoCodec:s,primary:e.primary,roles:c,videoId:e.video?e.video.id:null,audioId:e.audio?e.audio.id:null}})}function ze(e,t){return e.textStreams.map(function(e){return{id:e.id,active:t==e.id,type:"text",language:e.language,label:e.label,kind:e.kind,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles}})}function Xe(e,t){for(var n=0;n<e.variants.length;n++)if(e.variants[n].id==t.id)return e.variants[n];return null}function $e(e,t){for(var n=0;n<e.textStreams.length;n++)if(e.textStreams[n].id==t.id)return e.textStreams[n];return null}function Je(e){return e.filter(function(e){return e.allowedByApplication&&e.allowedByKeySystem})}function Qe(e,t,n,r){var i=Je(e.variants),a=i.filter(function(e){return e.language==i[0].language});if(e=i.filter(function(e){return e.primary}),e.length&&(a=e),t){var o=Ve(t);[bo,mo,0].forEach(function(e){var t=!1;i.forEach(function(r){o=Ve(o);var i=Ve(r.language);Ge(e,o,i)&&(t?a.push(r):(a=[r],t=!0),n&&(n.audio=!0))})})}var s=r||"";return s&&(t=a.filter(function(e){return e.audio&&-1<e.audio.roles.indexOf(s)||e.video&&-1<e.video.roles.indexOf(s)}),t.length)?t:a}function Ze(e,t,n,r){var i=e.textStreams,a=i;if(e=i.filter(function(e){return e.primary}),e.length&&(a=e),t){var o=Ve(t);[bo,mo,0].forEach(function(e){var t=!1;i.forEach(function(r){var i=Ve(r.language);Ge(e,o,i)&&(t?a.push(r):(a=[r],t=!0),n&&(n.text=!0))})})}var s=r||"";return s&&(t=a.filter(function(e){return e&&-1<e.roles.indexOf(s)}),t.length)?t:a}function et(e,t,n){for(var r=0;r<n.length;r++)if(n[r].audio==e&&n[r].video==t)return n[r];return null}function tt(e,t,n){function r(e,t){return null==e?null==t:t.id==e}for(var i=0;i<n.length;i++)if(r(e,n[i].audio)&&r(t,n[i].video))return n[i];return null}function nt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function rt(e,t){for(var n=e.periods.length-1;0<n;--n)if(t>=e.periods[n].startTime)return n;return 0}function it(e,t){for(var n=0;n<e.periods.length;++n){var r=e.periods[n];if("text"==t.type){for(var i=0;i<r.textStreams.length;++i)if(r.textStreams[i]==t)return n}else for(i=0;i<r.variants.length;++i){var a=r.variants[i];if(a.audio==t||a.video==t||a.video&&a.video.trickModeVideo==t)return n}}return-1}function at(){this.f=null,this.b=!1,this.a=new o,this.h=[],this.g=[],this.j=!1,this.c=null,this.i={minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}}function ot(e,t){return t.filter(function(t){return He(t,e,{width:1/0,height:1/0})}).sort(function(e,t){return e.bandwidth-t.bandwidth})}function st(t,n){var r,i=n||{};for(r in i)this[r]=i[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function ut(e){return JSON.stringify(e,function(e,t){if("manager"!=e&&"function"!=typeof t){if(t instanceof Event||t instanceof st){var n,r={};for(n in t){var i=t[n];i&&"object"==typeof i||n in Event||(r[n]=i)}return r}if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r="number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}})}function lt(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?ct(t):t})}function ct(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function ft(e,t,n,r,i){this.J=e,this.l=t,this.B=n,this.G=r,this.v=i,this.c=this.j=this.h=!1,this.A="",this.a=this.i=null,this.b={video:{},player:{}},this.o=0,this.f={},this.g=null}function dt(e){for(var t in e.f){var n=e.f[t];delete e.f[t],n.reject(new u(1,7,7e3))}}function ht(e,t){var n=ut(t);e.a.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},s)}function pt(){this.nb=new M,this.Ta=this}function vt(e,t,n){pt.call(this),this.c=e,this.b=t,this.h=this.f=this.g=this.i=this.j=null,this.a=new ft(n,this.ee.bind(this),this.fe.bind(this),this.ge.bind(this),this.Vb.bind(this)),yt(this)}function yt(e){e.a.init(),e.h=new C,Eo.forEach(function(e){N(this.h,this.c,e,this.te.bind(this))}.bind(e)),So.forEach(function(e){N(this.h,this.b,e,this.Id.bind(this))}.bind(e)),e.j={};for(var t in e.c)Object.defineProperty(e.j,t,{configurable:!1,enumerable:!0,get:e.se.bind(e,t),set:e.ue.bind(e,t)});e.i={};for(t in e.b)Object.defineProperty(e.i,t,{configurable:!1,enumerable:!0,get:e.Hd.bind(e,t)});e.g=new pt,e.g.Ta=e.j,e.f=new pt,e.f.Ta=e.i}function gt(e,t,n,r){pt.call(this),this.a=e,this.b=t,this.j={video:e,player:t},this.l=n||function(){},this.o=r||function(e){return e},this.i=!1,this.f=!0,this.h=this.g=this.c=null,mt(this)}function mt(t){var n=cast.receiver.CastReceiverManager.getInstance();n.onSenderConnected=t.jc.bind(t),n.onSenderDisconnected=t.jc.bind(t),n.onSystemVolumeChanged=t.Mc.bind(t),t.g=n.getCastMessageBus("urn:x-cast:com.google.cast.media"),t.g.onMessage=t.hd.bind(t),t.c=n.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.c.onMessage=t.vd.bind(t),n.start(),Eo.forEach(function(e){this.a.addEventListener(e,this.mc.bind(this,"video"))}.bind(t)),So.forEach(function(e){this.b.addEventListener(e,this.mc.bind(this,"player"))}.bind(t)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.b.Jb(3840,2160):t.b.Jb(1920,1080),t.b.addEventListener("loading",function(){this.f=!1,bt(this)}.bind(t)),t.a.addEventListener("playing",function(){this.f=!1,bt(this)}.bind(t)),t.a.addEventListener("pause",function(){bt(this)}.bind(t)),t.b.addEventListener("unloading",function(){this.f=!0,bt(this)}.bind(t)),t.a.addEventListener("ended",function(){e.setTimeout(function(){this.a&&this.a.ended&&(this.f=!0,bt(this))}.bind(this),5e3)}.bind(t))}function bt(e){Promise.resolve().then(function(){this.dispatchEvent(new st("caststatuschanged")),Tt(this,0)}.bind(e))}function _t(e,t,n){for(var r in t.player)e.b[r](t.player[r]);e.l(n),n=Promise.resolve();var i=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime),n.catch(function(e){this.b.dispatchEvent(new st("error",{detail:e}))}.bind(e))),n.then(function(){var e;for(e in t.video){var n=t.video[e];this.a[e]=n}for(e in t.playerAfterLoad)n=t.playerAfterLoad[e],this.b[e](n);this.a.autoplay=i,t.manifest&&(this.a.play(),Tt(this,0))}.bind(e))}function Et(e,t,n,r){e.i&&(e=ut(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Tt(e,t,n){var r=xo,r={mediaSessionId:0,playbackRate:e.a.playbackRate,playerState:e.f?r.IDLE:e.b.ka?r.Ac:e.a.paused?r.Bc:r.Cc,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}};n&&(r.media=n),Et(e,{requestId:t,type:"MEDIA_STATUS",status:[r]},e.g)}function wt(e,t){var n=kt(e,t);return 1!=n.length?null:n[0]}function kt(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e.tagName==t})}function St(e){var t=e.firstChild;return t&&t.nodeType==Node.TEXT_NODE?e.textContent.trim():null}function Ot(e,t,n,r){var i=null;return e=e.getAttribute(t),null!=e&&(i=n(e)),null==i?void 0!=r?r:null:i}function At(e){return e?(e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Pt(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Rt(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Dt(e){return e=Number(e),e%1?null:e}function xt(e){return e=Number(e),!(e%1)&&0<e?e:null}function Lt(e){return e=Number(e),!(e%1)&&0<=e?e:null}function It(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1]/t[2]):Number(e),isNaN(e)?null:e}function Mt(e,t,n){e=Ut(e);var r=null,i=null,a=[],o=[],s=e.map(function(e){return e.keyId}).filter(E);if(0<s.length&&(i=s[0],s.some(T(i))))throw new u(2,4,4010);return n||(o=e.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.sc||(r=e.init||r,!1)}),0<o.length&&(a=Nt(r,t,o),a.length||(a=[S("",r)]))),0<e.length&&(n||!o.length)&&(a=G(Lo).map(function(e){return S(e,r)})),i&&a.forEach(function(e){e.initData.forEach(function(e){e.keyId=i})}),{Sb:i,ze:r,drmInfos:a,Ub:!0}}function Ct(e,t,n,r){var i=Mt(e,t,r);if(n.Ub)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=!i.drmInfos.length,(!n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.Ub=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),!n.drmInfos.length))throw new u(2,4,4008);return i.Sb||n.Sb}function Nt(e,t,n){return n.map(function(n){var r=Lo[n.sc];return r?[S(r,n.init||e)]:t(n.node)||[]}).reduce(b,[])}function Ut(e){return e.map(function(e){var t=e.getAttribute("schemeIdUri"),n=e.getAttribute("cenc:default_KID"),r=kt(e,"cenc:pssh").map(St);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),0<=n.indexOf(" ")))throw new u(2,4,4009);var i=[];try{i=r.map(function(e){return{initDataType:"cenc",initData:Z(e),keyId:null}})}catch(e){throw new u(2,4,4007)}return{node:e,sc:t,keyId:n,init:0<i.length?i:null}}).filter(E)}function jt(t,n,r,i,a){null!=a&&(a=Math.round(a));var o={RepresentationID:n,Number:r,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(t,n,r){if("$$"==t)return"$";var i=o[n];return null==i?t:("RepresentationID"==n&&r&&(r=void 0),t=i.toString(),r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t)})}function Ft(e,t){var n=Bt(e,t,"timescale"),r=1;n&&(r=xt(n)||1),n=Bt(e,t,"duration"),(n=xt(n||""))&&(n/=r);var i=Bt(e,t,"startNumber"),a=Bt(e,t,"presentationTimeOffset"),o=Lt(i||"");null!=i&&null!=o||(o=1);var s=Gt(e,t,"SegmentTimeline"),i=null;if(s){for(var i=r,u=Number(a),l=e.R.duration||1/0,s=kt(s,"S"),c=[],f=0,d=0;d<s.length;++d){var h=s[d],p=Ot(h,"t",Lt),v=Ot(h,"d",Lt),h=Ot(h,"r",Dt);if(null!=p&&(p-=u),!v)break;if(p=null!=p?p:f,0>(h=h||0))if(d+1<s.length){if(null==(h=Ot(s[d+1],"t",Lt)))break;if(p>=h)break;h=Math.ceil((h-p)/v)-1}else{if(1/0==l)break;if(p/i>=l)break;h=Math.ceil((l*i-p)/v)-1}0<c.length&&p!=f&&(c[c.length-1].end=p/i);for(var y=0;y<=h;++y)f=p+v,c.push({start:p/i,end:f/i,qe:p}),p=f}i=c}return{timescale:r,P:n,za:o,presentationTimeOffset:Number(a)/r||0,Pb:Number(a),F:i}}function Bt(e,t,n){return[t(e.w),t(e.S),t(e.T)].filter(E).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function Gt(e,t,n){return[t(e.w),t(e.S),t(e.T)].filter(E).map(function(e){return wt(e,n)}).reduce(function(e,t){return e||t})}function Vt(e,t,n){this.a=e,this.X=t,this.M=n}function Ht(e,t,n,r,i,a){this.position=e,this.startTime=t,this.endTime=n,this.a=r,this.X=i,this.M=a}function Kt(e,t){this.H=e,this.a=t==Io,this.u=0}function Yt(){throw new u(2,3,3e3)}function Wt(){this.b=[],this.a=[]}function qt(e){for(;e.s.Z();)e.Na.eb(e.start,e.s)}function zt(e){for(var t=e.s.D();0<t;--t)e.Na.eb(e.start,e.s)}function Xt(e){return function(t){e(t.s.Ka(t.s.H.byteLength-t.s.u))}}function $t(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Jt(e,t,n,r){var i,a=(new Wt).da("sidx",function(e){i=Qt(t,r,n,e)});if(e&&a.parse(e),i)return i;throw new u(2,3,3004)}function Qt(e,t,n,r){var i=[];r.s.I(4);var a=r.s.D();if(!a)throw new u(2,3,3005);if(r.version)var o=r.s.Pa(),s=r.s.Pa();else o=r.s.D(),s=r.s.D();r.s.I(2);var l=r.s.oc();for(t=o-t,e=e+r.size+s,s=0;s<l;s++){var c=r.s.D();o=(2147483648&c)>>>31;var c=2147483647&c,f=r.s.D();if(r.s.I(4),1==o)throw new u(2,3,3006);i.push(new Ht(i.length,t/a,(t+f)/a,function(){return n},e,e+c-1)),t+=f,e+=c}return i}function Zt(e){this.a=e}function en(e,t){if(e.a.length){var n=e.a[e.a.length-1];n.startTime>t||(e.a[e.a.length-1]=new Ht(n.position,n.startTime,t,n.a,n.X,n.M))}}function tn(e){this.b=e,this.a=new Kt(e,0),Mo||(Mo=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function nn(e){var t=rn(e);if(7<t.length)throw new u(2,3,3002);for(var n=0,r=0;r<t.length;r++)n=256*n+t[r];t=n,n=rn(e);e:{for(r=0;r<Mo.length;r++)if(ne(n,Mo[r])){r=!0;break e}r=!1}if(r)n=e.b.byteLength-e.a.u;else{if(8==n.length&&224&n[1])throw new u(2,3,3001);for(var r=n[0]&(1<<8-n.length)-1,i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=e.a.u+n<=e.b.byteLength?n:e.b.byteLength-e.a.u,r=new DataView(e.b.buffer,e.b.byteOffset+e.a.u,n),e.a.I(n),new an(t,r)}function rn(e){var t,n=e.a.Eb();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new u(2,3,3002);var r=new Uint8Array(t);for(r[0]=n,n=1;n<t;n++)r[n]=e.a.Eb();return r}function an(e,t){this.id=e,this.a=t}function on(e){if(8<e.a.byteLength)throw new u(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new u(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++)var r=e.a.getUint8(n),t=256*t+r;return t}function sn(){}function un(e,t,n,r,i,a){function o(){return i}var s=[];e=new tn(e.a);for(var u=-1,l=-1;e.Z();){var c=nn(e);if(187==c.id){var f=ln(c);f&&(c=n*(f.re-a),f=t+f.Nd,0<=u&&s.push(new Ht(s.length,u,c,o,l,f-1)),u=c,l=f)}}return 0<=u&&s.push(new Ht(s.length,u,r,o,l,null)),s}function ln(e){var t=new tn(e.a);if(e=nn(t),179!=e.id)throw new u(2,3,3013);if(e=on(e),t=nn(t),183!=t.id)throw new u(2,3,3012);for(var t=new tn(t.a),n=0;t.Z();){var r=nn(t);if(241==r.id){n=on(r);break}}return{re:e,Nd:n}}function cn(e,t){var n=Gt(e,t,"Initialization");if(!n)return null;var r=e.w.U,i=n.getAttribute("sourceURL");i&&(r=k(e.w.U,[i]));var i=0,a=null;return(n=Ot(n,"range",Rt))&&(i=n.start,a=n.end),new Vt(function(){return r},i,a)}function fn(e,t){var n=Bt(e,hn,"presentationTimeOffset"),r=cn(e,hn),i=Number(n),a=e.w.contentType,o=e.w.mimeType.split("/")[1];if("text"!=a&&"mp4"!=o&&"webm"!=o)throw new u(2,4,4006);if("webm"==o&&!r)throw new u(2,4,4005);var a=Gt(e,hn,"RepresentationIndex"),s=Bt(e,hn,"indexRange"),l=e.w.U,s=Rt(s||"");if(a){var c=a.getAttribute("sourceURL");c&&(l=k(e.w.U,[c])),s=Ot(a,"range",Rt,s)}if(!s)throw new u(2,4,4002);return i=dn(e,t,r,l,s.start,s.end,o,i),{createSegmentIndex:i.createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,presentationTimeOffset:Number(n)||0}}function dn(e,t,n,r,i,a,o,s){var u=e.presentationTimeline,l=!e.Da||!e.R.ub,c=e.R.duration,f=t,d=null;return{createSegmentIndex:function(){var e=[f(r,i,a),"webm"==o?f(n.a(),n.X,n.M):null];return f=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==o?Jt(t,i,r,s):(new sn).parse(t,e,r,s),u.Ha(0,t),d=new Zt(t),l&&en(d,c)})},findSegmentPosition:function(e){return d.find(e)},getSegmentReference:function(e){return d.get(e)}}}function hn(e){return e.Qa}function pn(e,t){var n=cn(e,vn),r=gn(e),i=Ft(e,vn),a=i.za;a||(a=1);var o=0;if(i.P?o=i.P*(a-1):i.F&&0<i.F.length&&(o=i.F[0].start),r={P:i.P,startTime:o,za:a,presentationTimeOffset:i.presentationTimeOffset,F:i.F,Ga:r},!r.P&&!r.F&&1<r.Ga.length)throw new u(2,4,4002);if(!r.P&&!e.R.duration&&!r.F&&1==r.Ga.length)throw new u(2,4,4002);if(r.F&&!r.F.length)throw new u(2,4,4002);return a=i=null,e.T.id&&e.w.id&&(a=e.T.id+","+e.w.id,i=t[a]),o=yn(e.R.duration,r.za,e.w.U,r),i?(i.xb(o),i.qb(e.presentationTimeline.ma()-e.R.start)):(e.presentationTimeline.Ha(0,o),i=new Zt(o),a&&e.Da&&(t[a]=i)),e.Da&&e.R.ub||en(i,e.R.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,presentationTimeOffset:r.presentationTimeOffset}}function vn(e){return e.oa}function yn(e,t,n,r){var i=r.Ga.length;r.F&&r.F.length!=r.Ga.length&&(i=Math.min(r.F.length,r.Ga.length));for(var a=[],o=r.startTime,s=0;s<i;s++){var u=r.Ga[s],l=k(n,[u.cd]),c=null!=r.P?o+r.P:r.F?r.F[s].end:o+e;a.push(new Ht(s+t,o,c,function(e){return e}.bind(null,l),u.start,u.end)),o=c}return a}function gn(e){return[e.w.oa,e.S.oa,e.T.oa].filter(E).map(function(e){return kt(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.$b&&(e.$b=!0);var n=t.getAttribute("media");return t=Ot(t,"mediaRange",Rt,{start:0,end:null}),{cd:n,start:t.start,end:t.end}})}function mn(e,t,n,r){var i=Tn(e),a=Ft(e,bn),o=Bt(e,bn,"media"),s=Bt(e,bn,"index");if(a={P:a.P,timescale:a.timescale,za:a.za,presentationTimeOffset:a.presentationTimeOffset,Pb:a.Pb,F:a.F,wb:o,Ma:s},o=0+(a.Ma?1:0),o+=a.F?1:0,!(o+=a.P?1:0))throw new u(2,4,4002);if(1!=o&&(a.Ma&&(a.F=null),a.P=null),!a.Ma&&!a.wb)throw new u(2,4,4002);if(a.Ma){if("mp4"!=(n=e.w.mimeType.split("/")[1])&&"webm"!=n)throw new u(2,4,4006);if("webm"==n&&!i)throw new u(2,4,4005);r=jt(a.Ma,e.w.id,null,e.bandwidth||null,null),r=k(e.w.U,[r]),e=dn(e,t,i,r,0,null,n,a.presentationTimeOffset)}else a.P?(r||e.presentationTimeline.yb(a.P),e=_n(e,a)):(r=t=null,e.T.id&&e.w.id&&(r=e.T.id+","+e.w.id,t=n[r]),o=En(e,a),t?(t.xb(o),t.qb(e.presentationTimeline.ma()-e.R.start)):(e.presentationTimeline.Ha(0,o),t=new Zt(o),r&&e.Da&&(n[r]=t)),e.Da&&e.R.ub||en(t,e.R.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,presentationTimeOffset:a.presentationTimeOffset}}function bn(e){return e.Ra}function _n(e,t){var n=e.R.duration,r=t.P,i=t.za,a=t.timescale,o=t.wb,s=e.bandwidth||null,u=e.w.id,l=e.w.U;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r;return 0>t||n&&t>=n?null:new Ht(e,t,t+r,function(){var n=jt(o,u,e+i,s,t*a);return k(l,[n])},0,null)}}}function En(e,t){for(var n=[],r=0;r<t.F.length;r++){var i=r+t.za;n.push(new Ht(i,t.F[r].start,t.F[r].end,function(e,t,n,r,i,a){return e=jt(e,t,i,n,a),k(r,[e]).map(function(e){return e.toString()})}.bind(null,t.wb,e.w.id,e.bandwidth||null,e.w.U,i,t.F[r].qe+t.Pb),0,null))}return n}function Tn(e){var t=Bt(e,bn,"initialization");if(!t)return null;var n=e.w.id,r=e.bandwidth||null,i=e.w.U;return new Vt(function(){var e=jt(t,n,null,r,null);return k(i,[e])},0,null)}function wn(){var e,t={};for(e in Co)t[e]=!0;for(e in No)t[e]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(e){t[e]=!!Co[e]}),["mpd","m3u8","ism"].forEach(function(e){t[e]=!!No[e]}),t}function kn(e,t,n,r){var i=r;return i||(r=new l(e).W.split("/").pop().split("."),1<r.length&&(r=r.pop().toLowerCase(),i=No[r])),i?Promise.resolve(i):(n=x([e],n),n.method="HEAD",t.request(0,n).then(function(t){return(t=t.headers["content-type"])&&(t=t.toLowerCase()),(i=Co[t])?i:Promise.reject(new u(2,4,4e3,e))},function(e){return e.severity=2,Promise.reject(e)}))}function Sn(e,t){this.f=e,this.i=t,this.c=this.a=1/0,this.b=1,this.h=0,this.g=!0}function On(){this.a=this.b=null,this.g=[],this.c=null,this.i=[],this.h=1,this.j={},this.l=0,this.f=null}function An(e){return e.a.networkingEngine.request(0,x(e.g,e.b.retryParameters)).then(function(e){if(this.a)return Pn(this,e.data,e.uri)}.bind(e))}function Pn(e,t,n){var r=Y(t),i=new DOMParser,a=null;t=null;try{a=i.parseFromString(r,"text/xml")}catch(e){}if(a&&"MPD"==a.documentElement.tagName&&(t=a.documentElement),t&&0<t.getElementsByTagName("parsererror").length&&(t=null),!t)throw new u(2,4,4001);n=[n],r=kt(t,"Location").map(St).filter(E),0<r.length&&(n=e.g=r),r=kt(t,"BaseURL").map(St),n=k(n,r);var o=Ot(t,"minBufferTime",Pt);e.l=Ot(t,"minimumUpdatePeriod",Pt,-1);var s=Ot(t,"availabilityStartTime",At),r=Ot(t,"timeShiftBufferDepth",Pt),l=Ot(t,"suggestedPresentationDelay",Pt),i=Ot(t,"maxSegmentDuration",Pt),a=t.getAttribute("type")||"static";if(e.c)var c=e.c.presentationTimeline;else{var f=Math.max(10,1.5*o);c=new Sn(s,null!=l?l:f)}var s=Rn(e,{Da:"static"!=a,presentationTimeline:c,T:null,R:null,S:null,w:null,bandwidth:void 0,$b:!1},n,t),l=s.duration,d=s.periods;return c.yc("static"==a),c.pa(l||1/0),c.xc(null!=r?r:1/0),c.yb(i||1),e.c?Promise.resolve():(t=kt(t,"UTCTiming"),Un(e,n,t,c.$()).then(function(e){this.a&&(c.wc(e),this.c={presentationTimeline:c,periods:d,offlineSessionIds:[],minBufferTime:o||0})}.bind(e)))}function Rn(e,t,n,r){var i=Ot(r,"mediaPresentationDuration",Pt),a=[],o=0;r=kt(r,"Period");for(var s=0;s<r.length;s++){var u=r[s],o=Ot(u,"start",Pt,o),l=Ot(u,"duration",Pt),c=null;if(s!=r.length-1){var f=Ot(r[s+1],"start",Pt);null!=f&&(c=f-o)}else null!=i&&(c=i-o);if(null==c&&(c=l),u=Dn(e,t,n,{start:o,duration:c,node:u,ub:null==c||s==r.length-1}),a.push(u),l=t.T.id,e.i.every(T(l))&&(e.a.filterPeriod(u),e.i.push(l),e.c&&e.c.periods.push(u)),null==c){o=null;break}o+=c}return null!=i?{periods:a,duration:i}:{periods:a,duration:o}}function Dn(e,t,n,r){t.T=Mn(r.node,null,n),t.R=r,t.T.id||(t.T.id="__shaka_period_"+r.start),kt(r.node,"EventStream").forEach(e.Fd.bind(e,r.start,r.duration)),n=kt(r.node,"AdaptationSet").map(e.Dd.bind(e,t)).filter(E);var i=n.map(function(e){return e.Pd}).reduce(b,[]),a=i.filter(w);if(t.Da&&i.length!=a.length)throw new u(2,4,4018);var o=n.filter(function(e){return!e.Ob});if(n.filter(function(e){return e.Ob}).forEach(function(e){var t=e.streams[0],n=e.Ob;o.forEach(function(e){e.id==n&&e.streams.forEach(function(e){e.trickModeVideo=t})})}),i=xn(o,"video"),a=xn(o,"audio"),!i.length&&!a.length)throw new u(2,4,4004);for(a.length||(a=[null]),i.length||(i=[null]),t=[],n=0;n<a.length;n++)for(var s=0;s<i.length;s++)Ln(e,a[n],i[s],t);for(e=xn(o,"text"),i=[],n=0;n<e.length;n++)i.push.apply(i,e[n].streams);return{startTime:r.start,textStreams:i,variants:t}}function xn(e,t){return e.filter(function(e){return e.contentType==t})}function Ln(e,t,n,r){if(t||n)if(t&&n){var i=t.drmInfos,a=n.drmInfos;if(i.length&&a.length?0<_e(i,a).length:1)for(var o=_e(t.drmInfos,n.drmInfos),i=0;i<t.streams.length;i++)for(var s=0;s<n.streams.length;s++)a=n.streams[s].bandwidth+t.streams[i].bandwidth,a={id:e.h++,language:t.language,primary:t.vb||n.vb,audio:t.streams[i],video:n.streams[s],bandwidth:a,drmInfos:o,allowedByApplication:!0,allowedByKeySystem:!0},r.push(a)}else for(o=t||n,i=0;i<o.streams.length;i++)a=o.streams[i].bandwidth,a={id:e.h++,language:o.language||"und",primary:o.vb,audio:t?o.streams[i]:null,video:n?o.streams[i]:null,bandwidth:a,drmInfos:o.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(a)}function In(t,n){0>t.l||(t.f=e.setTimeout(t.he.bind(t),1e3*Math.max(Math.max(3,t.l)-n,0)))}function Mn(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0},n=n||t.U;var r=kt(e,"BaseURL").map(St),i=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,s=Ot(e,"frameRate",It)||t.frameRate,u=!!kt(e,"InbandEventStream").length;return i||(i=jn(a,o)),{U:k(n,r),Qa:wt(e,"SegmentBase")||t.Qa,oa:wt(e,"SegmentList")||t.oa,Ra:wt(e,"SegmentTemplate")||t.Ra,width:Ot(e,"width",Lt)||t.width,height:Ot(e,"height",Lt)||t.height,contentType:i,mimeType:a,codecs:o,frameRate:s,containsEmsgBoxes:u||t.containsEmsgBoxes,id:e.getAttribute("id")}}function Cn(e){var t=0+(e.Qa?1:0);return t+=e.oa?1:0,(t+=e.Ra?1:0)?(1!=t&&(e.Qa&&(e.oa=null),e.Ra=null),!0):"text"==e.contentType||"application"==e.contentType}function Nn(e,t,n,r){return t=k(t,[n]),t=x(t,e.b.retryParameters),t.method=r,e.a.networkingEngine.request(0,t).then(function(e){if("HEAD"==r){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=Y(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()})}function Un(e,t,n,r){n=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var i=e.b.dash.clockSyncUri;return r&&!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),m(n,function(e){var n=e.value;switch(e.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Nn(this,t,n,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Nn(this,t,n,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e=Date.parse(n),isNaN(e)?0:e-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:return Promise.reject()}}.bind(e)).catch(function(){return 0})}function jn(e,t){return go[nt(e,t)]?"text":e.split("/")[0]}function Fn(e,t,n,r){this.uri=e,this.type=t,this.ga=n,this.segments=r||null}function Bn(e,t,n,r){this.id=e,this.name=t,this.a=n,this.value=r||null}function Gn(e,t){this.name=e,this.value=t}function Vn(e,t,n){return n=n||null,(e=e.getAttribute(t))?e.value:n}function Hn(e,t){this.ga=t,this.uri=e}function Kn(e,t){return e.filter(function(e){return e.name==t})}function Yn(e,t){var n=Kn(e,t);return n.length?n[0]:null}function Wn(e,t,n){return e.filter(function(e){var r=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),r.value==t&&e.value==n})}function qn(e){this.b=e,this.a=0}function zn(e,t){t.lastIndex=e.a;var n=(n=t.exec(e.b))?{position:n.index,length:n[0].length,Sd:n}:null;return e.a!=e.b.length&&n&&n.position==e.a?(e.a+=n.length,n.Sd):null}function Xn(e){return e.a==e.b.length?null:(e=zn(e,/[^ \t\n]*/gm))?e[0]:null}function $n(){this.a=0}function Jn(e,t,n){t=Y(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var r=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new u(2,4,4015);t=0;for(var i=[],a=1;a<r.length;)if(/^#(?!EXT)/m.test(r[a]))a+=1;else{var o=r[a];if(o=Zn(e.a++,o),0<=Uo.indexOf(o.name))t=1;else if(0<=jo.indexOf(o.name)){if(1!=t)throw new u(2,4,4017);return r=r.splice(a,r.length-a),e=Qn(e,r),new Fn(n,t,i,e)}i.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Gn("URI",r[a])),a+=1)}return new Fn(n,t,i)}function Qn(e,t){var n=[],r=[];return t.forEach(function(e){/^(#EXT)/.test(e)?(e=Zn(this.a++,e),r.push(e)):/^#(?!EXT)/m.test(e)||(n.push(new Hn(e.trim(),r)),r=[])}.bind(e)),n}function Zn(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new u(2,4,4016);var r=n[1],i=n[2],n=[];if(i&&0<=i.indexOf("="))for(var a,i=new qn(i),o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=zn(i,o);)n.push(new Gn(a[1],a[2]||a[3]));else if(i)return new Bn(e,r,n,i);return new Bn(e,r,n)}function er(e){return new Promise(function(t){var n=er.parse(e);t({uri:e,data:n.data,headers:{"content-type":n.contentType}})})}function tr(){this.b=this.c=null,this.i=1,this.g={},this.f={},this.a=null,this.j="",this.h=new $n}function nr(e,t,n){if(t=Jn(e.h,t,n),0!=t.type)throw new u(2,4,4022);return e.a=new Sn(null,0),rr(e,t).then(function(e){return this.c.filterPeriod(e),{presentationTimeline:this.a,periods:[e],offlineSessionIds:[],minBufferTime:0}}.bind(e))}function rr(e,t){var n=Kn(t.ga,"EXT-X-STREAM-INF").map(function(e){return ir(this,e,t)}.bind(e)),r=Kn(t.ga,"EXT-X-MEDIA").filter(function(e){return"SUBTITLES"==yr(e,"TYPE")}.bind(e)).map(function(e){return sr(this,e,t)}.bind(e));return Promise.all(n).then(function(e){return Promise.all(r).then(function(t){var n=e.reduce(b,[]);return dr(this,n),{startTime:0,variants:n,textStreams:t}}.bind(this))}.bind(e))}function ir(e,t,n){var r=Number(yr(t,"BANDWIDTH")),i=Vn(t,"CODECS","avc1.42E01E,mp4a.40.2").split(","),a=t.getAttribute("RESOLUTION"),o=null,s=null,u=Vn(t,"FRAME-RATE");if(a)var l=a.value.split("x"),o=l[0],s=l[1];var c=vr(e,n);n=Kn(n.ga,"EXT-X-MEDIA");var f=Vn(t,"AUDIO"),d=Vn(t,"VIDEO");f?n=Wn(n,"AUDIO",f):d&&(n=Wn(n,"VIDEO",d)),n=n.map(function(e){return ur(this,e,i,c)}.bind(e));var h=[],p=[];return Promise.all(n).then(function(e){if(f?h=e:d&&(p=e),h.length||p.length)var n=h.length?"video":"audio";else 1==i.length?n=a||u?"video":"audio":(n="video",i=[i.join(",")]);return e=i,lr(this,yr(t,"URI"),e,n,c,"und",!1,null)}.bind(e)).then(function(e){return"audio"==e.stream.type?h=[e]:p=[e],ar(this,h,p,r,o,s,u)}.bind(e))}function ar(e,t,n,r,i,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e)),t.length||(t=[null]),n.length||(n=[null]);for(var s=[],u=0;u<t.length;u++)for(var l=0;l<n.length;l++){var c=t[u]?t[u].stream:null,f=n[l]?n[l].stream:null,d=t[u]?t[u].drmInfos:null,h=n[l]?n[l].drmInfos:null;if(c&&f){if(!(d.length&&h.length?0<_e(d,h).length:1))continue;var p=_e(d,h)}else c?p=d:f&&(p=h);s.push(or(e,c,f,r,p))}return s}function or(e,t,n,r,i){return{id:e.i++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function sr(e,t,n){return yr(t,"TYPE"),n=vr(e,n),ur(e,t,[],n).then(function(e){return e.stream})}function ur(e,t,n,r){if(e.g[t.id])return Promise.resolve().then(function(){return this.g[t.id]}.bind(e));var i=yr(t,"TYPE").toLowerCase();"subtitles"==i&&(i="text");var a=Ve(Vn(t,"LANGUAGE","und")),o=Vn(t,"NAME"),s=t.getAttribute("DEFAULT"),u=t.getAttribute("AUTOSELECT");return lr(e,yr(t,"URI"),n,i,r,a,!!s||!!u,o).then(function(e){return this.g[t.id]=e}.bind(e))}function lr(e,t,n,r,i,a,o,s){return t=k([e.j],[t])[0],e.c.networkingEngine.request(0,x([t],e.b.retryParameters)).then(function(e){if(e=Jn(this.h,e.data,e.uri),1!=e.type)throw new u(2,4,4017);i=vr(this,e)||i;var t=null;"text"!=r&&(t=cr(e));var l=Yn(e.ga,"EXT-X-MEDIA-SEQUENCE"),l=fr(this,e,l?Number(l.value):0);this.a.Ha(0,l);var c=l[l.length-1].endTime-l[0].startTime,f=this.a.Y();(1/0==f||f<c)&&this.a.pa(c);var d=hr(r,n),h=void 0;"text"==r&&(h="subtitle");var p=new Zt(l),v=[];e.segments.forEach(function(e){e=Kn(e.ga,"EXT-X-KEY"),v.push.apply(v,e)});var y=!1,g=[],m=null;if(v.forEach(function(e){if("NONE"!=yr(e,"METHOD")){y=!0;var t=yr(e,"KEYFORMAT");(e=(t=Ho[t])?t(e):null)&&(e.keyIds.length&&(m=e.keyIds[0]),g.push(e))}}),y&&!g.length)throw new u(2,4,4026);return pr(this,r,l[0].a()[0]).then(function(e){return e={id:this.i++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:p.find.bind(p),getSegmentReference:p.get.bind(p),initSegmentReference:t,presentationTimeOffset:i||0,mimeType:e,codecs:d,kind:h,encrypted:y,keyId:m,language:a,label:s||null,type:r,primary:o,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[]},this.f[e.id]=p,{stream:e,Ae:p,drmInfos:g}}.bind(this))}.bind(e))}function cr(e){var t=Kn(e.ga,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new u(2,4,4020);var t=t[0],n=yr(t,"URI"),r=k([e.uri],[n])[0];return e=0,n=null,(t=Vn(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),e=Number(e[1]),n=e+t-1),new Vt(function(){return[r]},e,n)}function fr(e,t,n){var r=t.segments,i=[];return r.forEach(function(e){var a,o=e.ga,s=k([t.uri],[e.uri])[0],u=gr(o).value.split(","),u=Number(u[0]);a=(e=r.indexOf(e))?i[e-1].endTime:0;var u=a+u,l=0,c=null;(o=Yn(o,"EXT-X-BYTERANGE"))&&(o=o.value.split("@"),c=Number(o[0]),l=o[1]?Number(o[1]):i[e-1].M,c=l+c-1,e==r.length-1&&(c=null)),i.push(new Ht(n+e,a,u,function(){return[s]},l,c))}.bind(e)),i}function dr(e,t){t.forEach(function(e){var t=this.a.Y(),n=e.video;e=e.audio,n&&this.f[n.id]&&en(this.f[n.id],t),e&&this.f[e.id]&&en(this.f[e.id],t)}.bind(e))}function hr(e,t){if(1==t.length)return t[0];if("text"==e)return"";var n=Fo;"audio"==e&&(n=Bo);for(var r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(n[r].test(t[i].trim()))return t[i].trim();throw new u(2,4,4025,t)}function pr(e,t,n){var r=n.split("."),i=r[r.length-1];return"text"==t?Promise.resolve("text/vtt"):(r=Go,"video"==t&&(r=Vo),(t=r[i])?Promise.resolve(t):(n=x([n],e.b.retryParameters),n.method="HEAD",e.c.networkingEngine.request(1,n).then(function(e){if(!(e=e.headers["content-type"]))throw new u(2,4,4021,i);return e})))}function vr(e,t){var n=Yn(t.ga,"EXT-X-START");return n?Number(yr(n,"TIME-OFFSET")):e.b.hls.defaultTimeOffset}function yr(e,t){var n=e.getAttribute(t);if(!n)throw new u(2,4,4023,t);return n.value}function gr(e){if(!(e=Yn(e,"EXTINF")))throw new u(2,4,4024,"EXTINF");return e}function mr(){}function br(e){var t=[];if(!e)return t;for(var n=e.childNodes,r=0;r<n.length;r++){var i="span"==n[r].nodeName&&"p"==e.nodeName;n[r].nodeType!=Node.ELEMENT_NODE||"br"==n[r].nodeName||i||(i=br(n[r]),t=t.concat(i))}return t.length||t.push(e),t}function _r(e,t){for(var n=e.childNodes,r=0;r<n.length;r++)if("br"==n[r].nodeName&&0<r)n[r-1].textContent+="\n";else if(0<n[r].childNodes.length)_r(n[r],t);else if(t){var i=n[r].textContent.trim(),i=i.replace(/\s+/g," ");n[r].textContent=i}}function Er(e,t,n,r){for(var i=br(t),a=0;a<i.length;a++){var o=i[a].getAttribute(r);if(o)return o}return i=Tr,(e=i(t,"style",n)||i(e,"style",n))?e.getAttribute(r):null}function Tr(e,t,n){if(!e||1>n.length)return null;var r=null,i=e;for(e=null;i&&!(e=i.getAttribute(t))&&(i=i.parentNode)instanceof Element;);if(t=e)for(e=0;e<n.length;e++)if(n[e].getAttribute("xml:id")==t){r=n[e];break}return r}function wr(e,t){var n=null;if(Ko.test(e))var n=Ko.exec(e),r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=Number(n[4]),o=o+(Number(n[5])||0)/t.b,a=a+o/t.frameRate,n=a+60*i+3600*r;else Yo.test(e)?n=kr(Yo,e):Wo.test(e)?n=kr(Wo,e):qo.test(e)?(n=qo.exec(e),n=Number(n[1])/t.frameRate):zo.test(e)?(n=zo.exec(e),n=Number(n[1])/t.a):Xo.test(e)&&(n=kr(Xo,e));return n}function kr(e,t){var n=e.exec(t);return n&&""!=n[0]?(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0):null}function Sr(e,t,n,r){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(r),this.a||(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=e[1]/e[2])}function Or(){this.a=new mr}function Ar(){}function Pr(e,t){var n;(n=/^align:(start|middle|center|end|left|right)$/.exec(t))?(e.align=n[1],"center"==n[1]&&"center"!=e.align&&(e.position="auto",e.align="middle")):(n=/^vertical:(lr|rl)$/.exec(t))?e.vertical=n[1]:(n=/^size:(\d{1,2}|100)%$/.exec(t))?e.size=Number(n[1]):(n=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(n[1]),n[2]&&(e.positionAlign=n[2])):(n=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(t))?(e.snapToLines=!1,e.line=Number(n[1]),n[2]&&(e.lineAlign=n[2])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.snapToLines=!0,e.line=Number(n[1]),n[2]&&(e.lineAlign=n[2]))}function Rr(e){if(!(e=zn(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Dr(){this.a=null}function xr(e,t,n){var r,i,a;return(new Wt).C("payl",Xt(function(e){r=Y(e)})).C("iden",Xt(function(e){i=Y(e)})).C("sttg",Xt(function(e){a=Y(e)})).parse(e),r?Lr(r,i,a,t,n):null}function Lr(e,t,n,r,i){if((e=we(r,i,e))&&t&&(e.id=t),e&&n)for(t=new qn(n),n=Xn(t);n;)Pr(e,n),zn(t,/[ \t]+/gm),n=Xn(t);return e}function Ir(e,t,n,r,i,a){this.a=e,this.c=t,this.l=n,this.A=r,this.J=i,this.G=a,this.b=new C,this.h=!1,this.g=1,this.j=this.f=null,this.B=e.readyState,this.i=!1,this.O=this.v=-1,this.o=!1,0<e.readyState?this.fc():U(this.b,e,"loadedmetadata",this.fc.bind(this)),t=this.hc.bind(this),N(this.b,e,"ratechange",this.rd.bind(this)),N(this.b,e,"waiting",t),this.j=setInterval(t,250)}function Mr(e,t){0<e.a.readyState?e.a.currentTime=Br(e,t):e.A=t}function Cr(e){return 0<e.a.readyState?Br(e,e.a.currentTime):Nr(e)}function Nr(e){return e.A?Br(e,e.A):(e=e.c.presentationTimeline,1/0>e.Y()?e.ma():e.bb())}function Ur(t,n){null!=t.f&&(e.clearInterval(t.f),t.f=null),t.g=n,t.a.playbackRate=t.h||0>n?0:n,!t.h&&0>n&&(t.f=e.setInterval(function(){this.a.currentTime+=n/4}.bind(t),250))}function jr(e,t){var n=Pe.bind(null,e.a.buffered),r=1*Math.max(e.c.minBufferTime||0,e.l.rebufferingGoal),i=e.c.presentationTimeline,a=i.ua(),o=i.Ea(r),s=i.Ea(5),r=i.Ea(r+5);return t>a?a:t<i.Ea(0)?n(s)?s:r:t>=o||n(t)?t:r}function Fr(e,t,n){e.a.currentTime=n;var r=0,i=function(){!this.a||10<=r++||this.a.currentTime!=t||(this.a.currentTime=n,setTimeout(i,100))}.bind(e);setTimeout(i,100)}function Br(e,t){var n=e.c.presentationTimeline.ma();return t<n?n:(n=e.c.presentationTimeline.ua(),t>n?n:t)}function Gr(e,t,n,r,i,a){this.a=e,this.g=t,this.A=n,this.l=r,this.h=i,this.B=a,this.c=[],this.j=new C,this.b=!1,this.i=-1,this.f=null,Hr(this)}function Vr(e){var t=A(e);return t.eventElement=e.eventElement,t}function Hr(t){Kr(t),t.f=e.setTimeout(t.G.bind(t),250)}function Kr(t){t.f&&(e.clearTimeout(t.f),t.f=null)}function Yr(e,t){this.a=t,this.b=e,this.g=null,this.i=1,this.o=Promise.resolve(),this.h=[],this.j={},this.c={},this.f=this.l=this.v=!1}function Wr(e){return e.b.periods[rt(e.b,Cr(e.a.Oa))]}function qr(e){return V(e.c,function(e){return e.na||e.stream})}function zr(e,t){var n={};return n.text=t,Zr(e,n)}function Xr(e,t){var n=e.c.video;if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;if(i){var a=n.na;a||($r(e,"video",i,!1),n.na=r)}}else(a=n.na)&&(n.na=null,$r(e,"video",a,!0))}}function $r(e,t,n,r){var i=e.c[t];if(!i&&"text"==t&&e.g.ignoreTextStreamFailures)zr(e,n);else if(i){var a=it(e.b,n);r&&a!=i.wa?Qr(e):(i.na&&(n.trickModeVideo?(i.na=n,n=n.trickModeVideo):i.na=null),"text"==t&&Le(e.a.K,nt(n.mimeType,n.codecs)),(t=e.h[a])&&t.La&&(t=e.j[n.id])&&t.La&&i.stream!=n&&(i.stream=n,i.cb=!0,r&&(i.sa?i.kb=!0:i.xa?(i.ra=!0,i.kb=!0):(yi(i),pi(e,i,!0)))))}}function Jr(e){var t=Cr(e.a.Oa);Object.keys(e.c).every(function(e){var n=this.a.K;return"text"==e?(e=n.a,e=t>=e.b&&t<e.a):(e=Me(n,e),e=Pe(e,t)),e}.bind(e))||Qr(e)}function Qr(e){for(var t in e.c){var n=e.c[t];n.sa||n.ra||(n.xa?n.ra=!0:null==Ie(e.a.K,t)?null==n.qa&&vi(e,n,0):(yi(n),pi(e,n,!1)))}}function Zr(e,t,n){var r=rt(e.b,Cr(e.a.Oa)),i=V(t,function(e){return nt(e.mimeType,e.codecs)});return e.a.K.init(i),ni(e),i=G(t),ti(e,i).then(function(){if(!this.f)for(var e in t){var i=t[e];this.c[e]||(this.c[e]={stream:i,type:e,Fa:null,ea:null,na:null,cb:!0,wa:r,endOfStream:!1,xa:!1,qa:null,ra:!1,kb:!1,sa:!1,Gb:!1,tb:!1,rc:n||0},vi(this,this.c[e],0))}}.bind(e))}function ei(e,t){var n=e.h[t];if(n)return n.L;n={L:new P,La:!1},e.h[t]=n;var r=e.b.periods[t].variants.map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),e.video&&e.video.trickModeVideo&&t.push(e.video.trickModeVideo),t}).reduce(b,[]).filter(w);return r.push.apply(r,e.b.periods[t].textStreams),e.o=e.o.then(function(){if(!this.f)return ti(this,r)}.bind(e)).then(function(){this.f||(this.h[t].L.resolve(),this.h[t].La=!0)}.bind(e)).catch(function(e){this.f||(this.h[t].L.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.L}function ti(e,t){t.map(function(e){return e.id}).filter(w);for(var n=[],r=0;r<t.length;++r){var i=t[r],a=e.j[i.id];a?n.push(a.L):(e.j[i.id]={L:new P,La:!1},n.push(i.createSegmentIndex()))}return Promise.all(n).then(function(){if(!this.f)for(var e=0;e<t.length;++e){var n=this.j[t[e].id];n.La||(n.L.resolve(),n.La=!0)}}.bind(e)).catch(function(e){if(!this.f)return this.j[i.id].L.reject(),delete this.j[i.id],Promise.reject(e)}.bind(e))}function ni(e){var t=e.b.presentationTimeline.Y();1/0>t?e.a.K.pa(t):e.a.K.pa(Math.pow(2,32))}function ri(e,t){var n=Cr(e.a.Oa),r=t.Fa&&t.ea?e.b.periods[it(e.b,t.Fa)].startTime+t.ea.endTime:Math.max(n,t.rc);t.rc=0;var i=it(e.b,t.stream),a=rt(e.b,r),o=e.a.K,s=t.type;return"text"==s?(o=o.a,o=null==o.a||o.a<n?0:o.a-Math.max(n,o.b)):(o=Me(o,s),o=Re(o,n)),s=Math.max(e.i*Math.max(e.b.minBufferTime||0,e.g.rebufferingGoal),e.i*e.g.bufferingGoal),r>=e.b.presentationTimeline.Y()?(t.endOfStream=!0,null):(t.endOfStream=!1,t.wa=a,a!=i?null:o>=s?.5:(r=e.a.K,a=t.type,r="text"==a?r.a.a:Ae(Me(r,a)),t.ea&&t.stream==t.Fa?(a=t.ea.position+1,r=ii(e,t,i,a)):(a=t.ea?t.stream.findSegmentPosition(Math.max(0,e.b.periods[it(e.b,t.Fa)].startTime+t.ea.endTime-e.b.periods[i].startTime)):t.stream.findSegmentPosition(Math.max(0,(r||n)-e.b.periods[i].startTime)),null==a?r=null:(o=null,null==r&&(o=ii(e,t,i,Math.max(0,a-1))),r=o||ii(e,t,i,a))),r?(ai(e,t,n,i,r),null):1))}function ii(e,t,n,r){return n=e.b.periods[n],(t=t.stream.getSegmentReference(r))?(e=e.b.presentationTimeline,r=e.ua(),n.startTime+t.endTime<e.ma()||n.startTime+t.startTime>r?null:t):null}function ai(e,t,n,r,i){var a=e.b.periods[r],o=t.stream,s=e.b.periods[r+1],u=null,u=s?s.startTime:e.b.presentationTimeline.Y();r=si(e,t,r,u),t.xa=!0,t.cb=!1,s=hi(e,i),Promise.all([r,s]).then(function(e){if(!this.f&&!this.l)return ui(this,t,n,a,o,i,e[1])}.bind(e)).then(function(){this.f||this.l||(t.xa=!1,t.Gb=!1,t.ra||this.a.Ab(),vi(this,t,0),ci(this,o))}.bind(e)).catch(function(e){this.f||this.l||(t.xa=!1,this.b.presentationTimeline.$()&&this.g.infiniteRetriesForLiveStreams&&(1001==e.code||1002==e.code||1003==e.code)?"text"==t.type&&this.g.ignoreTextStreamFailures&&1001==e.code?delete this.c.text:(e.severity=1,this.a.onError(e),vi(this,t,4)):3017==e.code?oi(this,t,e):"text"==t.type&&this.g.ignoreTextStreamFailures?delete this.c.text:(t.tb=!0,e.severity=2,this.a.onError(e)))}.bind(e))}function oi(e,t,n){if(!G(e.c).some(function(e){return e!=t&&e.Gb})){var r=Math.round(100*e.i);if(20<r)e.i-=.2;else{if(!(4<r))return t.tb=!0,e.l=!0,void e.a.onError(n);e.i-=.04}t.Gb=!0}vi(e,t,4)}function si(e,t,n,r){return t.cb?(n=Ue(e.a.K,t.type,e.b.periods[n].startTime-t.stream.presentationTimeOffset,r),t.stream.initSegmentReference?(e=hi(e,t.stream.initSegmentReference).then(function(e){if(!this.f)return Ce(this.a.K,t.type,e,null,null)}.bind(e)).catch(function(e){return t.cb=!0,Promise.reject(e)}),Promise.all([n,e])):n):Promise.resolve()}function ui(e,t,n,r,i,a,o){return i.containsEmsgBoxes&&(new Wt).da("emsg",e.Ed.bind(e,r,a)).parse(o),li(e,t,n).then(function(){if(!this.f)return Ce(this.a.K,t.type,o,a.startTime+r.startTime,a.endTime+r.startTime)}.bind(e)).then(function(){if(!this.f)return t.Fa=i,t.ea=a,Promise.resolve()}.bind(e))}function li(e,t,n){var r=Ie(e.a.K,t.type);return null==r?Promise.resolve():(n=n-r-e.g.bufferBehind,0>=n?Promise.resolve():e.a.K.remove(t.type,r,r+n).then(function(){}.bind(e)))}function ci(e,t){if(!e.v&&(e.v=G(e.c).every(function(e){return"text"==e.type||!e.ra&&!e.sa&&e.ea}),e.v)){var n=it(e.b,t);for(e.h[n]||ei(e,n).then(function(){this.a.ac()}.bind(e)).catch(_),n=0;n<e.b.periods.length;++n)ei(e,n).catch(_);e.a.wd&&e.a.wd()}}function fi(e,t){if(t.wa!=it(e.b,t.stream)){var n=t.wa,r=G(e.c);r.every(function(e){return e.wa==n})&&r.every(di)&&ei(e,n).then(function(){if(!this.f&&r.every(function(e){var t=it(this.b,e.stream);return di(e)&&e.wa==n&&t!=n}.bind(this))){var e,t=this.b.periods[n],i=this.a.bc(t);for(e in this.c)if(!i[e]&&"text"!=e)return void this.a.onError(new u(2,5,5005));for(e in i)if(!this.c[e]){if("text"!=e)return void this.a.onError(new u(2,5,5005));Zr(this,{text:i.text},t.startTime),delete i[e]}for(e in this.c)(t=i[e])?($r(this,e,t,!1),vi(this,this.c[e],0)):delete this.c[e];this.a.ac()}}.bind(e)).catch(_)}}function di(e){return!e.xa&&null==e.qa&&!e.ra&&!e.sa}function hi(e,t){var n=x(t.a(),e.g.retryParameters);if(t.X||null!=t.M){var r="bytes="+t.X+"-";null!=t.M&&(r+=t.M),n.headers.Range=r}return e.a.dd.request(1,n).then(function(e){return e.data})}function pi(e,t,n){t.ra=!1,t.kb=!1,t.sa=!0,Ne(e.a.K,t.type).then(function(){if(!this.f&&n){var e=this.a.K,r=t.type;return"text"==r?Promise.resolve():je(e,r,e.Oc.bind(e,r))}}.bind(e)).then(function(){this.f||(t.Fa=null,t.ea=null,t.sa=!1,t.endOfStream=!1,vi(this,t,0))}.bind(e))}function vi(t,n,r){n.qa=e.setTimeout(t.ke.bind(t,n),1e3*r)}function yi(t){null!=t.qa&&(e.clearTimeout(t.qa),t.qa=null)}function gi(e,t){return new Promise(function(n,r){var i=new XMLHttpRequest;i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onload=function(t){t=t.target;var i=t.getAllResponseHeaders().split("\r\n").reduce(function(e,t){var n=t.split(": ");return e[n[0].toLowerCase()]=n.slice(1).join(": "),e},{});if(200<=t.status&&299>=t.status&&202!=t.status)t.responseURL&&(e=t.responseURL),n({uri:e,data:t.response,headers:i,fromCache:!!i["x-shaka-from-cache"]});else{var a=null;try{a=q(t.response)}catch(e){}r(new u(401==t.status||403==t.status?2:1,1,1001,e,t.status,a,i))}},i.onerror=function(){r(new u(1,1,1002,e))},i.ontimeout=function(){r(new u(1,1,1003,e))};for(var a in t.headers)i.setRequestHeader(a,t.headers[a]);i.send(t.body)})}function mi(){this.a=null,this.b=[],this.c={}}function bi(e,t,n){return Ti(e,t,"readwrite",function(e){e.put(n)})}function _i(e,t,n){return Ti(e,"segment","readwrite",function(e){for(var r=0;r<t.length;r++)e.delete(t[r]).onsuccess=n||function(){}})}function Ei(e,t){var n=0;return Ti(e,t,"readonly",function(e){e.openCursor(null,"prev").onsuccess=function(e){(e=e.target.result)&&(n=e.key+1)}}).then(function(){return n})}function Ti(e,t,n,r){var i={transaction:e.a.transaction([t],n),L:new P};return i.transaction.oncomplete=function(){this.b.splice(this.b.indexOf(i),1),i.L.resolve()}.bind(e),i.transaction.onabort=function(e){this.b.splice(this.b.indexOf(i),1),ki(i.transaction,i.L,e)}.bind(e),i.transaction.onerror=function(e){e.preventDefault()}.bind(e),t=i.transaction.objectStore(t),r(t),e.b.push(i),i.L}function wi(t,n,r){var i=e.indexedDB.open("shaka_offline_db",1),a=!1,o=new P;return i.onupgradeneeded=function(e){a=!0,e=e.target.result;for(var t in n)e.createObjectStore(t,{keyPath:n[t]})},i.onsuccess=function(e){r&&!a?(e.target.result.close(),setTimeout(function(){wi(this,n,r-1).then(o.resolve,o.reject)}.bind(this),1e3)):(this.a=e.target.result,o.resolve())}.bind(t),i.onerror=ki.bind(null,i,o),o}function ki(e,t,n){e.error?t.reject(new u(2,9,9001,e.error)):t.reject(new u(2,9,9002)),n.preventDefault()}function Si(e){var t=Oi(e.periods[0],[],new Sn(null,0)),n=qe(t,null,null),t=ze(t,null);return n.push.apply(n,t),{offlineUri:"offline:"+e.key,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:void 0==e.expiration?1/0:e.expiration,tracks:n,appMetadata:e.appMetadata}}function Oi(e,t,n){var r=e.streams.filter(function(e){return"text"==e.contentType});return t=Pi(e.streams.filter(function(e){return"audio"==e.contentType}),e.streams.filter(function(e){return"video"==e.contentType}),t),r=r.map(Di),e.streams.forEach(function(e){e=Ai(e),n.Ha(0,e)}),{startTime:e.startTime,variants:t,textStreams:r}}function Ai(e){return e.segments.map(function(e,t){return new Ht(t,e.startTime,e.endTime,function(){return[e.uri]},0,null)})}function Pi(e,t,n){var r=[];if(!e.length&&!t.length)return r;e.length?t.length||(t=[null]):e=[null];for(var i=0,a=0;a<e.length;a++)for(var o=0;o<t.length;o++)if(Ri(e[a],t[o])){var s=e[a],u=t[o],l=n;s={id:i++,language:s?s.language:"",primary:!!s&&s.primary||!!u&&u.primary,audio:Di(s),video:Di(u),bandwidth:0,drmInfos:l,allowedByApplication:!0,allowedByKeySystem:!0},r.push(s)}return r}function Ri(e,t){if(!(e&&t&&e.variantIds&&t.variantIds))return!0;for(var n=0;n<e.variantIds.length;n++)if(t.variantIds.some(function(t){return t==e.variantIds[n]}))return!0;return!1}function Di(e){if(!e)return null;var t=Ai(e),t=new Zt(t);return{id:e.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t),initSegmentReference:e.initSegmentUri?new Vt(function(){return[e.initSegmentUri]},0,null):null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[]}}function xi(){return e.indexedDB?new mi:null}function Li(e,t,n,r){this.b={},this.l=[],this.o=r,this.j=e,this.v=t,this.A=n,this.i=this.a=null,this.f=this.g=this.h=this.c=0}function Ii(e,t,n,r,i){e.b[t]=e.b[t]||[],e.b[t].push({uris:n.a(),X:n.X,M:n.M,Rb:r,Hb:i})}function Mi(e,t){e.c=0,e.h=0,e.g=0,e.f=0,G(e.b).forEach(function(e){e.forEach(function(e){null!=e.M?this.c+=e.M-e.X+1:this.g+=e.Rb}.bind(this))}.bind(e)),e.a=t,e.a.size=e.c;var n=G(e.b).map(function(e){var t=0,n=function(){return this.o?t>=e.length?Promise.resolve():Ci(this,e[t++]).then(n):Promise.reject(new u(2,9,9002))}.bind(this);return n()}.bind(e));return e.b={},e.i=Promise.all(n).then(function(){return bi(this.j,"manifest",t)}.bind(e)).then(function(){this.l=[]}.bind(e)),e.i}function Ci(e,t){var n=x(t.uris,e.A);(t.X||null!=t.M)&&(n.headers.Range="bytes="+t.X+"-"+(null==t.M?"":t.M));var r;return e.v.request(1,n).then(function(e){return this.a?(r=e.data.byteLength,this.l.push(t.Hb.key),t.Hb.data=e.data,bi(this.j,"segment",t.Hb)):Promise.reject(new u(2,9,9002))}.bind(e)).then(function(){if(!this.a)return Promise.reject(new u(2,9,9002));null==t.M?(this.a.size+=r,this.f+=t.Rb):this.h+=r;var e=(this.h+this.f)/(this.c+this.g),n=Si(this.a);this.o.progressCallback(n,e)}.bind(e))}function Ni(){this.a=-1}function Ui(e){var t=new Sn(null,0);t.pa(e.duration);var n=e.drmInfo?[e.drmInfo]:[];return{presentationTimeline:t,minBufferTime:10,offlineSessionIds:e.sessionIds,periods:e.periods.map(function(e){return Oi(e,n,t)})}}function ji(e){if(/^offline:([0-9]+)$/.exec(e)){var t={uri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(t)}if(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e)){var n=Number(t[1]),r=xi();return r?r.init(Zo).then(function(){return r.get("segment",n)}).then(function(t){return r.m().then(function(){if(!t)throw new u(2,9,9003,n);return{uri:e,data:t.data,headers:{}}})}):Promise.reject(new u(2,9,9e3))}return Promise.reject(new u(2,1,9004,e))}function Fi(){this.a=Promise.resolve(),this.b=this.c=this.f=!1,this.i=new Promise(function(e){this.g=e}.bind(this))}function Bi(e){return e.f||(e.a=e.a.then(function(e){return this.c=!0,Promise.resolve(e)}.bind(e),function(e){return this.c=!0,this.b?(this.g(),Promise.reject(this.h)):Promise.reject(e)}.bind(e))),e.f=!0,e.a}function Gi(e,t){pt.call(this),this.O=!1,this.f=e,this.A=null,this.l=new C,this.Qb=new at,this.Ya=this.c=this.h=this.a=this.v=this.g=this.Wa=this.ja=this.N=this.j=this.o=null,this.Dc=1e9,this.Va=[],this.ka=!1,this.Za=!0,this.la=this.J=null,this.G={},this.Xa=[],this.B={},this.b=$i(this),this.ob={width:1/0,height:1/0},this.i=Ji(),this.Ua=0,this.ia=this.b.preferredAudioLanguage,this.Ca=this.b.preferredTextLanguage,this.lb=this.mb="",t&&t(this),this.o=new R(this.de.bind(this)),this.Wa=Hi(this);for(var n=0;n<this.f.textTracks.length;++n){var r=this.f.textTracks[n];r.mode="disabled","Shaka Player TextTrack"==r.label&&(this.A=r)}this.A||(this.A=this.f.addTextTrack("subtitles","Shaka Player TextTrack")),this.A.mode="hidden",N(this.l,this.f,"error",this.yd.bind(this))}function Vi(e){function t(e){return(e.video?e.video.codecs.split(".")[0]:"")+"-"+(e.audio?e.audio.codecs.split(".")[0]:"")}var n={};e.c.periods.forEach(function(e){e.variants.forEach(function(e){var r=t(e);r in n||(n[r]=[]),n[r].push(e)})});var r=null,i=1/0;K(n,function(e,t){var n=0,a=0;t.forEach(function(e){n+=e.bandwidth,++a});var o=n/a;o<i&&(r=e,i=o)}),e.c.periods.forEach(function(e){e.variants=e.variants.filter(function(e){return t(e)==r})})}function Hi(t){t.N=new MediaSource;var n=new P;return N(t.l,t.N,"sourceopen",n.resolve),t.f.src=e.URL.createObjectURL(t.N),n}function Ki(e){if(e.h&&e.h.configure(e.b.manifest),e.j&&e.j.configure(e.b.drm),e.a){e.a.configure(e.b.streaming);try{e.c.periods.forEach(e.fb.bind(e))}catch(t){e.ya(t)}na(e,Wr(e.a))}e.b.abr.enabled&&!e.Za?e.b.abr.manager.enable():e.b.abr.manager.disable(),e.b.abr.manager.setDefaultEstimate(e.b.abr.defaultBandwidthEstimate),e.b.abr.manager.setRestrictions(e.b.abr.restrictions)}function Yi(e,t,n){e.i.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:t.type,fromAdaptation:n}),Wi(e,t)}function Wi(e,t){var n=it(e.c,t);e.B[n]||(e.B[n]={}),e.B[n][t.type]=t.id}function qi(e){e.l&&(e.l.ha(e.N,"sourceopen"),e.l.ha(e.f,"loadeddata"),e.l.ha(e.f,"playing"),e.l.ha(e.f,"pause"),e.l.ha(e.f,"ended")),e.f&&(e.f.removeAttribute("src"),e.f.load());var t=Promise.all([e.b?e.b.abr.manager.stop():null,e.j?e.j.m():null,e.ja?e.ja.m():null,e.g?e.g.m():null,e.v?e.v.m():null,e.a?e.a.m():null,e.h?e.h.stop():null]);return e.j=null,e.ja=null,e.g=null,e.v=null,e.a=null,e.h=null,e.c=null,e.Ya=null,e.Wa=null,e.N=null,e.Xa=[],e.B={},e.G={},e.i=Ji(),t}function zi(e){return e.h?qi(e).then(function(){this.O||(this.zc(!1),this.Wa=Hi(this))}.bind(e)):Promise.resolve()}function Xi(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}}}function $i(e){return{drm:{retryParameters:D(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:D(),dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1},hls:{defaultTimeOffset:0}},streaming:{retryParameters:D(),infiniteRetriesForLiveStreams:!0,rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1},abr:{manager:e.Qb,enabled:!0,defaultBandwidthEstimate:5e5,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}}}function Ji(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function Qi(e,t,n){for(var r in t){var i=t[r],a=n||!1;"text"==r&&(a=!0),e.Za?e.G[r]={stream:i,Kc:a}:$r(e.a,r,i,a)}}function Zi(e){if(e.c){var t=Date.now()/1e3;e.ka?e.i.bufferingTime+=t-e.Ua:e.i.playTime+=t-e.Ua,e.Ua=t}}function ea(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-i.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+i.startTime:null}var r=qr(e.a),i=Wr(e.a),a=n(r.video,t),r=n(r.audio,t);return null!=a&&null!=r?Math.max(a,r):null!=a?a:null!=r?r:t}function ta(e,t,n,r,i){if(!n||1>n.length)return e.ya(new u(2,4,4012)),{};e.b.abr.manager.setVariants(n),e.b.abr.manager.setTextStreams(r);var a=[];i&&(a=["video","audio"],t.textStreams.length&&a.push("text")),i=qr(e.a);var o=e.a,s=o.c.video||o.c.audio;if(o=s?o.b.periods[s.wa]:null,t=et(i.audio,i.video,o?o.variants:t.variants)){t.allowedByApplication&&t.allowedByKeySystem||(a.push("audio"),a.push("video"));for(var l in i)t=i[l],"audio"==t.type&&t.language!=n[0].language?a.push(l):"text"==t.type&&0<r.length&&t.language!=r[0].language&&a.push(l)}if(a=a.filter(w),0<a.length){n={};try{n=e.b.abr.manager.chooseStreams(a)}catch(t){e.ya(t)}return n}return{}}function na(e,t){var n,r={audio:!1,text:!1},i=Qe(t,e.ia,r,e.mb),a=Ze(t,e.Ca,r,e.lb),i=ta(e,t,i,a);for(n in i)Yi(e,i[n],!0);Qi(e,i,!0),ra(e),i.text&&i.audio&&r.text&&i.text.language!=i.audio.language&&(e.A.mode="showing",aa(e))}function ra(e){Promise.resolve().then(function(){this.O||this.dispatchEvent(new st("adaptation"))}.bind(e))}function ia(e){Promise.resolve().then(function(){this.O||this.dispatchEvent(new st("trackschanged"))}.bind(e))}function aa(e){e.dispatchEvent(new st("texttrackvisibility"))}function oa(e){if(!e||e.constructor!=Gi)throw new u(2,9,9008);this.a=xi(),this.f=e,this.i=la(this),this.b=null,this.v=!1,this.j=null,this.g=-1,this.l=0,this.c=null,this.h=new Li(this.a,e.o,e.getConfiguration().streaming.retryParameters,this.i)}function sa(){return!!e.indexedDB}function ua(e,t,n,r){function i(){}var a,o,s,u=e.f.o,l=e.f.getConfiguration();return kn(t,u,l.manifest.retryParameters,r).then(function(e){return pa(this),s=new e,s.configure(l.manifest),s.start(t,{networkingEngine:u,filterPeriod:this.o.bind(this),onTimelineRegionAdded:function(){},onEvent:function(){},onError:n})}.bind(e)).then(function(e){return pa(this),a=e,o=new re(u,n,i,function(){}),o.configure(l.drm),o.init(a,!0)}.bind(e)).then(function(){return pa(this),da(a)}.bind(e)).then(function(){return pa(this),oe(o)}.bind(e)).then(function(){return pa(this),s.stop()}.bind(e)).then(function(){return pa(this),{manifest:a,Lc:o}}.bind(e)).catch(function(e){if(s)return s.stop().then(function(){throw e});throw e})}function la(e){return{trackSelectionCallback:e.A.bind(e),progressCallback:function(e,t){if(e||t)return null}}}function ca(e){return e.a?e.a.a?Promise.resolve():e.a.init(Zo):Promise.reject(new u(2,9,9e3))}function fa(e){var t=e.b?e.b.m():Promise.resolve();return e.b=null,e.c=null,e.v=!1,e.j=null,e.g=-1,t}function da(e){var t=e.periods.map(function(e){return e.variants}).reduce(b,[]).map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}).reduce(b,[]).filter(w);return e=e.periods.map(function(e){return e.textStreams}).reduce(b,[]),t.push.apply(t,e),Promise.all(t.map(function(e){return e.createSegmentIndex()}))}function ha(e,t,n,r,i){for(var a=[],o=e.c.presentationTimeline.ma(),s=o,u=n.findSegmentPosition(o),l=null!=u?n.getSegmentReference(u):null;l;)s=e.a.c.segment++,Ii(e.h,n.type,l,(l.endTime-l.startTime)*r/8,{key:s,data:null,manifestKey:e.g,streamNumber:n.id,segmentNumber:s}),a.push({startTime:l.startTime,endTime:l.endTime,uri:"offline:"+e.g+"/"+n.id+"/"+s}),s=l.endTime+t.startTime,l=n.getSegmentReference(++u);return e.l=Math.max(e.l,s-o),t=null,n.initSegmentReference&&(s=e.a.c.segment++,t="offline:"+e.g+"/"+n.id+"/"+s,Ii(e.h,n.contentType,n.initSegmentReference,0,{key:s,data:null,manifestKey:e.g,streamNumber:n.id,segmentNumber:-1})),e=[],null!=i&&e.push(i),{id:n.id,primary:n.primary,presentationTimeOffset:n.presentationTimeOffset||0,contentType:n.type,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,kind:n.kind,language:n.language,label:n.label,width:n.width||null,height:n.height||null,initSegmentUri:t,encrypted:n.encrypted,keyId:n.keyId,segments:a,variantIds:e}}function pa(e){if(!e.f)throw new u(2,9,9002)}function va(e){ts.push(e)}function ya(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else n=document.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function ga(e){this.f=[],this.b=[],this.a=[],(new Wt).da("pssh",this.c.bind(this)).parse(e.buffer)}function ma(e,t){try{var n=new ba(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function ba(e,t){this.keySystem=e;for(var n=!1,r=0;r<t.length;++r){var i=t[r],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},o=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var u=i.audioCapabilities[s];if(u.contentType){o=!0;var l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)u=i.videoCapabilities[s],u.contentType&&(o=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.videoCapabilities.push(u),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(a.persistentState="required",a.sessionTypes=["persistent-license"]),n)return void(this.a=a)}throw i=Error("Unsupported keySystem"),i.name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function _a(e){var t=this.mediaKeys;return t&&t!=e&&Ta(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Ta(e,this):Promise.resolve()}function Ea(e){this.a=new MSMediaKeys(e),this.b=new C}function Ta(e,t){function n(){t.msSetMediaKeys(r.a),t.removeEventListener("loadedmetadata",n)}if(j(e.b),!t)return Promise.resolve();N(e.b,t,"msneedkey",ka);var r=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",n),Promise.resolve()}catch(e){return Promise.reject(e)}}function wa(e){pt.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new C,this.sessionId="",this.expiration=NaN,this.closed=new P,this.keyStatuses=new Aa}function ka(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc";var n=e.initData;if(n){var r=new ga(n);if(1>=r.a.length)e=n;else{var i=[];for(e=0;e<r.a.length;e++)i.push(n.subarray(r.a[e].start,r.a[e].end+1));for(n=L(i,Sa),e=r=0;e<n.length;e++)r+=n[e].length;for(r=new Uint8Array(r),e=i=0;e<n.length;e++)r.set(n[e],i),i+=n[e].length;e=r}}else e=n;t.initData=e,this.dispatchEvent(t)}function Sa(e,t){return ne(e,t)}function Oa(e,t){e.keyStatuses.Kb(t),e.dispatchEvent(new st("keystatuseschange"))}function Aa(){this.size=0,this.a=void 0}function Pa(){return Promise.reject(Error("The key system specified is not supported."))}function Ra(e){return e?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function Da(){throw new TypeError("Illegal constructor.")}function xa(){throw new TypeError("Illegal constructor.")}function La(t){rs=t,is=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Ma,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ca,e.MediaKeys=Ua,e.MediaKeySystemAccess=Na}function Ia(e){var t=rs;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Ma(e,t){try{var n=new Na(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Ca(e){var t=this.mediaKeys;return t&&t!=e&&ja(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&ja(e,this),Promise.resolve()}function Na(e,t){this.a=this.keySystem=e;var n=!0;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);for(var r=!1,i=document.getElementsByTagName("video"),a=i.length?i[0]:document.createElement("video"),o=0;o<t.length;++o){i=t[o];var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},u=!1;if(i.audioCapabilities)for(var l=0;l<i.audioCapabilities.length;++l){var c=i.audioCapabilities[l];if(c.contentType){var u=!0,f=c.contentType.split(";")[0];a.canPlayType(f,this.a)&&(s.audioCapabilities.push(c),r=!0)}}if(i.videoCapabilities)for(l=0;l<i.videoCapabilities.length;++l)c=i.videoCapabilities[l],c.contentType&&(u=!0,a.canPlayType(c.contentType,this.a)&&(s.videoCapabilities.push(c),r=!0));if(u||(r=a.canPlayType("video/mp4",this.a)||a.canPlayType("video/webm",this.a)),"required"==i.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),n=Error(n),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Ua(e){this.g=e,this.b=null,this.a=new C,this.c=[],this.f={}}function ja(e,t){e.b=t,j(e.a);var n=rs;t&&(N(e.a,t,n+"needkey",e.Cd.bind(e)),N(e.a,t,n+"keymessage",e.Bd.bind(e)),N(e.a,t,n+"keyadded",e.zd.bind(e)),N(e.a,t,n+"keyerror",e.Ad.bind(e)))}function Fa(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Ba(e,t,n){pt.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new P,this.keyStatuses=new Ha}function Ga(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var r=new Uint8Array(z("LOAD_SESSION|"+n));else{var i=z("PERSISTENT|"),a=new Uint8Array(i.byteLength+t.byteLength);a.set(new Uint8Array(i),0),a.set(new Uint8Array(t),i.byteLength),r=a}else r=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new P;var o=Ia("generateKeyRequest");try{e.f[o](e.c,r)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);setTimeout(function(){try{this.f[o](this.c,r)}catch(e){this.b.reject(e),this.b=null}}.bind(e),10)}return e.b}function Va(e,t){e.keyStatuses.Kb(t),e.dispatchEvent(new st("keystatuseschange"))}function Ha(){this.size=0,this.a=void 0}function Ka(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,arguments);return t.abort=function(){},t}}function Ya(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var t,n=0,r=0;r<this.sourceBuffers.length;++r)t=this.sourceBuffers[r],t=t.buffered.end(t.buffered.length-1),n=Math.max(n,t);if(!isNaN(this.duration)&&n<this.duration)for(this.Zb=!0,r=0;r<this.sourceBuffers.length;++r)t=this.sourceBuffers[r],t.Tb=!1;return e.apply(this,arguments)};var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=t.apply(this,arguments);return e.N=this,e.addEventListener("updateend",Wa,!1),this.a||(this.addEventListener("sourceclose",qa,!1),this.a=!0),e}}function Wa(e){var t=e.target,n=t.N;if(n.Zb){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.Tb=!0,e=0;e<n.sourceBuffers.length;++e)if(0==n.sourceBuffers[e].Tb)return;n.Zb=!1}}function qa(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",Wa,!1);e.removeEventListener("sourceclose",qa,!1)}function za(e){if(this.c=[],this.b=[],this.Aa=as,e)try{e(this.fa.bind(this),this.a.bind(this))}catch(e){this.a(e)}}function Xa(e){var t=new za;return t.fa(void 0),t.then(function(){return e})}function $a(e){var t=new za;return t.a(e),t}function Ja(e){function t(e,t,n){e.Aa==as&&(i[t]=n,++r==i.length&&e.fa(i))}var n=new za;if(!e.length)return n.fa([]),n;for(var r=0,i=Array(e.length),a=n.a.bind(n),o=0;o<e.length;++o)e[o]&&e[o].then?e[o].then(t.bind(null,n,o),a):t(n,o,e[o]);return n}function Qa(e){for(var t=new za,n=t.fa.bind(t),r=t.a.bind(t),i=0;i<e.length;++i)e[i]&&e[i].then?e[i].then(n,r):n(e[i]);return t}function Za(e,t,n){ss.push(function(){if(n&&"function"==typeof n){try{var e=n(this.jb)}catch(e){return void t.a(e)}try{var r=e&&e.then}catch(e){return void t.a(e)}e instanceof za?e==t?t.a(new TypeError("Chaining cycle detected")):e.then(t.fa.bind(t),t.a.bind(t)):r?eo(e,r,t):t.fa(e)}else 1==this.Aa?t.fa(this.jb):t.a(this.jb)}.bind(e)),null==os&&(os=no(to))}function eo(e,t,n){try{var r=!1;t.call(e,function(e){if(!r){r=!0;try{var t=e&&e.then}catch(e){return void n.a(e)}t?eo(e,t,n):n.fa(e)}},n.a.bind(n))}catch(e){n.a(e)}}function to(){for(;ss.length;){null!=os&&(ro(os),os=null);var e=ss;ss=[];for(var t=0;t<e.length;++t)e[t]()}}function no(){return 0}function ro(){}function io(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function ao(t,n,r){return new e.TextTrackCue(t,n,r)}function oo(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}var so,uo=this;uo.we=!0,o.prototype.setDefaultEstimate=function(e){this.b=e},o.prototype.getBandwidthEstimate=function(){return 128e3>this.a?this.b:Math.min(a(this.c),a(this.f))},t("shaka.util.Error",u),u.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},u.Severity={RECOVERABLE:1,CRITICAL:2},u.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},u.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008};var lo=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;so=l.prototype,so.aa="",so.Ba="",so.ca="",so.Ja=null,so.W="",so.ta="",so.toString=function(){var e=[],t=this.aa;if(t&&e.push(p(t,co,!0),":"),t=this.ca){e.push("//");var n=this.Ba;n&&e.push(p(n,co,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ja,null!=t&&e.push(":",String(t))}return(t=this.W)&&(this.ca&&"/"!=t.charAt(0)&&e.push("/"),e.push(p(t,"/"==t.charAt(0)?ho:fo,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.ta)&&e.push("#",p(t,vo)),e.join("")},so.resolve=function(e){var t=new l(this);"data"===t.aa&&(t=new l);var n=!!e.aa;n?c(t,e.aa):n=!!e.Ba,n?t.Ba=e.Ba:n=!!e.ca,n?t.ca=e.ca:n=null!=e.Ja;var r=e.W;if(n)f(t,e.Ja);else if(n=!!e.W){if("/"!=r.charAt(0))if(this.ca&&!this.W)r="/"+r;else{var i=t.W.lastIndexOf("/");-1!=i&&(r=t.W.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){for(var i=!r.lastIndexOf("/",0),r=r.split("/"),a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.W=r:n=""!==e.a.toString(),n?d(t,g(e.a)):n=!!e.ta,n&&(t.ta=e.ta),t};var co=/[#\/\?@]/g,fo=/[\#\?:]/g,ho=/[\#\?]/g,po=/[\#\?@]/g,vo=/#/g;y.prototype.a=null,y.prototype.c=null,y.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var e,t=[];for(e in this.a)for(var n=encodeURIComponent(e),r=this.a[e],i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),t.push(a)}return this.b=t.join("&")},t("shaka.net.NetworkingEngine",R),R.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3};var yo={};R.registerScheme=function(e,t){yo[e]=t},R.unregisterScheme=function(e){delete yo[e]},R.prototype.Ld=function(e){this.b.push(e)},R.prototype.registerRequestFilter=R.prototype.Ld,R.prototype.oe=function(e){var t=this.b;0<=(e=t.indexOf(e))&&t.splice(e,1)},R.prototype.unregisterRequestFilter=R.prototype.oe,R.prototype.Ic=function(){this.b=[]},R.prototype.clearAllRequestFilters=R.prototype.Ic,R.prototype.Md=function(e){this.c.push(e)},R.prototype.registerResponseFilter=R.prototype.Md,R.prototype.pe=function(e){var t=this.c;0<=(e=t.indexOf(e))&&t.splice(e,1)},R.prototype.unregisterResponseFilter=R.prototype.pe,R.prototype.Jc=function(){this.c=[]},R.prototype.clearAllResponseFilters=R.prototype.Jc,R.prototype.m=function(){this.f=!0,this.b=[],this.c=[];for(var e=[],t=0;t<this.a.length;++t)e.push(this.a[t].catch(_));return Promise.all(e)},R.prototype.destroy=R.prototype.m,R.prototype.request=function(t,n){if(this.f)return Promise.reject();n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?A(n.retryParameters):D(),n.uris=A(n.uris);var r=Date.now(),i=Promise.resolve();return this.b.forEach(function(e){i=i.then(e.bind(null,t,n))}),i=i.catch(function(e){throw new u(2,1,1006,e)}),i=i.then(function(){for(var i=Date.now()-r,a=n.retryParameters||{},o=a.maxAttempts||1,s=a.backoffFactor||2,a=null==a.baseDelay?1e3:a.baseDelay,u=this.g(t,n,0,i),l=1;l<o;l++)u=u.catch(function(r,a,o){if(o&&1==o.severity){o=new P;var s=n.retryParameters||{};return e.setTimeout(o.resolve,r*(1+(2*Math.random()-1)*(null==s.fuzzFactor?.5:s.fuzzFactor))),o.then(this.g.bind(this,t,n,a,i))}throw o}.bind(this,a,l%n.uris.length)),a*=s;return u}.bind(this)),this.a.push(i),i.then(function(e){return 0<=this.a.indexOf(i)&&this.a.splice(this.a.indexOf(i),1),this.h&&!e.fromCache&&1==t&&this.h(e.timeMs,e.data.byteLength),e}.bind(this)).catch(function(e){return e&&(e.severity=2),0<=this.a.indexOf(i)&&this.a.splice(this.a.indexOf(i),1),Promise.reject(e)}.bind(this))},R.prototype.request=R.prototype.request,R.prototype.g=function(e,t,n,r){if(this.f)return Promise.reject();var i=new l(t.uris[n]),a=i.aa;if(a||(a=location.protocol,a=a.slice(0,-1),c(i,a),t.uris[n]=i.toString()),!(a=yo[a]))return Promise.reject(new u(2,1,1e3,i));var o=Date.now();return a(t.uris[n],t,e).then(function(t){void 0==t.timeMs&&(t.timeMs=Date.now()-o);var n=Date.now(),i=Promise.resolve();return this.c.forEach(function(n){i=i.then(function(){return Promise.resolve(n(e,t))}.bind(this))}),i=i.catch(function(e){var t=2;throw e instanceof u&&(t=e.severity),new u(t,1,1007,e)}),i.then(function(){return t.timeMs+=Date.now()-n,t.timeMs+=r,t})}.bind(this))},M.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},M.prototype.get=function(e){return(e=this.a[e])?e.slice():null},M.prototype.remove=function(e,t){var n=this.a[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)},C.prototype.m=function(){return j(this),this.a=null,Promise.resolve()},C.prototype.ha=function(e,t){if(this.a)for(var n=this.a.get(t)||[],r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.ha(),this.a.remove(t,i))}},F.prototype.ha=function(){this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null},t("shaka.util.StringUtils.fromUTF8",Y),t("shaka.util.StringUtils.fromUTF16",W),t("shaka.util.StringUtils.fromBytesAutoDetect",q),t("shaka.util.StringUtils.toUTF8",z),$.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},t("shaka.util.Uint8ArrayUtils.toBase64",Q),t("shaka.util.Uint8ArrayUtils.fromBase64",Z),t("shaka.util.Uint8ArrayUtils.fromHex",ee),t("shaka.util.Uint8ArrayUtils.toHex",te),t("shaka.util.Uint8ArrayUtils.equal",ne),t("shaka.util.Uint8ArrayUtils.concat",function(e){for(var t=0,n=0;n<arguments.length;++n)t+=arguments[n].length;for(var t=new Uint8Array(t),r=0,n=0;n<arguments.length;++n)t.set(arguments[n],r),r+=arguments[n].length;return t}),so=re.prototype,so.m=function(){this.c=!0;var e=this.a.map(function(e){return(e.ba.close()||Promise.resolve()).catch(_)});return this.l.reject(),this.f&&e.push(this.f.m()),this.j&&e.push(this.j.setMediaKeys(null).catch(_)),this.O&&(clearInterval(this.O),this.O=null),this.B&&this.B.cancel(),this.f=this.j=this.i=this.v=this.b=this.B=null,this.a=[],this.o=[],this.la=this.g=this.h=this.ka=null,Promise.all(e)},so.configure=function(e){this.h=e},so.init=function(e,t){var n={},r=[];return this.ja=t,this.o=e.offlineSessionIds,ue(this,e,t||0<e.offlineSessionIds.length,n,r),r.length?le(this,n,r):(this.J=!0,Promise.resolve())},so.keySystem=function(){return this.b?this.b.keySystem:""},so.ab=function(){var e=this.a.map(function(e){return e=e.ba.expiration,isNaN(e)?1/0:e});return Math.min.apply(Math,e)},so.fd=function(e){for(var t=new Uint8Array(e.initData),n=0;n<this.a.length;++n)if(ne(t,this.a[n].initData))return;ve(this,e.initDataType,t)},so.kc=function(e){this.h.delayLicenseRequestUntilPlayed&&this.j.paused&&!this.ia?this.G.push(e):ye(this,e)},so.ec=function(e){e=e.target;var t;for(t=0;t<this.a.length&&this.a[t].ba!=e;++t);if(t!=this.a.length){var n=!1;e.keyStatuses.forEach(function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if("com.microsoft.playready"==this.b.keySystem&&16==r.byteLength){var i=new DataView(r),a=i.getUint32(0,!0),o=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,a,!1),i.setUint16(4,o,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(this.a[t].loaded=!0,this.a.every(function(e){return e.loaded})&&this.l.resolve()),"expired"==e&&(n=!0),i=te(new Uint8Array(r)),this.A[i]=e}.bind(this));var r=e.expiration-Date.now();(0>r||n&&1e3>r)&&!this.a[t].ib&&(this.a.splice(t,1),e.close()),J(this.B)}},so.Kd=function(){function e(e,t){return"expired"==t}!B(this.A)&&H(this.A,e)&&this.g(new u(2,6,6014)),this.Ca(this.A)},so.qd=function(){for(var e=0;e<this.G.length;e++)ye(this,this.G[e]);this.ia=!0,this.G=[]},so.Jd=function(){this.a.forEach(function(e){var t=e.zb,n=e.ba.expiration;isNaN(n)&&(n=1/0),n!=t&&(this.la(e.ba.sessionId,n),e.zb=n)}.bind(this))};var go={};t("shaka.media.TextEngine.registerParser",Te),t("shaka.media.TextEngine.unregisterParser",function(e){delete go[e]}),t("shaka.media.TextEngine.makeCue",we),Ee.prototype.m=function(){return this.c&&Se(this,function(){return!0}),this.c=this.f=null,Promise.resolve()},Ee.prototype.remove=function(e,t){return Promise.resolve().then(function(){this.c&&(Se(this,function(n){return!(n.startTime>=t||n.endTime<=e)}),null==this.b||t<=this.b||e>=this.a||(e<=this.b&&t>=this.a?this.b=this.a=null:e<=this.b&&t<this.a?this.b=t:e>this.b&&t>=this.a&&(this.a=e)))}.bind(this))},Oe.prototype.parseInit=function(e){this.Na(e,0,null,null)},Oe.prototype.parseMedia=function(e,t){return this.Na(e,t.periodStart,t.segmentStart,t.segmentEnd)},so=De.prototype,so.m=function(){this.h=!0;var e,t=[];for(e in this.b){var n=this.b[e],r=n[0];for(this.b[e]=n.slice(0,1),r&&t.push(r.p.catch(_)),r=1;r<n.length;++r)n[r].p.catch(_),n[r].p.reject()}return this.a&&t.push(this.a.m()),Promise.all(t).then(function(){this.g.m(),this.a=this.i=this.N=this.f=this.g=null,this.c={},this.b={}}.bind(this))},so.init=function(e){for(var t in e){var n=e[t];"text"==t?Le(this,n):(n=this.N.addSourceBuffer(n),N(this.g,n,"error",this.je.bind(this,t)),N(this.g,n,"updateend",this.Ia.bind(this,t)),this.c[t]=n,this.b[t]=[])}},so.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):je(this,e,this.qc.bind(this,e,t,n))},so.endOfStream=function(e){return Fe(this,function(){e?this.N.endOfStream(e):this.N.endOfStream()}.bind(this))},so.pa=function(e){return Fe(this,function(){this.N.duration=e}.bind(this))},so.Y=function(){return this.N.duration},so.ie=function(e,t){this.c[e].appendBuffer(t)},so.qc=function(e,t,n){n<=t?this.Ia(e):this.c[e].remove(t,n)},so.Ec=function(e){var t=this.c[e].appendWindowEnd;this.c[e].abort(),this.c[e].appendWindowEnd=t,this.Ia(e)},so.Oc=function(e){this.f.currentTime-=.001,this.Ia(e)},so.Zd=function(e,t){this.c[e].timestampOffset=t,this.Ia(e)},so.Xd=function(e,t){this.c[e].appendWindowEnd=t+.04,this.Ia(e)},so.je=function(e){this.b[e][0].p.reject(new u(2,3,3014,this.f.error?this.f.error.code:0))},so.Ia=function(e){var t=this.b[e][0];t&&(t.p.resolve(),Be(this,e))};var mo=1,bo=2,_o={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};t("shaka.abr.SimpleAbrManager",at),at.prototype.stop=function(){this.f=null,this.b=!1,this.h=[],this.g=[],this.c=null},at.prototype.stop=at.prototype.stop,at.prototype.init=function(e){this.f=e},at.prototype.init=at.prototype.init,at.prototype.chooseStreams=function(e){var t={};if(-1<e.indexOf("audio")||-1<e.indexOf("video")){var n=this.h,r=ot(this.i,n),i=this.a.getBandwidthEstimate();if(n.length&&!r.length)throw new u(2,4,4012);for(var n=r[0],a=0;a<r.length;++a){var o=r[a],s=(r[a+1]||{bandwidth:1/0}).bandwidth/.85;i>=o.bandwidth/.95&&i<=s&&(n=o)}(r=n)&&r.video&&(t.video=r.video),r&&r.audio&&(t.audio=r.audio)}return-1<e.indexOf("text")&&(t.text=this.g[0]),this.c=Date.now(),t},at.prototype.chooseStreams=at.prototype.chooseStreams,at.prototype.enable=function(){this.b=!0},at.prototype.enable=at.prototype.enable,at.prototype.disable=function(){this.b=!1},at.prototype.disable=at.prototype.disable,at.prototype.segmentDownloaded=function(e,t){var n=this.a;if(!(16e3>t)){var r=8e3*t/e,a=e/1e3;n.a+=t,i(n.c,a,r),i(n.f,a,r)}if(null!=this.c&&this.b)e:{if(this.j){if(8e3>Date.now()-this.c)break e}else{if(!(128e3<=this.a.a))break e;this.j=!0}n=this.chooseStreams(["audio","video"]),this.a.getBandwidthEstimate(),this.f(n)}},at.prototype.segmentDownloaded=at.prototype.segmentDownloaded,at.prototype.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate()},at.prototype.getBandwidthEstimate=at.prototype.getBandwidthEstimate,at.prototype.setDefaultEstimate=function(e){this.a.setDefaultEstimate(e)},at.prototype.setDefaultEstimate=at.prototype.setDefaultEstimate,at.prototype.setRestrictions=function(e){this.i=e},at.prototype.setRestrictions=at.prototype.setRestrictions,at.prototype.setVariants=function(e){this.h=e},at.prototype.setVariants=at.prototype.setVariants,at.prototype.setTextStreams=function(e){this.g=e},at.prototype.setTextStreams=at.prototype.setTextStreams,st.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},st.prototype.stopImmediatePropagation=function(){this.a=!0},st.prototype.stopPropagation=function(){};var Eo="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),To="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),wo=["loop","playbackRate"],ko=["pause","play"],So="adaptation buffering emsg error loading unloading texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged".split(" "),Oo="drmInfo getAudioLanguages getConfiguration getExpiration getManifestUri getPlaybackRate getPlayheadTimeAsDate getTextLanguages getTextTracks getTracks getStats getVariantTracks isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),Ao=[["getConfiguration","configure"]],Po=[["isTextTrackVisible","setTextTrackVisibility"]],Ro="addTextTrack cancelTrickPlay configure resetConfiguration selectAudioLanguage selectTextLanguage selectTextTrack selectTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),Do=["load","unload"];so=ft.prototype,so.m=function(){return dt(this),this.a&&(this.a.leave(function(){},function(){}),this.a=null),this.G=this.B=this.l=null,this.c=this.j=this.h=!1,this.g=this.f=this.b=this.i=null,Promise.resolve()},so.V=function(){return this.c},so.Fb=function(){return this.A},so.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.l();var t=new chrome.cast.SessionRequest(this.J),t=new chrome.cast.ApiConfig(t,this.gd.bind(this),this.sd.bind(this),"origin_scoped");chrome.cast.initialize(t,function(){},function(){})}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},so.Ib=function(e){this.i=e,this.c&&ht(this,{type:"appData",appData:this.i})},so.cast=function(e){return this.h?this.j?this.c?Promise.reject(new u(1,8,8002)):(this.g=new P,chrome.cast.requestSession(this.Bb.bind(this,e),this.cc.bind(this)),this.g):Promise.reject(new u(1,8,8001)):Promise.reject(new u(1,8,8e3))},so.$a=function(){this.c&&(dt(this),this.a&&(this.a.stop(function(){},function(){}),this.a=null))},so.get=function(e,t){if("video"==e){if(0<=ko.indexOf(t))return this.pc.bind(this,e,t)}else if("player"==e){if(0<=Ro.indexOf(t))return this.pc.bind(this,e,t);if(0<=Do.indexOf(t))return this.Od.bind(this,e,t);if(0<=Oo.indexOf(t))return this.lc.bind(this,e,t)}return this.lc(e,t)},so.set=function(e,t,n){this.b[e][t]=n,ht(this,{type:"set",targetName:e,property:t,value:n})},so.Bb=function(e,t){this.a=t,this.a.addUpdateListener(this.dc.bind(this)),this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.md.bind(this)),this.dc(),ht(this,{type:"init",initState:e,appData:this.i}),this.g.resolve()},so.cc=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new u(2,8,t,e))},so.lc=function(e,t){return this.b[e][t]},so.pc=function(e,t){ht(this,{type:"call",targetName:e,methodName:t,args:Array.prototype.slice.call(arguments,2)})},so.Od=function(e,t){var n=Array.prototype.slice.call(arguments,2),r=new P,i=this.o.toString();return this.o++,this.f[i]=r,ht(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i}),r},so.gd=function(e){var t=this.v();this.g=new P,this.Bb(t,e)},so.sd=function(e){this.j="available"==e,this.l()},so.dc=function(){var e=!!this.a&&"connected"==this.a.status;if(this.c&&!e){this.G();for(var t in this.b)this.b[t]={};dt(this)}this.A=(this.c=e)?this.a.receiver.friendlyName:"",this.l()},so.md=function(e,t){var n=lt(t);switch(n.type){case"event":var r=n.targetName,i=n.event;this.B(r,new st(i.type,i));break;case"update":i=n.update;for(r in i){var n=this.b[r]||{};for(a in i[r])n[a]=i[r][a]}break;case"asyncComplete":r=n.id;var a=n.error;if(n=this.f[r],delete this.f[r],n)if(a){r=new u(a.severity,a.category,a.code);for(i in a)r[i]=a[i];n.reject(r)}else n.resolve()}},pt.prototype.addEventListener=function(e,t){this.nb.push(e,t)},pt.prototype.removeEventListener=function(e,t){this.nb.remove(e,t)},pt.prototype.dispatchEvent=function(e){for(var t=this.nb.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Ta,e.currentTarget=this.Ta;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},n(vt),t("shaka.cast.CastProxy",vt),vt.prototype.m=function(e){return e&&this.a&&this.a.$a(),e=[this.h?this.h.m():null,this.b?this.b.m():null,this.a?this.a.m():null],this.a=this.h=this.i=this.j=this.b=this.c=null,Promise.all(e)},vt.prototype.destroy=vt.prototype.m,vt.prototype.Zc=function(){return this.j},vt.prototype.getVideo=vt.prototype.Zc,vt.prototype.Tc=function(){return this.i},vt.prototype.getPlayer=vt.prototype.Tc,vt.prototype.Fc=function(){return!!this.a&&(this.a.h&&this.a.j)},vt.prototype.canCast=vt.prototype.Fc,vt.prototype.V=function(){return!!this.a&&this.a.V()},vt.prototype.isCasting=vt.prototype.V,vt.prototype.Fb=function(){return this.a?this.a.Fb():""},vt.prototype.receiverName=vt.prototype.Fb,vt.prototype.cast=function(){var e=this.Vb();return this.a.cast(e).then(function(){return this.b.hb()}.bind(this))},vt.prototype.cast=vt.prototype.cast,vt.prototype.Ib=function(e){this.a.Ib(e)},vt.prototype.setAppData=vt.prototype.Ib,vt.prototype.me=function(){var e=this.a;if(e.c){var t=e.v();chrome.cast.requestSession(e.Bb.bind(e,t),e.cc.bind(e))}},vt.prototype.suggestDisconnect=vt.prototype.me,vt.prototype.$a=function(){this.a.$a()},vt.prototype.forceDisconnect=vt.prototype.$a,so=vt.prototype,so.Vb=function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.b.Ya,startTime:null};return this.c.pause(),wo.forEach(function(t){e.video[t]=this.c[t]}.bind(this)),this.c.ended||(e.startTime=this.c.currentTime),Ao.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.player[n]=t}.bind(this)),Po.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.playerAfterLoad[n]=t}.bind(this)),e},so.ee=function(){this.dispatchEvent(new st("caststatuschanged"))},so.ge=function(){Ao.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this));var e=this.a.get("player","getManifestUri")(),t=this.a.get("video","ended"),n=Promise.resolve(),r=this.c.autoplay,i=null;t||(i=this.a.get("video","currentTime")),e&&(this.c.autoplay=!1,n=this.b.load(e,i),n.catch(function(e){this.b.dispatchEvent(new st("error",{detail:e}))}.bind(this)));var a={};wo.forEach(function(e){a[e]=this.a.get("video",e)}.bind(this)),n.then(function(){wo.forEach(function(e){this.c[e]=a[e]}.bind(this)),Po.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this)),this.c.autoplay=r,e&&this.c.play()}.bind(this))},so.se=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if(this.a.V()&&!Object.keys(this.a.b.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.V()?this.a.get("video",e):(t=this.c[e],"function"==typeof t&&(t=t.bind(this.c)),t)},so.ue=function(e,t){this.a.V()?this.a.set("video",e,t):this.c[e]=t},so.te=function(e){this.a.V()||this.g.dispatchEvent(new st(e.type,e))},so.Hd=function(e){return"addEventListener"==e?this.f.addEventListener.bind(this.f):"removeEventListener"==e?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==e?this.b.Wb.bind(this.b):this.a.V()&&!Object.keys(this.a.b.video).length&&0<=Oo.indexOf(e)||!this.a.V()?(e=this.b[e],e.bind(this.b)):this.a.get("player",e)},so.Id=function(e){this.a.V()||this.f.dispatchEvent(e)},so.fe=function(e,t){this.a.V()&&("video"==e?this.g.dispatchEvent(t):"player"==e&&this.f.dispatchEvent(t))},n(gt),t("shaka.cast.CastReceiver",gt),gt.prototype.isConnected=function(){return this.i},gt.prototype.isConnected=gt.prototype.isConnected,gt.prototype.ad=function(){return this.f},gt.prototype.isIdle=gt.prototype.ad,gt.prototype.m=function(){var t=this.b?this.b.m():Promise.resolve();return null!=this.h&&e.clearTimeout(this.h),this.l=this.j=this.b=this.a=null,this.i=!1,this.f=!0,this.h=this.g=this.c=null,t.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},gt.prototype.destroy=gt.prototype.m,so=gt.prototype,so.jc=function(){this.i=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length,bt(this)},so.mc=function(e,t){this.Cb(),Et(this,{type:"event",targetName:e,event:t},this.c)},so.Cb=function(){null!=this.h&&e.clearTimeout(this.h),this.h=e.setTimeout(this.Cb.bind(this),500);var t={video:{},player:{}};To.forEach(function(e){t.video[e]=this.a[e]}.bind(this)),Oo.forEach(function(e){t.player[e]=this.b[e]()}.bind(this));var n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();n&&(t.video.volume=n.level,t.video.muted=n.muted),Et(this,{type:"update",update:t},this.c)},so.Mc=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Et(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.c),Et(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.c)},so.vd=function(e){var t=lt(e.data);switch(t.type){case"init":_t(this,t.initState,t.appData),this.Cb();break;case"appData":this.l(t.appData);break;case"set":var n=t.targetName,r=t.property,i=t.value;if("video"==n){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(i);break}if("muted"==r){t.setSystemVolumeMuted(i);break}}this.j[n][r]=i;break;case"call":n=t.targetName,r=t.methodName,i=t.args,n=this.j[n],n[r].apply(n,i);break;case"asyncCall":n=t.targetName,r=t.methodName,i=t.args,t=t.id,e=e.senderId,n=this.j[n],n[r].apply(n,i).then(this.vc.bind(this,e,t,null),this.vc.bind(this,e,t))}},so.hd=function(e){var t=lt(e.data);switch(t.type){case"PLAY":this.a.play(),Tt(this,0);break;case"PAUSE":this.a.pause(),Tt(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Tt(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Tt(this,0));break;case"STOP":this.b.hb().then(function(){Tt(this,0)}.bind(this));break;case"GET_STATUS":Tt(this,Number(t.requestId));break;case"VOLUME":n=t.volume,e=n.level;var n=n.muted,r=this.a.volume,i=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),r==this.a.volume&&i==this.a.muted||Tt(this,0);break;case"LOAD":n=t.media.contentId,e=t.currentTime;var a=this.o(n);this.a.autoplay=!0,this.b.load(a,e).then(function(){Tt(this,0,{contentId:a,streamType:this.b.$()?"LIVE":"BUFFERED",contentType:""})}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Et(this,{requestId:Number(t.requestId),type:n},this.g)}.bind(this));break;default:Et(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.g)}},so.vc=function(e,t,n){Et(this,{type:"asyncComplete",id:t,error:n},this.c,e)};var xo={IDLE:"IDLE",Cc:"PLAYING",Ac:"BUFFERING",Bc:"PAUSED"},Lo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};t("shaka.media.InitSegmentReference",Vt),t("shaka.media.SegmentReference",Ht),t("shaka.util.DataViewReader",Kt);var Io=1;Kt.Endianness={ve:0,xe:Io},Kt.prototype.Z=function(){return this.u<this.H.byteLength},Kt.prototype.hasMoreData=Kt.prototype.Z,Kt.prototype.Vc=function(){return this.u},Kt.prototype.getPosition=Kt.prototype.Vc,Kt.prototype.Qc=function(){return this.H.byteLength},Kt.prototype.getLength=Kt.prototype.Qc,Kt.prototype.Eb=function(){try{var e=this.H.getUint8(this.u)}catch(e){Yt()}return this.u+=1,e},Kt.prototype.readUint8=Kt.prototype.Eb,Kt.prototype.oc=function(){try{var e=this.H.getUint16(this.u,this.a)}catch(e){Yt()}return this.u+=2,e},Kt.prototype.readUint16=Kt.prototype.oc,Kt.prototype.D=function(){try{var e=this.H.getUint32(this.u,this.a)}catch(e){Yt()}return this.u+=4,e},Kt.prototype.readUint32=Kt.prototype.D,Kt.prototype.nc=function(){try{var e=this.H.getInt32(this.u,this.a)}catch(e){Yt()}return this.u+=4,e},Kt.prototype.readInt32=Kt.prototype.nc,Kt.prototype.Pa=function(){try{if(this.a)var e=this.H.getUint32(this.u,!0),t=this.H.getUint32(this.u+4,!0);else t=this.H.getUint32(this.u,!1),e=this.H.getUint32(this.u+4,!1)}catch(e){Yt()}if(2097151<t)throw new u(2,3,3001);return this.u+=8,t*Math.pow(2,32)+e},Kt.prototype.readUint64=Kt.prototype.Pa,Kt.prototype.Ka=function(e){this.u+e>this.H.byteLength&&Yt();var t=this.H.buffer.slice(this.u,this.u+e);return this.u+=e,new Uint8Array(t)},Kt.prototype.readBytes=Kt.prototype.Ka,Kt.prototype.I=function(e){this.u+e>this.H.byteLength&&Yt(),this.u+=e},Kt.prototype.skip=Kt.prototype.I,Kt.prototype.Db=function(){for(var e=this.u;this.Z()&&this.H.getUint8(this.u);)this.u+=1;return e=this.H.buffer.slice(e,this.u),this.u+=1,Y(e)},Kt.prototype.readTerminatedString=Kt.prototype.Db,t("shaka.util.Mp4Parser",Wt),Wt.prototype.C=function(e,t){var n=$t(e);return this.b[n]=0,this.a[n]=t,this},Wt.prototype.box=Wt.prototype.C,Wt.prototype.da=function(e,t){var n=$t(e);return this.b[n]=1,this.a[n]=t,this},Wt.prototype.fullBox=Wt.prototype.da,Wt.prototype.parse=function(e){for(e=new Kt(new DataView(e),0);e.Z();)this.eb(0,e)},Wt.prototype.parse=Wt.prototype.parse,Wt.prototype.eb=function(e,t){var n=t.u,r=t.D(),i=t.D();switch(r){case 0:r=t.H.byteLength-n;break;case 1:r=t.Pa()}var a=this.a[i];if(a){var o=null,s=null;1==this.b[i]&&(s=t.D(),o=s>>>24,s&=16777215),i=n+r-t.u,i=0<i?t.Ka(i).buffer:new ArrayBuffer(0),i=new Kt(new DataView(i),0),a({Na:this,version:o,Nc:s,s:i,size:r,start:n+e})}else t.I(n+r-t.u)},Wt.prototype.parseNext=Wt.prototype.eb,Wt.children=qt,Wt.sampleDescription=zt,Wt.allData=Xt,t("shaka.media.SegmentIndex",Zt),Zt.prototype.m=function(){return this.a=null,Promise.resolve()},Zt.prototype.destroy=Zt.prototype.m,Zt.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},Zt.prototype.find=Zt.prototype.find,Zt.prototype.get=function(e){return this.a.length?(e-=this.a[0].position,0>e||e>=this.a.length?null:this.a[e]):null},Zt.prototype.get=Zt.prototype.get,Zt.prototype.xb=function(e){for(var t,n,r=[],i=n=0;n<this.a.length&&i<e.length;){var a=this.a[n];t=e[i],a.startTime<t.startTime?(r.push(a),n++):(a.startTime>t.startTime||(.1<Math.abs(a.endTime-t.endTime)?r.push(t):r.push(a),n++),i++)}for(;n<this.a.length;)r.push(this.a[n++]);if(r.length)for(n=r[r.length-1].position+1;i<e.length;)t=e[i++],t=new Ht(n++,t.startTime,t.endTime,t.a,t.X,t.M),r.push(t);else r=e;this.a=r},Zt.prototype.merge=Zt.prototype.xb,Zt.prototype.qb=function(e){for(var t=0;t<this.a.length&&!(this.a[t].endTime>e);++t);this.a.splice(0,t)},Zt.prototype.evict=Zt.prototype.qb;var Mo;tn.prototype.Z=function(){return this.a.Z()},sn.prototype.parse=function(e,t,n,r){var i;if(t=new tn(new DataView(t)),440786851!=nn(t).id)throw new u(2,3,3008);var a=nn(t);if(408125543!=a.id)throw new u(2,3,3009);for(t=a.a.byteOffset,a=new tn(a.a),i=null;a.Z();){var o=nn(a);if(357149030==o.id){i=o;break}}if(!i)throw new u(2,3,3010);for(a=new tn(i.a),i=1e6,o=null;a.Z();){var s=nn(a);if(2807729==s.id)i=on(s);else if(17545==s.id)if(o=s,4==o.a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new u(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new u(2,3,3011);if(a=i/1e9,i=o*a,e=nn(new tn(new DataView(e))),475249515!=e.id)throw new u(2,3,3007);return un(e,t,a,i,n,r)};var Co={},No={};t("shaka.media.ManifestParser.registerParserByExtension",function(e,t){No[e]=t}),t("shaka.media.ManifestParser.registerParserByMime",function(e,t){Co[e]=t}),t("shaka.media.PresentationTimeline",Sn),Sn.prototype.Y=function(){return this.a},Sn.prototype.getDuration=Sn.prototype.Y,Sn.prototype.pa=function(e){this.a=e},Sn.prototype.setDuration=Sn.prototype.pa,Sn.prototype.Wc=function(){return this.f},Sn.prototype.getPresentationStartTime=Sn.prototype.Wc,Sn.prototype.wc=function(e){this.h=e},Sn.prototype.setClockOffset=Sn.prototype.wc,Sn.prototype.yc=function(e){this.g=e},Sn.prototype.setStatic=Sn.prototype.yc,Sn.prototype.Xc=function(){return this.c},Sn.prototype.getSegmentAvailabilityDuration=Sn.prototype.Xc,Sn.prototype.xc=function(e){this.c=e},Sn.prototype.setSegmentAvailabilityDuration=Sn.prototype.xc,Sn.prototype.Ha=function(e,t){t.length&&(this.b=t.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.b))},Sn.prototype.notifySegments=Sn.prototype.Ha,Sn.prototype.yb=function(e){this.b=Math.max(this.b,e)},Sn.prototype.notifyMaxSegmentDuration=Sn.prototype.yb,Sn.prototype.$=function(){return 1/0==this.a&&!this.g},Sn.prototype.isLive=Sn.prototype.$,Sn.prototype.va=function(){return 1/0!=this.a&&!this.g},Sn.prototype.isInProgress=Sn.prototype.va,Sn.prototype.ma=function(){return this.Ea(0)},Sn.prototype.getSegmentAvailabilityStart=Sn.prototype.ma,Sn.prototype.Ea=function(e){if(1/0==this.c)return 0;var t=this.ua();return Math.max(0,Math.min(t-this.c+e,t))},Sn.prototype.getSafeAvailabilityStart=Sn.prototype.Ea,Sn.prototype.ua=function(){return this.$()||this.va()?Math.min(Math.max(0,(Date.now()+this.h)/1e3-this.b-this.f),this.a):this.a},Sn.prototype.getSegmentAvailabilityEnd=Sn.prototype.ua,Sn.prototype.bb=function(){return Math.max(0,this.ua()-(this.$()||this.va()?this.i:0))},Sn.prototype.getSeekRangeEnd=Sn.prototype.bb,t("shaka.dash.DashParser",On),so=On.prototype,so.configure=function(e){this.b=e},so.start=function(e,t){return this.g=[e],this.a=t,An(this).then(function(){return this.a&&In(this,0),this.c}.bind(this))},so.stop=function(){return this.b=this.a=null,this.g=[],this.c=null,this.i=[],this.j={},null!=this.f&&(e.clearTimeout(this.f),this.f=null),Promise.resolve()},so.update=function(){An(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},so.onExpirationUpdated=function(){},so.Dd=function(e,t){e.S=Mn(t,e.T,null);var n=!1,r=kt(t,"Role"),i=r.map(function(e){return e.getAttribute("value")}).filter(E),a=void 0;"text"==e.S.contentType&&(a="subtitle");for(var o=0;o<r.length;o++){var s=r[o].getAttribute("schemeIdUri");if(null==s||"urn:mpeg:dash:role:2011"==s)switch(s=r[o].getAttribute("value")){case"main":n=!0;break;case"caption":case"subtitle":a=s}}var l=null,c=!1;if(kt(t,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?l=e.getAttribute("value"):c=!0}),c)return null;var r=kt(t,"ContentProtection"),f=Mt(r,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo),r=Ve(t.getAttribute("lang")||"und"),s=t.getAttribute("label"),o=kt(t,"Representation"),i=o.map(this.Gd.bind(this,e,f,a,r,s,n,i)).filter(function(e){return!!e});if(!i.length)throw new u(2,4,4003);return e.S.contentType&&"application"!=e.S.contentType||(e.S.contentType=jn(i[0].mimeType,i[0].codecs),i.forEach(function(t){t.type=e.S.contentType})),i.forEach(function(e){f.drmInfos.forEach(function(t){e.keyId&&t.keyIds.push(e.keyId)})}),a=o.map(function(e){return e.getAttribute("id")}).filter(E),{id:e.S.id||"__fake__"+this.h++,contentType:e.S.contentType,language:r,vb:n,streams:i,drmInfos:f.drmInfos,Ob:l,Pd:a}},so.Gd=function(e,t,n,r,i,a,o,s){if(e.w=Mn(s,e.S,null),!Cn(e.w))return null;e.bandwidth=Ot(s,"bandwidth",xt)||void 0;var u=this.Qd.bind(this);if(e.w.Qa)u=fn(e,u);else if(e.w.oa)u=pn(e,this.j);else if(e.w.Ra)u=mn(e,u,this.j,!!this.c);else{var l=e.w.U,c=e.R.duration||0;u={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<c?1:null},getSegmentReference:function(e){return 1!=e?null:new Ht(1,0,c,function(){return l},0,null)},initSegmentReference:null,presentationTimeOffset:0}}return s=kt(s,"ContentProtection"),s=Ct(s,this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,createSegmentIndex:u.createSegmentIndex,findSegmentPosition:u.findSegmentPosition,getSegmentReference:u.getSegmentReference,initSegmentReference:u.initSegmentReference,presentationTimeOffset:u.presentationTimeOffset,mimeType:e.w.mimeType,codecs:e.w.codecs,frameRate:e.w.frameRate,bandwidth:e.bandwidth,width:e.w.width,height:e.w.height,kind:n,encrypted:0<t.drmInfos.length,keyId:s,language:r,label:i,type:e.S.contentType,primary:a,trickModeVideo:null,containsEmsgBoxes:e.w.containsEmsgBoxes,roles:o}},so.he=function(){this.f=null;var e=Date.now();An(this).then(function(){this.a&&In(this,(Date.now()-e)/1e3)}.bind(this)).catch(function(e){this.a&&(e.severity=1,this.a.onError(e),In(this,0))}.bind(this))},so.Fd=function(e,t,n){var r=n.getAttribute("schemeIdUri")||"",i=n.getAttribute("value")||"",a=Ot(n,"timescale",Lt)||1;kt(n,"Event").forEach(function(n){var o=Ot(n,"presentationTime",Lt)||0,s=Ot(n,"duration",Lt)||0,o=o/a+e,s=o+s/a;null!=t&&(o=Math.min(o,e+t),s=Math.min(s,e+t)),n={schemeIdUri:r,value:i,startTime:o,endTime:s,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},so.Qd=function(e,t,n){return e=x(e,this.b.retryParameters),null!=t&&(e.headers.Range="bytes="+t+"-"+(null!=n?n:"")),this.a.networkingEngine.request(1,e).then(function(e){return e.data})},No.mpd=On,Co["application/dash+xml"]=On,Bn.prototype.toString=function(){function e(e){return e.name+'="'+e.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(e).join(","):"#"+this.name},Bn.prototype.getAttribute=function(e){var t=this.a.filter(function(t){return t.name==e});return t.length?t[0]:null};var Uo="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY".split(" "),jo="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");t("shaka.net.DataUriPlugin",er),er.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new u(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw new u(2,1,1004,t);var r=n[0],n=e.decodeURIComponent(n.slice(1).join(",")),r=r.split(";"),i=null;if(1<r.length&&(i=r[1]),"base64"==i)t=Z(n).buffer;else{if(i)throw new u(2,1,1005,t);t=z(n)}return{data:t,contentType:r[0]}},yo.data=er,t("shaka.hls.HlsParser",tr),so=tr.prototype,so.configure=function(e){this.b=e},so.start=function(e,t){return this.c=t,this.j=e,this.c.networkingEngine.request(0,x([e],this.b.retryParameters)).then(function(t){return nr(this,t.data,e)}.bind(this))},so.stop=function(){return this.b=this.c=null,this.g={},Promise.resolve()},so.update=function(){},so.onExpirationUpdated=function(){};var Fo=[/^(avc)/,/^(hvc)/,/^(vp[8-9])$/,/^(av1)$/,/^(mp4v)/],Bo=[/^(vorbis)/,/^(opus)/,/^(mp4a)/,/^(ac-3)$/,/^(ec-3)$/],Go={mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},Vo={mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},Ho={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){if("SAMPLE-AES-CENC"!=yr(e,"METHOD"))return null;var t=yr(e,"URI"),t=er.parse(t),t=new Uint8Array(t.data),t=S("com.widevine.alpha",[{initDataType:"cenc",initData:t}]);return(e=Vn(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t}};No.m3u8=tr,Co["application/x-mpegurl"]=tr,Co["application/vnd.apple.mpegurl"]=tr,mr.prototype.parseInit=function(){},mr.prototype.parseMedia=function(e,t){var n=Y(e),r=[],i=new DOMParser,a=null;try{a=i.parseFromString(n,"text/xml")}catch(e){throw new u(2,2,2005)}if(a){var o=a.getElementsByTagName("tt")[0];if(!o)throw new u(2,2,2005);i=o.getAttribute("ttp:frameRate"),a=o.getAttribute("ttp:subFrameRate");var s=o.getAttribute("ttp:frameRateMultiplier"),l=o.getAttribute("ttp:tickRate");if("default"!=(n=o.getAttribute("xml:space")||"default")&&"preserve"!=n)throw new u(2,2,2005);for(n="default"==n,i=new Sr(i,a,s,l),a=br(o.getElementsByTagName("styling")[0]),s=br(o.getElementsByTagName("layout")[0]),o=br(o.getElementsByTagName("body")[0]),l=0;l<o.length;l++){var c=o[l],f=t.periodStart,d=i,h=a,p=s,v=n;if(c.hasAttribute("begin")||c.hasAttribute("end")||!/^\s*$/.test(c.textContent)){_r(c,v);var v=wr(c.getAttribute("begin"),d),y=wr(c.getAttribute("end"),d),d=wr(c.getAttribute("dur"),d),g=c.textContent;if(null==y&&null!=d&&(y=v+d),null==v||null==y)throw new u(2,2,2001);(f=we(v+f,y+f,g))?(v=Tr(c,"region",p),p=f,(y=Er(c,v,h,"tts:extent"))&&(d=$o.exec(y))&&(p.size=Number(d[1])),d=Er(c,v,h,"tts:writingMode"),y=!0,"tb"==d||"tblr"==d?p.vertical="lr":"tbrl"==d?p.vertical="rl":y=!1,(d=Er(c,v,h,"tts:origin"))&&(d=$o.exec(d))&&(y?(p.position=Number(d[2]),p.line=Number(d[1])):(p.position=Number(d[1]),p.line=Number(d[2])),p.snapToLines=!1),(h=Er(c,v,h,"tts:textAlign"))&&(p.align=h,"center"==h&&("center"!=p.align&&(p.align="middle"),p.position="auto"),p.positionAlign=Qo[h],p.lineAlign=Jo[h]),h=f):h=null}else h=null;h&&r.push(h)}}return r};var Ko=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Yo=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Wo=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,qo=/^(\d*\.?\d*)f$/,zo=/^(\d*\.?\d*)t$/,Xo=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,$o=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Jo={left:"start",center:"center",right:"end",start:"start",end:"end"},Qo={left:"line-left",center:"center",right:"line-right"};Te("application/ttml+xml",mr),Or.prototype.parseInit=function(e){var t=!1;if((new Wt).C("moov",qt).C("trak",qt).C("mdia",qt).C("minf",qt).C("stbl",qt).da("stsd",zt).C("stpp",function(){t=!0}).parse(e),!t)throw new u(2,2,2007)},Or.prototype.parseMedia=function(e,t){var n=!1,r=[];if((new Wt).C("mdat",Xt(function(e){n=!0,r=this.a.parseMedia(e.buffer,t)}.bind(this))).parse(e),!n)throw new u(2,2,2007);return r},Te('application/mp4; codecs="stpp"',Or),Ar.prototype.parseInit=function(){},Ar.prototype.parseMedia=function(e,t){var n=Y(e),n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),n=n.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new u(2,2,2e3);var r=t.segmentStart;if(0<=n[0].indexOf("X-TIMESTAMP-MAP")){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);i&&a&&(r=Rr(new qn(i[1])),r=t.periodStart+(Number(a[1])/9e4-r))}for(a=[],i=1;i<n.length;i++){var o=n[i].split("\n"),s=r;if(1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0]))var l=null;else{l=null,0>o[0].indexOf("--\x3e")&&(l=o[0],o.splice(0,1));var c=new qn(o[0]),f=Rr(c),d=zn(c,/[ \t]+--\x3e[ \t]+/g),h=Rr(c);if(null==f||!d||null==h)throw new u(2,2,2001);if(o=we(f+s,h+s,o.slice(1).join("\n").trim())){for(zn(c,/[ \t]+/gm),s=Xn(c);s;)Pr(o,s),zn(c,/[ \t]+/gm),s=Xn(c);null!=l&&(o.id=l),l=o}else l=null}l&&a.push(l)}return a},Te("text/vtt",Ar),Te('text/vtt; codecs="vtt"',Ar),Dr.prototype.parseInit=function(e){var t=!1;if((new Wt).C("moov",qt).C("trak",qt).C("mdia",qt).da("mdhd",function(e){0==e.version?(e.s.I(4),e.s.I(4),this.a=e.s.D(),e.s.I(4)):(e.s.I(8),e.s.I(8),this.a=e.s.D(),e.s.I(8)),e.s.I(4)}.bind(this)).C("minf",qt).C("stbl",qt).da("stsd",zt).C("wvtt",function(){t=!0}).parse(e),!this.a)throw new u(2,2,2008);if(!t)throw new u(2,2,2008)},Dr.prototype.parseMedia=function(e,t){var n=0,r=[],i=[],a=[],o=!1,s=!1,l=!1;if((new Wt).C("moof",qt).C("traf",qt).da("tfdt",function(e){o=!0,n=e.version?e.s.Pa():e.s.D()}).da("trun",function(e){s=!0;var t=e.version,n=e.Nc;e=e.s;var i=e.D();1&n&&e.I(4),4&n&&e.I(4);for(var a=[],o=0;o<i;o++){var u={duration:null,Nb:null};256&n&&(u.duration=e.D()),512&n&&e.I(4),1024&n&&e.I(4),2048&n&&(u.Nb=t?e.nc():e.D()),a.push(u)}r=a}).C("vtte",function(){i.push(null)}).C("vttc",Xt(function(e){i.push(e.buffer)})).C("mdat",function(e){l=!0,qt(e)}).parse(e),!l&&!o&&!s)throw new u(2,2,2008);for(var c=n,f=0;f<r.length;f++){var d=r[f],h=i[f];if(d.duration){var p=d.Nb?n+d.Nb:c,c=p+d.duration;h&&a.push(xr(h,t.periodStart+p/this.a,t.periodStart+c/this.a))}}return a},Te('application/mp4; codecs="wvtt"',Dr),so=Ir.prototype,so.m=function(){var t=this.b.m();return this.b=null,null!=this.f&&(e.clearInterval(this.f),this.f=null),null!=this.j&&(e.clearInterval(this.j),this.j=null),this.G=this.J=this.l=this.c=this.a=null,t},so.rb=function(){return this.g},so.Ab=function(){this.o=!0,this.hc()},so.rd=function(){this.a.playbackRate!=(this.h||0>this.g?0:this.g)&&Ur(this,this.a.playbackRate)},so.fc=function(){var e=Nr(this);.001>Math.abs(this.a.currentTime-e)?(N(this.b,this.a,"seeking",this.ic.bind(this)),N(this.b,this.a,"playing",this.gc.bind(this))):(U(this.b,this.a,"seeking",this.td.bind(this)),this.a.currentTime=e)},so.td=function(){N(this.b,this.a,"seeking",this.ic.bind(this)),N(this.b,this.a,"playing",this.gc.bind(this))},so.hc=function(){if(this.a.readyState){this.a.readyState!=this.B&&(this.i=!1,this.B=this.a.readyState);var e=this.l.smallGapLimit,t=this.a.currentTime,n=this.a.buffered;e:{if(n&&n.length&&!(1==n.length&&1e-6>n.end(0)-n.start(0))){var r=.1;/(Edge|Trident)\//.test(navigator.userAgent)&&(r=.5);for(var i=0;i<n.length;i++)if(n.start(i)>t&&(!i||n.end(i-1)-t<=r)){r=i;break e}}r=null}if(null==r){if(3>this.a.readyState&&0<this.a.playbackRate)if(this.O!=t)this.O=t,this.v=Date.now();else if(this.v<Date.now()-1e3)for(this.v=Date.now()+5e3,r=0;r<n.length;r++)if(t>=n.start(r)&&t<n.end(r)-.5){this.a.currentTime=this.a.currentTime;break}}else if((r||this.o)&&!((i=n.start(r))>=this.c.presentationTimeline.bb())){var a=i-t,e=a<=e,o=!1;e||this.i||(this.i=!0,a=new st("largegap",{currentTime:t,gapSize:a}),a.cancelable=!0,this.G(a),this.l.jumpLargeGaps&&!a.defaultPrevented&&(o=!0)),(e||o)&&(r&&n.end(r-1),Fr(this,t,i))}}},so.ic=function(){this.o=!1;var e=this.a.currentTime,t=jr(this,e);.001<Math.abs(t-e)?Fr(this,e,t):(this.i=!1,this.J())},so.gc=function(){var e=this.a.currentTime,t=jr(this,e);.001<Math.abs(t-e)&&Fr(this,e,t)},Gr.prototype.m=function(){var e=this.j?this.j.m():Promise.resolve();return this.j=null,Kr(this),this.B=this.h=this.l=this.A=this.g=this.a=null,this.c=[],e},Gr.prototype.v=function(e){if(!this.c.some(function(t){return t.info.schemeIdUri==e.schemeIdUri&&t.info.startTime==e.startTime&&t.info.endTime==e.endTime})){var t={info:e,status:1};this.c.push(t);var n=new st("timelineregionadded",{detail:Vr(e)});this.h(n),this.o(!0,t)}},Gr.prototype.o=function(e,t){var n=t.info.startTime>this.a.currentTime?1:t.info.endTime<this.a.currentTime?3:2,r=2==t.status,i=2==n;n!=t.status&&((!e||r||i)&&(r||this.h(new st("timelineregionenter",{detail:Vr(t.info)})),i||this.h(new st("timelineregionexit",{detail:Vr(t.info)}))),t.status=n)},Gr.prototype.G=function(){this.f=null,Hr(this);var e=rt(this.g,this.a.currentTime);e!=this.i&&(-1!=this.i&&this.B(),this.i=e);var e=Re(this.a.buffered,this.a.currentTime),t=Ae(this.a.buffered)>=this.g.presentationTimeline.ua()-.1||this.a.ended;if(this.b){var n=1*Math.max(this.g.minBufferTime||0,this.A.rebufferingGoal);(t||e>=n)&&0!=this.b&&(this.b=!1,this.l(!1))}else!t&&.5>e&&1!=this.b&&(this.b=!0,this.l(!0));this.c.forEach(this.o.bind(this,!1))},so=Yr.prototype,so.m=function(){for(var e in this.c)yi(this.c[e]);return this.g=this.c=this.j=this.h=this.o=this.b=this.a=null,this.f=!0,Promise.resolve()},so.configure=function(e){this.g=e},so.init=function(){var e=this.a.bc(this.b.periods[rt(this.b,Cr(this.a.Oa))]);return B(e)?Promise.reject(new u(2,5,5005)):Zr(this,e).then(function(){this.a&&this.a.jd&&this.a.jd()}.bind(this))},so.ke=function(e){if(!this.f&&!e.xa&&null!=e.qa&&!e.sa)if(e.qa=null,e.ra)pi(this,e,e.kb);else{try{var t=ri(this,e);null!=t&&(vi(this,e,t),e.tb=!1)}catch(e){return void this.a.onError(e)}t=G(this.c),fi(this,e),t.every(function(e){return e.endOfStream})&&this.a.K.endOfStream().then(function(){this.b.presentationTimeline.pa(this.a.K.Y())}.bind(this))}},so.Ed=function(e,t,n){var r=n.s.Db(),i=n.s.Db(),a=n.s.D(),o=n.s.D(),s=n.s.D(),u=n.s.D();n=n.s.Ka(n.s.H.byteLength-n.s.u),e=e.startTime+t.startTime+o/a,"urn:mpeg:dash:event:2012"==r?this.a.kd():this.a.onEvent(new st("emsg",{detail:{startTime:e,endTime:e+s/a,schemeIdUri:r,value:i,timescale:a,presentationTimeDelta:o,eventDuration:s,id:u,messageData:n}}))},t("shaka.net.HttpPlugin",gi),yo.http=gi,yo.https=gi,so=mi.prototype,so.init=function(e,t){return wi(this,e,t).then(function(){var t=Object.keys(e);return Promise.all(t.map(function(e){return Ei(this,e).then(function(t){this.c[e]=t}.bind(this))}.bind(this)))}.bind(this))},so.m=function(){return Promise.all(this.b.map(function(e){try{e.transaction.abort()}catch(e){}return e.L.catch(_)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))},so.get=function(e,t){var n;return Ti(this,e,"readonly",function(e){n=e.get(t)}).then(function(){return n.result})},so.forEach=function(e,t){return Ti(this,e,"readonly",function(e){e.openCursor().onsuccess=function(e){(e=e.target.result)&&(t(e.value),e.continue())}})},so.remove=function(e,t){return Ti(this,e,"readwrite",function(e){e.delete(t)})};var Zo={manifest:"key",segment:"key"};Li.prototype.m=function(){var e=this.j,t=this.l,n=this.i||Promise.resolve(),n=n.then(function(){return _i(e,t)});return this.b={},this.l=[],this.i=this.a=this.A=this.v=this.j=this.o=null,n},so=Ni.prototype,so.configure=function(){},so.start=function(e){var t=/^offline:([0-9]+)$/.exec(e);if(!t)return Promise.reject(new u(2,1,9004,e));var n=Number(t[1]),r=xi();return this.a=n,r?r.init(Zo).then(function(){return r.get("manifest",n)}).then(function(e){if(!e)throw new u(2,9,9003,n);return Ui(e)}).then(function(e){return r.m().then(function(){return e})},function(e){return r.m().then(function(){throw e})}):Promise.reject(new u(2,9,9e3))},so.stop=function(){return Promise.resolve()},so.update=function(){},so.onExpirationUpdated=function(e,t){var n=xi();n.init(Zo).then(function(){return n.get("manifest",this.a)}.bind(this)).then(function(r){if(r&&!(0>r.sessionIds.indexOf(e))&&(void 0==r.expiration||r.expiration>t))return r.expiration=t,bi(n,"manifest",r)}).catch(function(){}).then(function(){return n.m()})},Co["application/x-offline-manifest"]=Ni,t("shaka.offline.OfflineScheme",ji),yo.offline=ji,Fi.prototype.then=function(e){return this.a=this.a.then(e).then(function(e){return this.b?(this.g(),Promise.reject(this.h)):Promise.resolve(e)}.bind(this)),this},Fi.prototype.cancel=function(e){return this.c?Promise.resolve():(this.b=!0,this.h=e,this.i)},n(Gi),t("shaka.Player",Gi),Gi.prototype.m=function(){this.O=!0;var e=Promise.resolve();return this.J&&(e=this.J.cancel(new u(2,7,7e3))),e.then(function(){var e=Promise.all([this.la,qi(this),this.l?this.l.m():null,this.o?this.o.m():null]);return this.b=this.o=this.Qb=this.l=this.A=this.f=null,e}.bind(this))},Gi.prototype.destroy=Gi.prototype.m,Gi.version="v2.1.4";var es={};Gi.registerSupportPlugin=function(e,t){es[e]=t},Gi.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaSource&&e.MediaSource.isTypeSupported&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)},Gi.probeSupport=function(){return me().then(function(e){e={manifest:wn(),media:xe(),drm:e};for(var t in es)e[t]=es[t]();return e})},Gi.prototype.load=function(e,t,n){var r=this.hb(),i=new Fi;this.J=i,this.dispatchEvent(new st("loading"));var a=Date.now();return Bi(i.then(function(){return r}).then(function(){return this.i=Ji(),N(this.l,this.f,"playing",this.Sa.bind(this)),N(this.l,this.f,"pause",this.Sa.bind(this)),N(this.l,this.f,"ended",this.Sa.bind(this)),kn(e,this.o,this.b.manifest.retryParameters,n)}.bind(this)).then(function(t){return this.h=new t,this.h.configure(this.b.manifest),t={networkingEngine:this.o,filterPeriod:this.fb.bind(this),onTimelineRegionAdded:this.xd.bind(this),onEvent:this.gb.bind(this),onError:this.ya.bind(this)},2<this.h.start.length?this.h.start(e,this.o,t.filterPeriod,t.onError,t.onEvent):this.h.start(e,t)}.bind(this)).then(function(t){if(0==t.periods.length)throw new u(2,4,4014);return this.c=t,this.Ya=e,this.j=new re(this.o,this.ya.bind(this),this.be.bind(this),this.ae.bind(this)),this.j.configure(this.b.drm),this.j.init(t,!1)}.bind(this)).then(function(){return this.c.periods.forEach(this.fb.bind(this)),this.Ua=Date.now()/1e3,this.ia=this.b.preferredAudioLanguage,this.Ca=this.b.preferredTextLanguage,Promise.all([ie(this.j,this.f),this.Wa])}.bind(this)).then(function(){return this.b.abr.manager.init(this.Lb.bind(this)),this.g=new Ir(this.f,this.c,this.b.streaming,t||null,this.ce.bind(this),this.gb.bind(this)),this.v=new Gr(this.f,this.c,this.b.streaming,this.zc.bind(this),this.gb.bind(this),this.$d.bind(this)),this.ja=new De(this.f,this.N,this.A),this.a=new Yr(this.c,{Oa:this.g,K:this.ja,dd:this.o,bc:this.ed.bind(this),ac:this.Gc.bind(this),onError:this.ya.bind(this),onEvent:this.gb.bind(this),kd:this.ld.bind(this),Ab:this.ud.bind(this)}),this.a.configure(this.b.streaming),Vi(this),this.a.init()}.bind(this)).then(function(){if(this.b.streaming.startAtSegmentBoundary){var e=ea(this,Cr(this.g));Mr(this.g,e)}this.c.periods.forEach(this.fb.bind(this)),ia(this),ra(this);var e=Wr(this.a),t=Qe(e,this.ia);this.b.abr.manager.setVariants(t),e.variants.some(function(e){return e.primary}),this.Xa.forEach(this.v.v.bind(this.v)),this.Xa=[],U(this.l,this.f,"loadeddata",function(){this.i.loadLatency=(Date.now()-a)/1e3}.bind(this)),this.J=null}.bind(this))).catch(function(e){return this.J==i&&(this.J=null,this.dispatchEvent(new st("unloading"))),Promise.reject(e)}.bind(this))},Gi.prototype.load=Gi.prototype.load,Gi.prototype.configure=function(e){e.abr&&e.abr.manager&&e.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),e.abr.manager.init(this.Lb.bind(this))),O(this.b,e,$i(this),Xi(),""),Ki(this)},Gi.prototype.configure=Gi.prototype.configure,Gi.prototype.getConfiguration=function(){var e=$i(this);return O(e,this.b,$i(this),Xi(),""),e},Gi.prototype.getConfiguration=Gi.prototype.getConfiguration,Gi.prototype.Rd=function(){var e=$i(this);e.abr&&e.abr.manager&&e.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),e.abr.manager.init(this.Lb.bind(this))),this.b=$i(this),Ki(this)},Gi.prototype.resetConfiguration=Gi.prototype.Rd,Gi.prototype.Sc=function(){return this.f},Gi.prototype.getMediaElement=Gi.prototype.Sc,Gi.prototype.Wb=function(){return this.o},Gi.prototype.getNetworkingEngine=Gi.prototype.Wb,Gi.prototype.Rc=function(){return this.Ya},Gi.prototype.getManifestUri=Gi.prototype.Rc,Gi.prototype.$=function(){return!!this.c&&this.c.presentationTimeline.$()},Gi.prototype.isLive=Gi.prototype.$,Gi.prototype.va=function(){return!!this.c&&this.c.presentationTimeline.va()},Gi.prototype.isInProgress=Gi.prototype.va,Gi.prototype.Td=function(){var e=0,t=0;return this.c&&(t=this.c.presentationTimeline,e=t.ma(),t=t.bb()),{start:e,end:t}},Gi.prototype.seekRange=Gi.prototype.Td,Gi.prototype.keySystem=function(){return this.j?this.j.keySystem():""},Gi.prototype.keySystem=Gi.prototype.keySystem,Gi.prototype.drmInfo=function(){return this.j?this.j.b:null},Gi.prototype.drmInfo=Gi.prototype.drmInfo,Gi.prototype.ab=function(){return this.j?this.j.ab():1/0},Gi.prototype.getExpiration=Gi.prototype.ab,Gi.prototype.$c=function(){return this.ka},Gi.prototype.isBuffering=Gi.prototype.$c,Gi.prototype.hb=function(){if(this.O)return Promise.resolve();this.dispatchEvent(new st("unloading"));var e=Promise.resolve();return this.J&&(e=this.J.cancel(new u(2,7,7e3))),e.then(function(){return this.la||(this.la=zi(this).then(function(){this.la=null}.bind(this))),this.la}.bind(this))},Gi.prototype.unload=Gi.prototype.hb,Gi.prototype.rb=function(){return this.g?this.g.rb():0},Gi.prototype.getPlaybackRate=Gi.prototype.rb,Gi.prototype.ne=function(e){this.g&&Ur(this.g,e),this.a&&Xr(this.a,1!=e)},Gi.prototype.trickPlay=Gi.prototype.ne,Gi.prototype.Hc=function(){this.g&&Ur(this.g,1),this.a&&Xr(this.a,!1)},Gi.prototype.cancelTrickPlay=Gi.prototype.Hc,Gi.prototype.getTracks=function(){return this.Yb().concat(this.Xb())},Gi.prototype.getTracks=Gi.prototype.getTracks,Gi.prototype.Wd=function(e,t){"text"==e.type?this.tc(e):(this.configure({abr:{enabled:!1}}),this.uc(e,t))},Gi.prototype.selectTrack=Gi.prototype.Wd,Gi.prototype.Yb=function(){if(!this.c)return[];var e=rt(this.c,Cr(this.g)),t=this.B[e]||{};return qe(this.c.periods[e],t.audio,t.video)},Gi.prototype.getVariantTracks=Gi.prototype.Yb,Gi.prototype.Xb=function(){if(!this.c)return[];var e=rt(this.c,Cr(this.g));return ze(this.c.periods[e],(this.B[e]||{}).text).filter(function(e){return 0>this.Va.indexOf(e.id)}.bind(this))},Gi.prototype.getTextTracks=Gi.prototype.Xb,Gi.prototype.tc=function(e){if(this.a&&(e=$e(Wr(this.a),e))){Yi(this,e,!1);var t={};t.text=e,Qi(this,t,!0)}},Gi.prototype.selectTextTrack=Gi.prototype.tc,Gi.prototype.uc=function(e,t){if(this.a){var n={},r=Xe(Wr(this.a),e),i=qr(this.a);if(r){if(!r.allowedByApplication||!r.allowedByKeySystem)return;r.audio&&(Wi(this,r.audio),r.audio!=i.audio&&(n.audio=r.audio)),r.video&&(Wi(this,r.video),r.video!=i.video&&(n.video=r.video))}G(n).forEach(function(e){Yi(this,e,!1)}.bind(this)),(r=i.text)&&(n.text=r),Qi(this,n,t)}},Gi.prototype.selectVariantTrack=Gi.prototype.uc,Gi.prototype.Pc=function(){return this.a?Je(Wr(this.a).variants).map(function(e){return e.language}).filter(w):[]},Gi.prototype.getAudioLanguages=Gi.prototype.Pc,Gi.prototype.Yc=function(){return this.a?Wr(this.a).textStreams.map(function(e){return e.language}).filter(w):[]},Gi.prototype.getTextLanguages=Gi.prototype.Yc,Gi.prototype.Ud=function(e,t){if(this.a){var n=Wr(this.a);this.ia=e,this.mb=t||"",na(this,n)}},Gi.prototype.selectAudioLanguage=Gi.prototype.Ud,Gi.prototype.Vd=function(e,t){if(this.a){var n=Wr(this.a);this.Ca=e,this.lb=t||"",na(this,n)}},Gi.prototype.selectTextLanguage=Gi.prototype.Vd,Gi.prototype.bd=function(){return"showing"==this.A.mode},Gi.prototype.isTextTrackVisible=Gi.prototype.bd,Gi.prototype.Yd=function(e){this.A.mode=e?"showing":"hidden",aa(this)},Gi.prototype.setTextTrackVisibility=Gi.prototype.Yd,Gi.prototype.Uc=function(){return this.c?new Date(1e3*this.c.presentationTimeline.f+1e3*this.f.currentTime):null},Gi.prototype.getPlayheadTimeAsDate=Gi.prototype.Uc,Gi.prototype.getStats=function(){Zi(this),this.Sa();var e=null,t=null,n=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};return this.g&&this.c&&(e=rt(this.c,Cr(this.g)),t=this.B[e],t=tt(t.audio,t.video,this.c.periods[e].variants),e=t.video||{}),e||(e={}),t||(t={}),{width:e.width||0,height:e.height||0,streamBandwidth:t.bandwidth||0,decodedFrames:Number(n.totalVideoFrames),droppedFrames:Number(n.droppedVideoFrames),estimatedBandwidth:this.b.abr.manager.getBandwidthEstimate(),loadLatency:this.i.loadLatency,playTime:this.i.playTime,bufferingTime:this.i.bufferingTime,switchHistory:A(this.i.switchHistory),stateHistory:A(this.i.stateHistory)}},Gi.prototype.getStats=Gi.prototype.getStats,Gi.prototype.addTextTrack=function(e,t,n,r,i,a){if(!this.a)return Promise.reject();for(var o,s=Wr(this.a),u=0;u<this.c.periods.length;u++)if(this.c.periods[u]==s){if(u==this.c.periods.length-1){if(o=this.c.presentationTimeline.Y()-s.startTime,1/0==o)return Promise.reject()}else o=this.c.periods[u+1].startTime-s.startTime;break}var l={id:this.Dc++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(t){return 1!=t?null:new Ht(1,0,o,function(){return[e]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[]};return this.Va.push(l.id),s.textStreams.push(l),zr(this.a,l).then(function(){if(!this.O){var e=this.c.periods.indexOf(s),r=qr(this.a);return r.text&&(this.B[e].text=r.text.id),this.Va.splice(this.Va.indexOf(l.id),1),na(this,s),ia(this),{id:l.id,active:!1,type:"text",bandwidth:0,language:t,label:a||null,kind:n,width:null,height:null}}}.bind(this))},Gi.prototype.addTextTrack=Gi.prototype.addTextTrack,Gi.prototype.Jb=function(e,t){this.ob.width=e,this.ob.height=t},Gi.prototype.setMaxHardwareResolution=Gi.prototype.Jb,so=Gi.prototype,so.fb=function(e){var t=this.a?qr(this.a):{};if(Ye(this.j,t,e),t=0<Je(e.variants).length,Ke(e,this.b.restrictions,this.ob)&&this.a&&Wr(this.a)==e&&ia(this),e=1>Je(e.variants).length,!t)throw new u(2,4,4011);if(e)throw new u(2,4,4012)},so.de=function(e,t){this.b.abr.manager.segmentDownloaded(e,t)},so.zc=function(e){if(Zi(this),this.ka=e,this.Sa(),this.g){var t=this.g;e!=t.h&&(t.h=e,Ur(t,t.g))}this.dispatchEvent(new st("buffering",{buffering:e}))},so.$d=function(){ia(this)},so.Sa=function(){if(!this.O){var e=this.ka?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing",t=Date.now()/1e3;if(this.i.stateHistory.length){var n=this.i.stateHistory[this.i.stateHistory.length-1];if(n.duration=t-n.timestamp,e==n.state)return}this.i.stateHistory.push({timestamp:t,state:e,duration:0})}},so.ce=function(){if(this.v){var e=this.v;e.c.forEach(e.o.bind(e,!0))}this.a&&Jr(this.a)},so.ed=function(e){this.Za=!0,this.b.abr.manager.disable(),e=ta(this,e,Qe(e,this.ia,void 0,this.mb),Ze(e,this.Ca,void 0,this.lb),!0);for(var t in this.G)e[t]=this.G[t].stream;this.G={};for(t in e)Yi(this,e[t],!0);return e},so.Gc=function(){this.Za=!1,this.b.abr.enabled&&this.b.abr.manager.enable();for(var e in this.G){var t=this.G[e];$r(this.a,e,t.stream,t.Kc)}this.G={}},so.ld=function(){this.h&&this.h.update&&this.h.update()},so.ud=function(){this.g&&this.g.Ab()},so.Lb=function(e,t){var n,r=qr(this.a);for(n in e){var i=e[n];r[n]!=i?Yi(this,i,!0):delete e[n]}if(!B(e)&&this.a){for(n in e)$r(this.a,n,e[n],t||!1);ra(this)}},so.ya=function(e){this.O||this.dispatchEvent(new st("error",{detail:e}))},so.xd=function(e){this.v?this.v.v(e):this.Xa.push(e)},so.gb=function(e){this.dispatchEvent(e)},so.yd=function(){if(this.f.error){var e=this.f.error.code;if(1!=e){var t=this.f.error.msExtendedCode;t&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),this.ya(new u(2,3,3016,e,t))}}},so.be=function(e){var t=["output-restricted","internal-error"],n=Wr(this.a),r=!1;n.variants.forEach(function(n){var i=[];n.audio&&i.push(n.audio),n.video&&i.push(n.video),i.forEach(function(i){var a=n.allowedByKeySystem;i.keyId&&(i=e[i.keyId],n.allowedByKeySystem=!!i&&0>t.indexOf(i)),a!=n.allowedByKeySystem&&(r=!0)})});var i=qr(this.a);(i=et(i.audio,i.video,n.variants))&&!i.allowedByKeySystem&&na(this,n),r&&ia(this)},so.ae=function(e,t){this.h&&this.h.onExpirationUpdated&&this.h.onExpirationUpdated(e,t),this.dispatchEvent(new st("expirationupdated"))},t("shaka.offline.Storage",oa),oa.support=sa,oa.prototype.m=function(){var e=this.a,t=this.h?this.h.m().catch(function(){}).then(function(){if(e)return e.m()}):Promise.resolve();return this.i=this.f=this.h=this.a=null,t},oa.prototype.destroy=oa.prototype.m,oa.prototype.configure=function(e){O(this.i,e,la(this),{},"")},oa.prototype.configure=oa.prototype.configure,oa.prototype.le=function(e,t,n){function r(e){a=e}if(this.v)return Promise.reject(new u(2,9,9006));this.v=!0;var i,a=null;return ca(this).then(function(){return pa(this),ua(this,e,r,n)}.bind(this)).then(function(n){if(pa(this),this.c=n.manifest,this.b=n.Lc,this.c.presentationTimeline.$()||this.c.presentationTimeline.va())throw new u(2,9,9005,e);this.c.periods.forEach(this.o.bind(this)),this.g=this.a.c.manifest++,this.l=0,n=this.c.periods.map(this.B.bind(this));var r=this.b.b,a=se(this.b);if(r){if(!a.length)throw new u(2,9,9007,e);r.initData=[]}return i={key:this.g,originalManifestUri:e,duration:this.l,size:0,expiration:this.b.ab(),periods:n,sessionIds:a,drmInfo:r,appMetadata:t},Mi(this.h,i)}.bind(this)).then(function(){if(pa(this),a)throw a;return fa(this)}.bind(this)).then(function(){return Si(i)}.bind(this)).catch(function(e){return fa(this).catch(_).then(function(){throw e})}.bind(this))},oa.prototype.store=oa.prototype.le,oa.prototype.remove=function(e){function t(e){6013!=e.code&&(o=e)}var n=e.offlineUri,r=/^offline:([0-9]+)$/.exec(n);if(!r)return Promise.reject(new u(2,9,9004,n));var i,a,o=null,s=Number(r[1]);return ca(this).then(function(){return pa(this),this.a.get("manifest",s)}.bind(this)).then(function(e){if(pa(this),!e)throw new u(2,9,9003,n);return i=e,e=Ui(i),a=new re(this.f.o,t,function(){},function(){}),a.configure(this.f.getConfiguration().drm),a.init(e,!0)}.bind(this)).then(function(){return ae(a,i.sessionIds)}.bind(this)).then(function(){return a.m()}.bind(this)).then(function(){if(pa(this),o)throw o;var t=i.periods.map(function(e){return e.streams.map(function(e){var t=e.segments.map(function(e){return e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.uri),Number(e[1])});return e.initSegmentUri&&(e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.initSegmentUri),t.push(Number(e[1]))),t}).reduce(b,[])}).reduce(b,[]),n=0,r=t.length,a=this.i.progressCallback;return _i(this.a,t,function(){n++,a(e,n/r)})}.bind(this)).then(function(){return pa(this),this.i.progressCallback(e,1),this.a.remove("manifest",s)}.bind(this))},oa.prototype.remove=oa.prototype.remove,oa.prototype.list=function(){var e=[];return ca(this).then(function(){return pa(this),this.a.forEach("manifest",function(t){e.push(Si(t))})}.bind(this)).then(function(){return e})},oa.prototype.list=oa.prototype.list,oa.prototype.A=function(e){for(var t,n=[],r=Ve(this.f.getConfiguration().preferredAudioLanguage),i=[0,mo,bo],a=e.filter(function(e){return"variant"==e.type}),i=i.map(function(e){return a.filter(function(t){return t=Ve(t.language),Ge(e,r,t)})}),o=0;o<i.length;o++)if(i[o].length){t=i[o];break}t||(i=a.filter(function(e){return e.primary}),i.length&&(t=i)),t||(t=a,a.map(function(e){return e.language}).filter(w));var s=t.filter(function(e){return e.height&&480>=e.height});return s.length&&(s.sort(function(e,t){return t.height-e.height}),t=s.filter(function(e){return e.height==s[0].height})),t.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.length&&n.push(t[Math.floor(t.length/2)]),n.push.apply(n,e.filter(function(e){return"text"==e.type})),n},oa.prototype.o=function(e){var t={};if(this.j){var n=this.j.filter(function(e){return"variant"==e.type}),r=null;n.length&&(r=Xe(e,n[0])),r&&(r.video&&(t.video=r.video),r.audio&&(t.audio=r.audio))}Ye(this.b,t,e),Ke(e,this.f.getConfiguration().restrictions,{width:1/0,height:1/0})},oa.prototype.B=function(e){var t,n,r=qe(e,null,null),i=ze(e,null),r=this.i.trackSelectionCallback(r.concat(i));for(this.j||(this.j=r,this.c.periods.forEach(this.o.bind(this))),i=r.length-1;0<i;--i){var a=!1;for(n=i-1;0<=n;--n)if(r[i].type==r[n].type&&r[i].kind==r[n].kind&&r[i].language==r[n].language){a=!0;break}if(a)break}for(a=[],i=0;i<r.length;i++)(t=Xe(e,r[i]))?(t.audio&&((n=a.filter(function(e){return e.id==t.audio.id})[0])?n.variantIds.push(t.id):(n=t.video?t.bandwidth/2:t.bandwidth,a.push(ha(this,e,t.audio,n,t.id)))),t.video&&((n=a.filter(function(e){return e.id==t.video.id})[0])?n.variantIds.push(t.id):(n=t.audio?t.bandwidth/2:t.bandwidth,a.push(ha(this,e,t.video,n,t.id))))):a.push(ha(this,e,$e(e,r[i]),0));return{startTime:e.startTime,streams:a}},es.offline=sa,t("shaka.polyfill.installAll",function(){for(var e=0;e<ts.length;++e)ts[e]()});var ts=[];t("shaka.polyfill.register",va),va(function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ya),document.addEventListener("webkitfullscreenerror",ya),document.addEventListener("mozfullscreenchange",ya),document.addEventListener("mozfullscreenerror",ya),document.addEventListener("MSFullscreenChange",ya),document.addEventListener("MSFullscreenError",ya)}}),va(function(){var t=navigator.userAgent;t&&0<=t.indexOf("CrKey")&&delete e.indexedDB}),va(function(){if(4503599627370497!=Math.round(4503599627370497)){var e=Math.round;Math.round=function(t){var n=t;return 4503599627370496>=t&&(n=e(t)),n}}}),ga.prototype.c=function(e){if(!(1<e.version)){var t=te(e.s.Ka(16)),n=[];if(0<e.version)for(var r=e.s.D(),i=0;i<r;++i){var a=te(e.s.Ka(16));n.push(a)}r=e.s.D(),e.s.I(r),this.b.push.apply(this.b,n),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}},ba.prototype.createMediaKeys=function(){var e=new Ea(this.keySystem);return Promise.resolve(e)},ba.prototype.getConfiguration=function(){return this.a},Ea.prototype.createSession=function(e){if("temporary"!=(e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new wa(this.a)},Ea.prototype.setServerCertificate=function(){return Promise.resolve(!1)},n(wa),so=wa.prototype,so.generateRequest=function(e,t){this.a=new P;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),N(this.f,this.c,"mskeymessage",this.pd.bind(this)),N(this.f,this.c,"mskeyadded",this.nd.bind(this)),N(this.f,this.c,"mskeyerror",this.od.bind(this)),Oa(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},so.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},so.update=function(e){this.b=new P;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},so.close=function(){try{this.c.close(),this.closed.resolve(),j(this.f)}catch(e){this.closed.reject(e)}return this.closed},so.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},so.pd=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new st("message",{messageType:void 0==this.keyStatuses.sb()?"licenserequest":"licenserenewal",message:e.message.buffer}))},so.nd=function(){this.a?(Oa(this,"usable"),this.a.resolve(),this.a=null):this.b&&(Oa(this,"usable"),this.b.resolve(),this.b=null)},so.od=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,this.a)this.a.reject(e),this.a=null;else if(this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Oa(this,"output-not-allowed");default:Oa(this,"internal-error")}};var ns;so=Aa.prototype,so.Kb=function(e){this.size=void 0==e?0:1,this.a=e},so.sb=function(){return this.a},so.forEach=function(e){this.a&&e(this.a,ns)},so.get=function(e){if(this.has(e))return this.a},so.has=function(e){var t=ns;return!(!this.a||!ne(new Uint8Array(e),new Uint8Array(t)))},so.entries=function(){},so.keys=function(){},so.values=function(){},Da.prototype.createSession=function(){},Da.prototype.setServerCertificate=function(){},xa.prototype.getConfiguration=function(){},xa.prototype.createMediaKeys=function(){};var rs="";Na.prototype.createMediaKeys=function(){var e=new Ua(this.a);return Promise.resolve(e)},Na.prototype.getConfiguration=function(){return this.b},so=Ua.prototype,so.createSession=function(e){var t=e||"temporary";if("temporary"!=t&&"persistent-license"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return e=this.b||document.createElement("video"),e.src||(e.src="about:blank"),t=new Ba(e,this.g,t),this.c.push(t),t},so.setServerCertificate=function(){return Promise.resolve(!1)},so.Cd=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},so.Bd=function(e){var t=Fa(this,e.sessionId);t&&(e=new st("message",{messageType:void 0==t.keyStatuses.sb()?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},so.zd=function(e){(e=Fa(this,e.sessionId))&&(Va(e,"usable"),e.a&&e.a.resolve(),e.a=null)},so.Ad=function(e){var t=Fa(this,e.sessionId);if(t){var n=Error("EME v0.1b key error");n.errorCode=e.errorCode,n.errorCode.systemCode=e.systemCode,!e.sessionId&&t.b?(n.method="generateRequest",45==e.systemCode&&(n.message="Unsupported session type."),t.b.reject(n),t.b=null):e.sessionId&&t.a?(n.method="update",t.a.reject(n),t.a=null):(n=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Va(t,"output-restricted"):1==n?Va(t,"expired"):Va(t,"internal-error"))}},n(Ba),so=Ba.prototype,so.Mb=function(e,t){if(this.a)this.a.then(this.Mb.bind(this,e,t)).catch(this.Mb.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=Y(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=Z(r.keys[0].k),r=Z(r.keys[0].kid)}else n=new Uint8Array(t),r=null;var i=Ia("addKey");try{this.f[i](this.c,n,r,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},so.generateRequest=function(e,t){return Ga(this,t,null)},so.load=function(e){return"persistent-license"==this.g?Ga(this,null,e):Promise.reject(Error("Not a persistent session."))},so.update=function(e){var t=new P;return this.Mb(t,e),t},so.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ia("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},so.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};var is;so=Ha.prototype,so.Kb=function(e){this.size=void 0==e?0:1,this.a=e},so.sb=function(){return this.a},so.forEach=function(e){this.a&&e(this.a,is)},so.get=function(e){if(this.has(e))return this.a},so.has=function(e){var t=is;return!(!this.a||!ne(new Uint8Array(e),new Uint8Array(t)))},so.entries=function(){},so.keys=function(){},so.values=function(){},va(function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?La("webkit"):HTMLMediaElement.prototype.generateKeyRequest?La(""):e.MSMediaKeys?(ns=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=_a,e.MediaKeys=Ea,e.MediaKeySystemAccess=ba,navigator.requestMediaKeySystemAccess=ma):(navigator.requestMediaKeySystemAccess=Pa,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ra,e.MediaKeys=Da,e.MediaKeySystemAccess=xa))}),va(function(){if(e.MediaSource){var t=navigator.vendor,n=navigator.appVersion;!t||!n||0>t.indexOf("Apple")||(0<=n.indexOf("Version/8")?e.MediaSource=null:0<=n.indexOf("Version/9")?Ka():0<=n.indexOf("Version/10")&&(Ka(),Ya()))}});var as=0;za.prototype.then=function(e,t){var n=new za;switch(this.Aa){case 1:Za(this,n,e);break;case 2:Za(this,n,t);break;case as:this.c.push({L:n,pb:e}),this.b.push({L:n,pb:t})}return n},za.prototype.catch=function(e){return this.then(void 0,e)},za.prototype.fa=function(e){if(this.Aa==as){for(this.jb=e,this.Aa=1,e=0;e<this.c.length;++e)Za(this,this.c[e].L,this.c[e].pb);this.c=[],this.b=[]}},za.prototype.a=function(e){if(this.Aa==as){for(this.jb=e,this.Aa=2,e=0;e<this.b.length;++e)Za(this,this.b[e].L,this.b[e].pb);this.c=[],this.b=[]}};var os=null,ss=[];va(function(t){e.setImmediate?(no=function(t){return e.setImmediate(t)},ro=function(t){return e.clearImmediate(t)}):(no=function(t){return e.setTimeout(t,0)},ro=function(t){return e.clearTimeout(t)}),e.Promise&&!t||(e.Promise=za,e.Promise.resolve=Xa,e.Promise.reject=$a,e.Promise.all=Ja,e.Promise.race=Qa,e.Promise.prototype.then=za.prototype.then,e.Promise.prototype.catch=za.prototype.catch)}),va(function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this,arguments);return e&&e.catch(function(){}),e}}}),va(function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=io)}}),va(function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=ao;else if(6==t)e.VTTCue=oo;else{try{var n=!!ao(1,2,"")}catch(e){n=!1}n&&(e.VTTCue=ao)}}})}).call(i,this),void 0!==e&&e.exports?e.exports=i.shaka:void 0!==(r=function(){return i.shaka}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={},r=s(t),i=u(t);return new Promise(function(t,s){var u=a(e);if(n.player=(0,l.loadPlayer)(u,r),n.player.addEventListener(n.player.Event.SOURCE_SELECTED,function(e){(0,v.default)(e.payload.selectedSource,n.player)}),l.Utils.mergeDeep(r,{targetId:u}),o(n.player,r),i.partnerId)return n.provider=new h.default(i.partnerId,i.ks,i.env),n.provider.getConfig(i.entryId,i.uiConfId).then(function(e){l.Utils.mergeDeep(r,e),n.player.configure(r),t(n)}).catch(function(e){s(e)});t(n)})}function a(e){var t=document.createElement("div");t.id=l.Utils.uniqueId(5),t.className=y,t.setAttribute("tabindex","-1");var n=document.getElementById(e);return n&&t&&n.appendChild(t),t.id}function o(e,t){new f.default(e,t).buildDefaultUI()}function s(e){var t={};return l.Utils.mergeDeep(t,e),delete t.partnerId,delete t.entryId,delete t.uiConfId,delete t.env,delete t.ks,t}function u(e){var t={};return e&&(t.partnerId=e.partnerId,t.entryId=e.entryId,t.uiConfId=e.uiConfId,t.env=e.env,t.ks=e.ks),t}Object.defineProperty(t,"__esModule",{value:!0}),t.createKalturaPlayerContainer=t.extractPlayerConfig=t.extractProviderConfig=void 0,t.default=i;var l=n(0),c=n(2),f=r(c),d=n(1),h=r(d),p=n(14),v=r(p);n(15);var y="kaltura-player-container";t.extractProviderConfig=u,t.extractPlayerConfig=s,t.createKalturaPlayerContainer=a},function(e,t,n){"use strict";function r(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function i(e,t){var n=-1===e.url.indexOf("?")?"?":"&",i=r(),a=r(),o=i+":"+a;e.url+=n+"playSessionId="+o,t.sessionId=o}function a(e,t,n){var i=/:((?:[a-z0-9]|-)*)/i,a=i.exec(t);if(a&&a[1]){var o=t.replace(a[1],r());e.url=e.url.replace(t,o),n.sessionId=o}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if("string"==typeof e.url&&-1!==e.url.toLowerCase().indexOf("playmanifest/")){var n=/playSessionId=((?:[a-z0-9]|-|:)*)/i,r=n.exec(e.url);r&&r[1]?a(e,r[1],t):i(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(4)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(3)(void 0),t.push([e.i,".kaltura-player-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n",""])}])});
//# sourceMappingURL=kaltura-player.min.js.map