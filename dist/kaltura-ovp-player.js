!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("KalturaPlayer",[],t):"object"==typeof exports?exports.KalturaPlayer=t():e.KalturaPlayer=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=325)}([function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){var r;
/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright Â© 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(i,o){"use strict";var a="model",s="name",u="type",l="vendor",c="version",f="mobile",p="tablet",d="smarttv",h={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},y={rgx:function(e,t){for(var n,r,i,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=r=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(i=0;i<c.length;i++)s=a[++r],"object"==typeof(o=c[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(h.has(t[n][r],e))return"?"===n?void 0:n}else if(h.has(t[n],e))return"?"===n?void 0:n;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,c],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],c],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],c],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,c],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,y.str,v.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,l,[u,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[l,"Apple"],[u,p]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[l,"Apple"],[u,d]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,a,[u,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[l,"Amazon"],[u,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,y.str,v.device.amazon.model],[l,"Amazon"],[u,f]],[/android.+aft([bms])\sbuild/i],[a,[l,"Amazon"],[u,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,l,[u,f]],[/\((ip[honed|\s\w*]+);/i],[a,[l,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,a,[u,f]],[/\(bb10;\s(\w+)/i],[a,[l,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[l,"Asus"],[u,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[a,"Xperia Tablet"],[u,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[l,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,y.str,v.device.sprint.vendor],[a,y.str,v.device.sprint.model],[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[a,/_/g," "],[u,f]],[/(nexus\s9)/i],[a,[l,"HTC"],[u,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[a,[l,"Huawei"],[u,f]],[/android.+(bah2?-a?[lw]\d{2})/i],[a,[l,"Huawei"],[u,p]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,a,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[l,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[l,"Motorola"],[u,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,h.trim],[a,h.trim],[u,d]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,d]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],a,[u,p]],[/smart-tv.+(samsung)/i],[l,[u,d],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],a,[u,f]],[/sie-(\w*)/i],[a,[l,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],a,[u,f]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[l,"Acer"],[u,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[l,"LG"],[u,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],a,[u,p]],[/(lg) netcast\.tv/i],[l,a,[u,d]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[l,"LG"],[u,f]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[l,a,[u,p]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[l,"Lenovo"],[u,p]],[/(lenovo)[_\s-]?([\w-]+)/i],[l,a,[u,f]],[/linux;.+((jolla));/i],[l,a,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[l,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,a,[u,f]],[/crkey/i],[[a,"Chromecast"],[l,"Google"],[u,d]],[/android.+;\s(glass)\s\d/i],[a,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[l,"Google"],[u,p]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[l,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[l,"Meizu"],[u,f]],[/(mz)-([\w-]{2,})/i],[[l,"Meizu"],a,[u,f]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[a,[l,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[l,"RCA"],[u,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[l,"Dell"],[u,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[l,"Verizon"],[u,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],a,[u,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[l,"NuVision"],[u,p]],[/android.+;\s(k88)\sbuild/i],[a,[l,"ZTE"],[u,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[l,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[l,"Swiss"],[u,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[l,"Zeki"],[u,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],a,[u,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[l,"Insignia"],[u,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[l,"NextBook"],[u,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],a,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],a,[u,f]],[/android.+;\s(PH-1)\s/i],[a,[l,"Essential"],[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[l,"Envizen"],[u,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,a,[u,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[l,"MachSpeed"],[u,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,a,[u,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[l,"Rotor"],[u,p]],[/android.+(KS(.+))\s+build/i],[a,[l,"Amazon"],[u,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,a,[u,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,h.lowerize],l,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,d]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,y.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,y.str,v.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},m=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof m))return new m(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?h.extend(g,t):g;return this.getBrowser=function(){var e={name:void 0,version:void 0};return y.rgx.call(e,n,r.browser),e.major=h.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return y.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return y.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return y.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return y.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};m.VERSION="0.7.21",m.BROWSER={NAME:s,MAJOR:"major",VERSION:c},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:a,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:d,TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:s,VERSION:c},m.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=m),t.UAParser=m):void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r);var b=i&&(i.jQuery||i.Zepto);if(b&&!b.ua){var _=new m;b.ua=_.getResult(),b.ua.get=function(){return _.getUA()},b.ua.set=function(e){_.setUA(e);var t=_.getResult();for(var n in t)b.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){var r,i;
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */!function(o){"use strict";var a,s={VERSION:"1.6.0"},u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};s.TRACE=f(1,"TRACE"),s.DEBUG=f(2,"DEBUG"),s.INFO=f(3,"INFO"),s.TIME=f(4,"TIME"),s.WARN=f(5,"WARN"),s.ERROR=f(8,"ERROR"),s.OFF=f(99,"OFF");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,c({level:e},this.context))}};var d,h=new p({filterLevel:s.OFF});(d=s).enabledFor=l(h,h.enabledFor),d.trace=l(h,h.trace),d.debug=l(h,h.debug),d.time=l(h,h.time),d.timeEnd=l(h,h.timeEnd),d.info=l(h,h.info),d.warn=l(h,h.warn),d.error=l(h,h.error),d.log=d.info,s.setHandler=function(e){a=e},s.setLevel=function(e){for(var t in h.setLevel(e),u)u.hasOwnProperty(t)&&u[t].setLevel(e)},s.getLevel=function(){return h.getLevel()},s.get=function(e){return u[e]||(u[e]=new p(c({name:e},h.context)))},s.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var o,a=console.log;i.level===s.TIME?(o=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(o):t[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):n(a,[o+": "+((new Date).getTime()-t[o])+"ms"])):(i.level===s.WARN&&console.warn?a=console.warn:i.level===s.ERROR&&console.error?a=console.error:i.level===s.INFO&&console.info?a=console.info:i.level===s.DEBUG&&console.debug?a=console.debug:i.level===s.TRACE&&console.trace&&(a=console.trace),e.formatter(r,i),n(a,r))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e){e.exports=JSON.parse('{"heartbeatTimeout":30000}')},function(e){e.exports=JSON.parse('{"a":"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="}')},function(e,t,n){var r=n(5),i=n(6);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var f=a(c),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==f?(o[f].references++,o[f].updater(p)):o.push({identifier:c,updater:y(p,t),references:1}),r.push(c)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,c=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,h=0;function y(e,t){var n,r,i;if(t.singleton){var o=h++;n=d||(d=u(t)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(e,t),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(e,t,n){(t=n(7)(!1)).push([e.i,".playkit-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  color: #fff;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.playkit-engine {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  object-fit: contain;\n}\n\n.playkit-engine video::-webkit-media-controls-panel,\n.playkit-engine video::-webkit-media-controls-panel-container,\n.playkit-engine video::-webkit-media-controls-start-playback-button,\n.playkit-engine video::-webkit-media-controls-play-button {\n  display: none;\n  -webkit-appearance: none;\n}\n\n.playkit-poster {\n  position: absolute;\n  display: block;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: #000;\n}\n\n.playkit-subtitles {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n}\n\n.playkit-black-cover {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n}\n\n.playkit-size-iframe {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  border: 0;\n  z-index: -100;\n}\n\n.playkit-in-browser-fullscreen-mode {\n  width: 100% !important;\n  height: 100% !important;\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  /*added for blocking element with fixed position which could be on the top of the player */\n  z-index: 999999 !important;\n}\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"loadPlayer",(function(){return hi})),n.d(t,"registerMediaSourceAdapter",(function(){return In})),n.d(t,"BaseMediaSourceAdapter",(function(){return rn})),n.d(t,"registerPlugin",(function(){return be})),n.d(t,"BasePlugin",(function(){return he})),n.d(t,"BaseMiddleware",(function(){return ue})),n.d(t,"Track",(function(){return Pe})),n.d(t,"VideoTrack",(function(){return Me})),n.d(t,"AudioTrack",(function(){return Ve})),n.d(t,"TextTrack",(function(){return qe})),n.d(t,"TextStyle",(function(){return Qe})),n.d(t,"Utils",(function(){return r})),n.d(t,"utils",(function(){return r})),n.d(t,"Error",(function(){return B})),n.d(t,"FakeEvent",(function(){return _})),n.d(t,"FakeEventTarget",(function(){return E})),n.d(t,"EventManager",(function(){return R})),n.d(t,"VERSION",(function(){return pi})),n.d(t,"NAME",(function(){return di})),n.d(t,"Env",(function(){return y})),n.d(t,"State",(function(){return ke})),n.d(t,"getCapabilities",(function(){return yi})),n.d(t,"setCapabilities",(function(){return vi})),n.d(t,"registerEngine",(function(){return or})),n.d(t,"unRegisterEngine",(function(){return ar})),n.d(t,"Ad",(function(){return Er})),n.d(t,"AdBreak",(function(){return _r})),n.d(t,"AdBreakType",(function(){return gr})),n.d(t,"AdTagType",(function(){return mr})),n.d(t,"AdsController",(function(){return Pr})),n.d(t,"AdEventType",(function(){return te})),n.d(t,"Html5EventType",(function(){return ne})),n.d(t,"CustomEventType",(function(){return re})),n.d(t,"EventType",(function(){return ie})),n.d(t,"StateType",(function(){return Ee})),n.d(t,"TrackType",(function(){return Nt})),n.d(t,"EngineType",(function(){return Ut})),n.d(t,"MediaType",(function(){return Ft})),n.d(t,"StreamType",(function(){return jt})),n.d(t,"AbrMode",(function(){return Bt})),n.d(t,"LogLevelType",(function(){return D})),n.d(t,"CorsType",(function(){return Vt})),n.d(t,"DrmScheme",(function(){return an})),n.d(t,"MimeType",(function(){return fi})),n.d(t,"RequestType",(function(){return Yt})),n.d(t,"getLogger",(function(){return N})),n.d(t,"LogLevel",(function(){return x})),n.d(t,"getLogLevel",(function(){return L})),n.d(t,"setLogLevel",(function(){return M}));var r={};n.r(r),n.d(r,"Number",(function(){return W})),n.d(r,"String",(function(){return Y})),n.d(r,"Object",(function(){return q})),n.d(r,"Generator",(function(){return X})),n.d(r,"Dom",(function(){return $})),n.d(r,"Http",(function(){return J})),n.d(r,"VERSION",(function(){return Q})),n.d(r,"ResizeWatcher",(function(){return Ur}));var i=n(0),o=n.n(i),a=/^.*(web0s).*(smarttv).*$/i,s=/^.*(smart-tv).*(tizen).*$/i,u=/^.*(vidaa).*(smarttv).*$/i,l=[[s],[[o.a.BROWSER.NAME,"SAMSUNG_TV_BROWSER"],[o.a.BROWSER.MAJOR,""],[o.a.BROWSER.VERSION,""]]],c=[[a],[o.a.OS.NAME],[u],[o.a.OS.NAME]],f=[[a],[[o.a.DEVICE.VENDOR,"LG"],[o.a.DEVICE.TYPE,o.a.DEVICE.SMARTTV]],[s],[[o.a.DEVICE.VENDOR,"SAMSUNG"],[o.a.DEVICE.TYPE,o.a.DEVICE.SMARTTV]],[u],[[o.a.DEVICE.VENDOR,"HISENSE"],[o.a.DEVICE.TYPE,o.a.DEVICE.SMARTTV]],[/^.*(smart-tv|smarttv).*$/i],[[o.a.DEVICE.TYPE,o.a.DEVICE.SMARTTV]]],p=[[/(edg)\/((\d+)?[\w.]+)/i],[[o.a.BROWSER.NAME,"Edge"],o.a.BROWSER.VERSION,o.a.BROWSER.MAJOR]],d=[].concat(p,l),h=new o.a(void 0,{browser:d,device:f,os:c}).getResult();h.isConsole=h.device.type===o.a.DEVICE.CONSOLE,h.isSmartTV=h.device.type===o.a.DEVICE.SMARTTV,h.isMobile=h.device.type===o.a.DEVICE.MOBILE,h.isTablet=h.device.type===o.a.DEVICE.TABLET,h.isWearable=h.device.type===o.a.DEVICE.WEARABLE,h.isEmbedded=h.device.type===o.a.DEVICE.EMBEDDED,h.isIPadOS="Mac OS"===h.os.name&&"ontouchend"in document,h.isSafari=h.browser.name.includes("Safari"),h.isIOS="iOS"===h.os.name,h.isMacOS="Mac OS"===h.os.name;var y=h;function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._map=new Map}var t,n;return t=e,(n=[{key:"push",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);Array.isArray(n)&&(n.push(t),this._map.set(e,n))}else this._map.set(e,[t])}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=this._map.get(e);return t?t.slice():[]}},{key:"getAll",value:function(){var e,t=[],n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._map.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"remove",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);if(Array.isArray(n))for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}}},{key:"keys",value:function(){return this._map.keys()}},{key:"clear",value:function(){this._map.clear()}}])&&g(t.prototype,n),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1,this.payload=n}var t,n;return t=e,(n=[{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}])&&b(t.prototype,n),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listeners=new m,this.dispatchTarget=this}var t,n;return t=e,(n=[{key:"addEventListener",value:function(e,t){this._listeners.push(e,t)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"dispatchEvent",value:function(e){for(var t=this._listeners.get(e.type)||[],n=0;n<t.length;++n){e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.stopped)break}return e.defaultPrevented}}])&&k(t.prototype,n),e}();function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}var O=function(){function e(){T(this,e),this._bindingMap=new m}return A(e,[{key:"destroy",value:function(){return this.removeAll(),this._bindingMap=null,Promise.resolve()}},{key:"listenOnce",value:function(e,t,n,r){var i=this;this.listen(e,t,(function r(o){i.unlisten(e,t,r),n.call(i,o)}),r)}},{key:"listen",value:function(e,t,n,r){var i=new P(e,t,n,r);this._bindingMap&&this._bindingMap.push(t,i)}},{key:"unlisten",value:function(e,t,n){if(this._bindingMap)for(var r=this._bindingMap.get(t),i=0;i<r.length;++i){var o=r[i];o.target!==e||o.listener!==n&&n||(o.unlisten(),this._bindingMap&&this._bindingMap.remove(t,o))}}},{key:"removeAll",value:function(){if(this._bindingMap){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._bindingMap.getAll());try{for(t.s();!(e=t.n()).done;)e.value.unlisten()}catch(e){t.e(e)}finally{t.f()}this._bindingMap&&this._bindingMap.clear()}}}]),e}(),P=function(){function e(t,n,r,i){T(this,e),this.target=t,this.type=n,this.listener=r,this.options=i,this.target.addEventListener(n,r,!1)}return A(e,[{key:"unlisten",value:function(){this.target&&(this.target.removeEventListener(this.type,this.listener,this.options),this.target=null,this.listener=null,this.options=null)}}]),e}(),R=O,C=n(1),x={DEBUG:C.DEBUG,INFO:C.INFO,TIME:C.TIME,WARN:C.WARN,ERROR:C.ERROR,OFF:C.OFF},D={};function I(e){return e?C.get(e):C}function L(e){return I(e).getLevel()}function M(e,t){I(t).setLevel(e)}Object.keys(x).forEach((function(e){D[e]=e})),C.useDefaults({defaultLevel:C.ERROR});var N=I,j={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_CREATE_TEXT_CUE:2009,DASH_ADAPTER_ERROR_PARSE_ISSUE:2010,UNKNOWN_FILE_TYPE:2011,UNKNOWN_LANGUAGE:2012,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,HLS_FATAL_MEDIA_ERROR:3018,HLS_FRAG_PARSING_ERROR:3019,HLS_BUFFER_APPEND_ISSUE:3020,HLS_BUFFER_APPENDING_ISSUE:3021,NATIVE_ADAPTER_LOAD_FAILED:3022,HLS_BUFFER_STALLED_ERROR:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_LIVE_CONTENT_NOT_SUPPORTED:4029,HLSJS_CANNOT_PARSE:4030,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,BAD_FAIRPLAY_RESPONSE:6015,COULD_NOT_CREATE_MEDIA_KEYS:6016,COULD_NOT_CREATE_KEY_SESSION:6017,LOAD_INTERRUPTED:7e3,BITRATE_SWITCH_ISSUE:7001,LOAD_FAILED:7002,RUNTIME_ERROR_NOT_REGISTERED_PLUGIN:7003,RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED:7004,RUNTIME_ERROR_NOT_VALID_HANDLER:7005,NO_SOURCE_PROVIDED:7006,NO_ENGINE_FOUND_TO_PLAY_THE_SOURCE:7007,ENTER_PICTURE_IN_PICTURE_FAILED:7008,EXIT_PICTURE_IN_PICTURE_FAILED:7009,PLUGIN_LOAD_FAILED:7010,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,CONTENT_UNSUPPORTED_BY_BROWSER:9009,CANNOT_ADD_ITEM:9010,DOWNLOAD_FAILED:9011,COULD_NOT_GET_INFO_FROM_MEDIA_PROVIDER:9012,ENTRY_DOES_NOT_EXIST:9013,PAUSE_FAILED:9014,RESUME_FAILED:9015,RENEW_LICENSE_FAILED:9016,ENTRY_ALREADY_EXISTS:9017,REMOVE_FAILED:9018,CAST_LOAD_MEDIA_FAILED:10001,CAST_CUSTOM_MESSAGE_PARSING_ERROR:10002,CAST_EDIT_TRACKS_INFO_ERROR:10003,VR_NOT_SUPPORTED:11e3};function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.assign(j,{XML_PARSING_ERROR:8100,VAST_SCHEMA_VALIDATION_ERROR:8101,VAST_RESPONSE_VERSION_NOT_SUPPORTED:8102,TRAFFICKING_ERROR:8200,VAST_UNEXPECTED_LINEARITY:8201,VAST_UNEXPECTED_DURATION_ERROR:8202,VAST_UNEXPECTED_SIZE_ERROR:8203,VAST_WRAPPER_ERROR:8300,VAST_URI_ERROR:8301,VAST_TOO_MANY_REDIRECTS:8302,NO_ADS_VAST_RESPONSE:8303,GENERAL_LINEAR_ERROR:8400,FILE_NOT_FOUND:8401,VAST_MEDIA_LOAD_TIMEOUT:8402,MEDIA_FILE_NOT_FOUND:8403,MEDIA_FILE_DISPLAY_ERROR:8405,MEZZANINE_FILE_NOT_PROVIDED:8406,MEZZANINE_DOWNLOADED_FOR_THE_FIRST_TIME:8407,VAST_RESPONSE_AD_REJECTED:8408,CREATIVE_WAS_NOT_EXECUTED:8409,CODE_REFERENCED_NOT_EXECUTED:8410,GENERAL_NON_LINEAR_AD_ERROR:8500,NON_LINEAR_CREATIVE_DIMENSIONS_NOT_ALIGN_ERROR:8501,NON_LINEAR_FETCH_ERROR:8502,NON_LINEAR_RESOURCE_NOT_FOUND:8503,GENERAL_COMPANION_ADS_ERROR:8600,COMPANION_DIMENSIONS_NOT_FIT:8601,COMPANION_CANNOT_BE_DISPLAY:8602,COMPANION_CANNOT_BE_FETCHED:8603,COMPANION_TYPE_NOT_FOUND:8604,AD_UNDEFINED_ERROR:8900,GENERAL_VPAID_ERROR:8901});var B=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};U(this,e),this.severity=t,this.category=n,this.code=r,this.data=i,L("Error")!==x.OFF&&e._logger.error("Category:".concat(n," | Code:").concat(r," |"),i)};function V(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}F(B,"Severity",{RECOVERABLE:1,CRITICAL:2}),F(B,"Category",{NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,ADS:8,STORAGE:9,CAST:10,VR:11}),F(B,"Code",j),F(B,"_logger",N("Error"));var W={isNumber:function(e){return Number(e)===e},isInt:function(e){return this.isNumber(e)&&e%1==0},isFloat:function(e){return this.isNumber(e)&&e%1!=0}},Y={capitlize:function(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},endsWith:function(e,t){return"string"==typeof e&&"string"==typeof t&&-1!=e.indexOf(t,e.length-t.length)}},q={merge:function(e){var t,n={},r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=H(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;Object.assign(n,i)}}catch(e){r.e(e)}finally{r.f()}return n},isObject:function(e){return e&&"object"===K(e)&&!Array.isArray(e)},mergeDeep:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();if(this.isObject(e)&&this.isObject(i))for(var o in i)this.isObject(i[o])?(e[o]||Object.assign(e,G({},o,{})),this.mergeDeep(e[o],i[o])):Object.assign(e,G({},o,i[o]));return this.mergeDeep.apply(this,[e].concat(n))},copyDeep:function(e){var t,n=this;return Array.isArray(e)?(t=e.length>0?e.slice(0):[]).forEach((function(e,r){("object"===K(e)&&e!=={}||Array.isArray(e)&&e.length>0)&&(t[r]=n.copyDeep(e))})):null!==e&&"object"===K(e)?e.clone&&"function"==typeof e.clone?t=e.clone():(t=Object.assign({__proto__:e.__proto__},e),Object.keys(t).forEach((function(e){("object"===K(t[e])&&t[e]!=={}||Array.isArray(t[e])&&t[e].length>0)&&(t[e]=n.copyDeep(t[e]))}))):t=e,t},isEmptyObject:function(e){for(var t in e)if(window.Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},getPropertyPath:function(e,t){return t.split(".").reduce((function(e,t){return null==e?e:e[t]}),e)},hasPropertyPath:function(e,t){if(!t)return!1;for(var n=t.split("."),r=0;r<n.length;r++){var i=n[r];if(!e||!window.Object.prototype.hasOwnProperty.call(e,i))return!1;e=e[i]}return!0},createPropertyPath:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.split("."),i=e;r.length>1;){var o=r,a=V(o),s=a[0],u=a.slice(1);r=u,void 0===i[s]&&(i[s]={}),i=i[s]}return i[r[0]]=n,e},deletePropertyPath:function(e,t){if(e&&t){for(var n=t.split("."),r=0;r<n.length-1;r++)if(void 0===(e=e[n[r]]))return;delete e[n.pop()]}},defer:function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},bind:function(e,t){return function(){t.apply(e,arguments)}}},X={uniqueId:function(e){var t=2+(!e||e<0?0:e-2);return"_"+Math.random().toString(36).substr(2,t)},guid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},$={addClassName:function(e,t){e.classList?e.classList.add(t):$.hasClassName(e,t)||(e.className+=t)},removeClassName:function(e,t){e.classList?e.classList.remove(t):$.hasClassName(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},hasClassName:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},setAttribute:function(e,t,n){e.setAttribute(t,n)},removeAttribute:function(e,t){e.removeAttribute(t)},setStyle:function(e,t,n){void 0!==e.style.getPropertyValue(t)&&e.style.setProperty(t,n)},appendChild:function(e,t){e&&t&&e.appendChild&&e.appendChild(t)},removeChild:function(e,t){e&&t&&e.removeChild&&e.removeChild(t)},prependTo:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},getElementById:function(e){return document.getElementById(e)},getElementsByTagName:function(e){return document.getElementsByTagName(e)},createElement:function(e){return document.createElement(e)},loadStyleSheetAsync:function(e){var t=this;return new Promise((function(n,r){var i=!1,o=t.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,o.async=!0,o.onload=o.onreadystatechange=function(){i||this.readyState&&"complete"!==this.readyState||(i=!0,n(this))},o.onerror=o.onabort=r,$.appendChild(document.head,o)}))},loadScriptAsync:function(e){var t=this;return new Promise((function(n,r){var i=!1,o=document.getElementsByTagName("script")[0],a=t.createElement("script");a.type="text/javascript",a.src=e,a.async=!0,a.onload=a.onreadystatechange=function(){i||this.readyState&&"complete"!==this.readyState||(i=!0,n(this))},a.onerror=a.onabort=r,o&&o.parentNode&&o.parentNode.insertBefore(a,o)}))},getElementBySelector:function(e){try{return document.querySelector(e)}catch(e){return}},insertBefore:function(e,t,n){try{return e.insertBefore(t,n)}catch(e){return null}}},J={protocol:/^(https?:)/i.test(document.location.protocol)?document.location.protocol:"https:",execute:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r=arguments.length>3?arguments[3]:void 0,i=new XMLHttpRequest;return new Promise((function(o,a){i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status)try{var e=JSON.parse(i.responseText);o(e)}catch(e){o(i.responseText)}else a(i.responseText)},i.open(n,e),r&&r.forEach((function(e,t){i.setRequestHeader(t,e)})),i.send(t)}))},jsonp:function(e,t,n){var r,i=(n=n||{}).timeout?n.timeout:5e3,o=document.createElement("script"),a="jsonpcallback"+Math.round(Date.now()+1000001*Math.random()),s=e,u=function(){o&&o.parentNode&&o.parentNode.removeChild(o),window[a]=function(){},r&&clearTimeout(r)};return new Promise((function(n,l){i&&(r=setTimeout((function(){u(),l(new B(B.Severity.CRITICAL,B.Category.NETWORK,B.Code.TIMEOUT,e))}),i)),window[a]=function(r){var i=t(r,e);u(),n(i)},s.match(/\?/)?s+="&responseFormat=jsonp&callback="+a:s+="?responseFormat=jsonp&callback="+a,o.type="text/javascript",o.src=s,document.getElementsByTagName("head")[0].appendChild(o)}))},convertHeadersToDictionary:function(e){var t={};try{e.trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": "),r=n.shift().toLowerCase(),i=n.join(": ");t[r]=i}))}catch(e){}return t}},Q={compare:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=q.merge([{lexicographical:!1,zeroExtend:!0},n])).lexicographical,i=n.zeroExtend,o=(e||"0").split("."),a=(t||"0").split("."),s=function(e){return(r?/^\d+[A-Za-zÎ±Ã]*$/:/^\d+[A-Za-zÎ±Ã]?$/).test(e)},u=function(e){return e.map((function(e){var t=/[A-Za-zÎ±Ã]/.exec(e);return Number(t?e.replace(t[0],"."+e.charCodeAt(t.index)):e)}))};if(!o.every(s)||!a.every(s))return NaN;if(i){for(;o.length<a.length;)o.push("0");for(;a.length<o.length;)a.push("0")}r||(o=u(o),a=u(a));for(var l=0;l<o.length;++l){if(a.length===l)return 1;if(o[l]!==a[l])return o[l]>a[l]?1:-1}return o.length!==a.length?-1:0}};function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._createEl()}var t,n;return t=e,(n=[{key:"setSrc",value:function(e){e&&(this._posterUrl=e,$.setStyle(this._el,"background-image",'url("'.concat(this._posterUrl,'")')),this.hide())}},{key:"getElement",value:function(){return this._el}},{key:"_createEl",value:function(){if(!this._el){var e=this._el=$.createElement("div");$.setAttribute(e,"id",X.uniqueId(5)),$.setAttribute(e,"tabindex","-1")}}},{key:"_removeEl",value:function(){this._el&&$.removeChild(this._el.parentNode,this._el)}},{key:"show",value:function(){$.setStyle(this._el,"display","")}},{key:"hide",value:function(){$.setStyle(this._el,"display","none")}},{key:"reset",value:function(){this._posterUrl="",$.setStyle(this._el,"background-image","")}},{key:"destroy",value:function(){this.reset(),this._removeEl()}},{key:"src",get:function(){return this._posterUrl}}])&&Z(t.prototype,n),e}(),te={AD_CAN_SKIP:"adcanskip",AD_MANIFEST_LOADED:"admanifestloaded",AD_LOADED:"adloaded",AD_STARTED:"adstarted",AD_RESUMED:"adresumed",AD_PAUSED:"adpaused",AD_CLICKED:"adclicked",AD_SKIPPED:"adskipped",AD_COMPLETED:"adcompleted",AD_ERROR:"aderror",ADS_COMPLETED:"adscompleted",ALL_ADS_COMPLETED:"alladscompleted",AD_BREAK_START:"adbreakstart",AD_BREAK_END:"adbreakend",AD_FIRST_QUARTILE:"adfirstquartile",AD_MIDPOINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",USER_CLOSED_AD:"userclosedad",AD_VOLUME_CHANGED:"advolumechanged",AD_MUTED:"admuted",AD_PROGRESS:"adprogress",AD_BUFFERING:"adbuffering",AD_WATERFALLING:"adwaterfalling",AD_WATERFALLING_FAILED:"adwaterfallingfailed",AD_AUTOPLAY_FAILED:"adautoplayfailed"},ne={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",PRESENTATION_MODE_CHANGED:"webkitpresentationmodechanged"},re={MEDIA_LOADED:"medialoaded",PLAYER_RESET:"playerreset",PLAYER_DESTROY:"playerdestroy",ENTER_FULLSCREEN:"enterfullscreen",EXIT_FULLSCREEN:"exitfullscreen",PLAY_FAILED:"playfailed",AUTOPLAY_FAILED:"autoplayfailed",FALLBACK_TO_MUTED_AUTOPLAY:"fallbacktomutedautoplay",CHANGE_SOURCE_STARTED:"changesourcestarted",CHANGE_SOURCE_ENDED:"changesourceended",MUTE_CHANGE:"mutechange",VIDEO_TRACK_CHANGED:"videotrackchanged",AUDIO_TRACK_CHANGED:"audiotrackchanged",TEXT_TRACK_CHANGED:"texttrackchanged",TEXT_CUE_CHANGED:"textcuechanged",TRACKS_CHANGED:"trackschanged",ABR_MODE_CHANGED:"abrmodechanged",PLAYER_STATE_CHANGED:"playerstatechanged",PLAYBACK_START:"playbackstart",FIRST_PLAY:"firstplay",FIRST_PLAYING:"firstplaying",PLAYBACK_ENDED:"playbackended",SOURCE_SELECTED:"sourceselected",TEXT_STYLE_CHANGED:"textstylechanged",MEDIA_RECOVERED:"mediarecovered",VR_STEREO_MODE_CHANGED:"vrstereomodechanged",FPS_DROP:"fpsdrop",BOOKMARK_ERROR:"bookmarkerror",CONCURRENCY_LIMIT:"concurrencylimit",RESIZE:"resize",TIMED_METADATA:"timedmetadata",FRAG_LOADED:"fragloaded",MANIFEST_LOADED:"manifestloaded",USER_GESTURE:"usergesture",DRM_LICENSE_LOADED:"drmlicenseloaded"},ie=q.merge([ne,re,te]);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"language",get:function(){var e;return(e=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language)&&e.match("-")&&(e=e.split("-")[0]),e}}])&&oe(t,n),e}();function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"callNext",value:function(e){e&&e()}}])&&se(t.prototype,n),e}();function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}var fe,pe,de,he=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.player=n,this.eventManager=new R,this.logger=N(Y.capitlize(this.name)),this.config={},q.mergeDeep(this.config,this.constructor.defaultConfig,r)}return ce(e,null,[{key:"createPlugin",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this(e,t,n)}},{key:"isValid",value:function(){throw new B(B.Severity.CRITICAL,B.Category.PLAYER,B.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED,"isValid()")}}]),ce(e,[{key:"getConfig",value:function(e){return e?q.copyDeep(this.config[e]):q.copyDeep(this.config)}},{key:"updateConfig",value:function(e){q.mergeDeep(this.config,e)}},{key:"loadMedia",value:function(){}},{key:"destroy",value:function(){this.eventManager.destroy()}},{key:"reset",value:function(){}},{key:"getName",value:function(){return this.name}},{key:"dispatchEvent",value:function(e,t){this.logger.debug("Fire event: "+e,t),this.player.dispatchEvent(new _(e,t))}},{key:"getMiddlewareImpl",value:function(){return null}},{key:"getUIComponents",value:function(){return[]}}]),e}();function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}de={},(pe="defaultConfig")in(fe=he)?Object.defineProperty(fe,pe,{value:de,enumerable:!0,configurable:!0,writable:!0}):fe[pe]=de;var ge=N("PluginManager"),me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ve(this,"_plugins",{}),ve(this,"_isDisabledPluginMap",new Map)}var t,n,r;return t=e,r=[{key:"register",value:function(t,n){return"function"!=typeof n||n.prototype instanceof he==0?(ge.error("Plugin <".concat(t,"> registration failed, either plugin is not an instance of BasePlugin or plugin handler is not a function")),!1):e._registry.has(t)?(ge.debug("Plugin <".concat(t,"> is already registered, do not register again")),!1):(e._registry.set(t,n),ge.debug("Plugin <".concat(t,"> has been registered successfully")),!0)}},{key:"unRegister",value:function(t){e._registry.has(t)&&(e._registry.delete(t),ge.debug("Unregistered <".concat(t,"> plugin.")))}}],(n=[{key:"load",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e._registry.has(t))throw ge.warn("Plugin <".concat(t,"> loading failed, plugin is not registered")),new B(B.Severity.RECOVERABLE,B.Category.PLAYER,B.Code.RUNTIME_ERROR_NOT_REGISTERED_PLUGIN,t);var i=e._registry.get(t);"boolean"==typeof r.disable&&this._isDisabledPluginMap.set(t,r.disable);var o=!!this._isDisabledPluginMap.get(t),a=!!i&&i.isValid();if(i&&a&&!o){try{this._plugins[t]=i.createPlugin(t,n,r)}catch(e){throw new B(B.Severity.RECOVERABLE,B.Category.PLAYER,B.Code.PLUGIN_LOAD_FAILED,e)}return this._isDisabledPluginMap.set(t,!1),ge.debug("Plugin <".concat(t,"> has been loaded")),!0}return ge.debug("Plugin <".concat(t,"> isn't loaded, isValid()=").concat(a.toString(),", disabled=").concat(o.toString())),!1}},{key:"loadMedia",value:function(){var e=this;Object.keys(this._plugins).forEach((function(t){return e._plugins[t].loadMedia()}))}},{key:"destroy",value:function(){var e=this;Object.keys(this._plugins).forEach((function(t){e._plugins[t].destroy(),delete e._plugins[t]}))}},{key:"reset",value:function(){var e=this;Object.keys(this._plugins).forEach((function(t){return e._plugins[t].reset()}))}},{key:"get",value:function(e){return this._plugins[e]}},{key:"getAll",value:function(){return this._plugins}}])&&ye(t.prototype,n),r&&ye(t,r),e}();ve(me,"_registry",new Map);var be=me.register;function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ke=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this._duration=0,this._timestamp=Date.now()/1e3}var t,n;return t=e,(n=[{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e-this._timestamp}}])&&_e(t.prototype,n),e}(),Ee={IDLE:"idle",LOADING:"loading",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering"};function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function(){function e(t){var n,r,i,o,a,s,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,"_transitions",(Te(s={},Ee.IDLE,(Te(n={},ne.LOAD_START,(function(){u._updateState(Ee.LOADING),u._dispatchEvent()})),Te(n,ne.PLAY,(function(){u._updateState(Ee.BUFFERING),u._dispatchEvent()})),Te(n,ne.SEEKED,(function(){u._updateState(Ee.PAUSED),u._dispatchEvent()})),n)),Te(s,Ee.LOADING,(Te(r={},ne.LOADED_METADATA,(function(){u._updateState(Ee.PAUSED),u._dispatchEvent()})),Te(r,ne.ERROR,(function(){u._updateState(Ee.IDLE),u._dispatchEvent()})),r)),Te(s,Ee.PAUSED,(Te(i={},ne.PLAY,(function(){u._updateState(Ee.PLAYING),u._dispatchEvent()})),Te(i,ne.PLAYING,(function(){u._updateState(Ee.PLAYING),u._dispatchEvent()})),Te(i,ne.ENDED,(function(){u._updateState(Ee.IDLE),u._dispatchEvent()})),Te(i,re.PLAYBACK_ENDED,(function(){u._updateState(Ee.IDLE),u._dispatchEvent()})),i)),Te(s,Ee.PLAYING,(Te(o={},ne.PAUSE,(function(){u._updateState(Ee.PAUSED),u._dispatchEvent()})),Te(o,ne.WAITING,(function(){u._updateState(Ee.BUFFERING),u._lastWaitingTime=u._player.currentTime,u._dispatchEvent()})),Te(o,ne.ENDED,(function(){u._updateState(Ee.IDLE),u._dispatchEvent()})),Te(o,re.PLAYBACK_ENDED,(function(){u._updateState(Ee.IDLE),u._dispatchEvent()})),Te(o,ne.ERROR,(function(){u._updateState(Ee.IDLE),u._dispatchEvent()})),o)),Te(s,Ee.BUFFERING,(Te(a={},ne.PLAYING,(function(){u._updateState(Ee.PLAYING),u._dispatchEvent()})),Te(a,ne.PAUSE,(function(){u._updateState(Ee.PAUSED),u._dispatchEvent()})),Te(a,ne.SEEKED,(function(){u._prevState&&u._prevState.type===Ee.PLAYING&&(u._updateState(Ee.PLAYING),u._dispatchEvent())})),Te(a,ne.TIME_UPDATE,(function(){u._player.currentTime!==u._lastWaitingTime&&u._prevState&&u._prevState.type===Ee.PLAYING&&(u._lastWaitingTime=null,u._updateState(Ee.PLAYING),u._dispatchEvent())})),a)),s)),this._player=t,this._logger=N("StateManager"),this._eventManager=new R,this._history=[],this._prevState=null,this._curState=new ke(Ee.IDLE),this._attachListeners()}var t,n;return t=e,(n=[{key:"_attachListeners",value:function(){this._eventManager.listen(this._player,ne.ERROR,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.ENDED,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.PLAY,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.LOAD_START,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.PLAYING,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.LOADED_METADATA,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.PAUSE,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.WAITING,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.SEEKED,this._doTransition.bind(this)),this._eventManager.listen(this._player,ne.TIME_UPDATE,this._doTransition.bind(this)),this._eventManager.listen(this._player,re.PLAYBACK_ENDED,this._doTransition.bind(this))}},{key:"_doTransition",value:function(e){(e.type!==ne.TIME_UPDATE||this._curState===Ee.BUFFERING&&e.type===ne.TIME_UPDATE)&&this._logger.debug("Do transition request",e.type);var t=this._transitions[this._curState.type];"function"==typeof t[e.type]&&t[e.type]()}},{key:"_updateState",value:function(e){this._curState.type!==e&&(this._curState.duration=Date.now()/1e3,this._history.push(this._curState),this._prevState=this._curState,this._curState=new ke(e),this._logger.debug("Switch player state: from ".concat(this._prevState.type," to ").concat(this._curState.type)))}},{key:"_dispatchEvent",value:function(){var e=new _(re.PLAYER_STATE_CHANGED,{oldState:this._prevState,newState:this._curState});this._player.dispatchEvent(e)}},{key:"destroy",value:function(){this._history=[],this._eventManager.destroy()}},{key:"reset",value:function(){this._history=[]}},{key:"currentState",get:function(){return this._curState}},{key:"previousState",get:function(){return this._prevState}},{key:"history",get:function(){return this._history}}])&&we(t.prototype,n),e}();function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pe=function(){var e,t,n;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ae(this,r),this._id=e.id,this._active=e.active,this._label=e.label,this._language=e.language,this._index=e.index,this.clone=r.clone.bind(null,this)}return e=r,n=[{key:"langComparer",value:function(e,t){try{return e=e.toLowerCase(),t=t.toLowerCase(),!!e&&(e.startsWith(t)||t.startsWith(e))}catch(e){return!1}}},{key:"clone",value:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}}],(t=[{key:"id",get:function(){return this._id}},{key:"active",get:function(){return this._active},set:function(e){this._active=e}},{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"language",get:function(){return this._language}},{key:"index",get:function(){return this._index},set:function(e){this._index=e}}])&&Oe(e.prototype,t),n&&Oe(e,n),r}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Le(e);if(t){var i=Le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ie(this,n)}}(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce(this,i),(e=r.call(this,t))._bandwidth=t.bandwidth,e._width=t.width,e._height=t.height,e._label=t.label?t.label:e._height?e._height+"p":void 0,e}return t=i,(n=[{key:"bandwidth",get:function(){return this._bandwidth}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}])&&xe(t.prototype,n),i}(Pe);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var i=Be(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fe(this,n)}}(n);function n(){return je(this,n),t.apply(this,arguments)}return n}(Pe);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ye(e);if(t){var i=Ye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return We(this,n)}}(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ke(this,i),(e=r.call(this,t))._label=e.label||e.language,e._kind=t.kind,e._external=t.external,e}return t=i,(n=[{key:"kind",get:function(){return this._kind}},{key:"external",get:function(){return this._external}}])&&He(t.prototype,n),i}(Pe);function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$e(this,"fontSize","100%"),$e(this,"fontScale",1),$e(this,"fontFamily",e.FontFamily.SANS_SERIF),$e(this,"fontColor",e.StandardColors.WHITE),$e(this,"fontOpacity",e.StandardOpacities.OPAQUE),$e(this,"backgroundColor",e.StandardColors.BLACK),$e(this,"backgroundOpacity",e.StandardOpacities.OPAQUE),$e(this,"fontEdge",e.EdgeStyles.NONE)}var t,n,r;return t=e,r=[{key:"toRGBA",value:function(e,t){return"rgba("+e.concat(t).join(",")+")"}}],(n=[{key:"getTextShadow",value:function(){for(var t=[],n=0;n<this.fontEdge.length;n++){var r=this.fontEdge[n].slice(0,3),i=this.fontEdge[n].slice(3,6);t.push(e.toRGBA(r,this.fontOpacity)+" "+i.join("px ")+"px")}return t.join(",")}},{key:"toCSS",value:function(){var t=[];return t.push("font-family: "+this.fontFamily),t.push("color: "+e.toRGBA(this.fontColor,this.fontOpacity)),t.push("background-color: "+e.toRGBA(this.backgroundColor,this.backgroundOpacity)),t.push("text-shadow: "+this.getTextShadow()),t.join("!important; ")}},{key:"clone",value:function(){var t=new e;return t.fontEdge=this.fontEdge,t.fontSize=this.fontSize,t.fontScale=this.fontScale,t.fontColor=this.fontColor,t.fontOpacity=this.fontOpacity,t.backgroundColor=this.backgroundColor,t.backgroundOpacity=this.backgroundOpacity,t.fontFamily=this.fontFamily,t}},{key:"isEqual",value:function(e){return e.fontEdge===this.fontEdge&&e.fontSize===this.fontSize&&e.fontColor===this.fontColor&&e.fontOpacity===this.fontOpacity&&e.backgroundColor===this.backgroundColor&&e.backgroundOpacity===this.backgroundOpacity}},{key:"implicitFontScale",get:function(){return.25*this.fontScale+1}}])&&Xe(t.prototype,n),r&&Xe(t,r),e}();$e(Je,"FontFamily",{ARIAL:"Arial",HELVETICA:"Helvetica",VERDANA:"Verdana",SANS_SERIF:"sans-serif"}),$e(Je,"StandardColors",{WHITE:[255,255,255],BLACK:[0,0,0],RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]}),$e(Je,"StandardOpacities",{OPAQUE:1,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0}),$e(Je,"EdgeStyles",{NONE:[],RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]}),$e(Je,"FontSizes",[{value:-2,label:"50%"},{value:-1,label:"75%"},{value:0,label:"100%"},{value:2,label:"200%"},{value:3,label:"300%"},{value:4,label:"400%"}]);var Qe=Je;function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tt={"":!0,up:!0};function nt(e){return"number"==typeof e&&e>=0&&e<=100}var rt,it=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),et(this,"_width",100),et(this,"_lines",3),et(this,"_regionAnchorX",0),et(this,"_regionAnchorY",100),et(this,"_viewportAnchorX",0),et(this,"_viewportAnchorY",100),et(this,"_scroll","")}var t,n;return t=e,(n=[{key:"width",get:function(){return this._width},set:function(e){if(!nt(e))throw new Error("Width must be between 0 and 100.");this._width=e}},{key:"scroll",get:function(){return this._scroll},set:function(e){var t=function(e){return"string"==typeof e&&!!tt[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");this._scroll=t}},{key:"viewportAnchorY",get:function(){return this._viewportAnchorY},set:function(e){if(!nt(e))throw new Error("ViewportAnchorY must be between 0 and 100.");this._viewportAnchorY=e}},{key:"viewportAnchorX",get:function(){return this._viewportAnchorX},set:function(e){if(!nt(e))throw new Error("ViewportAnchorX must be between 0 and 100.");this._viewportAnchorX=e}},{key:"regionAnchorX",get:function(){return this._regionAnchorX},set:function(e){if(!nt(e))throw new Error("RegionAnchorY must be between 0 and 100.");this._regionAnchorX=e}},{key:"lines",get:function(){return this._lines},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");this._lines=e}},{key:"regionAnchorY",get:function(){return this._regionAnchorY},set:function(e){if(!nt(e))throw new Error("RegionAnchorX must be between 0 and 100.");this._regionAnchorY=e}}])&&Ze(t.prototype,n),e}();function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t,n){return t&&ct(e.prototype,t),n&&ct(e,n),e}function pt(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}rt="undefined"!=typeof window&&window.VTTRegion?window.VTTRegion:it;var dt={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"â","&rlm;":"â","&nbsp;":"Â "},ht={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},yt={v:"title",lang:"lang"},vt={rt:"ruby"};function gt(){this.values=Ot(null)}function mt(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);2===a.length&&t(a[0],a[1])}}function bt(e,t,n){var r=e;function i(){var t=pt(e);if(null===t)throw new Pt(Pt.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Pt(Pt.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var r=new gt;mt(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),t.line=r.get("line",t.line||"auto"),t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}t.position=r.get("position",t.position||"auto"),t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}function _t(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]+>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e){return dt[e]}function i(e){for(var t;t=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(t[0],r);return e}function o(e,t){return!vt[t.localName]||vt[t.localName]===e.localName}function a(t,n){var r=ht[t];if(!r)return null;var i=e.document.createElement(r),o=yt[t];return o&&n&&(i[o]=n.trim()),i}for(var s,u=e.document.createElement("div"),l=u,c=[];null!==(s=n());)if("<"!==s[0])l.appendChild(e.document.createTextNode(i(s)));else{if("/"===s[1]){c.length&&c[c.length-1]===s.substr(2).replace(">","")&&(c.pop(),l=l.parentNode);continue}var f=pt(s.substr(1,s.length-2)),p=void 0;if(f){p=e.document.createProcessingInstruction("timestamp",f),l.appendChild(p);continue}var d=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!d)continue;if(!(p=a(d[1],d[3])))continue;if(!o(l,p))continue;d[2]&&(p.className=d[2].substr(1).replace("."," ")),c.push(d[1]),l.appendChild(p),l=p}return u}gt.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var kt=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Et(e){for(var t=0;t<kt.length;t++){var n=kt[t];if(e>=n[0]&&e<=n[1])return!0}return!1}var wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var i=ut(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return st(this,n)}}(n);function n(e,r,i){var o;lt(this,n),o=t.call(this);var a="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);"undefined"!=typeof WebVTTSet&&(WebVTTSet.fontSet,WebVTTSet.backgroundSet,WebVTTSet.edgeSet),o.cue=r,o.cueDiv=_t(e,r.text);var s={color:i.color,backgroundColor:i.backgroundColor,textShadow:i.textShadow,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};a||(s.writingMode=""===r.vertical?"horizontal-tb":"lr"===r.vertical?"vertical-lr":"vertical-rl",s.unicodeBidi="plaintext"),o.applyStyles(s,o.cueDiv),o.div=e.document.createElement("div"),s={textAlign:"middle"===r.align?"center":r.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},a||(s.direction=function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var o=0;o<n.length;o++)if(Et(n.charCodeAt(o)))return"rtl";return"ltr"}(o.cueDiv),s.writingMode=""===r.vertical?"horizontal-tb":"lr"===r.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),o.applyStyles(s),o.div.appendChild(o.cueDiv);var u=0;switch(r.positionAlign){case"start":u=r.position;break;case"center":u=r.position-r.size/2;break;case"end":u=r.position-r.size}return""===r.vertical?o.applyStyles({left:o.formatStyle(u,"%"),width:o.formatStyle(r.size,"%")}):o.applyStyles({top:o.formatStyle(u,"%"),height:o.formatStyle(r.size,"%")}),o.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})},o}return n}(function(){function e(){lt(this,e)}return ft(e,[{key:"applyStyles",value:function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])}},{key:"formatStyle",value:function(e,t){return 0===e?0:e+t}}]),e}()),Tt=function(){function e(t){var n,r,i,o;if(lt(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"overlaps",(function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top})),t.div){r=t.div.offsetHeight,i=t.div.offsetWidth,o=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),n=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||o,this.height=t.height||r,this.bottom=t.bottom||o+(t.height||r),this.width=t.width||i,this.lineHeight=n||t.lineHeight||13}return ft(e,[{key:"move",value:function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}}},{key:"overlapsAny",value:function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1}},{key:"within",value:function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right}},{key:"overlapsOppositeAxis",value:function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}}},{key:"intersectPercentage",value:function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)}},{key:"toCSSCompatValues",value:function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}}}],[{key:"getSimpleBoxPosition",value:function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}}}]),e}();function St(e,t,n,r){var i=new Tt(t),o=t.cue,a=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(o),s=[];if(o.snapToLines){var u;switch(o.vertical){case"":s=["+y","-y"],u="height";break;case"rl":s=["+x","-x"],u="width";break;case"lr":s=["-x","+x"],u="width"}var l=i.lineHeight,c=l*Math.round(a),f=n[u]+l,p=s[0];Math.abs(c)>f&&(c=c<0?-1:1,c*=Math.ceil(f/l)*l),a<0&&(c+=""===o.vertical?n.height:n.width,s=s.reverse()),i.move(p,c)}else{var d=i.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=d/2;break;case"end":a-=d}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new Tt(t)}var h=function(e,t){for(var i,o=new Tt(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);a>u&&(i=new Tt(e),a=u),e=new Tt(o)}return i||o}(i,s);t.move(h.toCSSCompatValues(n))}var At=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]},Ot=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function Pt(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pt.prototype=Ot(Error.prototype),Pt.prototype.constructor=Pt,Pt.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},At.prototype={reportOrThrowError:function(e){if(!(e instanceof Pt))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}function r(e){mt(e,(function(e,n){switch(e){case"Region":!function(e){var n=new gt;if(mt(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(2!==r.length)break;var i=new gt;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;n.set(e+"X",i.get("x")),n.set(e+"Y",i.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var r=new rt;r.width=n.get("width",100),r.lines=n.get("lines",3),r.regionAnchorX=n.get("regionanchorX",0),r.regionAnchorY=n.get("regionanchorY",100),r.viewportAnchorX=n.get("viewportanchorX",0),r.viewportAnchorY=n.get("viewportanchorY",100),r.scroll=n.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:n.get("id"),region:r})}}(n)}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var o=(i=n()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Pt(Pt.Errors.BadSignature);t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?r(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new Lt(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{bt(i,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Pt(Pt.Errors.BadSignature)}catch(e){this.reportOrThrowError(e)}return this.onflush&&this.onflush(),this}};var xt={"":!0,lr:!0,rl:!0},Dt={start:!0,center:!0,end:!0,left:!0,right:!0};function It(e){return"string"==typeof e&&!!Dt[e.toLowerCase()]&&e.toLowerCase()}var Lt,Mt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ct(this,"hasBeenReset",!1),Ct(this,"displayState",void 0),Ct(this,"_id",""),Ct(this,"_pauseOnExit",!1),Ct(this,"_region",null),Ct(this,"_vertical",""),Ct(this,"_snapToLines",!0),Ct(this,"_line","auto"),Ct(this,"_lineAlign","start"),Ct(this,"_position",50),Ct(this,"_positionAlign","center"),Ct(this,"_size",50),Ct(this,"_align","center"),this._startTime=t,this._endTime=n,this._text=r}var t,n;return t=e,(n=[{key:"resetCue",value:function(){this.hasBeenReset=!0}},{key:"getCueAsHTML",value:function(){return function(e,t){return e&&t?_t(e,t):null}(window,this.text)}},{key:"id",get:function(){return this._id},set:function(e){this._id=""+e}},{key:"pauseOnExit",get:function(){return this._pauseOnExit},set:function(e){this._pauseOnExit=e}},{key:"startTime",get:function(){return this._startTime},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");this._startTime=e,this.resetCue()}},{key:"endTime",get:function(){return this._endTime},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");this._endTime=e,this.resetCue()}},{key:"text",get:function(){return this._text},set:function(e){this._text=""+e,this.resetCue()}},{key:"region",get:function(){return this._region},set:function(e){this._region=e,this.resetCue()}},{key:"vertical",get:function(){return this._vertical},set:function(e){var t=function(e){return"string"==typeof e&&!!xt[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._vertical=t,this.resetCue())}},{key:"snapToLines",get:function(){return this._snapToLines},set:function(e){this._snapToLines=e,this.resetCue()}},{key:"line",get:function(){return this._line},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");this._line=e,this.resetCue()}},{key:"lineAlign",get:function(){return this._lineAlign},set:function(e){var t=It(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._lineAlign=t,this.resetCue())}},{key:"position",get:function(){return this._position},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");this._position=e,this.resetCue()}},{key:"positionAlign",get:function(){return this._positionAlign},set:function(e){var t=It(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._positionAlign=t,this.resetCue())}},{key:"size",get:function(){return this._size},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");this._size=e,this.resetCue()}},{key:"align",get:function(){return this._align},set:function(e){var t=It(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._align=t,this.resetCue())}}])&&Rt(t.prototype,n),e}();Lt="undefined"!=typeof window&&window.VTTCue?window.VTTCue:Mt;var Nt=Object.freeze({VIDEO:"video",AUDIO:"audio",TEXT:"text"}),jt={DASH:"dash",HLS:"hls",PROGRESSIVE:"progressive"},Ut={HTML5:"html5",FLASH:"flash",SILVERLIGHT:"silverlight",CAST:"cast"},Ft={VOD:"Vod",LIVE:"Live",AUDIO:"Audio",UNKNOWN:"Unknown"},Bt={MANUAL:"manual",AUTO:"auto"},Vt={ANONYMOUS:"anonymous",USE_CREDENTIALS:"use-credentials"};function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._actions=t,this._middlewares=new m,this._logger=N("Middleware")}var t,n;return t=e,(n=[{key:"use",value:function(e){for(var t in this._actions){var n=this._actions[t];"function"==typeof e[n]&&(this._logger.debug("Register <".concat(e.id,"> for action ").concat(n)),this._middlewares.push(n,e[n].bind(e)))}}},{key:"run",value:function(e,t){var n=this;this._logger.debug("Start middleware chain for action "+e);var r=this._middlewares.get(e);this._executeMiddleware(r,(function(){n._logger.debug("Finish middleware chain for action "+e),t()}))}},{key:"_executeMiddleware",value:function(e,t){e.reduceRight((function(e,t){return function(n){t(e)}}),t)()}}])&&Gt(t.prototype,n),e}();function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._middleware=new Kt(e.Actions)}var t,n;return t=e,(n=[{key:"use",value:function(e){this._middleware.use(e)}},{key:"load",value:function(t){this._middleware.run(e.Actions.LOAD,t)}},{key:"play",value:function(t){this._middleware.run(e.Actions.PLAY,t)}},{key:"pause",value:function(t){this._middleware.run(e.Actions.PAUSE,t)}}])&&Ht(t.prototype,n),e}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zt,"Actions",{LOAD:"load",PLAY:"play",PAUSE:"pause"});var Wt={log:{level:"ERROR"},sources:{options:{forceRedirectExternalStreams:!1},metadata:{}},plugins:{},playback:{audioLanguage:"",textLanguage:"",useNativeTextTrack:!1,enableCEA708Captions:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",volume:1,startTime:-1,playsinline:!0,preload:"none",autoplay:!1,loop:!1,allowMutedAutoPlay:!0,muted:!1,pictureInPicture:!0,options:{html5:{hls:{},dash:{},native:{}}},preferNative:{hls:!1,dash:!1},inBrowserFullscreen:!1,playAdsWithMSE:!1,streamPriority:[{engine:"html5",format:"hls"},{engine:"html5",format:"dash"},{engine:"html5",format:"progressive"},{engine:"flash",format:"hls"}]},abr:{enabled:!0,fpsDroppedFramesInterval:5e3,fpsDroppedMonitoringThreshold:.2,capLevelOnFPSDrop:!0,capLevelToPlayerSize:!1,defaultBandwidthEstimate:5e5,restrictions:{minBitrate:0,maxBitrate:1/0}},drm:{keySystem:""},network:{},advertising:{adBreaks:[]}},Yt=(n(4),{MANIFEST:0,SEGMENT:1,LICENSE:2});function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,n){return t&&$t(e.prototype,t),n&&$t(e,n),e}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?en(e):t}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tn(e);if(t){var i=tn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zt(this,n)}}(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Xt(this,n),nn(en(i=t.call(this)),"_capabilities",{fpsControl:!1}),i._videoElement=e,i._sourceObj=r,i._config=o,i._onDurationChanged=function(){i.isLive()&&i._videoElement.paused&&i._trigger(ne.TIME_UPDATE)},i._eventManager=new R,i._handleLiveTimeUpdate(),i}return Jt(n,null,[{key:"isSupported",value:function(){return!0}},{key:"isMSESupported",value:function(){var e=window.MediaSource||window.WebKitMediaSource;return!!e&&"function"==typeof e.isTypeSupported}}]),Jt(n,[{key:"destroy",value:function(){return this._sourceObj=null,this._config={},this._videoElement.removeEventListener(ne.DURATION_CHANGE,this._onDurationChanged),this._eventManager.destroy(),Promise.resolve()}},{key:"_onTrackChanged",value:function(e){e instanceof Me?this._trigger(re.VIDEO_TRACK_CHANGED,{selectedVideoTrack:e}):e instanceof Ve?this._trigger(re.AUDIO_TRACK_CHANGED,{selectedAudioTrack:e}):e instanceof qe&&this._trigger(re.TEXT_TRACK_CHANGED,{selectedTextTrack:e})}},{key:"_trigger",value:function(e,t){this.dispatchEvent(new _(e,t))}},{key:"load",value:function(){return n._throwNotImplementedError("load")}},{key:"selectVideoTrack",value:function(e){return n._throwNotImplementedError("selectVideoTrack")}},{key:"selectAudioTrack",value:function(e){n._throwNotImplementedError("selectAudioTrack")}},{key:"selectTextTrack",value:function(e){n._throwNotImplementedError("selectTextTrack")}},{key:"hideTextTrack",value:function(){n._throwNotImplementedError("hideTextTrack")}},{key:"enableAdaptiveBitrate",value:function(){n._throwNotImplementedError("enableAdaptiveBitrate")}},{key:"isAdaptiveBitrateEnabled",value:function(){return n._throwNotImplementedError("isAdaptiveBitrateEnabled")}},{key:"_getLiveEdge",value:function(){return n._throwNotImplementedError("_getLiveEdge")}},{key:"seekToLiveEdge",value:function(){n._throwNotImplementedError("seekToLiveEdge")}},{key:"isLive",value:function(){return n._throwNotImplementedError("isLive")}},{key:"setMaxBitrate",value:function(e){}},{key:"attachMediaSource",value:function(){}},{key:"detachMediaSource",value:function(){}},{key:"_handleLiveTimeUpdate",value:function(){this._videoElement.addEventListener(ne.DURATION_CHANGE,this._onDurationChanged)}},{key:"handleMediaError",value:function(e){return!1}},{key:"getStartTimeOfDvrWindow",value:function(){return n._throwNotImplementedError("getStartTimeOfDvrWindow")}},{key:"currentTime",get:function(){return this.isLive()?this._videoElement.currentTime-this.getStartTimeOfDvrWindow():this._videoElement.currentTime},set:function(e){this.isLive()&&(e+=this.getStartTimeOfDvrWindow()),this._videoElement.currentTime=e}},{key:"duration",get:function(){return this.isLive()?this._getLiveEdge()-this.getStartTimeOfDvrWindow():this._videoElement.duration}},{key:"src",get:function(){return this._loadPromise&&this._sourceObj?this._sourceObj.url:""},set:function(e){!this._loadPromise&&this._sourceObj&&(this._sourceObj.url=e)}},{key:"capabilities",get:function(){return this._capabilities}},{key:"targetBuffer",get:function(){return NaN}}],[{key:"canPlayType",value:function(e,t){return n._throwNotImplementedError("static canPlayType")}},{key:"_throwNotImplementedError",value:function(e){throw new B(B.Severity.CRITICAL,B.Category.PLAYER,B.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED,e)}}]),n}(E);function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nn(rn,"getLogger",N);var an={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready",FAIRPLAY:"com.apple.fairplay"};function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var un=N("FairPlay"),ln=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"isConfigured",value:function(e,t){return an.FAIRPLAY===t.keySystem&&!!e.find((function(e){return e.scheme===t.keySystem}))}},{key:"canPlayDrm",value:function(e){un.debug("Can play DRM scheme of: "+an.FAIRPLAY);var t=y.browser.name&&y.browser.name.includes("Safari");return!!e.find((function(e){return e.scheme===an.FAIRPLAY}))&&t}},{key:"setDrmPlayback",value:function(e,t){un.debug("Sets drm playback");var n=t.find((function(e){return e.scheme===an.FAIRPLAY}));n&&(e.licenseUrl=n.licenseUrl,e.certificate=n.certificate)}}])&&sn(t,n),e}(),cn=n(2);function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn={NEED_KEY:"webkitneedkey",KEY_MESSAGE:"webkitkeymessage",KEY_ADDED:"webkitkeyadded",KEY_ERROR:"webkitkeyerror"},yn=function(){function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dn(this,"_logger",N("FairPlayDrmHandler")),dn(this,"_retryLicenseRequest",4),dn(this,"_defaultConfig",{licenseUrl:"",certificate:"",network:{responseFilter:function(t,n){var r={};try{var i=new DataView(n.data),a=(new TextDecoder).decode(i).trim();r=JSON.parse(a)}catch(e){return void o._onError(B.Code.BAD_FAIRPLAY_RESPONSE,{error:e,responseText:n.data})}var s=e._validateResponse(r);s.valid?n.data=e._base64DecodeUint8Array(r.ckc):o._onError(B.Code.BAD_FAIRPLAY_RESPONSE,s)}}}),this._config=q.mergeDeep({},this._defaultConfig,n),this._errorCallback=r,this._drmResponseCallback=i,this._videoElement=t,this._onWebkitNeedKeyHandler=function(e){return o._onWebkitNeedKey(e)},this._eventManager=new R,this._eventManager.listen(this._videoElement,hn.NEED_KEY,this._onWebkitNeedKeyHandler)}var t,n,r;return t=e,r=[{key:"_validateResponse",value:function(e){return e.message&&e.message.indexOf("error")>0||null===e.reference||500===e.status_code?{valid:!1,details:"internal server error"}:""===e.ckc?{valid:!1,details:"ckc is missing"}:{valid:!0}}},{key:"_extractContentId",value:function(t){var n=document.createElement("a");return n.href=e._arrayToString(t),n.hostname}},{key:"_arrayToString",value:function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))}},{key:"_base64DecodeUint8Array",value:function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}},{key:"_concatInitDataIdAndCertificate",value:function(t,n,r){"string"==typeof n&&(n=e._stringToArray(n));var i=0,o=new ArrayBuffer(t.byteLength+4+n.byteLength+4+r.byteLength),a=new DataView(o);new Uint8Array(o,i,t.byteLength).set(t),i+=t.byteLength,a.setUint32(i,n.byteLength,!0),i+=4;var s=new Uint8Array(o,i,n.byteLength);return s.set(n),i+=s.byteLength,a.setUint32(i,r.byteLength,!0),i+=4,new Uint8Array(o,i,r.byteLength).set(r),new Uint8Array(o,0,o.byteLength)}},{key:"_stringToArray",value:function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}},{key:"_base64EncodeUint8Array",value:function(e){for(var t,n,r,i,o,a,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<e.length;)i=(t=e[c++])>>2,o=(3&t)<<4|(n=c<e.length?e[c++]:Number.NaN)>>4,a=(15&n)<<2|(r=c<e.length?e[c++]:Number.NaN)>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),l+=u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(s);return l}}],(n=[{key:"_onWebkitNeedKey",value:function(t){var n=this;this._logger.debug("Webkit need key triggered");var r=t.target,i=t.initData,o=e._extractContentId(i),a=e._base64DecodeUint8Array(this._config.certificate);if(i=e._concatInitDataIdAndCertificate(i,o,a),!r.webkitKeys){var s=this._selectKeySystem();this._logger.debug("Sets media keys"),r.webkitSetMediaKeys(new window.WebKitMediaKeys(s))}r.webkitKeys||this._onError(B.Code.COULD_NOT_CREATE_MEDIA_KEYS),this._logger.debug("Creates session"),this._keySession=r.webkitKeys.createSession("video/mp4",i),this._keySession||this._onError(B.Code.COULD_NOT_CREATE_KEY_SESSION),this._keySession.contentId=o,this._eventManager.listen(this._keySession,hn.KEY_MESSAGE,(function(e){return n._onWebkitKeyMessage(e)})),this._eventManager.listen(this._keySession,hn.KEY_ADDED,(function(){return n._onWebkitKeyAdded()})),this._eventManager.listen(this._keySession,hn.KEY_ERROR,(function(e){return n._onWebkitKeyError(e)}))}},{key:"destroy",value:function(){this._eventManager.destroy(),this._keySession.close(),this._keySession=null}},{key:"_onWebkitKeyMessage",value:function(t){var n=this;this._logger.debug("Webkit key message triggered");var r=t.message,i=new XMLHttpRequest;i.responseType="arraybuffer",this._eventManager.listenOnce(i,"load",(function(e){return n._licenseRequestLoaded(e)}));var o,a={url:this._config.licenseUrl,body:e._base64EncodeUint8Array(r),headers:{}},s=this._config.network.requestFilter;if(s){this._logger.debug("Apply request filter");try{o=s(Yt.LICENSE,a)}catch(e){o=Promise.reject(e)}}(o=o||Promise.resolve(a)).then((function(e){i.open("POST",e.url,!0);var t=!0;e.headers&&Object.entries(e.headers).forEach((function(e){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],o=n[1];"string"==typeof o&&i.setRequestHeader(r,o),t&&(t="content-type"!==r.toLowerCase())})),t&&i.setRequestHeader("Content-type","application/json"),n._logger.debug("Ready for license request"),i.onerror=function(){n._onError(B.Code.LICENSE_REQUEST_FAILED,{status:i.status,responseText:i.responseText})},n._licenseRequestTime=Date.now(),i.send(e.body)})).catch((function(e){n._errorCallback(new B(B.Severity.CRITICAL,B.Category.NETWORK,B.Code.REQUEST_FILTER_ERROR,e)),n.destroy()}))}},{key:"_onWebkitKeyAdded",value:function(){this._logger.debug("Decryption key was added to session")}},{key:"_onWebkitKeyError",value:function(e){this._logger.error("A decryption key error was encountered",e),this._retryLicenseRequest<=0&&this._onError(B.Code.LICENSE_REQUEST_FAILED,e.target.error),this._retryLicenseRequest--}},{key:"_licenseRequestLoaded",value:function(e){var t=this;this._logger.debug("License request loaded");var n=e.target;if(n.status>299)this._onError(B.Code.LICENSE_REQUEST_FAILED,{status:n.status,error:n.responseText});else{if(this._drmResponseCallback){var r=Date.now()-this._licenseRequestTime;this._drmResponseCallback({licenseTime:r/1e3,scheme:an.FAIRPLAY})}var i,o=n.responseURL,a=n.response,s={url:o,originalUrl:this._config.licenseUrl,data:a,headers:J.convertHeadersToDictionary(n.getAllResponseHeaders())};this._logger.debug("Apply response filter");try{i=this._config.network.responseFilter(Yt.LICENSE,s)}catch(e){i=Promise.reject(e)}(i=i||Promise.resolve(s)).then((function(e){t._keySession.update(e.data)})).catch((function(e){t._errorCallback(new B(B.Severity.CRITICAL,B.Category.NETWORK,B.Code.RESPONSE_FILTER_ERROR,e)),t.destroy()}))}}},{key:"_onError",value:function(e,t){this._errorCallback(new B(B.Severity.CRITICAL,B.Category.DRM,e,t))}},{key:"_selectKeySystem",value:function(){var e=null;return window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?e="com.apple.fps.1_0":this._logger.warn("Key System not supported"),e}}])&&pn(t.prototype,n),r&&pn(t,r),e}();function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e,t,n){return(bn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sn(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t,n){return t&&_n(e.prototype,t),n&&_n(e,n),e}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?Tn(e):t}function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}dn(yn,"WebkitEvents",hn),yn.WebkitEvents=hn;var On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sn(e);if(t){var i=Sn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wn(this,n)}}(n);function n(e,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),n._logger.debug("Creating adapter"),An(Tn(o=t.call(this,e,r,i)),"_lastTimeUpdate",0),An(Tn(o),"_waitingEventTriggered",!1),An(Tn(o),"_mediaErrorRecoveryAttempts",0),An(Tn(o),"_lastTimeDetach",NaN),An(Tn(o),"_startTimeAttach",NaN),o._config=q.mergeDeep({},cn,o._config),o._progressiveSources=i.progressiveSources,o._liveEdge=0,o}return kn(n,null,[{key:"canPlayType",value:function(e){var t=!1;return"string"==typeof e&&(t=!!n.TEST_VIDEO.canPlayType(e.toLowerCase())),n._logger.debug("canPlayType result for mimeType:"+e+" is "+t.toString()),t}},{key:"canPlayDrm",value:function(e,t){n._drmProtocol=null;var r,i=gn(n._drmProtocols);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.isConfigured(e,t)){n._drmProtocol=o;break}}}catch(e){i.e(e)}finally{i.f()}if(!n._drmProtocol){var a,s=gn(n._drmProtocols);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.canPlayDrm(e)&&(n._drmProtocol=u)}}catch(e){s.e(e)}finally{s.f()}}return!!n._drmProtocol}},{key:"createAdapter",value:function(e,t,n){var r={displayTextTrack:!1,progressiveSources:[]};return q.hasPropertyPath(n,"playback.useNativeTextTrack")&&(r.displayTextTrack=q.getPropertyPath(n,"playback.useNativeTextTrack")),q.hasPropertyPath(n,"sources.progressive")&&(r.progressiveSources=q.getPropertyPath(n,"sources.progressive")),n.playback&&(r.enableCEA708Captions=n.playback.enableCEA708Captions,r.captionsTextTrack1Label=n.playback.captionsTextTrack1Label,r.captionsTextTrack1LanguageCode=n.playback.captionsTextTrack1LanguageCode,r.captionsTextTrack2Label=n.playback.captionsTextTrack2Label,r.captionsTextTrack2LanguageCode=n.playback.captionsTextTrack2LanguageCode,q.hasPropertyPath(n.playback,"options.html5.native")&&q.mergeDeep(r,n.playback.options.html5.native)),r.network=n.network,new this(e,t,r)}}]),kn(n,[{key:"_dispatchErrorCallback",value:function(e){this._trigger(ne.ERROR,e)}},{key:"_dispatchDRMLicenseLoaded",value:function(e){this._trigger(re.DRM_LICENSE_LOADED,e)}},{key:"_maybeSetDrmPlayback",value:function(){var e=this;if(n._drmProtocol&&this._sourceObj&&this._sourceObj.drmData){var t={licenseUrl:"",certificate:"",network:this._config.network};n._drmProtocol.setDrmPlayback(t,this._sourceObj.drmData),this._drmHandler=new yn(this._videoElement,t,(function(t){return e._dispatchErrorCallback(t)}),(function(t){return e._dispatchDRMLicenseLoaded(t)}))}}},{key:"_setProgressiveSource",value:function(){var e=function(e,t,n){var r=null;if(n&&e){var i,o=[],a=1/0,s=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(s.s();!(i=s.n()).done;){var u=i.value,l=Math.abs(u.width-t);l<a?(a=l,o=[u]):l===a&&o.push(u)}}catch(e){s.e(e)}finally{s.f()}for(var c=t/n,f=o,p=1/0,d=0,h=o;d<h.length;d++){var y=h[d];if(y.height){var v=Math.abs(y.width/y.height-c);v<p?(p=v,f=[y]):v===p&&f.push(y)}}for(var g=0,m=0,b=f;m<b.length;m++){var _=b[m];(_.bandwidth>g||!_.bandwidth)&&(g=_.bandwidth||g,r=_)}}return r}(this._progressiveSources,this._videoElement.offsetWidth,this._videoElement.offsetHeight);e&&(this._sourceObj=e)}},{key:"_isProgressivePlayback",value:function(){return!!this._sourceObj&&"video/mp4"===this._sourceObj.mimetype}},{key:"load",value:function(e){var t=this;return this._maybeSetDrmPlayback(),this._loadPromise||(this._loadPromise=new Promise((function(n,r){t._lastTimeUpdate=e||0;var i=t._startTimeAttach||e||0;t._loadPromiseReject=r,t._eventManager.listenOnce(t._videoElement,ne.LOADED_DATA,(function(){return t._onLoadedData(n,i)})),t._eventManager.listen(t._videoElement,ne.TIME_UPDATE,(function(){return t._onTimeUpdate()})),t._eventManager.listen(t._videoElement,ne.PLAY,(function(){return t._resetHeartbeatTimeout()})),t._eventManager.listen(t._videoElement,ne.PAUSE,(function(){return t._clearHeartbeatTimeout()})),t._eventManager.listen(t._videoElement,ne.ENDED,(function(){return t._clearHeartbeatTimeout()})),t._eventManager.listen(t._videoElement,ne.ABORT,(function(){return t._clearHeartbeatTimeout()})),t._eventManager.listen(t._videoElement,ne.SEEKED,(function(){return t._syncCurrentTime()})),t._eventManager.listen(window,"focus",(function(){return setTimeout((function(){t._videoElement.currentTime=t._videoElement.currentTime>.1?t._videoElement.currentTime-.1:0,t._syncCurrentTime()}),1e3)})),t._isProgressivePlayback()&&t._setProgressiveSource(),t._sourceObj&&t._sourceObj.url?t._setSrc().then((function(){t._trigger(re.ABR_MODE_CHANGED,{mode:t._isProgressivePlayback()?"manual":"auto"}),t._videoElement.load()})):t._videoElement.load()}))),this._loadPromise}},{key:"_handleDecodeError",value:function(e){var t=this;n._logger.debug("handleDecodeError",e);var r=this._videoElement.currentTime,i=this._getActivePKAudioTrack(),o=this._getActivePKTextTrack();this._videoElement.load(),this._eventManager.listenOnce(this._videoElement,ne.PLAYING,(function(){t._mediaErrorRecoveryAttempts=0})),this._eventManager.listenOnce(this._videoElement,ne.CAN_PLAY,(function(){t._videoElement.currentTime=r,t._videoElement.play(),t._videoElement.pause(),i&&t.selectAudioTrack(i),o?t.selectTextTrack(o):t._disableTextTracks()}))}},{key:"handleMediaError",value:function(e){return this._loadPromiseReject?(this._loadPromiseReject(new B(B.Severity.CRITICAL,B.Category.MEDIA,B.Code.NATIVE_ADAPTER_LOAD_FAILED,e)),!0):!!(e&&e.code===window.MediaError.MEDIA_ERR_DECODE&&(this._mediaErrorRecoveryAttempts++,this._mediaErrorRecoveryAttempts<=3))&&(this._handleDecodeError(e),!0)}},{key:"attachMediaSource",value:function(){this._startTimeAttach=this._lastTimeDetach,this._lastTimeDetach=NaN}},{key:"detachMediaSource",value:function(){this._lastTimeDetach=this.currentTime,this._videoElement&&this._videoElement.src&&($.setAttribute(this._videoElement,"src",""),$.removeAttribute(this._videoElement,"src")),this._loadPromise=null}},{key:"_setSrc",value:function(){var e,t=this,r={url:this._sourceObj?this._sourceObj.url:"",body:null,headers:{}};if("function"==typeof q.getPropertyPath(this._config,"network.requestFilter"))try{n._logger.debug("Apply request filter"),e=this._config.network.requestFilter(Yt.MANIFEST,r)}catch(t){e=Promise.reject(t)}return(e=e||Promise.resolve(r)).then((function(e){t._videoElement.src=e.url})).catch((function(e){t._trigger(ne.ERROR,new B(B.Severity.CRITICAL,B.Category.NETWORK,B.Code.REQUEST_FILTER_ERROR,e))})),e}},{key:"_onLoadedData",value:function(e,t){var r=this,i=function(){r._playerTracks=r._getParsedTracks(),r._addNativeAudioTrackChangeListener(),r._addNativeTextTrackChangeListener(),r._addNativeTextTrackAddedListener(),n._logger.debug("The source has been loaded successfully"),r._loadPromiseReject=null,e({tracks:r._playerTracks}),r.isLive()&&r._handleLiveDurationChange()};t&&t>-1&&(this._videoElement.currentTime=t),this._videoElement.textTracks.length>0?i():this._eventManager.listenOnce(this._videoElement,ne.CAN_PLAY,i.bind(this)),this._startTimeAttach=NaN}},{key:"_onTimeUpdate",value:function(){this._videoElement.paused||(this._videoElement.currentTime>this._lastTimeUpdate?(this._waitingEventTriggered&&(this._waitingEventTriggered=!1,this._trigger(ne.PLAYING)),this._resetHeartbeatTimeout()):this._videoElement.currentTime<this._lastTimeUpdate?this._syncCurrentTime():(this._waitingEventTriggered=!0,this._trigger(ne.WAITING)))}},{key:"_syncCurrentTime",value:function(){this._lastTimeUpdate=this._videoElement.currentTime}},{key:"_resetHeartbeatTimeout",value:function(){var e=this;this._lastTimeUpdate=this._videoElement.currentTime,this._clearHeartbeatTimeout(),this._heartbeatTimeoutId=setTimeout((function(){e._clearHeartbeatTimeout(),e._trigger(ne.ERROR,new B(B.Severity.CRITICAL,B.Category.NETWORK,B.Code.TIMEOUT,"The player exceeded max buffer time of ".concat(e._config.heartbeatTimeout," ms. No progress has been done during this time.")))}),this._config.heartbeatTimeout)}},{key:"_clearHeartbeatTimeout",value:function(){this._heartbeatTimeoutId&&(clearTimeout(this._heartbeatTimeoutId),this._heartbeatTimeoutId=null)}},{key:"destroy",value:function(){var e=this;return n._logger.debug("destroy"),bn(Sn(n.prototype),"destroy",this).call(this).then((function(){e._drmHandler&&e._drmHandler.destroy(),e._waitingEventTriggered=!1,e._progressiveSources=[],e._loadPromise=null,e._loadPromiseReject=null,e._liveEdge=0,e._lastTimeUpdate=0,e._lastTimeDetach=NaN,e._startTimeAttach=NaN,e._clearHeartbeatTimeout(),e._liveDurationChangeInterval&&(clearInterval(e._liveDurationChangeInterval),e._liveDurationChangeInterval=null)}))}},{key:"_getParsedTracks",value:function(){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),n=this._getParsedTextTracks();return e.concat(t).concat(n)}},{key:"_getParsedVideoTracks",value:function(){return this._isProgressivePlayback()?this._getParsedProgressiveVideoTracks():this._getParsedAdaptiveVideoTracks()}},{key:"_getParsedProgressiveVideoTracks",value:function(){var e=this._progressiveSources,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,bandwidth:e[n].bandwidth,width:e[n].width,height:e[n].height,active:!!this._sourceObj&&e[n].id===this._sourceObj.id,index:n};t.push(new Me(r))}return t}},{key:"_getParsedAdaptiveVideoTracks",value:function(){var e=this._videoElement.videoTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].selected,label:e[n].label,language:e[n].language,index:n};t.push(new Me(r))}return t}},{key:"_getParsedAudioTracks",value:function(){var e=this._videoElement.audioTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].enabled,label:e[n].label,language:e[n].language,index:n};t.push(new Ve(r))}return t}},{key:"_getParsedTextTracks",value:function(){var e=[this._config.captionsTextTrack1Label,this._config.captionsTextTrack2Label],t=[this._config.captionsTextTrack1LanguageCode,this._config.captionsTextTrack2LanguageCode],n=this._videoElement.textTracks,r=[];if(n)for(var i=0;i<n.length;i++){var o={kind:n[i].kind,active:"showing"===n[i].mode,label:n[i].label,language:n[i].language,index:i};"subtitles"===o.kind?r.push(new qe(o)):"captions"===o.kind&&this._config.enableCEA708Captions&&(o.label=o.label||e.shift(),o.language=o.language||t.shift(),r.push(new qe(o)))}return r}},{key:"selectVideoTrack",value:function(e){this._isProgressivePlayback()?this._selectProgressiveVideoTrack(e):this.selectAdaptiveVideoTrack(e)}},{key:"_selectProgressiveVideoTrack",value:function(e){var t=this,n=this._progressiveSources;if(e instanceof Me&&n&&n[e.index]){var r=this._videoElement.currentTime,i=this._videoElement.paused;this._sourceObj=n[e.index],this._eventManager.listenOnce(this._videoElement,ne.LOADED_DATA,(function(){"Android Browser"===y.browser.name?(t._eventManager.listenOnce(t._videoElement,ne.DURATION_CHANGE,(function(){t._videoElement.currentTime=r})),t._eventManager.listenOnce(t._videoElement,ne.SEEKED,(function(){t._onTrackChanged(e),i&&t._videoElement.pause()})),t._videoElement.play()):(t._eventManager.listenOnce(t._videoElement,ne.SEEKED,(function(){t._onTrackChanged(e)})),t._videoElement.currentTime=r,i||t._videoElement.play())})),this._setSrc()}}},{key:"selectAdaptiveVideoTrack",value:function(e){var t=this._videoElement.videoTracks;e instanceof Me&&t&&t[e.index]&&(this._disableVideoTracks(),t[e.index].selected=!0,this._onTrackChanged(e))}},{key:"selectAudioTrack",value:function(e){var t=this._videoElement.audioTracks;e instanceof Ve&&t&&t[e.index]&&(this._removeNativeAudioTrackChangeListener(),this._disableAudioTracks(),t[e.index].enabled=!0,this._onTrackChanged(e),this._addNativeAudioTrackChangeListener())}},{key:"_removeNativeAudioTrackChangeListener",value:function(){this._videoElement.audioTracks&&this._eventManager.unlisten(this._videoElement.audioTracks,"change")}},{key:"_addNativeAudioTrackChangeListener",value:function(){var e=this;this._videoElement.audioTracks&&this._eventManager.listen(this._videoElement.audioTracks,"change",(function(){return e._onNativeAudioTrackChange()}))}},{key:"_getPKAudioTracks",value:function(){return this._playerTracks.filter((function(e){return e instanceof Ve}))}},{key:"_getActivePKAudioTrack",value:function(){return this._getPKAudioTracks().find((function(e){return!0===e.active}))}},{key:"_onNativeAudioTrackChange",value:function(){var e=this;n._logger.debug("Video element audio track change");var t=function(){for(var t=0;t<e._videoElement.audioTracks.length;t++)if(e._videoElement.audioTracks[t].enabled)return t;return-1}(),r=this._getActivePKAudioTrack(),i=r?r.index:-1;if(t!==i){var o=this._getPKAudioTracks().find((function(e){return e.index===t}));o&&(n._logger.debug("Native selection of track, update the player audio track ("+i+" -> "+t+")"),this._onTrackChanged(o))}}},{key:"selectTextTrack",value:function(e){var t=this._videoElement.textTracks;if(e instanceof qe&&("subtitles"===e.kind||"captions"===e.kind)&&t){this._removeNativeTextTrackChangeListener();var r=Array.from(t).find((function(t,n){return e.index===n&&t&&("subtitles"===t.kind||"captions"===t.kind)}));r&&(this._disableTextTracks(),r.mode=this._getDisplayTextTrackModeString(),n._logger.debug("Text track changed",r),this._onTrackChanged(e),this._addNativeTextTrackChangeListener())}}},{key:"_removeNativeTextTrackChangeListener",value:function(){this._videoElement.textTracks&&this._eventManager.unlisten(this._videoElement.textTracks,"change")}},{key:"_addNativeTextTrackChangeListener",value:function(){var e=this;this._videoElement.textTracks&&this._eventManager.listen(this._videoElement.textTracks,"change",(function(){return e._onNativeTextTrackChange()}))}},{key:"_getPKTextTracks",value:function(){return this._playerTracks.filter((function(e){return e instanceof qe}))}},{key:"_getActivePKTextTrack",value:function(){return this._getPKTextTracks().find((function(e){return!0===e.active}))}},{key:"_onNativeTextTrackChange",value:function(){var e=this,t=this._getPKTextTracks(),r=t.find((function(e){return"off"===e.language}));n._logger.debug("Video element text track change");var i=function(){for(var t=0;t<e._videoElement.textTracks.length;t++){var n=e._videoElement.textTracks[t];if(e._getDisplayTextTrackModeString()===n.mode)return t}return-1}(),o=this._getActivePKTextTrack(),a=o?o.index:-1;if(i!==a)if(-1==i)r&&(n._logger.debug("Native selection of track, update the player text track ("+a+" -> off)"),this._onTrackChanged(r));else{var s=t.find((function(e){return e.index===i}));s&&(n._logger.debug("Native selection of track, update the player text track ("+a+" -> "+i+")"),this._onTrackChanged(s))}}},{key:"_getDisplayTextTrackModeString",value:function(){return this._config.displayTextTrack?"showing":"hidden"}},{key:"_addNativeTextTrackAddedListener",value:function(){var e=this;!this._config.displayTextTrack&&this._videoElement.textTracks&&this._eventManager.listen(this._videoElement.textTracks,"addtrack",(function(){return e._onNativeTextTrackAdded()}))}},{key:"_onNativeTextTrackAdded",value:function(){this._playerTracks=this._getParsedTracks(),this._trigger(re.TRACKS_CHANGED,{tracks:this._playerTracks})}},{key:"hideTextTrack",value:function(){this._disableTextTracks()}},{key:"enableAdaptiveBitrate",value:function(){n._logger.warn("Enabling adaptive bitrate is not supported for native playback")}},{key:"isAdaptiveBitrateEnabled",value:function(){return!this._isProgressivePlayback()}},{key:"_disableVideoTracks",value:function(){var e=this._videoElement.videoTracks;if(e)for(var t=0;t<e.length;t++)e[t].selected=!1}},{key:"_disableAudioTracks",value:function(){var e=this._videoElement.audioTracks;if(e)for(var t=0;t<e.length;t++)e[t].enabled=!1}},{key:"_disableTextTracks",value:function(){var e=this._videoElement.textTracks;if(e)for(var t=0;t<e.length;t++)("subtitles"===e[t].kind||"captions"===e[t].kind)&&(e[t].mode="disabled")}},{key:"_getLiveEdge",value:function(){return this._videoElement.seekable.length?this._videoElement.seekable.end(this._videoElement.seekable.length-1):this._videoElement.buffered.length?this._videoElement.buffered.end(this._videoElement.buffered.length-1):this._videoElement.duration}},{key:"seekToLiveEdge",value:function(){try{this._videoElement.currentTime=this._getLiveEdge()}catch(e){return}}},{key:"isLive",value:function(){return this._videoElement.duration===1/0}},{key:"_handleLiveDurationChange",value:function(){var e=this;this._liveDurationChangeInterval=setInterval((function(){var t=e._getLiveEdge();e._liveEdge!==t&&(e._liveEdge=t,e._videoElement.dispatchEvent(new window.Event(ne.DURATION_CHANGE)))}),2e3)}},{key:"getStartTimeOfDvrWindow",value:function(){return this.isLive()&&this._videoElement.seekable.length?this._videoElement.seekable.start(0):0}}]),n}(rn);function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}An(On,"id","NativeAdapter"),An(On,"_logger",rn.getLogger(On.id)),An(On,"TEST_VIDEO",$.createElement("video")),An(On,"_drmProtocols",[ln]),An(On,"_drmProtocol",null);var Cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"register",value:function(t){t&&(e._mediaSourceAdapters.includes(t)?e._logger.debug("Adapter <".concat(t.id,"> is already registered, do not register again")):(e._logger.debug("Adapter <".concat(t.id,"> has been registered successfully")),e._mediaSourceAdapters.push(t)))}},{key:"unRegister",value:function(t){var n=e._mediaSourceAdapters.indexOf(t);n>-1&&(e._logger.debug("Unregistered <".concat(t.id,"> adapter")),e._mediaSourceAdapters.splice(n,1))}},{key:"canPlaySource",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;e._orderMediaSourceAdapters(n);var i=e._mediaSourceAdapters;if(t&&t.mimetype)for(var o=0;o<i.length;o++)if(i[o].canPlayType(t.mimetype)&&(!t.drmData||i[o].canPlayDrm(t.drmData,r)))return e._selectedAdapter=i[o],e._logger.debug("Selected adapter is <".concat(e._selectedAdapter.id,">")),!0;return!1}},{key:"_orderMediaSourceAdapters",value:function(t){e._mediaSourceAdapters=e._mediaSourceAdapters.filter((function(e){return"NativeAdapter"!==e.id})),t?e._mediaSourceAdapters.unshift(On):e._mediaSourceAdapters.push(On)}},{key:"getMediaSourceAdapter",value:function(t,n,r){return t&&n&&r?(e._selectedAdapter||e.canPlaySource(n,!0,r.drm),e._selectedAdapter?e._selectedAdapter.createAdapter(t,n,r):null):null}},{key:"destroy",value:function(){e._selectedAdapter=null}}])&&Pn(t,n),e}();Rn(Cn,"_logger",N("MediaSourceProvider")),Rn(Cn,"_mediaSourceAdapters",[On]),Rn(Cn,"_selectedAdapter",null);var xn,Dn,In=Cn.register,Ln=n(3);function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jn=(Dn=xn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"runCapability",value:function(){e._capabilities.autoplay||"boolean"==typeof e._capabilities.autoplay&&"boolean"==typeof e._capabilities.mutedAutoPlay?e._playPromiseResult=Promise.resolve(e._capabilities):(e._vid||(e._vid=$.createElement("video"),e._vid.src=Ln.a,e._vid.setAttribute("playsinline","")),e._playPromiseResult=new Promise((function(t){e._setMuted(!1),e._getPlayPromise().then((function(){return t({autoplay:!0,mutedAutoPlay:!0})})).catch((function(){e._setMuted(!0),e._getPlayPromise().then((function(){return t({autoplay:!1,mutedAutoPlay:!0})})).catch((function(){return t({autoplay:!1,mutedAutoPlay:!1})}))}))})))}},{key:"getCapability",value:function(){return e._playPromiseResult.then((function(t){var n;return t.autoplay?n=Promise.resolve(t):(e.runCapability(),n=e._playPromiseResult),n.then((function(t){return q.mergeDeep(t,e._capabilities)}))}))}},{key:"setCapabilities",value:function(t){e._logger.debug("Set player capabilities",t);var n=t.autoplay,r=t.mutedAutoPlay;"boolean"==typeof n&&(e._capabilities.autoplay=n),"boolean"==typeof r&&(e._capabilities.mutedAutoPlay=r)}},{key:"_getPlayPromise",value:function(){return e._vid.play()||e._forcePromiseReturnValue()}},{key:"_setMuted",value:function(t){t?(e._vid.muted=!0,e._vid.setAttribute("muted","")):(e._vid.muted=!1,e._vid.removeAttribute("muted"))}},{key:"_forcePromiseReturnValue",value:function(){return new Promise((function(t,n){e._vid.addEventListener(ne.ERROR,(function(){n()}));var r=setTimeout((function(){e._logger.debug("Timeout ".concat(500," ms has been reached")),n()}),500);!0===e._vid.paused?(clearTimeout(r),n()):(clearTimeout(r),t())}))}}])&&Mn(t,n),e}(),Nn(xn,"_logger",N("Html5AutoPlayCapability")),Nn(xn,"_capabilities",{}),Dn);function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?Kn(e):t}function Kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hn(e);if(t){var i=Hn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gn(this,n)}}(i);function i(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),zn(Kn(o=r.call(this)),"_droppedFramesInterval",null),zn(Kn(o),"_lastDroppedFrames",0),zn(Kn(o),"_lastDecodedFrames",0),zn(Kn(o),"_lastTime",0),zn(Kn(o),"_currentBitrate",0),o._eventManager=new R,o._mediaSourceAdapter=e,o._config=t,o._videoElement=n,o._mediaSourceAdapter.capabilities.fpsControl?(o._eventManager.listen(o._mediaSourceAdapter,re.FPS_DROP,(function(e){return o._triggerFPSDrop(e.payload.data)})),Gn(o)):(-1===o._getDroppedAndDecodedFrames()[0]?i._logger.debug("Dropped frame watcher is not supported"):o._config.capLevelOnFPSDrop&&o._init(),o)}return t=i,(n=[{key:"_init",value:function(){var e=this;this._eventManager.listen(this._mediaSourceAdapter,re.VIDEO_TRACK_CHANGED,(function(t){return e._currentBitrate=t.payload.selectedVideoTrack.bandwidth})),this._droppedFramesInterval=setInterval((function(){return e._checkFPS()}),this._config.fpsDroppedFramesInterval)}},{key:"_triggerFPSDrop",value:function(e){this.dispatchEvent(new _(re.FPS_DROP,e))}},{key:"_getDroppedAndDecodedFrames",value:function(){if("function"==typeof this._videoElement.getVideoPlaybackQuality){var e=this._videoElement.getVideoPlaybackQuality();return[e.droppedVideoFrames,e.totalVideoFrames]}return"number"==typeof this._videoElement.webkitDroppedFrameCount&&"number"==typeof this._videoElement.webkitDecodedFrameCount?[this._videoElement.webkitDroppedFrameCount,this._videoElement.webkitDecodedFrameCount]:[-1,-1]}},{key:"_checkFPS",value:function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this._getDroppedAndDecodedFrames(),2),t=e[0],n=e[1];try{var r=performance.now();if(n){if(this._lastTime){var o=r-this._lastTime,a=t-this._lastDroppedFrames,s=n-this._lastDecodedFrames,u=1e3*a/o;u>0&&(i._logger.debug("checkFPS : droppedFPS/decodedFPS:"+u/(1e3*s/o)),a>this._config.fpsDroppedMonitoringThreshold*s&&(this._mediaSourceAdapter.setMaxBitrate(this._currentBitrate-1),this._triggerFPSDrop({currentDropped:a,currentDecoded:s,totalDroppedFrames:u})))}this._lastTime=r,this._lastDroppedFrames=t,this._lastDecodedFrames=n}}catch(e){i._logger.error("Error occur while trying to check dropFrames: ",e)}}},{key:"destroy",value:function(){this._droppedFramesInterval&&clearInterval(this._droppedFramesInterval),this._droppedFramesInterval=null,this._eventManager.destroy()}}])&&Bn(t.prototype,n),i}(E);function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $n(e,t,n){return t&&Xn(e.prototype,t),n&&Xn(e,n),e}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e,t){return!t||"object"!==Yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}zn(Wn,"_logger",N("droppedFramesWatcher"));var tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zn(e);if(t){var i=Zn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qn(this,n)}}(n);function n(e,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this))._eventManager=new R,o._canLoadMediaSourceAdapterPromise=Promise.resolve(),o._createVideoElement(i),o._init(e,r),o}return $n(n,null,[{key:"isSupported",value:function(){try{var e=$.createElement("video");return e.volume=.5,!!e.canPlayType}catch(e){return!1}}},{key:"createEngine",value:function(e,t,n){return new this(e,t,n)}},{key:"canPlaySource",value:function(e,t,n){return Cn.canPlaySource(e,t,n)}},{key:"runCapabilities",value:function(){n._capabilities.forEach((function(e){return e.runCapability()}))}},{key:"getCapabilities",value:function(){var e=[];return n._capabilities.forEach((function(t){return e.push(t.getCapability())})),Promise.all(e).then((function(e){var t={};return e.forEach((function(e){return Object.assign(t,e)})),er({},n.id,t)}))}},{key:"setCapabilities",value:function(e){n._capabilities.forEach((function(t){return t.setCapabilities(e)}))}},{key:"prepareVideoElement",value:function(e){if(!n.videoElementStore[e]){n._logger.debug("Create the video element for playing ".concat(e));var t=$.createElement("video");n.videoElementStore[e]=t}n._logger.debug("Prepare the video element for playing ".concat(e)),n.videoElementStore[e].load()}}]),$n(n,[{key:"restore",value:function(e,t){this.reset(),this._init(e,t)}},{key:"reset",value:function(){this._eventManager.removeAll(),this._droppedFramesWatcher&&(this._droppedFramesWatcher.destroy(),this._droppedFramesWatcher=null),this._mediaSourceAdapter&&(this._canLoadMediaSourceAdapterPromise=this._mediaSourceAdapter.destroy(),this._mediaSourceAdapter=null),this._el&&this._el.src&&($.setAttribute(this._el,"src",""),$.removeAttribute(this._el,"src"))}},{key:"destroy",value:function(){this.detach(),this._el&&(this.pause(),$.removeAttribute(this._el,"src"),$.removeChild(this._el.parentNode,this._el)),this._eventManager.destroy(),Cn.destroy(),this._droppedFramesWatcher&&(this._droppedFramesWatcher.destroy(),this._droppedFramesWatcher=null),this._mediaSourceAdapter&&(this._mediaSourceAdapter.destroy(),this._mediaSourceAdapter=null)}},{key:"attachMediaSource",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.attachMediaSource()}},{key:"detachMediaSource",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.detachMediaSource()}},{key:"attach",value:function(){var e=this;Object.keys(ne).forEach((function(t){e._eventManager.listen(e._el,ne[t],(function(){ne[t]===ne.ERROR?e._handleVideoError():e.dispatchEvent(new _(ne[t]))}))})),this._handleMetadataTrackEvents();var t=this._mediaSourceAdapter;t&&(this._eventManager.listen(t,re.VIDEO_TRACK_CHANGED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.AUDIO_TRACK_CHANGED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.TEXT_TRACK_CHANGED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.ABR_MODE_CHANGED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.TEXT_CUE_CHANGED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.TRACKS_CHANGED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.FRAG_LOADED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.DRM_LICENSE_LOADED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.MANIFEST_LOADED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,ne.ERROR,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,ne.TIME_UPDATE,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,ne.PLAYING,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,ne.WAITING,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,re.MEDIA_RECOVERED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(t,"hlsFragParsingMetadata",(function(t){return e.dispatchEvent(t)})),this._droppedFramesWatcher&&this._eventManager.listen(this._droppedFramesWatcher,re.FPS_DROP,(function(t){return e.dispatchEvent(t)})))}},{key:"detach",value:function(){var e=this;Object.keys(ne).forEach((function(t){e._eventManager.unlisten(e._el,ne[t])})),this._mediaSourceAdapter&&(this._eventManager.unlisten(this._mediaSourceAdapter,re.VIDEO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,re.AUDIO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,re.TEXT_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,re.TEXT_CUE_CHANGED))}},{key:"getVideoElement",value:function(){return this._el}},{key:"selectVideoTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectVideoTrack(e)}},{key:"selectAudioTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectAudioTrack(e)}},{key:"selectTextTrack",value:function(e){this._removeCueChangeListeners(),this._mediaSourceAdapter&&this._mediaSourceAdapter.selectTextTrack(e),this.resetAllCues(),this._addCueChangeListener()}},{key:"hideTextTrack",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.hideTextTrack(),this._removeCueChangeListeners()}},{key:"enableAdaptiveBitrate",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._mediaSourceAdapter&&this._mediaSourceAdapter.isAdaptiveBitrateEnabled()}},{key:"seekToLiveEdge",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.seekToLiveEdge()}},{key:"getStartTimeOfDvrWindow",value:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.getStartTimeOfDvrWindow():0}},{key:"isLive",value:function(){return!!this._mediaSourceAdapter&&this._mediaSourceAdapter.isLive()}},{key:"play",value:function(){var e=this,t=this._el.play();return t&&t.catch((function(t){return e.dispatchEvent(new _(re.PLAY_FAILED,{error:t}))})),t}},{key:"pause",value:function(){return this._el.pause()}},{key:"load",value:function(e){var t=this;return this._el.load(),this._canLoadMediaSourceAdapterPromise.then((function(){return t._mediaSourceAdapter?t._mediaSourceAdapter.load(e).catch((function(e){return Promise.reject(e)})):Promise.resolve({})})).catch((function(e){return Promise.reject(e)}))}},{key:"enterPictureInPicture",value:function(){var e=this;try{document.pictureInPictureEnabled&&"function"==typeof this._el.requestPictureInPicture?this._el.requestPictureInPicture().catch((function(t){e.dispatchEvent(new _(ne.ERROR,new B(B.Severity.RECOVERABLE,B.Category.PLAYER,B.Code.ENTER_PICTURE_IN_PICTURE_FAILED,t)))})):"function"==typeof this._el.webkitSetPresentationMode&&(this._el.webkitSetPresentationMode("picture-in-picture"),setTimeout((function(){return e.dispatchEvent(new _(ne.ENTER_PICTURE_IN_PICTURE))}),0))}catch(e){this.dispatchEvent(new _(ne.ERROR,new B(B.Severity.RECOVERABLE,B.Category.PLAYER,B.Code.ENTER_PICTURE_IN_PICTURE_FAILED,e)))}}},{key:"exitPictureInPicture",value:function(){var e=this;try{document.pictureInPictureEnabled&&"function"==typeof document.exitPictureInPicture?document.exitPictureInPicture().catch((function(t){e.dispatchEvent(new _(ne.ERROR,new B(B.Severity.RECOVERABLE,B.Category.PLAYER,B.Code.EXIT_PICTURE_IN_PICTURE_FAILED,t)))})):"function"==typeof this._el.webkitSetPresentationMode&&(this._el.webkitSetPresentationMode("inline"),setTimeout((function(){return e.dispatchEvent(new _(ne.LEAVE_PICTURE_IN_PICTURE))}),0))}catch(e){this.dispatchEvent(new _(ne.ERROR,new B(B.Severity.RECOVERABLE,B.Category.PLAYER,B.Code.EXIT_PICTURE_IN_PICTURE_FAILED,e)))}}},{key:"isPictureInPictureSupported",value:function(){return"function"==typeof this._el.webkitSupportsPresentationMode?this._el.webkitSupportsPresentationMode("picture-in-picture"):!!document.pictureInPictureEnabled}},{key:"_init",value:function(e,t){this._config=t,this._loadMediaSourceAdapter(e),this.attach()}},{key:"_createVideoElement",value:function(e){this._el=n.videoElementStore[e]||$.createElement("video"),this._el.id=X.uniqueId(5),this._el.controls=!1}},{key:"_loadMediaSourceAdapter",value:function(e){this._mediaSourceAdapter=Cn.getMediaSourceAdapter(this.getVideoElement(),e,this._config),this._mediaSourceAdapter&&(this._droppedFramesWatcher=new Wn(this._mediaSourceAdapter,this._config.abr,this._el))}},{key:"_addCueChangeListener",value:function(){var e=this,t=Array.from(this._el.textTracks).find((function(e){return e&&"disabled"!==e.mode}));t&&this._eventManager.listen(t,"cuechange",(function(t){return e._onCueChange(t)}))}},{key:"_removeCueChangeListeners",value:function(){for(var e=0;e<this._el.textTracks.length;e++)this._eventManager.unlisten(this._el.textTracks[e],"cuechange")}},{key:"_onCueChange",value:function(e){var t,n=[],r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.currentTarget.activeCues);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(window.VTTCue&&i instanceof window.VTTCue)n.push(i);else if(window.TextTrackCue&&i instanceof window.TextTrackCue)try{n.push(new Lt(i.startTime,i.endTime,i.text))}catch(e){new B(B.Severity.RECOVERABLE,B.Category.TEXT,B.Code.UNABLE_TO_CREATE_TEXT_CUE,e)}}}catch(e){r.e(e)}finally{r.f()}this.dispatchEvent(new _(re.TEXT_CUE_CHANGED,{cues:n}))}},{key:"resetAllCues",value:function(){var e=Array.from(this._el.textTracks).find((function(e){return e&&"disabled"!==e.mode}));if(e)for(var t=0;t<e.cues.length;t++)e.cues[t].hasBeenReset=!0}},{key:"_handleVideoError",value:function(){if(this._el.error){var e=this._el.error.code;if(e!==window.MediaError.MEDIA_ERR_ABORTED){var t=this._getMsExtendedError(),n=this._el.error.message;if(this._mediaSourceAdapter&&!this._mediaSourceAdapter.handleMediaError(this._el.error)){var r=new B(B.Severity.CRITICAL,B.Category.MEDIA,B.Code.VIDEO_ERROR,{code:e,extended:t,message:n});this.dispatchEvent(new _(ne.ERROR,r))}}}}},{key:"_getMsExtendedError",value:function(){var e=this._el.error.msExtendedCode;return e&&(e<0&&(e+=Math.pow(2,32)),e=e.toString(16)),e}},{key:"_handleMetadataTrackEvents",value:function(){var e=this,t=function(t){t.mode="hidden",e._eventManager.listen(t,"cuechange",(function(){e.dispatchEvent(new _(re.TIMED_METADATA,{cues:Array.from(t.activeCues)}))}))},n=Array.from(this._el.textTracks).find((function(e){return"metadata"===e.kind}));n?t(n):this._eventManager.listen(this._el.textTracks,"addtrack",(function(e){"metadata"===e.track.kind&&t(e.track)})),this._eventManager.listen(this._el.textTracks,"change",(function(){var t=Array.from(e._el.textTracks).find((function(e){return"metadata"===e.kind}));t&&"hidden"!==t.mode&&(t.mode="hidden")}))}},{key:"id",get:function(){return n.id}},{key:"src",set:function(e){this._mediaSourceAdapter&&(this._mediaSourceAdapter.src=e)},get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.src:""}},{key:"currentTime",get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.currentTime:0},set:function(e){this._mediaSourceAdapter&&(this._mediaSourceAdapter.currentTime=e)}},{key:"duration",get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.duration:NaN}},{key:"volume",set:function(e){this._el.volume=e},get:function(){return this._el.volume}},{key:"paused",get:function(){return this._el.paused}},{key:"seeking",get:function(){return this._el.seeking}},{key:"seekable",get:function(){return this._el.seekable}},{key:"played",get:function(){return this._el.played}},{key:"buffered",get:function(){return this._el.buffered}},{key:"muted",set:function(e){this._el.muted=e},get:function(){return this._el.muted}},{key:"defaultMuted",get:function(){return this._el.defaultMuted}},{key:"poster",set:function(e){this._el.poster=e},get:function(){return this._el.poster}},{key:"preload",set:function(e){this._el.preload=e},get:function(){return this._el.preload}},{key:"autoplay",set:function(e){this._el.autoplay=e},get:function(){return this._el.autoplay}},{key:"loop",set:function(e){this._el.loop=e},get:function(){return this._el.loop}},{key:"controls",set:function(e){this._el.controls=e},get:function(){return this._el.controls}},{key:"playbackRate",set:function(e){this._el.playbackRate=e},get:function(){return this._el.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this._el.defaultPlaybackRate=e},get:function(){return this._el.defaultPlaybackRate}},{key:"ended",get:function(){return this._el.ended}},{key:"error",get:function(){return this._el.error}},{key:"networkState",get:function(){return this._el.networkState}},{key:"readyState",get:function(){return this._el.readyState}},{key:"videoHeight",get:function(){return this._el.videoHeight}},{key:"videoWidth",get:function(){return this._el.videoWidth}},{key:"playsinline",set:function(e){e?this._el.setAttribute("playsinline",""):this._el.removeAttribute("playsinline")},get:function(){return""===this._el.getAttribute("playsinline")}},{key:"crossOrigin",set:function(e){"string"==typeof e?this._el.setAttribute("crossorigin",e):this._el.removeAttribute("crossorigin")},get:function(){return this._el.getAttribute("crossorigin")}},{key:"playbackRates",get:function(){return n.PLAYBACK_RATES}},{key:"isInPictureInPicture",get:function(){return!!document.pictureInPictureElement&&null!=document.pictureInPictureElement&&this._el===document.pictureInPictureElement||!!this._el.webkitPresentationMode&&"picture-in-picture"===this._el.webkitPresentationMode}},{key:"targetBuffer",get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.targetBuffer:NaN}},{key:"availableBuffer",get:function(){var e=0;if(this.buffered)for(var t=0;t<this.buffered.length;t++)this.buffered.start(t)<=this._el.currentTime&&this._el.currentTime<=this.buffered.end(t)&&(e=this.buffered.end(t)-this._el.currentTime);return e}}]),n}(E);function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}er(tr,"_logger",N("Html5")),er(tr,"_capabilities",[jn]),er(tr,"id","html5"),er(tr,"videoElementStore",{}),er(tr,"PLAYBACK_RATES",[.5,1,2,4]);var ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"register",value:function(t,n){t&&!e._engineProviders[t]?(e._logger.debug("Engine <".concat(t,"> has been registered successfully")),e._engineProviders[t]=n):e._logger.debug("Engine <".concat(t,"> is already registered, do not register again"))}},{key:"unRegister",value:function(t){e._engineProviders[t]&&(e._logger.debug("Unregistered <".concat(t,"> Engine")),delete e._engineProviders[t])}},{key:"getEngines",value:function(){return Object.keys(e._engineProviders).map((function(t){return e._engineProviders[t]}))}},{key:"destroy",value:function(){e._engineProviders={}}}])&&nr(t,n),e}();rr(ir,"_logger",N("EngineProvider")),rr(ir,"_engineProviders",{}),tr.isSupported()&&ir.register(tr.id,tr);var or=ir.register,ar=ir.unRegister;function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cr(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?fr(e):t}function fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hr="srt",yr="vtt",vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pr(e);if(t){var i=pr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cr(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),dr(fr(t=r.call(this)),"_externalCueIndex",0),dr(fr(t),"_textTrackModel",{}),dr(fr(t),"_activeTextCues",[]),dr(fr(t),"_isTextTrackActive",!1),dr(fr(t),"_lastTimeUpdate",0),t._player=e,t._eventManager=new R,t}return t=i,(n=[{key:"hideTextTrack",value:function(){this._isTextTrackActive&&(this._eventManager.unlisten(this._player,ne.TIME_UPDATE),this.dispatchEvent(new _(re.TEXT_CUE_CHANGED,{cues:[]})),this._resetCurrentTrack())}},{key:"getExternalTracks",value:function(e){var t=this,n=this._player.config.sources.captions;if(!n)return[];var r=e.filter((function(e){return e instanceof qe})),i=r.length||0,o=[];return n.forEach((function(e){if(e.language){var n=t._createTextTrack(e,i++);t._maybeAddTrack(n,e,r,o)}else{var a=new B(B.Severity.RECOVERABLE,B.Category.TEXT,B.Code.UNKNOWN_LANGUAGE,{caption:e});t.dispatchEvent(new _(ne.ERROR,a))}})),o}},{key:"_maybeAddTrack",value:function(e,t,n,r){var o=n.find((function(e){return Pe.langComparer(t.language,e.language)}));o?i._logger.warn("duplicated language, taking the inband option. Language: ",o.language):(this._player.config.playback.useNativeTextTrack&&this._addNativeTextTrack(e),r.push(e),this._updateTextTracksModel(t))}},{key:"_createTextTrack",value:function(e,t){return new qe({active:!!e.default,index:t,kind:"subtitles",label:e.label,language:e.language,external:!0})}},{key:"_updateTextTracksModel",value:function(e){this._textTrackModel[e.language]={cuesStatus:1,cues:[],url:e.url,type:e.type}}},{key:"selectTextTrack",value:function(e){var t=this;this._textTrackModel[e.language]&&(3!==this._textTrackModel[e.language].cuesStatus||this._player.config.playback.useNativeTextTrack?1===this._textTrackModel[e.language].cuesStatus&&(e.active=!0,this._player.config.playback.useNativeTextTrack||this.dispatchEvent(new _(re.TEXT_TRACK_CHANGED,{selectedTextTrack:e})),this._downloadAndParseCues(e).then((function(){t._textTrackModel[e.language].cuesStatus=3,t._player.config.playback.useNativeTextTrack?t._addCuesToNativeTextTrack(e,t._textTrackModel[e.language].cues):(t.hideTextTrack(),t._setTextTrack(e))})).catch((function(e){return t.dispatchEvent(new _(ne.ERROR,e))}))):(e.active=!0,this.dispatchEvent(new _(re.TEXT_TRACK_CHANGED,{selectedTextTrack:e})),this.hideTextTrack(),this._setTextTrack(e)))}},{key:"resetAllCues",value:function(){for(var e in this._textTrackModel)this._textTrackModel[e].cues.forEach((function(e){e.hasBeenReset=!0}))}},{key:"reset",value:function(){this._resetCurrentTrack(),this._textTrackModel={},this._eventManager.removeAll()}},{key:"destroy",value:function(){this._textTrackModel={},this._eventManager.destroy(),this._activeTextCues=[]}},{key:"_resetCurrentTrack",value:function(){this._activeTextCues=[],this._isTextTrackActive=!1,this._maybeSetExternalCueIndex()}},{key:"_getCuesString",value:function(e){var t=this;return new Promise((function(n,r){var i=t._textTrackModel[e.language],o=i.type||t._getFileType(i.url);[hr,yr].includes(o)||(t._textTrackModel[e.language].cuesStatus=1,r(new B(B.Severity.RECOVERABLE,B.Category.TEXT,B.Code.UNKNOWN_FILE_TYPE,{captionType:o}))),J.execute(i.url,{},"GET").then((function(e){n(o===hr?t._convertSrtToVtt(e):e)})).catch((function(){t._textTrackModel[e.language].cuesStatus=1,r(new B(B.Severity.RECOVERABLE,B.Category.TEXT,B.Code.HTTP_ERROR,{url:i.url}))}))}))}},{key:"_parseCues",value:function(e){return new Promise((function(t,n){var r=new At(window,{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}),o=[];r.oncue=function(e){return o.push(e)},r.onflush=function(){i._logger.debug("finished parsing external cues"),t(o)},r.parse(e),r.flush(),r.onparsingerror((function(e){return n(e)}))}))}},{key:"_convertSrtToVtt",value:function(e){var t=e.replace(/(\d\d:\d\d:\d\d),(\d\d\d) --> (\d\d:\d\d:\d\d),(\d\d\d)/g,(function(e,t,n,r,i){return"".concat(t,".").concat(n," --\x3e ").concat(r,".").concat(i)}));return"WEBVTT\n\n".concat(t)}},{key:"_downloadAndParseCues",value:function(e){var t=this;return this._textTrackModel[e.language].cuesStatus=2,new Promise((function(n,r){t._getCuesString(e).then((function(e){return t._parseCues(e)})).then((function(r){t._textTrackModel[e.language].cues=r,n()})).catch((function(e){return r(e)}))}))}},{key:"_getFileType",value:function(e){return e.split(/[#?]/)[0].split(".").pop().trim()}},{key:"_handleCaptionOnTimeUpdate",value:function(e){var t=this._player.currentTime;if(t){var n=!1;this._hadSeeked()&&(this._activeTextCues=[],n=this._maybeSetExternalCueIndex());var r=this._maybeRemoveActiveCues(),i=this._maybeAddToActiveCues(e);(n||i||r)&&this.dispatchEvent(new _(re.TEXT_CUE_CHANGED,{cues:this._activeTextCues})),this._lastTimeUpdate=t}}},{key:"_hadSeeked",value:function(){return!!this._player.currentTime&&Math.abs(this._player.currentTime-this._lastTimeUpdate)>1}},{key:"_maybeRemoveActiveCues",value:function(){var e=this._player.currentTime;if(!e)return!1;for(var t=!1,n=0;n<this._activeTextCues.length;n++){var r=this._activeTextCues[n];(e<r.startTime||r.endTime<e)&&(this._activeTextCues.splice(n,1),t=!0)}return t}},{key:"_maybeAddToActiveCues",value:function(e){var t=this._player.currentTime;if(!t)return!1;for(var n=!1,r=this._textTrackModel[e.language].cues;this._externalCueIndex<r.length&&t>r[this._externalCueIndex].startTime;)this._activeTextCues.push(r[this._externalCueIndex]),this._externalCueIndex++,n=!0;return n}},{key:"_maybeSetExternalCueIndex",value:function(){var e=this._player._getTextTracks().find((function(e){return e.active&&e.external}));if(e&&e.external){for(var t=this._textTrackModel[e.language]?this._textTrackModel[e.language].cues:[],n=0;n<t.length&&!(t[n].startTime<this._player.currentTime&&this._player.currentTime<t[n].endTime)&&!(t[n].endTime>this._player.currentTime&&t[n].startTime>this._player.currentTime);n++);return this._externalCueIndex=n,!0}return!1}},{key:"_addCuesToNativeTextTrack",value:function(e,t){var n=this._player.getVideoElement();if(n){var r=Array.from(n.textTracks).find((function(t){return!!t&&t.language===e.language}));r&&t.forEach((function(e){return r.addCue(e)}))}}},{key:"_addNativeTextTrack",value:function(e){var t=this._player.getVideoElement();if(t){var n=Array.from(t.textTracks).findIndex((function(t){return!!t&&t.language===e.language}));if(n>-1){var r=t.textTracks[n];r.cues&&Object.values(r.cues).forEach((function(e){return r.removeCue(e)}))}else t.addTextTrack("subtitles",e.label||e.language,e.language)}}},{key:"_setTextTrack",value:function(e){var t=this;this._player.config.playback.useNativeTextTrack||(this._isTextTrackActive=!0,i._logger.debug("External text track changed",e),this._activeTextCues=[],this.dispatchEvent(new _(re.TEXT_CUE_CHANGED,{cues:this._activeTextCues})),this._eventManager.listen(this._player,ne.TIME_UPDATE,(function(){return t._handleCaptionOnTimeUpdate(e)})))}}])&&ur(t.prototype,n),i}(E);dr(vr,"_logger",N("ExternalCaptionsHandler"));var gr={PRE:"preroll",MID:"midroll",POST:"postroll",OVERLAY:"overlay"},mr={VAST:"vast",VMAP:"vmap"};function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type=t.type,this._position=t.position,this._numAds=t.numAds}var t,n;return t=e,(n=[{key:"toJSON",value:function(){return{type:this.type,position:this.position,numAds:this.numAds}}},{key:"type",get:function(){return this._type}},{key:"position",get:function(){return this._position}},{key:"numAds",get:function(){return this._numAds}}])&&br(t.prototype,n),e}();function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Er=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._system=n.system,this._url=n.url,this._contentType=n.contentType,this._title=n.title,this._position=n.position,this._duration=n.duration,this._clickThroughUrl=n.clickThroughUrl,this._posterUrl=n.posterUrl,this._skipOffset=n.skipOffset,this._linear=n.linear,this._width=n.width||0,this._height=n.height||0,this._bitrate=n.bitrate||0,this._bumper=n.bumper}var t,n;return t=e,(n=[{key:"toJSON",value:function(){return{id:this.id,system:this.system,url:this.url,contentType:this.contentType,title:this.title,position:this.position,duration:this.duration,clickThroughUrl:this.clickThroughUrl,posterUrl:this.posterUrl,skipOffset:this.skipOffset,linear:this.linear,skippable:this.skippable,width:this.width,height:this.height,bitrate:this.bitrate,bumper:this.bumper}}},{key:"id",get:function(){return this._id}},{key:"system",get:function(){return this._system}},{key:"contentType",get:function(){return this._contentType}},{key:"url",get:function(){return this._url}},{key:"title",get:function(){return this._title}},{key:"position",get:function(){return this._position}},{key:"duration",get:function(){return this._duration}},{key:"clickThroughUrl",get:function(){return this._clickThroughUrl}},{key:"posterUrl",get:function(){return this._posterUrl}},{key:"skipOffset",get:function(){return this._skipOffset}},{key:"linear",get:function(){return this._linear}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"bitrate",get:function(){return this._bitrate}},{key:"bumper",get:function(){return this._bumper}},{key:"skippable",get:function(){return!!(this.skipOffset&&this.skipOffset>0)}}])&&kr(t.prototype,n),e}();function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Or(e);if(t){var i=Or(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ar(this,n)}}(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this))._player=e,n._eventManager=new R,n._adsPluginControllers=t,n._init(),n}return t=i,(n=[{key:"isAdBreak",value:function(){return!!this._adBreak}},{key:"getAdBreaksLayout",value:function(){return this._adBreaksLayout}},{key:"getAdBreak",value:function(){return this._adBreak}},{key:"getAd",value:function(){return this._ad}},{key:"skipAd",value:function(){var e=this._adsPluginControllers.find((function(e){return e.active}));e&&e.skipAd()}},{key:"playAdNow",value:function(e){this.isAdBreak()?i._logger.warn("Tried to call playAdNow during an ad break"):this._playAdBreak({position:this._player.currentTime||0,ads:e,played:!1})}},{key:"_init",value:function(){this._initMembers(),this._addBindings(),this._handleConfiguredAdBreaks()}},{key:"_initMembers",value:function(){this._allAdsCompleted=!0,this._adBreaksLayout=[],this._adBreak=null,this._ad=null,this._adPlayed=!1,this._snapback=0,this._adIsLoading=!1}},{key:"_addBindings",value:function(){var e=this;this._eventManager.listen(this._player,te.AD_MANIFEST_LOADED,(function(t){return e._onAdManifestLoaded(t)})),this._eventManager.listen(this._player,te.AD_BREAK_START,(function(t){return e._onAdBreakStart(t)})),this._eventManager.listen(this._player,te.AD_LOADED,(function(t){return e._onAdLoaded(t)})),this._eventManager.listen(this._player,te.AD_STARTED,(function(t){return e._onAdStarted(t)})),this._eventManager.listen(this._player,te.AD_BREAK_END,(function(){return e._onAdBreakEnd()})),this._eventManager.listen(this._player,te.ADS_COMPLETED,(function(){return e._onAdsCompleted()})),this._eventManager.listen(this._player,te.AD_ERROR,(function(t){return e._onAdError(t)})),this._eventManager.listen(this._player,re.PLAYER_RESET,(function(){return e._reset()})),this._eventManager.listen(this._player,re.PLAYER_DESTROY,(function(){return e._destroy()})),this._eventManager.listenOnce(this._player,ne.ENDED,(function(){return e._onEnded()})),this._eventManager.listenOnce(this._player,re.PLAYBACK_ENDED,(function(){return e._onPlaybackEnded()}))}},{key:"_handleConfiguredAdBreaks",value:function(){var e=this,t=this._player.config.advertising.playAdsAfterTime||this._player.config.playback.startTime;this._configAdBreaks=this._player.config.advertising.adBreaks.filter((function(e){return("number"==typeof e.every||"number"==typeof e.position||"number"==typeof e.percentage)&&e.ads.length})).map((function(n){e._validateOneTimeConfig(n);var r=n.position;return 0===n.percentage&&(r=0),100===n.percentage&&(r=-1),n.every&&(r=n.every),{position:r,percentage:n.percentage,every:n.every,ads:n.ads.slice(),played:-1<r&&r<=t}})),this._configAdBreaks.length&&(this._dispatchAdManifestLoaded(),this._handleConfiguredPreroll(),this._eventManager.listenOnce(this._player,ne.DURATION_CHANGE,(function(){e._handleEveryAndPercentage(),e._configAdBreaks.sort((function(e,t){return e.position-t.position})),e._configAdBreaks.some((function(e){return e.position>0}))&&e._handleConfiguredMidrolls()})))}},{key:"_validateOneTimeConfig",value:function(e){"number"==typeof e.position&&("number"==typeof e.percentage&&(i._logger.warn("Validate ad break - ignore percentage ".concat(e.percentage," as position ").concat(e.position," configured")),delete e.percentage),"number"==typeof e.every&&(i._logger.warn("Validate ad break - ignore every ".concat(e.every," as position ").concat(e.position," configured")),delete e.every)),"number"==typeof e.percentage&&"number"==typeof e.every&&(i._logger.warn("Validate ad break - ignore every ".concat(e.every," as percentage ").concat(e.percentage," configured")),delete e.every)}},{key:"_dispatchAdManifestLoaded",value:function(){var e=Array.from(new Set(this._configAdBreaks.map((function(e){return e.every&&e.every+"s"||"number"==typeof e.percentage&&e.percentage+"%"||e.position}))));i._logger.debug(te.AD_MANIFEST_LOADED,e),this._player.dispatchEvent(new _(te.AD_MANIFEST_LOADED,{adBreaksPosition:e}))}},{key:"_handleConfiguredPreroll",value:function(){var e=this._configAdBreaks.filter((function(e){return 0===e.position&&!e.played})),t=this._mergeAdBreaks(e);t&&this._playAdBreak(t)}},{key:"_handleEveryAndPercentage",value:function(){var e=this;this._configAdBreaks.forEach((function(t){if(e._player.duration&&t.every)for(var n=2*t.every;n<=e._player.duration;)e._configAdBreaks.push({position:n,ads:t.ads,played:!1}),n+=t.every;else e._player.duration&&t.percentage&&!t.position&&(t.position=Math.floor(e._player.duration*t.percentage/100))}))}},{key:"_handleConfiguredMidrolls",value:function(){var e=this;this._eventManager.listen(this._player,ne.TIME_UPDATE,(function(){if(!e._player.paused){var t=e._configAdBreaks.filter((function(t){return!t.played&&e._player.currentTime&&t.position<=e._player.currentTime&&t.position>e._snapback}));if(t.length){var n=t[t.length-1].position,r=t.filter((function(e){return e.position===n}));e._snapback=n,i._logger.debug("Set snapback value ".concat(e._snapback));var o=e._mergeAdBreaks(r);o&&e._playAdBreak(o)}}})),this._eventManager.listen(this._player,ne.SEEKED,(function(){var t=e._configAdBreaks.findIndex((function(t){return t.played&&"number"==typeof e._player.currentTime&&e._player.currentTime<t.position}));t>0&&!e._configAdBreaks[t-1].played&&(e._snapback=0,i._logger.debug("Reset snapback value"))}))}},{key:"_playAdBreak",value:function(e){var t=this,n=this._adsPluginControllers.find((function(e){return!t._isBumper(e)}));n?(e.played=!0,this._adIsLoading=!0,i._logger.debug("Playing ad break positioned in ".concat(e.position)),n.playAdNow(e.ads)):i._logger.warn("No ads plugin registered")}},{key:"_onAdManifestLoaded",value:function(e){this._adBreaksLayout=Array.from(new Set(this._adBreaksLayout.concat(e.payload.adBreaksPosition))).sort(),this._allAdsCompleted=!1}},{key:"_onAdBreakStart",value:function(e){this._adBreak=e.payload.adBreak}},{key:"_onAdLoaded",value:function(e){this._adIsLoading=!1,this._ad=e.payload.ad}},{key:"_onAdStarted",value:function(e){this._ad=e.payload.ad,this._adPlayed=!0}},{key:"_onAdBreakEnd",value:function(){this._adBreak=null,this._ad=null}},{key:"_onAdsCompleted",value:function(){this._adsPluginControllers.every((function(e){return e.done}))&&this._configAdBreaks.every((function(e){return e.played}))&&(this._allAdsCompleted=!0,i._logger.debug(te.ALL_ADS_COMPLETED),this.dispatchEvent(new _(te.ALL_ADS_COMPLETED)))}},{key:"_onAdError",value:function(e){this._adIsLoading=!1,e.payload.severity===B.Severity.CRITICAL&&this._adsPluginControllers.every((function(e){return e.done}))&&this._configAdBreaks.every((function(e){return e.played}))&&(this._allAdsCompleted=!0,this._adPlayed&&(i._logger.debug(te.ALL_ADS_COMPLETED),this.dispatchEvent(new _(te.ALL_ADS_COMPLETED))))}},{key:"_isBumper",value:function(e){return"bumper"===e.name}},{key:"_onEnded",value:function(){var e=this;if(!this._adIsLoading)if(this._adBreaksLayout.includes(-1)||this._adBreaksLayout.includes("100%")){var t=this._adsPluginControllers.find((function(t){return e._isBumper(t)})),n=this._adsPluginControllers.find((function(t){return!e._isBumper(t)}));(t?t.onPlaybackEnded():Promise.resolve()).finally((function(){n&&n.onPlaybackEnded().finally((function(){e._handleConfiguredPostroll()}))}))}else this._allAdsCompleted=!0}},{key:"_onPlaybackEnded",value:function(){this._configAdBreaks.forEach((function(e){return e.played=!0}))}},{key:"_handleConfiguredPostroll",value:function(){var e=this._configAdBreaks.filter((function(e){return!e.played&&-1===e.position}));if(e.length){var t=this._mergeAdBreaks(e);t&&this._playAdBreak(t)}this._configAdBreaks.forEach((function(e){return e.played=!0}))}},{key:"_reset",value:function(){this._eventManager.removeAll(),this._init()}},{key:"_destroy",value:function(){this._adsPluginControllers=[],this._eventManager.destroy()}},{key:"_mergeAdBreaks",value:function(e){if(e.length)return e.forEach((function(e){return e.played=!0})),{position:e[0].position,ads:e.reduce((function(e,t){return e.concat(t.ads)}),[]),played:!1}}},{key:"allAdsCompleted",get:function(){return this._allAdsCompleted}}])&&Tr(t.prototype,n),i}(E);function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pr,"_logger",N("AdsController"));var Cr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pluginManager=t}var t,n;return t=e,(n=[{key:"getAdsControllers",value:function(){return Object.values(this._pluginManager.getAll()).filter((function(e){return"function"==typeof e.getAdsController})).map((function(e){return e.getAdsController()}))}}])&&Rr(t.prototype,n),e}();function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t,n){return t&&Ir(e.prototype,t),n&&Ir(e,n),e}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nr(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jr(e);if(t){var i=jr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nr(this,n)}}(n);function n(){return Dr(this,n),t.call(this)}return Lr(n,[{key:"destroy",value:function(){this._observer&&this._observer.disconnect(),this._observer=null,this._el=null}},{key:"init",value:function(e){this._observer||(this._el=e,window.ResizeObserver?this._createNativeObserver():this._createIframeObserver(),this._el instanceof HTMLElement&&this._observer&&this._observer.observe(this._el))}},{key:"_createNativeObserver",value:function(){var e=this;this._observer=new window.ResizeObserver((function(t){t.forEach((function(){e._triggerResize()}))}))}},{key:"_createIframeObserver",value:function(){this._observer=new Fr(this._triggerResize.bind(this))}},{key:"_triggerResize",value:function(){this.dispatchEvent(new _(re.RESIZE))}}]),n}(E),Fr=function(){function e(t){Dr(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_observersStore",{}),this._onChangeCallback=t}return Lr(e,[{key:"observe",value:function(e){var t=this,n=this._createIframe(),r=e.getAttribute("id");this._observersStore[r]=n,e.appendChild(n),n.contentWindow.onresize=function(){return t._onChangeCallback()}}},{key:"disconnect",value:function(){for(var e in this._observersStore){var t=document.getElementById(e),n=this._observersStore[e];n.onresize=null,t&&(t.removeChild(n),delete this._observersStore[t.getAttribute("id")])}}},{key:"_createIframe",value:function(){var e=document.createElement("iframe");return e.className="playkit-size-iframe",e}}]),e}();function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._player=t,this._isInBrowserFullscreen=!1,this._eventManager=new R,this.registerFullScreenEvents()}var t,n;return t=e,(n=[{key:"_isNativeFullscreen",value:function(){var e="function"==typeof this._player.getVideoElement?this._player.getVideoElement():null;return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||"iOS"===this._player.env.os.name&&e&&e.webkitDisplayingFullscreen)}},{key:"isFullscreen",value:function(){return this._isNativeFullscreen()||this._isInBrowserFullscreen}},{key:"enterFullscreen",value:function(e){if(!this.isFullscreen()){var t=e&&$.getElementById(e),n=this._player.config.playback;if(t||(t=this._player.getView()),"iOS"===this._player.env.os.name)if(n.inBrowserFullscreen&&n.playsinline)this._enterInBrowserFullscreen(t);else{var r=this._player.getVideoElement();r&&"function"==typeof r.webkitEnterFullScreen&&r.webkitEnterFullScreen()}else this._requestFullscreen(t)}}},{key:"exitFullscreen",value:function(){if(this.isFullscreen())if("iOS"===this._player.env.os.name)if(this._isInBrowserFullscreen)this._exitInBrowserFullscreen();else{var e=this._player.getVideoElement();e&&"function"==typeof e.webkitExitFullscreen&&e.webkitExitFullscreen()}else this._requestExitFullscreen()}},{key:"_requestFullscreen",value:function(e){this._player.isInPictureInPicture()&&this._player.exitPictureInPicture(),"function"==typeof e.requestFullscreen?e.requestFullscreen():"function"==typeof e.mozRequestFullScreen?e.mozRequestFullScreen():"function"==typeof e.webkitRequestFullScreen?e.webkitRequestFullScreen():"function"==typeof e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"_requestExitFullscreen",value:function(){"function"==typeof document.exitFullscreen?document.exitFullscreen():"function"==typeof document.webkitExitFullscreen?document.webkitExitFullscreen():"function"==typeof document.mozCancelFullScreen?document.mozCancelFullScreen():"function"==typeof document.msExitFullscreen&&document.msExitFullscreen()}},{key:"_enterInBrowserFullscreen",value:function(e){$.addClassName(e,"playkit-in-browser-fullscreen-mode"),this._isInBrowserFullscreen=!0,this._fullscreenEnterHandler(),this._player.dispatchEvent(new _(this._player.Event.RESIZE))}},{key:"_exitInBrowserFullscreen",value:function(){var e=$.getElementBySelector(".playkit-in-browser-fullscreen-mode");e&&$.removeClassName(e,"playkit-in-browser-fullscreen-mode"),this._isInBrowserFullscreen=!1,this._fullscreenExitHandler(),this._player.dispatchEvent(new _(this._player.Event.RESIZE))}},{key:"registerFullScreenEvents",value:function(){var e=this;this._eventManager.listen(document,"webkitfullscreenchange",(function(){return e._fullscreenChangeHandler()})),this._eventManager.listen(document,"mozfullscreenchange",(function(){return e._fullscreenChangeHandler()})),this._eventManager.listen(document,"fullscreenchange",(function(){return e._fullscreenChangeHandler()})),this._eventManager.listen(document,"MSFullscreenChange",(function(){return e._fullscreenChangeHandler()})),this._handleIosFullscreen()}},{key:"_handleIosFullscreen",value:function(){var e=this;if("iOS"===this._player.env.os.name){var t=function(){var t=e._player.getVideoElement();t&&(e._eventManager.listen(t,"webkitbeginfullscreen",(function(){return e._fullscreenEnterHandler()})),e._eventManager.listen(t,"webkitendfullscreen",(function(){return e._fullscreenExitHandler()})))};this._player.getVideoElement()?t():this._eventManager.listenOnce(this._player,this._player.Event.SOURCE_SELECTED,(function(){return t()}))}}},{key:"_fullscreenChangeHandler",value:function(){this.isFullscreen()?this._fullscreenEnterHandler():this._fullscreenExitHandler()}},{key:"_fullscreenEnterHandler",value:function(){this.isFullscreen()&&this._player.dispatchEvent(new _(this._player.Event.ENTER_FULLSCREEN))}},{key:"_fullscreenExitHandler",value:function(){this.isFullscreen()||this._player.dispatchEvent(new _(this._player.Event.EXIT_FULLSCREEN))}},{key:"destroy",value:function(){this._eventManager.destroy()}}])&&Br(t.prototype,n),e}();function Gr(e){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hr(e,t,n){return t&&Kr(e.prototype,t),n&&Kr(e,n),e}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wr(e,t){return!t||"object"!==Gr(t)&&"function"!=typeof t?Yr(e):t}function Yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qr(e,t,n){return(qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xr(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xr(e);if(t){var i=Xr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wr(this,n)}}(n);function n(e,r){var i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this))._eventManager=new R,o._pluginDecorators=r.map((function(t){return t.getEngineDecorator(e,qr((i=Yr(o),Xr(n.prototype)),"dispatchEvent",i).bind(Yr(o)))})),Object.values(ie).forEach((function(t){return o._eventManager.listen(e,t,(function(e){return o.dispatchEvent(e)}))})),Wr(o,new Proxy(e,{get:function(e,t){if("destroy"===t&&o._destroy(),"_listeners"===t)return o._listeners;var n=o._pluginDecorators.find((function(e){return t in e&&e.active}));return n?n[t]:e[t]},set:function(e,t,n){var r=o._pluginDecorators.find((function(e){return t in e&&e.active}));return r?r[t]=n:e[t]=n,!0}}))}return Hr(n,null,[{key:"getDecorator",value:function(e,t){var n=t.filter((function(e){return e.getEngineDecorator}));return n.length?new this(e,n):null}}]),Hr(n,[{key:"dispatchEvent",value:function(e){var t=this._pluginDecorators.find((function(e){return e.active}));return t?t.dispatchEvent&&t.dispatchEvent(e):qr(Xr(n.prototype),"dispatchEvent",this).call(this,e)}},{key:"_destroy",value:function(){this._pluginDecorators=[],this._eventManager.destroy()}},{key:"active",get:function(){return!0}}]),n}(E);function Jr(e){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e){return function(e){if(Array.isArray(e))return ei(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Zr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){if(e){if("string"==typeof e)return ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ei(e,t):void 0}}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ri(e,t,n){return t&&ni(e.prototype,t),n&&ni(e,n),e}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oi(e,t){return!t||"object"!==Jr(t)&&"function"!=typeof t?ai(e):t}function ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function si(e){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var li="off",ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=si(e);if(t){var i=si(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oi(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ti(this,n),ui(ai(e=t.call(this)),"_activeTextCues",[]),ui(ai(e),"_textDisplaySettings",{}),ui(ai(e),"_playbackAttributesState",{muted:void 0,volume:void 0,rate:void 0,audioLanguage:"",textLanguage:""}),ui(ai(e),"_hasUserInteracted",!1),ui(ai(e),"_isOnLiveEdge",!1),ui(ai(e),"_shouldLoadAfterAttach",!1),e._setConfigLogLevel(r),e._playerId=X.uniqueId(5),e._prepareVideoElement(),n.runCapabilities(),e._env=y,e._tracks=[],e._uiComponents=[],e._firstPlay=!0,e._repositionCuesTimeout=!1,e._loadingMedia=!1,e._loading=!1,e._playbackStart=!1,e._playbackEnded=!1,e._firstPlaying=!1,e._reset=!0,e._destroyed=!1,e._fallbackToMutedAutoPlay=!1,e._config=n._defaultConfig,e._eventManager=new R,e._posterManager=new ee,e._stateManager=new Se(ai(e)),e._pluginManager=new me,e._controllerProvider=new Cr(e._pluginManager),e._resizeWatcher=new Ur,e._playbackMiddleware=new zt,e._textStyle=new Qe,e._createReadyPromise(),e._createPlayerContainer(),e._appendDomElements(),e._externalCaptionsHandler=new vr(ai(e)),e._fullscreenController=new Vr(ai(e)),e.configure(r),e}return ri(n,null,[{key:"runCapabilities",value:function(){n._logger.debug("Running player capabilities"),ir.getEngines().forEach((function(e){return e.runCapabilities()}))}},{key:"getCapabilities",value:function(e){n._logger.debug("Get player capabilities",e);var t=[];return ir.getEngines().forEach((function(e){return t.push(e.getCapabilities())})),Promise.all(t).then((function(t){var n={};return t.forEach((function(e){return Object.assign(n,e)})),e?n[e]:n}))}},{key:"setCapabilities",value:function(e,t){n._logger.debug("Set player capabilities",e,t);var r=ir.getEngines().find((function(t){return t.id===e}));r&&r.setCapabilities(t)}}]),ri(n,[{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setConfigLogLevel(e),this._hasSources(e.sources)?(this._configureOrLoadPlugins(e.plugins),this._maybeCreateAdsController(),this.reset(),this._resizeWatcher.init($.getElementById(this._playerId)),n._logger.debug("Change source started"),this.dispatchEvent(new _(re.CHANGE_SOURCE_STARTED)),this._pluginManager.loadMedia(),q.mergeDeep(this._config,e),this._reset=!1,this._selectEngineByPriority()?(this.dispatchEvent(new _(re.SOURCE_SELECTED,{selectedSource:this._config.sources[this._streamType]})),this._attachMedia(),this._handlePlaybackOptions(),this._posterManager.setSrc(this._config.sources.poster),this._handlePreload(),this._handleAutoPlay(),n._logger.debug("Change source ended"),this.dispatchEvent(new _(re.CHANGE_SOURCE_ENDED))):(n._logger.warn("No playable engines was found to play the given sources"),this.dispatchEvent(new _(ne.ERROR,new B(B.Severity.CRITICAL,B.Category.PLAYER,B.Code.NO_ENGINE_FOUND_TO_PLAY_THE_SOURCE,"No Engine Found To Play The Source"))))):(q.mergeDeep(this._config,e),this._configureOrLoadPlugins(e.plugins),this._maybeCreateAdsController())}},{key:"ready",value:function(){return this._readyPromise?this._readyPromise:Promise.resolve()}},{key:"load",value:function(){var e=this;this.src?n._logger.debug("The source has already been loaded. load request ignored"):this._playbackMiddleware.load((function(){e._engine?e._load():e._eventManager.listenOnce(e,re.SOURCE_SELECTED,(function(){return e._load()}))}))}},{key:"play",value:function(){var e=this;this._playbackStart||(this._playbackStart=!0,this.dispatchEvent(new _(re.PLAYBACK_START)),this.src||this._prepareVideoElement(),this.load()),this._engine?this._playbackMiddleware.play((function(){return e._play()})):this._loadingMedia?this._playbackMiddleware.play((function(){return e._playAfterAsyncMiddleware()})):this.dispatchEvent(new _(ne.ERROR,new B(B.Severity.CRITICAL,B.Category.PLAYER,B.Code.NO_SOURCE_PROVIDED,"No Source Provided")))}},{key:"pause",value:function(){this._engine&&this._playbackMiddleware.pause(this._pause.bind(this))}},{key:"getView",value:function(){return this._el}},{key:"getVideoElement",value:function(){if(this._engine)return this._engine.getVideoElement()}},{key:"reset",value:function(){this._reset||(this.pause(),this._externalCaptionsHandler.reset(),this._posterManager.reset(),this._pluginManager.reset(),this._stateManager.reset(),this._config.sources={},this._activeTextCues=[],this._updateTextDisplay([]),this._tracks=[],this._resetStateFlags(),this._engineType="",this._streamType="",this._pendingSelectedVideoTrack=null,this._engine&&this._engine.reset(),this._showBlackCover(),this._reset=!0,this.dispatchEvent(new _(re.PLAYER_RESET)),this._eventManager.removeAll(),this._resizeWatcher.init($.getElementById(this._playerId)),this._createReadyPromise(),this._isOnLiveEdge=!1,this._shouldLoadAfterAttach=!1)}},{key:"destroy",value:function(){this._destroyed||(this._externalCaptionsHandler.destroy(),this._posterManager.destroy(),this._pluginManager.destroy(),this._stateManager.destroy(),this._fullscreenController.destroy(),this._clearRepositionTimeout(),this._activeTextCues=[],this._textDisplaySettings={},this._config={},this._tracks=[],this._engineType="",this._streamType="",this._readyPromise=null,this._pendingSelectedVideoTrack=null,this._resetStateFlags(),this._playbackAttributesState={},this._engine&&this._engine.destroy(),this._resizeWatcher.destroy(),this._el&&$.removeChild(this._el.parentNode,this._el),this._destroyed=!0,this.dispatchEvent(new _(re.PLAYER_DESTROY)),this._eventManager.destroy())}},{key:"_attachMediaSource",value:function(){var e=this;this._engine&&(this._shouldLoadAfterAttach=!0,this._engine.attachMediaSource(),this._eventManager.listenOnce(this,ne.CAN_PLAY,(function(){"number"==typeof e._playbackAttributesState.rate&&(e.playbackRate=e._playbackAttributesState.rate)})))}},{key:"_detachMediaSource",value:function(){this._engine&&(this.pause(),this.hideTextTrack(),this._shouldLoadAfterAttach=!1,this._createReadyPromise(),this._engine.detachMediaSource())}},{key:"isLive",value:function(){return!(this._config.sources.type===Ft.VOD||!(this._config.sources.type===Ft.LIVE||this._engine&&this._engine.isLive()))}},{key:"isOnLiveEdge",value:function(){return this._isOnLiveEdge}},{key:"isDvr",value:function(){return this.isLive()&&this._config.sources.dvr}},{key:"seekToLiveEdge",value:function(){this._engine&&this.isLive()&&(this._engine.seekToLiveEdge(),this._isOnLiveEdge=!0)}},{key:"getStartTimeOfDvrWindow",value:function(){return this._engine?this._engine.getStartTimeOfDvrWindow():0}},{key:"getTracks",value:function(e){switch(e){case Nt.VIDEO:return q.copyDeep(this._getVideoTracks());case Nt.AUDIO:return q.copyDeep(this._getAudioTracks());case Nt.TEXT:return q.copyDeep(this._getTextTracks());default:return q.copyDeep(this._tracks)}}},{key:"getActiveTracks",value:function(){return q.copyDeep({video:this._getVideoTracks().find((function(e){return e.active})),audio:this._getAudioTracks().find((function(e){return e.active})),text:this._getTextTracks().find((function(e){return e.active}))})}},{key:"selectTrack",value:function(e){this._engine&&(e instanceof Me?this._playbackEnded?this._pendingSelectedVideoTrack=e:this._engine.selectVideoTrack(e):e instanceof Ve?this._engine.selectAudioTrack(e):e instanceof qe&&(this._resetTextDisplay(),e.language===li?(this.hideTextTrack(),this._externalCaptionsHandler.hideTextTrack(),this._playbackAttributesState.textLanguage=li):e.external&&!this._config.playback.useNativeTextTrack?(this._engine.hideTextTrack(),this._externalCaptionsHandler.selectTextTrack(e)):(this._externalCaptionsHandler.hideTextTrack(),this._engine.selectTextTrack(e))))}},{key:"hideTextTrack",value:function(){if(this._engine){this._engine.hideTextTrack(),this._resetTextDisplay();var e=this._getTextTracks();e.map((function(e){return e.active=!1}));var t=e.find((function(e){return e.language===li}));t&&(t.active=!0,this.dispatchEvent(new _(re.TEXT_TRACK_CHANGED,{selectedTextTrack:t})))}}},{key:"enableAdaptiveBitrate",value:function(){this._engine&&this._engine.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._engine&&this._engine.isAdaptiveBitrateEnabled()}},{key:"setTextDisplaySettings",value:function(e){this._textDisplaySettings=e,this._updateCueDisplaySettings();for(var t=0;t<this._activeTextCues.length;t++)this._activeTextCues[t].hasBeenReset=!0;this._updateTextDisplay(this._activeTextCues)}},{key:"isFullscreen",value:function(){return this._fullscreenController.isFullscreen()}},{key:"notifyEnterFullscreen",value:function(){this.isFullscreen()&&this.dispatchEvent(new _(re.ENTER_FULLSCREEN))}},{key:"notifyExitFullscreen",value:function(){this.isFullscreen()||this.dispatchEvent(new _(re.EXIT_FULLSCREEN))}},{key:"enterFullscreen",value:function(e){this._fullscreenController.enterFullscreen(e)}},{key:"exitFullscreen",value:function(){this._fullscreenController.exitFullscreen()}},{key:"enterPictureInPicture",value:function(){this.isFullscreen()&&this.exitFullscreen(),this._engine.isInPictureInPicture||this._engine.enterPictureInPicture()}},{key:"exitPictureInPicture",value:function(){this._engine.isInPictureInPicture&&this._engine.exitPictureInPicture()}},{key:"isInPictureInPicture",value:function(){return this._engine.isInPictureInPicture}},{key:"isPictureInPictureSupported",value:function(){return!!this._config.playback.pictureInPicture&&this._engine.isPictureInPictureSupported()}},{key:"isVr",value:function(){return!!this._config.sources.vr}},{key:"toggleVrStereoMode",value:function(){var e=this._pluginManager.get("vr");e&&"function"==typeof e.toggleVrStereoMode&&e.toggleVrStereoMode()}},{key:"isInVrStereoMode",value:function(){var e=this._pluginManager.get("vr");return!(!e||"function"!=typeof e.isInStereoMode)&&e.isInStereoMode()}},{key:"getLogLevel",value:function(e){return L(e)}},{key:"setLogLevel",value:function(e,t){M(e,t)}},{key:"_resetTextDisplay",value:function(){this._activeTextCues=[],this._updateTextDisplay([])}},{key:"_prepareVideoElement",value:function(){var e=this;ir.getEngines().forEach((function(t){t.prepareVideoElement(e._playerId)}))}},{key:"_setConfigLogLevel",value:function(e){var t;e.log&&e.log.level&&x[e.log.level]&&M(x[e.log.level]),e.log&&"function"==typeof e.log.handler&&(t=e.log.handler,C.setHandler((function(e,n){return t(e,n)})))}},{key:"_hasSources",value:function(e){return!!e&&!!Object.values(jt).find((function(t){return e[t]&&e[t].length>0}))}},{key:"_createPlayerContainer",value:function(){var e=this._el=$.createElement("div");$.addClassName(e,"playkit-container"),$.setAttribute(e,"id",this._playerId),$.setAttribute(e,"tabindex","-1")}},{key:"_appendEngineEl",value:function(){if(this._el){var e=this._engine.getVideoElement(),t="".concat("playkit-engine");$.addClassName(e,t);var n="".concat("playkit-engine","-").concat(this._engine.id);$.addClassName(e,n),$.prependTo(e,this._el)}}},{key:"_appendDomElements",value:function(){this._textDisplayEl=$.createElement("div"),$.setAttribute(this._textDisplayEl,"aria-live","polite"),$.addClassName(this._textDisplayEl,"playkit-subtitles"),$.appendChild(this._el,this._textDisplayEl),this._blackCoverEl=$.createElement("div"),$.addClassName(this._blackCoverEl,"playkit-black-cover"),$.appendChild(this._el,this._blackCoverEl);var e=this._posterManager.getElement();$.addClassName(e,"playkit-poster"),$.appendChild(this._el,e)}},{key:"_configureOrLoadPlugins",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t){var n=[],r=[];Object.keys(t).forEach((function(i){var o=e._pluginManager.get(i);if(o)o.updateConfig(t[i]),e._config.plugins[i]=o.getConfig();else if(e._engine)delete e._config.plugins[i];else{try{e._pluginManager.load(i,e,t[i])}catch(t){e.dispatchEvent(new _(ne.ERROR,t))}var a=e._pluginManager.get(i);if(a){if(e._config.plugins[i]=a.getConfig(),"function"==typeof a.getMiddlewareImpl){var s=a.getMiddlewareImpl();s&&("bumper"===a.name?n.push(s):n.unshift(s))}"function"==typeof a.getUIComponents&&r.push.apply(r,Qr(a.getUIComponents()||[]))}}})),this._uiComponents=r,n.forEach((function(t){return e._playbackMiddleware.use(t)}))}}},{key:"_createReadyPromise",value:function(){var e=this;this._readyPromise=new Promise((function(t,n){e._eventManager.listenOnce(e,re.TRACKS_CHANGED,(function(){e.dispatchEvent(new _(re.MEDIA_LOADED)),t()})),e._eventManager.listen(e,ne.ERROR,(function(e){e.payload.severity===B.Severity.CRITICAL&&n()}))})).catch((function(){}))}},{key:"_selectEngineByPriority",value:function(){var e,t=this,r=this._config.playback.streamPriority,i=this._config.playback.preferNative,o=this._config.sources,a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Zr(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(r);try{var s=function(){var r=e.value,a="string"==typeof r.engine?r.engine.toLowerCase():"",s="string"==typeof r.format?r.format.toLowerCase():"",u=ir.getEngines().find((function(e){return e.id===a}));if(u){var l=o[s];if(l&&l.length>0){var c=l[0];if(u.canPlaySource(c,i[s],t._config.drm))return n._logger.debug("Source selected: ",l),t._loadEngine(u,c),t._engineType=a,t._streamType=s,{v:!0}}}};for(a.s();!(e=a.n()).done;){var u=s();if("object"===Jr(u))return u.v}}catch(e){a.e(e)}finally{a.f()}return!1}},{key:"_loadEngine",value:function(e,t){this._engine?this._engine.id===e.id?this._engine.restore.call(this._engine._engine||this._engine,t,this._config):(this._engine.destroy(),this._createEngine(e,t),this._appendEngineEl()):(this._createEngine(e,t),this._appendEngineEl())}},{key:"_createEngine",value:function(e,t){var n=e.createEngine(t,this._config,this._playerId),r=Object.values(this._pluginManager.getAll());this._engine=$r.getDecorator(n,r)||n}},{key:"_attachMedia",value:function(){var e=this;if(this._engine){Object.keys(ne).forEach((function(t){e._eventManager.listen(e._engine,ne[t],(function(t){return e.dispatchEvent(t)}))})),this._eventManager.listen(this._engine,ne.SEEKING,(function(){e.isLive()&&(e._isOnLiveEdge=!(!e.duration||!e.currentTime)&&e.currentTime>=e.duration-1&&!e.paused)})),this._eventManager.listen(this._engine,ne.SEEKED,(function(){var t=e._env.browser.name;"Edge"!==t&&"IE"!==t||e._removeTextCuePatch()})),this._eventManager.listen(this._engine,re.VIDEO_TRACK_CHANGED,(function(t){return e._markActiveTrack(t.payload.selectedVideoTrack),e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.AUDIO_TRACK_CHANGED,(function(t){e.ready().then((function(){return e._playbackAttributesState.audioLanguage=t.payload.selectedAudioTrack.language})),e._markActiveTrack(t.payload.selectedAudioTrack),e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.TEXT_TRACK_CHANGED,(function(t){return e._onTextTrackChanged(t)})),this._eventManager.listen(this._engine,re.TRACKS_CHANGED,(function(t){return e._onTracksChanged(t)})),this._eventManager.listen(this._engine,re.TEXT_CUE_CHANGED,(function(t){return e._onCueChange(t)})),this._eventManager.listen(this._engine,re.ABR_MODE_CHANGED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.TIMED_METADATA,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.PLAY_FAILED,(function(t){e.pause(),e._onPlayFailed(t),e.dispatchEvent(t)})),this._eventManager.listen(this,te.AD_AUTOPLAY_FAILED,(function(t){return e._onPlayFailed(t)})),this._eventManager.listen(this._engine,re.FPS_DROP,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.FRAG_LOADED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.DRM_LICENSE_LOADED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.MANIFEST_LOADED,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(this,ne.PLAY,this._onPlay.bind(this)),this._eventManager.listen(this,ne.PAUSE,this._onPause.bind(this)),this._eventManager.listen(this,ne.PLAYING,this._onPlaying.bind(this)),this._eventManager.listen(this,ne.ENDED,this._onEnded.bind(this)),this._eventManager.listen(this,re.PLAYBACK_ENDED,this._onPlaybackEnded.bind(this)),this._eventManager.listen(this,re.MUTE_CHANGE,(function(){e._playbackAttributesState.muted=e.muted})),this._eventManager.listen(this,ne.VOLUME_CHANGE,(function(){e._playbackAttributesState.volume=e.volume})),this._eventManager.listen(this,ne.RATE_CHANGE,(function(){e._playbackAttributesState.rate=e.playbackRate})),this._eventManager.listen(this,re.ENTER_FULLSCREEN,(function(){return e._resetTextCuesAndReposition()})),this._eventManager.listen(this,re.EXIT_FULLSCREEN,(function(){return e._resetTextCuesAndReposition()})),this._eventManager.listen(this._resizeWatcher,re.RESIZE,(function(t){e._resetTextCuesAndReposition(),e.dispatchEvent(t)})),this._eventManager.listen(this._engine,re.MEDIA_RECOVERED,(function(){return e._handleRecovered()})),this._eventManager.listen(this._externalCaptionsHandler,re.TEXT_CUE_CHANGED,(function(t){return e._onCueChange(t)})),this._eventManager.listen(this._externalCaptionsHandler,re.TEXT_TRACK_CHANGED,(function(t){return e._onTextTrackChanged(t)})),this._eventManager.listen(this._externalCaptionsHandler,ne.ERROR,(function(t){return e.dispatchEvent(t)})),this._eventManager.listen(this,te.AD_STARTED,(function(){e._firstPlay&&(e._posterManager.hide(),e._hideBlackCover())})),this.config.playback.playAdsWithMSE&&(this._eventManager.listen(this,te.AD_BREAK_START,(function(){var t=e._adsController?e._adsController.getAd():null;t&&t.linear&&e._detachMediaSource()})),this._eventManager.listen(this,te.AD_BREAK_END,(function(){return e._attachMediaSource()})),this._eventManager.listen(this,te.AD_ERROR,(function(){return e._attachMediaSource()})));var t=$.getElementBySelector("#".concat(this.config.targetId));t&&this._eventManager.listen(t,"click",(function(){e._hasUserInteracted=!0,e.dispatchEvent(new _(re.USER_GESTURE))}),{capture:!0})}}},{key:"_handleRecovered",value:function(){this._stateManager.currentState.type===Ee.PLAYING&&this.play()}},{key:"_onTextTrackChanged",value:function(e){var t=this;this.ready().then((function(){return t._playbackAttributesState.textLanguage=e.payload.selectedTextTrack.language})),this._markActiveTrack(e.payload.selectedTextTrack),this._config.playback.useNativeTextTrack&&this._externalCaptionsHandler.selectTextTrack(e.payload.selectedTextTrack),this.dispatchEvent(e)}},{key:"_resetTextCuesAndReposition",value:function(){var e=this;this._engine.resetAllCues(),this._updateTextDisplay([]);for(var t=0;t<this._activeTextCues.length;t++)this._activeTextCues[t].hasBeenReset=!0;this._clearRepositionTimeout(),this._repositionCuesTimeout=setTimeout((function(){e._updateTextDisplay(e._activeTextCues),e._repositionCuesTimeout=!1}),1e3)}},{key:"_clearRepositionTimeout",value:function(){this._repositionCuesTimeout&&clearTimeout(this._repositionCuesTimeout)}},{key:"_removeTextCuePatch",value:function(){var e=this,t=this._activeTextCues.filter((function(t){var n=t._endTime,r=t._startTime,i=e.currentTime;if(i<n&&i>r)return t}));this._updateTextDisplay(t)}},{key:"_handlePlaybackOptions",value:function(){if(this._config.playback=this._config.playback||{},"boolean"==typeof this._playbackAttributesState.muted?this.muted=this._playbackAttributesState.muted:"boolean"==typeof this._config.playback.muted&&(this.muted=this._config.playback.muted),"number"==typeof this._playbackAttributesState.volume?this.volume=this._playbackAttributesState.volume:"number"==typeof this._config.playback.volume&&(this.volume=this._config.playback.volume),"boolean"==typeof this._config.playback.playsinline&&(this.playsinline=this._config.playback.playsinline),"string"==typeof this._config.playback.crossOrigin&&(this.crossOrigin=this._config.playback.crossOrigin),Array.isArray(this._config.playback.playbackRates)){var e=this._config.playback.playbackRates.filter((function(e,t,n){return e>0&&e<=16&&n.indexOf(e)===t})).sort((function(e,t){return e-t}));e&&(this._playbackRates=e)}}},{key:"_handlePreload",value:function(){"auto"!==this._config.playback.preload||this._config.playback.autoplay||this.load()}},{key:"_handleAutoPlay",value:function(){var e=this;if(!0===this._config.playback.autoplay){var t=this._config.playback.allowMutedAutoPlay;n.getCapabilities(this.engineType).then((function(n){n.autoplay?r():n.mutedAutoPlay?e.muted&&!e._fallbackToMutedAutoPlay?i():t?o():a():a()}))}else this._posterManager.show();var r=function(){n._logger.debug("Start autoplay"),e._fallbackToMutedAutoPlay&&(e._fallbackToMutedAutoPlay=!1,e.muted=!1),e.play()},i=function(){n._logger.debug("Start muted autoplay"),e.play()},o=function(){n._logger.debug("Fallback to muted autoplay"),e._fallbackToMutedAutoPlay=!0,e.muted=!0,e.dispatchEvent(new _(re.FALLBACK_TO_MUTED_AUTOPLAY)),e.play()},a=function(){n._logger.warn("Autoplay failed, pause player"),e._posterManager.show(),e.load(),e.ready().then((function(){return e.pause()})),e.dispatchEvent(new _(re.AUTOPLAY_FAILED))}}},{key:"_maybeCreateAdsController",value:function(){var e=this;if(!this._adsController){var t=this._controllerProvider.getAdsControllers();t.length&&(this._adsController=new Pr(this,t),this._eventManager.listen(this._adsController,te.ALL_ADS_COMPLETED,(function(t){e.dispatchEvent(t)})))}}},{key:"_playAfterAsyncMiddleware",value:function(){var e=this;this._engine?this._play():this._eventManager.listenOnce(this,re.SOURCE_SELECTED,(function(){return e._play()}))}},{key:"_load",value:function(){var e=this,t=function(){e._loading=!1,e._reset=!1};if(this._engine&&!this.src&&!this._loading){this._loading=!0;var n=this._config.playback.startTime;this._engine.load(n).then((function(r){e.isLive()&&(-1===n||n>=e.duration)&&(e._isOnLiveEdge=!0),e._updateTracks(r.tracks),e.dispatchEvent(new _(re.TRACKS_CHANGED,{tracks:e._tracks})),t()})).catch((function(n){e.dispatchEvent(new _(ne.ERROR,n)),t()}))}}},{key:"_play",value:function(){var e=this;this._shouldLoadAfterAttach&&(this._load(),this._shouldLoadAfterAttach=!1),this.ready().then((function(){e.isLive()&&(!e.isDvr()||"number"==typeof e.currentTime&&e.currentTime<0)&&e.seekToLiveEdge(),e._engine.play()})).catch((function(t){e.dispatchEvent(new _(ne.ERROR,t))}))}},{key:"_pause",value:function(){this._engine.pause()}},{key:"_onPause",value:function(){this._isOnLiveEdge=!1}},{key:"_onPlay",value:function(){this._firstPlay&&(this._firstPlay=!1,this.dispatchEvent(new _(re.FIRST_PLAY)),this._posterManager.hide(),this._hideBlackCover(),"number"==typeof this._playbackAttributesState.rate&&(this.playbackRate=this._playbackAttributesState.rate))}},{key:"_onPlaying",value:function(){this._firstPlaying||(this._firstPlaying=!0,this.dispatchEvent(new _(re.FIRST_PLAYING))),this._engine&&this._pendingSelectedVideoTrack&&(this._engine.selectVideoTrack(this._pendingSelectedVideoTrack),this._pendingSelectedVideoTrack=null)}},{key:"_onPlayFailed",value:function(e){this._firstPlay&&this._config.playback.autoplay&&(this._posterManager.show(),this.dispatchEvent(new _(re.AUTOPLAY_FAILED,e.payload)))}},{key:"_hideBlackCover",value:function(){this._blackCoverEl&&(this._blackCoverEl.style.visibility="hidden")}},{key:"_showBlackCover",value:function(){this._blackCoverEl&&(this._blackCoverEl.style.visibility="visible")}},{key:"_onEnded",value:function(){var e=this;this._adsController&&!this._adsController.allAdsCompleted?this._eventManager.listenOnce(this._adsController,te.ALL_ADS_COMPLETED,(function(){e.dispatchEvent(new _(re.PLAYBACK_ENDED))})):setTimeout((function(){return e.dispatchEvent(new _(re.PLAYBACK_ENDED))}),0),this.paused||this._pause()}},{key:"_onPlaybackEnded",value:function(){this.config.playback.loop?(this.currentTime=0,this.play()):this._playbackEnded=!0}},{key:"_resetStateFlags",value:function(){this._loading=!1,this._firstPlay=!0,this._loadingMedia=!1,this._playbackStart=!1,this._playbackEnded=!1,this._firstPlaying=!1}},{key:"_onTracksChanged",value:function(e){this._updateTracks(e.payload.tracks),this.dispatchEvent(e)}},{key:"_updateTracks",value:function(e){n._logger.debug("Tracks changed",e),this._tracks=e.concat(this._externalCaptionsHandler.getExternalTracks(e)),this._addTextTrackOffOption(),this._maybeSetTracksLabels(),this._maybeAdjustTextTracksIndexes(),this._setDefaultTracks()}},{key:"_maybeAdjustTextTracksIndexes",value:function(){var e=this;this._config.playback.useNativeTextTrack&&this._getTextTracks().forEach((function(t){return t.index=(n=t,(r=e.getVideoElement())?Array.from(r.textTracks).findIndex((function(e){return!!e&&e.language===n.language})):-1);var n,r}))}},{key:"_getTracksByType",value:function(e){return this._tracks.reduce((function(t,n){return n instanceof e&&t.push(n),t}),[])}},{key:"_getTextTracks",value:function(){return this._getTracksByType(qe)}},{key:"_getVideoTracks",value:function(){return this._getTracksByType(Me)}},{key:"_getAudioTracks",value:function(){return this._getTracksByType(Ve)}},{key:"_markActiveTrack",value:function(e){var t;if(e instanceof Me?t=this._getVideoTracks():e instanceof Ve?t=this._getAudioTracks():e instanceof qe&&(t=this._getTextTracks()),t)for(var n=0;n<t.length;n++)t[n].active=e.index===t[n].index}},{key:"_onCueChange",value:function(e){n._logger.debug("Text cue changed",e.payload.cues),this._activeTextCues=e.payload.cues,this._updateCueDisplaySettings(),this._updateTextDisplay(this._activeTextCues)}},{key:"_updateCueDisplaySettings",value:function(){for(var e=this._activeTextCues,t=this._textDisplaySettings,n=0;n<e.length;n++){var r=e[n];for(var i in t)r[i]=t[i]}}},{key:"_updateTextDisplay",value:function(e){this._config.playback.useNativeTextTrack||function(e,t,n,r){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var o=[],a=Tt.getSimpleBoxPosition(i),s=a.height<a.width?a.height:a.width,u={font:Math.round(.058*s*100)/100*1*r.implicitFontScale+"px "+r.fontFamily,color:Qe.toRGBA(r.fontColor,r.fontOpacity),backgroundColor:Qe.toRGBA(r.backgroundColor,r.backgroundOpacity),textShadow:r.getTextShadow()};!function(){for(var n,r,s=0;s<t.length;s++)r=t[s],n=new wt(e,r,u),i.appendChild(n.div),St(0,n,a,o),r.displayState=n.div,o.push(Tt.getSimpleBoxPosition(n))}()}else for(var l=0;l<t.length;l++)i.appendChild(t[l].displayState)}(window,e,this._textDisplayEl,this._textStyle)}},{key:"_addTextTrackOffOption",value:function(){var e=this._getTextTracks();e&&e.length&&this._tracks.push(new qe({active:!1,index:e.length,kind:"subtitles",label:"Off",language:li}))}},{key:"_setDefaultTracks",value:function(){var e=this.getActiveTracks(),t=this.config.playback,n=this._getTextTracks().find((function(e){return qe.langComparer(li,e.language)})),r=this._playbackAttributesState.textLanguage||this._getLanguage(t.textLanguage,e.text),i=this._playbackAttributesState.audioLanguage||t.audioLanguage;this._setDefaultTrack(this._getTextTracks(),r,n),this._setDefaultTrack(this._getAudioTracks(),i,e.audio)}},{key:"_getLanguage",value:function(e,t){var n=e;if("auto"===n){var r=this._getTextTracks(),i=r.find((function(e){return Pe.langComparer(ae.language,e.language)}));i?n=i.language:t&&t.language!==li?n=t.language:r&&r.length>0&&(n=r[0].language)}return n}},{key:"_setDefaultTrack",value:function(e,t,n){var r=e.find((function(e){return Pe.langComparer(t,e.language)}));r?(this.selectTrack(r),this._markActiveTrack(r)):n&&!n.active&&this.selectTrack(n)}},{key:"_maybeSetTracksLabels",value:function(){var e=this._config.customLabels;if(e)for(var t in e){if(!Object.prototype.hasOwnProperty.call(e,t))return;switch(t){case"qualities":this._setTracksCustomLabels(this._getVideoTracks(),e[t]);break;case"audio":this._setTracksCustomLabels(this._getAudioTracks(),e[t]);break;case"captions":this._setTracksCustomLabels(this._getTextTracks(),e[t])}}}},{key:"_setTracksCustomLabels",value:function(e,t){e.forEach((function(e){var n=t(q.copyDeep(e));n&&(e.label=n)}))}},{key:"buffered",get:function(){return this._engine?this._engine.buffered:null}},{key:"stats",get:function(){var e={targetBuffer:NaN,availableBuffer:NaN};return this._engine&&(e.targetBuffer=this._engine.targetBuffer,e.availableBuffer=this._engine.availableBuffer),e}},{key:"currentTime",set:function(e){if(this._engine&&W.isNumber(e)){var t=e;e<0&&(t=0);var n=this.isLive()?this._engine.duration:this._engine.duration-.1;t>n&&(t=n),this._engine.currentTime=t}},get:function(){return this._engine?this._engine.currentTime:null}},{key:"duration",get:function(){return this._engine?this._engine.duration:null}},{key:"volume",set:function(e){if(this._engine&&(W.isFloat(e)||0===e||1===e)){var t=e;t<0&&(t=0),t>1&&(t=1),this._engine.volume=t}},get:function(){return this._engine?this._engine.volume:null}},{key:"paused",get:function(){return this._engine?this._engine.paused:null}},{key:"seeking",get:function(){return this._engine?this._engine.seeking:null}},{key:"playsinline",set:function(e){this._engine&&(this._engine.playsinline=e)},get:function(){return this._engine?this._engine.playsinline:null}},{key:"muted",set:function(e){this._engine&&(this._engine.muted=e,this.dispatchEvent(new _(re.MUTE_CHANGE,{mute:e})),!1===e&&(this._fallbackToMutedAutoPlay=e))},get:function(){return this._engine?this._engine.muted:null}},{key:"src",get:function(){return this._engine?this._engine.src:null}},{key:"dimensions",get:function(){return{width:this._el.clientWidth,height:this._el.clientHeight}}},{key:"poster",get:function(){return this._posterManager.src}},{key:"playbackRate",set:function(e){this._engine&&(this._engine.playbackRate=e)},get:function(){return this._engine?this._engine.playbackRate:null}},{key:"playbackRates",get:function(){return this._playbackRates?this._playbackRates:this._engine?this._engine.playbackRates:[]}},{key:"defaultPlaybackRate",get:function(){return this._engine?this._engine.defaultPlaybackRate:1}},{key:"engineType",get:function(){return this._engineType}},{key:"streamType",get:function(){return this._streamType}},{key:"env",get:function(){return this._env}},{key:"config",get:function(){return q.mergeDeep({},this._config)}},{key:"uiComponents",get:function(){return Qr(this._uiComponents)}},{key:"hasUserInteracted",get:function(){return this._hasUserInteracted}},{key:"loadingMedia",set:function(e){this._loadingMedia=e}},{key:"crossOrigin",set:function(e){this._engine&&(this._engine.crossOrigin=e)},get:function(){return this._engine?this._engine.crossOrigin:null}},{key:"ended",get:function(){return this._engine?this._engine.ended:null}},{key:"textStyle",set:function(e){if(!(e instanceof Qe))throw new Error("Style must be instance of TextStyle");var t=$.getElementBySelector(".".concat(this._playerId,".").concat("playkit-subtitles-style"));t||(t=$.createElement("style"),$.addClassName(t,this._playerId),$.addClassName(t,"playkit-subtitles-style"),$.appendChild(document.head,t));for(var r=t.sheet;r.cssRules.length;)r.deleteRule(0);try{this._textStyle=e,this._config.playback.useNativeTextTrack?r.insertRule("#".concat(this._playerId," video.").concat("playkit-engine","::cue { ").concat(e.toCSS()," }"),0):this._engine&&(this._engine.resetAllCues(),this._externalCaptionsHandler.resetAllCues(),this._updateTextDisplay(this._activeTextCues)),this.dispatchEvent(new _(re.TEXT_STYLE_CHANGED))}catch(e){n._logger.error(e.message)}},get:function(){return this._textStyle.clone()}},{key:"ads",get:function(){return this._adsController}},{key:"plugins",get:function(){return this._pluginManager.getAll()}},{key:"Event",get:function(){return ie}},{key:"TextStyle",get:function(){return Qe}},{key:"State",get:function(){return Ee}},{key:"Track",get:function(){return Nt}},{key:"LogLevelType",get:function(){return D}},{key:"LogLevel",get:function(){return x}},{key:"AbrMode",get:function(){return Bt}},{key:"MediaType",get:function(){return Ft}},{key:"StreamType",get:function(){return jt}},{key:"EngineType",get:function(){return Ut}},{key:"CorsType",get:function(){return Vt}},{key:"AdBreakType",get:function(){return gr}},{key:"AdTagType",get:function(){return mr}},{key:"Error",get:function(){return B}}],[{key:"_defaultConfig",get:function(){return q.copyDeep(Wt)}}]),n}(E);ui(ci,"_logger",N("Player"));var fi={HLS:["application/x-mpegurl","application/vnd.apple.mpegurl"],DASH:["application/dash+xml"],PROGRESSIVE:["video/mp4"],SMOOTH_STREAMING:["application/vnd.ms-sstr+xml"]},pi="0.62.1-canary.521ae1f",di="@playkit-js/playkit-js";function hi(e){return new ci(e||{})}var yi=ci.getCapabilities,vi=ci.setCapabilities;t.default=hi}])},function(e,t,n){var r=n(3),i=n(9),o=n(16),a=n(13),s=n(21),u=function(e,t,n){var l,c,f,p,d=e&u.F,h=e&u.G,y=e&u.S,v=e&u.P,g=e&u.B,m=h?r:y?r[t]||(r[t]={}):(r[t]||{}).prototype,b=h?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});for(l in h&&(n=t),n)f=((c=!d&&m&&void 0!==m[l])?m:n)[l],p=g&&c?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,m&&a(m,l,f,e&u.U),b[l]!=f&&o(b,l,p),v&&_[l]!=f&&(_[l]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o}));var r=n(19),i={DEBUG:r.DEBUG,INFO:r.INFO,TIME:r.TIME,WARN:r.WARN,ERROR:r.ERROR,OFF:r.OFF};function o(e){r.setHandler((function(t,n){return e(t,n)}))}function a(e){return e?r.get(e):r}function s(e,t){a(t).setLevel(e)}r.useDefaults({defaultLevel:r.ERROR}),t.b=a},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(53)("wks"),i=n(33),o=n(3).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(23),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(5),i=n(96),o=n(30),a=Object.defineProperty;t.f=n(10)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(28);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(3),i=n(16),o=n(15),a=n(33)("src"),s=n(133),u=(""+s).split("toString");n(9).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(l&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r=n(1),i=n(4),o=n(28),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(11),i=n(32);e.exports=n(10)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(49),i=n(28);e.exports=function(e){return r(i(e))}},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){var r=n(16),i=n(17);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){var r,i;
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */!function(o){"use strict";var a,s={VERSION:"1.6.0"},u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};s.TRACE=f(1,"TRACE"),s.DEBUG=f(2,"DEBUG"),s.INFO=f(3,"INFO"),s.TIME=f(4,"TIME"),s.WARN=f(5,"WARN"),s.ERROR=f(8,"ERROR"),s.OFF=f(99,"OFF");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,c({level:e},this.context))}};var d,h=new p({filterLevel:s.OFF});(d=s).enabledFor=l(h,h.enabledFor),d.trace=l(h,h.trace),d.debug=l(h,h.debug),d.time=l(h,h.time),d.timeEnd=l(h,h.timeEnd),d.info=l(h,h.info),d.warn=l(h,h.warn),d.error=l(h,h.error),d.log=d.info,s.setHandler=function(e){a=e},s.setLevel=function(e){for(var t in h.setLevel(e),u)u.hasOwnProperty(t)&&u[t].setLevel(e)},s.getLevel=function(){return h.getLevel()},s.get=function(e){return u[e]||(u[e]=new p(c({name:e},h.context)))},s.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var o,a=console.log;i.level===s.TIME?(o=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(o):t[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):n(a,[o+": "+((new Date).getTime()-t[o])+"ms"])):(i.level===s.WARN&&console.warn?a=console.warn:i.level===s.ERROR&&console.error?a=console.error:i.level===s.INFO&&console.info?a=console.info:i.level===s.DEBUG&&console.debug?a=console.debug:i.level===s.TRACE&&console.trace&&(a=console.trace),e.formatter(r,i),n(a,r))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){var r=n(3);e.exports=n(11)(r.isElement,!0)},function(e,t,n){"use strict";e.exports=n(10)},function(e,t,n){"use strict";var r=n(3),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var i=d(n);i&&i!==h&&e(t,i,r)}var a=c(n);f&&(a=a.concat(f(n)));for(var s=u(t),y=u(n),v=0;v<a.length;++v){var g=a[v];if(!(o[g]||r&&r[g]||y&&y[g]||s&&s[g])){var m=p(n,g);try{l(t,g,m)}catch(e){}}}}return t}},function(e,t,n){"use strict";(function(e,r){var i,o=n(8);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(14),n(15)(e))},function(e,t,n){e.exports=function(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e){e.exports=JSON.parse('{"en":{"controls":{"play":"Play","pause":"Pause","share":"Share","language":"Language","settings":"Settings","fullscreen":"Fullscreen","rewind":"Seek backwards","forward":"Seek forward","vrStereo":"vrStereo","live":"Live","mute":"Mute","unmute":"Unmute","next":"Next","prev":"Prev","startOver":"Start over","pictureInPicture":"Picture in picture","pictureInPictureExit":"Exit picture in picture","logo":"Logo","seekBarSlider":"Seek slider"},"unmute":{"unmute":"Unmute"},"copy":{"button":"Copy URL"},"settings":{"title":"Settings","quality":"Quality","speed":"Speed","speedNormal":"Normal","qualityAuto":"Auto"},"language":{"title":"Language","audio":"Audio","captions":"Captions","advanced_captions_settings":"Advanced captions settings"},"share":{"title":"Share","embed_options":"Embed Options","start_video_at":"Start video at","email":"Share on Email","embed":"Get embed code"},"overlay":{"close":"Close"},"error":{"default_error":"Something went wrong","default_session_text":"Session ID","retry":"Retry"},"ads":{"ad_notice":"Advertisement","learn_more":"Learn more","skip_ad":"Skip ad","skip_in":"Skip in"},"cvaa":{"title":"Advanced captions settings","sample_caption_tag":"Sample","sample_custom_caption_tag":"Custom captions","set_custom_caption":"Set custom caption","edit_caption":"Edit caption","size_label":"Size","font_color_label":"Font color","font_family_label":"Font family","font_style_label":"Font style","font_opacity_label":"Font opacity","background_color_label":"Background color","background_opacity_label":"Background opacity","apply":"Apply","caption_preview":"This is your caption preview"},"cast":{"play_on_tv":"Play on TV","disconnect_from_tv":"Disconnect from TV","status":{"connecting_to":"Connecting to","connected_to":"Connected to","playing_on":"Playing on"}},"playlist":{"prev":"Previous","next":"Next","up_next":"Up Next","cancel":"Cancel"},"pictureInPicture":{"overlay_text":"Playing in Picture In Picture mode"}}}')},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */!function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,m=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var d=e.type;switch(d){case l:case c:case i:case a:case o:case p:return d;default:var v=d&&d.$$typeof;switch(v){case u:case f:case y:case h:case s:return v;default:return t}}case r:return t}}}var k=l,E=c,w=u,T=s,S=n,A=f,O=i,P=y,R=h,C=r,x=a,D=o,I=p,L=!1;function M(e){return _(e)===c}t.AsyncMode=k,t.ConcurrentMode=E,t.ContextConsumer=w,t.ContextProvider=T,t.Element=S,t.ForwardRef=A,t.Fragment=O,t.Lazy=P,t.Memo=R,t.Portal=C,t.Profiler=x,t.StrictMode=D,t.Suspense=I,t.isAsyncMode=function(e){return L||(L=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),M(e)||_(e)===l},t.isConcurrentMode=M,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===i},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===h},t.isPortal=function(e){return _(e)===r},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===c||e===a||e===o||e===p||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===h||e.$$typeof===s||e.$$typeof===u||e.$$typeof===f||e.$$typeof===g||e.$$typeof===m||e.$$typeof===b||e.$$typeof===v)},t.typeOf=_}()},function(e,t,n){"use strict";var r,i=n(3),o=n(12),a=n(7),s=n(13),u=Function.call.bind(Object.prototype.hasOwnProperty);function l(){return null}r=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,c={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),symbol:h("symbol"),any:d(l),arrayOf:function(e){return d((function(t,n,r,i,o){if("function"!=typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new p("Invalid "+i+" `"+o+"` of type `"+v(s)+"` supplied to `"+r+"`, expected an array.");for(var u=0;u<s.length;u++){var l=e(s,u,r,i,o+"["+u+"]",a);if(l instanceof Error)return l}return null}))},element:d((function(t,n,r,i,o){var a=t[n];return e(a)?null:new p("Invalid "+i+" `"+o+"` of type `"+v(a)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:d((function(e,t,n,r,o){var a=e[t];return i.isValidElementType(a)?null:new p("Invalid "+r+" `"+o+"` of type `"+v(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return d((function(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||"<<anonymous>>";return new p("Invalid "+i+" `"+o+"` of type `"+function(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}))},node:d((function(e,t,n,r,i){return y(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,r,i,o){if("function"!=typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],l=v(s);if("object"!==l)return new p("Invalid "+i+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in s)if(u(s,c)){var f=e(s,c,r,i,o+"."+c,a);if(f instanceof Error)return f}return null}))},oneOf:function(e){if(!Array.isArray(e))return r(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),l;function t(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(f(a,e[s]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===g(t)?String(t):t}));return new p("Invalid "+i+" `"+o+"` of value `"+String(a)+"` supplied to `"+r+"`, expected one of "+u+".")}return d(t)},oneOfType:function(e){if(!Array.isArray(e))return r("Invalid argument supplied to oneOfType, expected an instance of array."),l;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return r("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+m(n)+" at index "+t+"."),l}return d((function(t,n,r,i,o){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,n,r,i,o,a))return null;return new p("Invalid "+i+" `"+o+"` supplied to `"+r+"`.")}))},shape:function(e){return d((function(t,n,r,i,o){var s=t[n],u=v(s);if("object"!==u)return new p("Invalid "+i+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var l in e){var c=e[l];if(c){var f=c(s,l,r,i,o+"."+l,a);if(f)return f}}return null}))},exact:function(e){return d((function(t,n,r,i,s){var u=t[n],l=v(u);if("object"!==l)return new p("Invalid "+i+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var c=o({},t[n],e);for(var f in c){var d=e[f];if(!d)return new p("Invalid "+i+" `"+s+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=d(u,f,r,i,s+"."+f,a);if(h)return h}return null}))}};function f(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){this.message=e,this.stack=""}function d(e){var n={},i=0;function o(o,s,u,l,c,f,d){if(l=l||"<<anonymous>>",f=f||u,d!==a){if(t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}if("undefined"!=typeof console){var y=l+":"+u;!n[y]&&i<3&&(r("You are manually calling a React.PropTypes validation function for the `"+f+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[y]=!0,i++)}}return null==s[u]?o?null===s[u]?new p("The "+c+" `"+f+"` is marked as required in `"+l+"`, but its value is `null`."):new p("The "+c+" `"+f+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:e(s,u,l,c,f)}var s=o.bind(null,!1);return s.isRequired=o.bind(null,!0),s}function h(e){return d((function(t,n,r,i,o,a){var s=t[n];return v(s)!==e?new p("Invalid "+i+" `"+o+"` of type `"+g(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!y(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!y(a[1]))return!1}return!0;default:return!1}}function v(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function g(e){if(null==e)return""+e;var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function m(e){var t=g(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,c.checkPropTypes=s,c.resetWarningCache=s.resetWarningCache,c.PropTypes=c,c}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";var r=function(){},i=n(7),o={},a=Function.call.bind(Object.prototype.hasOwnProperty);function s(e,t,n,s,u){for(var l in e)if(a(e,l)){var c;try{if("function"!=typeof e[l]){var f=Error((s||"React class")+": "+n+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[l]+"`.");throw f.name="Invariant Violation",f}c=e[l](t,l,s,n,null,i)}catch(e){c=e}if(!c||c instanceof Error||r((s||"React class")+": type specification of "+n+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof c+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),c instanceof Error&&!(c.message in o)){o[c.message]=!0;var p=u?u():"";r("Failed "+n+" type: "+c.message+(null!=p?p:""))}}}r=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},s.resetWarningCache=function(){o={}},e.exports=s},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var f=a(c),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==f?(o[f].references++,o[f].updater(p)):o.push({identifier:c,updater:y(p,t),references:1}),r.push(c)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,c=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,h=0;function y(e,t){var n,r,i;if(t.singleton){var o=h++;n=d||(d=u(t)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(e,t),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(e,t,n){(t=n(18)(!1)).push([e.i,".playkit-row{display:block}.playkit-row:after{content:'';clear:both;display:block}.playkit-d-inline-block{display:inline-block}.playkit-mobile-hidden-select{display:block;opacity:0;position:absolute;top:0;left:0px;width:100%;height:100%}.playkit-font-size-base,.playkit-ad-notice{font-size:15px}.playkit-player .playkit-form-group{margin:10px 0;position:relative;max-width:100%}.playkit-player .playkit-form-group.playkit-has-error .playkit-form-control{border-color:#db1f26}.playkit-player .playkit-form-group.playkit-has-error .playkit-form-control:focus{border-color:#fff}.playkit-player .playkit-form-group.playkit-has-icon .playkit-form-control{padding-left:34px}.playkit-player .playkit-form-group .playkit-icon{position:absolute;top:2px;left:2px;width:32px;height:32px;fill:rgba(255,255,255,0.4)}.playkit-player .playkit-form-control{height:36px;width:100%;min-width:72px;border:2px solid rgba(255,255,255,0.2);border-radius:4px;background-color:rgba(0,0,0,0.4);font-size:15px;line-height:18px;color:#fff;padding:8px 10px;text-overflow:ellipsis}.playkit-player .playkit-form-control::-webkit-input-placeholder{color:rgba(255,255,255,0.6)}.playkit-player .playkit-form-control:focus{background-color:#fff;border-color:#fff;color:#333}.playkit-player .playkit-form-control:focus::-webkit-input-placeholder{color:#ccc}.playkit-player .playkit-form-control:focus+.playkit-icon{fill:#999}.playkit-player textarea.playkit-form-control{min-height:72px}.playkit-player select{font-size:15px;color:#fff;-webkit-appearance:none;border:0;background:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23FFFFFF' viewBox='0 0 1024 1024'><path d='M301.255 338.745c-24.994-24.994-65.516-24.994-90.51 0s-24.994 65.516 0 90.51l256 256c24.994 24.994 65.516 24.994 90.51 0l256-256c24.994-24.994 24.994-65.516 0-90.51s-65.516-24.994-90.51 0l-210.745 210.745-210.745-210.745z' /></svg>\") no-repeat;background-size:16px;background-position:100% center;background-repeat:no-repeat;padding-right:24px}.playkit-checkbox{font-size:15px;position:relative}.playkit-checkbox input{display:none}.playkit-checkbox label:before{height:16px;width:16px;border:1px solid rgba(255,255,255,0.2);border-radius:4px;background-color:rgba(0,0,0,0.4);margin-right:8px;display:inline-block;content:'';vertical-align:middle}.playkit-checkbox input:checked+label:before{content:'â'}.playkit-form-group-row{font-size:15px;margin:24px 0}.playkit-form-group-row:after{clear:both;content:' ';display:block}.playkit-form-group-row label{float:left;color:rgba(244,244,244,0.8)}.playkit-form-group-row .playkit-dropdown{float:right}.playkit-btn{text-decoration:none;height:36px;border-radius:18px;color:#fff;line-height:36px;font-weight:bold;cursor:pointer;display:inline-block;padding:0 24px}.playkit-btn.playkit-btn-block{display:block}.playkit-btn.playkit-btn-dark-transparent{background-color:rgba(0,0,0,0.5);border:2px solid rgba(255,255,255,0.2);line-height:32px}.playkit-btn.playkit-btn-dark-transparent:hover{color:#fff;border:2px solid rgba(255,255,255,0.4)}.playkit-btn.playkit-btn-branded{background-color:#01accd}.playkit-btn.playkit-btn-branded:hover{color:#fff}.playkit-btn-rounded{height:36px;width:36px;min-width:36px;min-height:36px;border-radius:18px;background-color:rgba(0,0,0,0.4);display:inline-block;padding:2px}.playkit-player button:focus{outline:none}.playkit-icon{display:inline-block;font-size:0;width:100%;height:100%;margin:0 auto;background-size:cover;background-repeat:no-repeat;background-position:50% 50%}.playkit-icon-maximize{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M800 269.255v114.745c0 17.673 14.327 32 32 32s32-14.327 32-32v-192c0-17.673-14.327-32-32-32h-192c-17.673 0-32 14.327-32 32s14.327 32 32 32h114.745l-137.373 137.373c-12.497 12.497-12.497 32.758 0 45.255s32.758 12.497 45.255 0l137.373-137.373z' /%3E %3Cpath fill='%23fff' d='M224 754.745v-114.745c0-17.673-14.327-32-32-32s-32 14.327-32 32v192c0 17.673 14.327 32 32 32h192c17.673 0 32-14.327 32-32s-14.327-32-32-32h-114.745l137.373-137.373c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0l-137.373 137.373z' /%3E%3C/svg%3E\")}.playkit-icon-minimize{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M672 306.745v-114.745c0-17.673-14.327-32-32-32s-32 14.327-32 32v192c0 17.673 14.327 32 32 32h192c17.673 0 32-14.327 32-32s-14.327-32-32-32h-114.745l137.373-137.373c12.497-12.497 12.497-32.758 0-45.255s-32.758-12.497-45.255 0l-137.373 137.373z' /%3E%3Cpath fill='%23fff' d='M352 717.255v114.745c0 17.673 14.327 32 32 32s32-14.327 32-32v-192c0-17.673-14.327-32-32-32h-192c-17.673 0-32 14.327-32 32s14.327 32 32 32h114.745l-137.373 137.373c-12.497 12.497-12.497 32.758 0 45.255s32.758 12.497 45.255 0l137.373-137.373z' /%3E%3C/svg%3E\")}.playkit-icon-play{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M796.806 461.202c44.919 28.075 44.739 73.706 0 101.668l-459.472 287.171c-44.919 28.075-81.334 7.915-81.334-45.305v-585.4c0-53.096 36.595-73.266 81.334-45.305l459.472 287.171z' /%3E%3C/svg%3E\")}.playkit-icon-pause{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M256 287.843c0-35.259 28.407-63.843 64-63.843 35.346 0 64 28.564 64 63.843v448.314c0 35.259-28.407 63.843-64 63.843-35.346 0-64-28.564-64-63.843v-448.314zM640 287.843c0-35.259 28.407-63.843 64-63.843 35.346 0 64 28.564 64 63.843v448.314c0 35.259-28.407 63.843-64 63.843-35.346 0-64-28.564-64-63.843v-448.314z' /%3E%3C/svg%3E\")}.playkit-icon-volume-base{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M128 416v192h96v-192h-96zM64 383.853c0-17.592 14.012-31.853 32.094-31.853h159.813c17.725 0 32.094 14.581 32.094 31.853v256.295c0 17.592-14.012 31.853-32.094 31.853h-159.813c-17.725 0-32.094-14.581-32.094-31.853v-256.295z' /%3E%3Cpath fill='%23fff' d='M288 634.342l160 88.889v-422.462l-160 88.889v244.684zM224 352l231.787-128.771c31.046-17.248 56.213-2.487 56.213 32.476v512.589c0 35.184-25.054 49.786-56.213 32.476l-231.787-128.771v-320z' /%3E%3C/svg%3E\")}.playkit-icon-volume-waves{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M802.017 837.177c82.359-86.627 129.183-201.774 129.183-324.26 0-123.976-47.976-240.409-132.127-327.329-12.293-12.697-32.552-13.025-45.249-0.732s-13.025 32.552-0.732 45.249c72.692 75.084 114.109 175.597 114.109 282.812 0 105.928-40.422 205.331-111.566 280.162-12.177 12.808-11.666 33.063 1.143 45.24s33.063 11.666 45.24-1.143z' /%3E%3Cpath fill='%23fff' d='M667.436 743.221c67.761-60.884 107.273-147.888 107.273-241.233 0-87.318-34.552-169.203-94.836-229.446-12.501-12.493-32.762-12.486-45.255 0.015s-12.486 32.762 0.015 45.255c48.375 48.342 76.075 113.989 76.075 184.176 0 75.021-31.679 144.776-86.048 193.627-13.146 11.812-14.227 32.044-2.416 45.19s32.044 14.227 45.19 2.416z' /%3E%3C/svg%3E\")}.playkit-icon-volume-wave{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M667.436 743.221c67.761-60.884 107.273-147.888 107.273-241.233 0-87.318-34.552-169.203-94.836-229.446-12.501-12.493-32.762-12.486-45.255 0.015s-12.486 32.762 0.015 45.255c48.375 48.342 76.075 113.989 76.075 184.176 0 75.021-31.679 144.776-86.048 193.627-13.146 11.812-14.227 32.044-2.416 45.19s32.044 14.227 45.19 2.416z'/%3E%3C/svg%3E\")}.playkit-icon-volume-mute{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M768 466.745l-67.986-67.986c-12.213-12.213-32.654-12.393-45.151 0.104-12.584 12.584-12.543 32.711-0.104 45.151l67.986 67.986-67.986 67.986c-12.213 12.213-12.393 32.654 0.104 45.151 12.584 12.584 32.711 12.543 45.151 0.104l67.986-67.986 67.986 67.986c12.213 12.213 32.654 12.393 45.151-0.104 12.584-12.584 12.543-32.711 0.104-45.151l-67.986-67.986 67.986-67.986c12.213-12.213 12.393-32.654-0.104-45.151-12.584-12.584-32.711-12.543-45.151-0.104l-67.986 67.986z' /%3E%3C/svg%3E\")}.playkit-icon-close{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M573.162 512l214.269-214.269c16.772-16.772 16.688-44.071-0.202-60.96-17.007-17.007-44.182-16.98-60.96-0.202l-214.269 214.269-214.269-214.269c-16.772-16.772-44.071-16.688-60.96 0.202-17.007 17.007-16.98 44.182-0.202 60.96l214.269 214.269-214.269 214.269c-16.772 16.772-16.688 44.071 0.202 60.96 17.007 17.007 44.182 16.98 60.96 0.202l214.269-214.269 214.269 214.269c16.772 16.772 44.071 16.688 60.96-0.202 17.007-17.007 16.98-44.182 0.202-60.96l-214.269-214.269z' /%3E%3C/svg%3E\")}.playkit-icon-share{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M318.641 446.219l236.155-142.257c-0.086-1.754-0.129-3.52-0.129-5.295 0-58.91 47.756-106.667 106.667-106.667s106.667 47.756 106.667 106.667c0 58.91-47.756 106.667-106.667 106.667-33.894 0-64.095-15.808-83.633-40.454l-236.467 142.445c-0.132-3.064-0.394-6.095-0.779-9.087l7.271-12.835-0.117 53.333-7.183-12.743c0.399-3.046 0.67-6.131 0.806-9.252l236.467 142.383c19.538-24.648 49.741-40.457 83.636-40.457 58.91 0 106.667 47.756 106.667 106.667s-47.756 106.667-106.667 106.667c-58.91 0-106.667-47.756-106.667-106.667 0-1.775 0.043-3.539 0.129-5.293l-236.19-142.216c-19.528 24.867-49.868 40.841-83.939 40.841-58.91 0-106.667-47.756-106.667-106.667s47.756-106.667 106.667-106.667c34.091 0 64.447 15.993 83.974 40.886zM234.667 554.667c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667zM661.333 341.333c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667zM661.333 768c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667z' /%3E%3C/svg%3E\")}.playkit-icon-settings{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M803.451 546.033c2.552-22.107 2.552-44.408 0.246-64.81-1.084-6.208-6.499-10.721-12.535-10.671-30.286 0.533-57.727-17.773-68.866-45.941s-3.64-60.291 18.795-80.593c3.935-3.569 4.416-9.583 0.92-13.959-13.595-17.35-29.146-33.073-46.311-46.83-4.23-3.38-10.359-2.886-14.783 1.966-14.421 14.721-34.212 22.938-54.434 22.761-9.009 0.041-17.942-1.652-26.865-5.212-28.414-11.992-46.226-40.546-44.49-71.542 0.335-5.319-3.547-9.972-8.785-10.588-21.926-2.538-44.068-2.595-65.961-0.176-5.349 0.6-9.341 5.207-9.175 10.514 1.027 30.384-16.802 58.251-45.764 70.431-8.238 3.138-16.993 4.701-25.207 4.609-20.599 0.206-40.395-7.982-55.482-23.363-2.014-2.187-4.849-3.435-7.553-3.445-2.441 0.015-4.811 0.83-6.513 2.139-17.541 13.798-33.455 29.547-47.262 46.729-3.418 4.337-2.922 10.575 0.97 14.162 22.816 20.692 30.19 53.479 17.807 83.351-13.035 27.396-41.135 44.394-71.446 43.222-5.112-0.197-9.499 3.606-10.086 9.179-2.673 22.023-2.673 44.289-0.212 64.867 1.080 6.27 6.559 10.824 13.309 10.737l2.225 0.006c28.935 0.604 54.726 18.391 65.634 45.374 11.22 28.205 3.921 60.407-18.565 81.204-3.866 3.509-4.341 9.418-0.895 13.742 13.545 17.354 29.027 33.106 46.042 46.867 4.303 3.449 10.547 2.954 14.986-1.907 14.414-14.76 34.226-23.001 54.43-22.82 9.070-0.052 18.063 1.668 27.041 5.299 28.19 12.071 45.891 40.41 44.347 71.468-0.342 5.312 3.536 9.962 8.802 10.578 21.915 2.548 44.049 2.605 65.929 0.176 5.364-0.604 9.364-5.227 9.191-10.598-0.997-30.358 16.84-58.183 45.452-70.201 8.263-3.256 17.070-4.908 25.521-4.865 20.676-0.206 40.533 8.070 55.398 23.38 2.039 2.195 4.898 3.446 7.673 3.455 2.268-0.011 4.468-0.776 6.321-2.228 17.625-13.724 33.599-29.444 47.415-46.611 3.426-4.348 2.928-10.6-0.863-14.097-22.358-20.082-30.057-51.85-19.372-79.939s37.55-46.71 67.745-46.857h5.229c5.12-0.026 9.413-3.875 9.996-8.962zM861.733 552.735c-3.961 34.572-33.157 60.748-68.129 60.926h-5.235c-5.803 0.028-10.991 3.624-13.054 9.048s-0.577 11.558 4.020 15.69c26.602 24.519 29.853 65.381 7.275 94.034-16.847 20.934-36.063 39.845-57.197 56.302-12.034 9.427-26.861 14.584-42.368 14.658-19.254-0.051-37.623-8.090-50.269-21.718-3.221-3.315-7.66-5.165-12.712-5.118-1.425-0.007-2.839 0.258-3.554 0.532-5.581 2.346-9.136 7.892-8.937 13.966 1.152 35.958-25.509 66.771-61.307 70.804-26.332 2.923-52.909 2.854-79.246-0.208-36.286-4.245-62.897-36.157-60.576-72.186 0.304-6.123-3.235-11.788-8.302-13.964-1.328-0.536-2.748-0.808-4.606-0.8-4.651-0.041-9.118 1.817-11.635 4.367-24.544 27.036-65.886 30.311-94.481 7.394-20.587-16.65-39.207-35.595-55.308-56.226-22.552-28.277-19.261-69.208 7.317-93.334 4.474-4.138 5.939-10.604 3.748-16.115-2.052-5.076-6.932-8.442-11.794-8.55-36.436 0.464-66.759-24.741-72.949-60.89-3.243-26.718-3.243-53.731-0.055-79.964 3.744-35.827 34.642-62.605 70.642-61.219 6.877 0.266 13.251-3.59 15.584-8.401 2.309-5.59 0.861-12.028-3.789-16.247-26.603-24.51-29.856-65.368-7.293-93.994 16.767-20.868 35.856-39.76 57.129-56.491 12.099-9.322 26.921-14.42 42.463-14.513 19.308 0.059 37.717 8.166 50.145 21.684 3.263 3.322 7.737 5.172 12.994 5.126 1.471 0.015 2.933-0.245 3.363-0.39 5.601-2.359 9.165-7.93 8.957-14.077-1.126-35.941 25.542-66.721 61.322-70.731 26.322-2.909 52.889-2.84 79.251 0.212 36.244 4.265 62.828 36.125 60.546 72.343-0.339 6.047 3.159 11.654 8.186 13.782 1.381 0.55 2.855 0.829 4.726 0.823 4.663 0.040 9.142-1.819 11.615-4.312 24.439-26.99 65.656-30.312 94.137-7.557 20.721 16.607 39.456 35.549 55.655 56.225 22.667 28.35 19.38 69.439-7.531 93.846-4.33 3.918-5.776 10.112-3.628 15.542s7.438 8.96 13.543 8.854c34.999-0.298 65.076 24.766 71.337 60.925 3.065 26.552 3.065 53.368 0 79.92zM511.956 589.951c43.215-0.108 78.137-35.17 78.072-78.385 0-31.732-19.132-60.334-48.461-72.448s-63.068-5.35-85.461 17.133c-22.393 22.483-29.022 56.249-16.791 85.529s40.909 48.298 72.641 48.171zM512.146 648.617c-55.438 0.221-105.58-33.029-126.965-84.224s-9.796-110.233 29.358-149.543c39.153-39.31 98.144-51.136 149.424-29.956s84.731 71.189 84.732 126.627c0.114 75.549-60.999 136.907-136.548 137.096z' /%3E%3C/svg%3E\")}.playkit-icon-check{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M342.481 563.894c-12.577-12.416-32.838-12.285-45.254 0.292s-12.285 32.838 0.292 45.254l118.857 117.333c13.275 13.105 34.901 12.123 46.933-2.131l297.143-352c11.4-13.505 9.694-33.694-3.811-45.094s-33.694-9.694-45.094 3.811l-274.828 325.566-94.238-93.030z' /%3E%3C/svg%3E\")}.playkit-icon-language{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M512 800c159.058 0 288-128.942 288-288s-128.942-288-288-288c-159.058 0-288 128.942-288 288s128.942 288 288 288zM512 864c-194.404 0-352-157.596-352-352s157.596-352 352-352c194.404 0 352 157.596 352 352s-157.596 352-352 352z' /%3E%3Cpath fill='%23fff' d='M441.231 173.324c-76.632 84.62-121.231 207.208-121.231 338.676 0 134.304 46.556 259.282 126.083 343.936l46.646-43.82c-68.041-72.429-108.728-181.651-108.728-300.116 0-116.001 39.001-223.203 104.669-295.716l-47.438-42.96z' /%3E%3Cpath fill='%23fff' d='M584.297 173.324c76.632 84.62 121.231 207.208 121.231 338.676 0 134.304-46.556 259.282-126.083 343.936l-46.646-43.82c68.041-72.429 108.728-181.651 108.728-300.116 0-116.001-39.001-223.203-104.669-295.716l47.438-42.96z' /%3E%3Cpath fill='%23fff' d='M840.432 419.786c-81.65-22.637-200.551-35.786-328.432-35.786-128.056 0-247.103 13.185-328.758 35.876l17.136 61.663c75.47-20.972 188.938-33.539 311.622-33.539 122.521 0 235.854 12.533 311.334 33.459l17.099-61.674z' /%3E%3Cpath fill='%23fff' d='M840.432 605.754c-81.65 22.637-200.551 35.786-328.432 35.786-128.056 0-247.103-13.185-328.758-35.876l17.136-61.663c75.47 20.972 188.938 33.539 311.622 33.539 122.521 0 235.854-12.533 311.334-33.459l17.099 61.674z' /%3E%3Cpath fill='%23fff' d='M480 192h64v640h-64v-640z' /%3E%3C/svg%3E\")}.playkit-icon-quality{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M159.904 192h288.234c17.277 0 31.862 14.323 31.862 31.992 0 17.792-14.261 31.993-31.853 31.994l-288.147 0.014v544.174c-0.017-0.18 704-0.174 704-0.174v-128.006c0-17.795 14.327-31.994 32-31.994 17.796 0 32 14.34 32 32.029v128.145c0 35.25-28.639 63.826-63.904 63.826h-704.192c-35.293 0-63.904-28.875-63.904-63.826v-544.348c0-35.25 28.639-63.826 63.904-63.826zM501.818 378.182c108.449 0 196.364-87.915 196.364-196.364 0-29.091 43.636-29.091 43.636 0 0 108.449 87.915 196.364 196.364 196.364 29.091 0 29.091 43.636 0 43.636-108.449 0-196.364 87.915-196.364 196.364 0 29.091-43.636 29.091-43.636 0 0-108.449-87.915-196.364-196.364-196.364-29.091 0-29.091-43.636 0-43.636z' /%3E%3C/svg%3E\")}.playkit-icon-captions{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M160 771.213c-0.017-0.172 704-0.166 704-0.166v-518.261c0.017 0.172-704 0.166-704 0.166v518.261zM96 252.787c0-33.572 28.639-60.787 63.904-60.787h704.192c35.293 0 63.904 27.5 63.904 60.787v518.427c0 33.572-28.639 60.787-63.904 60.787h-704.192c-35.293 0-63.904-27.5-63.904-60.787v-518.427z' /%3E%3Cpath fill='%23fff' d='M490.583 568.655c0 7.729-2.311 15.987-6.933 24.777s-11.668 17.162-21.14 25.118c-9.471 7.956-21.405 14.358-35.801 19.208s-30.611 7.274-48.644 7.274c-38.34 0-68.268-11.176-89.787-33.528s-32.278-52.319-32.278-89.901c0-25.459 4.925-47.962 14.775-67.511s24.095-34.665 42.734-45.348c18.639-10.684 40.916-16.025 66.829-16.025 16.063 0 30.8 2.349 44.212 7.047s24.777 10.759 34.096 18.185c9.32 7.425 16.442 15.343 21.367 23.754s7.388 16.253 7.388 23.527c0 7.425-2.766 13.714-8.297 18.867s-12.237 7.729-20.117 7.729c-5.152 0-9.433-1.326-12.843-3.978s-7.236-6.933-11.479-12.843c-7.577-11.517-15.495-20.155-23.754-25.913s-18.753-8.638-31.482-8.638c-18.336 0-33.111 7.16-44.325 21.481s-16.821 33.907-16.821 58.759c0 11.669 1.44 22.39 4.319 32.164s7.047 18.109 12.502 25.004c5.455 6.895 12.047 12.123 19.776 15.684s16.215 5.342 25.459 5.342c12.426 0 23.072-2.879 31.937-8.638s16.707-14.548 23.527-26.368c3.789-6.971 7.88-12.426 12.275-16.366s9.774-5.91 16.139-5.91c7.577 0 13.866 2.879 18.867 8.638s7.501 11.896 7.501 18.412zM767.219 568.655c0 7.729-2.311 15.987-6.933 24.777s-11.668 17.162-21.14 25.118c-9.471 7.956-21.405 14.358-35.801 19.208s-30.611 7.274-48.644 7.274c-38.34 0-68.268-11.176-89.787-33.528s-32.278-52.319-32.278-89.901c0-25.459 4.925-47.962 14.775-67.511s24.095-34.665 42.734-45.348c18.639-10.684 40.916-16.025 66.829-16.025 16.063 0 30.8 2.349 44.212 7.047s24.777 10.759 34.096 18.185c9.32 7.425 16.442 15.343 21.367 23.754s7.388 16.253 7.388 23.527c0 7.425-2.766 13.714-8.297 18.867s-12.237 7.729-20.117 7.729c-5.152 0-9.433-1.326-12.843-3.978s-7.236-6.933-11.479-12.843c-7.577-11.517-15.495-20.155-23.754-25.913s-18.753-8.638-31.482-8.638c-18.336 0-33.111 7.16-44.325 21.481s-16.821 33.907-16.821 58.759c0 11.669 1.44 22.39 4.319 32.164s7.047 18.109 12.502 25.004c5.455 6.895 12.047 12.123 19.776 15.684s16.215 5.342 25.459 5.342c12.426 0 23.072-2.879 31.937-8.638s16.707-14.548 23.527-26.368c3.789-6.971 7.88-12.426 12.275-16.366s9.774-5.91 16.139-5.91c7.577 0 13.866 2.879 18.867 8.638s7.501 11.896 7.501 18.412z' /%3E%3C/svg%3E\")}.playkit-icon-speed{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M512 832c35.346 0 64-28.654 64-64s-28.654-64-64-64c-35.346 0-64 28.654-64 64s28.654 64 64 64zM480.239 643.971c-0.158-1.272-0.239-2.566-0.239-3.876v-192.19c0-17.621 14.204-31.905 32-31.905 17.673 0 32 14.497 32 31.905v192.19c0 1.313-0.079 2.607-0.232 3.878 55.325 14.128 96.232 64.301 96.232 124.027 0 70.692-57.308 128-128 128s-128-57.308-128-128c0-59.729 40.91-109.903 96.239-124.029zM928 576c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-194.404-157.596-352-352-352s-352 157.596-352 352c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-229.75 186.25-416 416-416s416 186.25 416 416z' /%3E%3C/svg%3E\")}.playkit-icon-speed-down{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M512 800c35.346 0 64-28.654 64-64s-28.654-64-64-64c-35.346 0-64 28.654-64 64s28.654 64 64 64zM401.852 670.758c-1.056-0.826-2.077-1.728-3.055-2.706l-113.005-113.005c-12.533-12.533-12.65-32.737-0.066-45.321 12.497-12.497 32.536-12.719 45.321 0.066l113.005 113.005c0.976 0.976 1.876 1.998 2.701 3.059 19.106-11.343 41.416-17.855 65.248-17.855 70.692 0 128 57.308 128 128s-57.308 128-128 128c-70.692 0-128-57.308-128-128 0-23.829 6.511-46.137 17.852-65.242zM928 576c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-194.404-157.596-352-352-352s-352 157.596-352 352c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-229.75 186.25-416 416-416s416 186.25 416 416z'/%3E%3C/svg%3E\")}.playkit-icon-speed-up{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M512 800c35.346 0 64-28.654 64-64s-28.654-64-64-64c-35.346 0-64 28.654-64 64s28.654 64 64 64zM546.516 612.708c0.524-1.23 1.129-2.446 1.819-3.64l79.906-138.402c8.862-15.35 28.348-20.692 43.76-11.794 15.305 8.837 20.707 28.135 11.666 43.794l-79.906 138.402c-0.693 1.201-1.451 2.34-2.268 3.416 23.761 23.238 38.508 55.655 38.508 91.516 0 70.692-57.308 128-128 128s-128-57.308-128-128c0-70.692 57.308-128 128-128 11.959 0 23.535 1.64 34.516 4.708zM928 576c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-194.404-157.596-352-352-352s-352 157.596-352 352c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-229.75 186.25-416 416-416s416 186.25 416 416z'/%3E%3C/svg%3E\")}.playkit-icon-audio{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M768 625.124v-354.531l-352 135.385v330.022c0 70.692-57.308 128-128 128s-128-57.308-128-128c0-70.692 57.308-128 128-128 23.314 0 45.173 6.233 64 17.124v-241.124c0-13.241 8.155-25.114 20.513-29.867l416-160c20.96-8.062 43.487 7.41 43.487 29.867v512c0 70.692-57.308 128-128 128s-128-57.308-128-128c0-70.692 57.308-128 128-128 23.314 0 45.173 6.233 64 17.124zM288 800c35.346 0 64-28.654 64-64s-28.654-64-64-64c-35.346 0-64 28.654-64 64s28.654 64 64 64zM704 800c35.346 0 64-28.654 64-64s-28.654-64-64-64c-35.346 0-64 28.654-64 64s28.654 64 64 64z' /%3E%3C/svg%3E\")}.playkit-icon-copy{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M703.727 320c35.497 0 64.273 28.482 64.273 64.003v351.993c0 35.348-28.862 64.003-64.273 64.003h-191.454c-35.496 0-64.271-28.48-64.273-64.001l255.727 0.001v-352c0 0-28.356 0.147-63.727 0.001v-63.912l63.727-0.088zM256 288.187c0-35.45 28.398-64.187 63.988-64.187h192.025c35.339 0 63.988 28.706 63.988 64.187v319.625c0 35.45-28.398 64.187-63.988 64.187h-192.025c-35.339 0-63.988-28.706-63.988-64.187v-319.625zM320 288v320h192v-320h-192z' /%3E%3C/svg%3E\")}.playkit-icon-facebook{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M432 405.333h-80v106.667h80v320h133.333v-320h97.12l9.547-106.667h-106.667v-44.453c0-25.467 5.12-35.547 29.733-35.547h76.933v-133.333h-101.547c-95.893 0-138.453 42.213-138.453 123.067v90.267z' /%3E%3C/svg%3E\")}.playkit-icon-twitter{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M832 316.614c-23.547 10.29-48.853 17.221-75.413 20.345 27.12-15.987 47.947-41.319 57.733-71.508-25.36 14.806-53.467 25.568-83.387 31.37-23.92-25.122-58.080-40.82-95.84-40.82-84.773 0-147.067 77.861-127.92 158.687-109.093-5.381-205.84-56.833-270.613-135.035-34.4 58.094-17.84 134.090 40.613 172.574-21.493-0.683-41.76-6.484-59.44-16.171-1.44 59.879 42.16 115.898 105.307 128.368-18.48 4.935-38.72 6.090-59.307 2.205 16.693 51.347 65.173 88.702 122.667 89.752-55.2 42.605-124.747 61.637-194.4 53.552 58.107 36.673 127.147 58.067 201.28 58.067 243.787 0 381.52-202.684 373.2-384.473 25.653-18.244 47.92-41.004 65.52-66.914v0z' /%3E%3C/svg%3E\")}.playkit-icon-linkedin{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M324.8 290.087c0 36.506-29.6 66.087-66.133 66.087s-66.133-29.581-66.133-66.087c0-36.48 29.6-66.087 66.133-66.087s66.133 29.607 66.133 66.087zM325.333 409.043h-133.333v422.957h133.333v-422.957zM538.187 409.043h-132.48v422.957h132.507v-222.026c0-123.45 160.773-133.549 160.773 0v222.026h133.013v-267.811c0-208.306-237.92-200.719-293.813-98.179v-56.967z' /%3E%3C/svg%3E\")}.playkit-icon-email{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M256 768c-35.346 0-64-28.654-64-64v-352c0-35.346 28.654-64 64-64h512c35.346 0 64 28.654 64 64v352c0 35.346-28.654 64-64 64h-512zM512 467.488l147.52-115.488h-295.040l147.52 115.488zM748.48 352l-211.2 179.2c-0.713 1.308-1.572 2.532-2.56 3.648-12.707 12.158-32.733 12.158-45.44 0-0.988-1.116-1.847-2.34-2.56-3.648l-211.2-179.2h-19.52v352h512v-352h-19.52z' /%3E%3C/svg%3E\")}.playkit-icon-embed{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M377.989 579.335c12.669 12.904 12.669 33.777 0 46.68-12.733 12.969-33.427 12.969-46.16 0l-104.727-106.667c-12.669-12.904-12.669-33.777 0-46.68l104.727-106.667c12.733-12.969 33.427-12.969 46.16 0 12.669 12.904 12.669 33.777 0 46.68l-81.812 83.327 81.812 83.327zM646.011 412.68c-12.669-12.904-12.669-33.777 0-46.68 12.733-12.969 33.427-12.969 46.16 0l104.727 106.667c12.669 12.904 12.669 33.777 0 46.68l-104.727 106.667c-12.733 12.969-33.427 12.969-46.16 0-12.669-12.904-12.669-33.777 0-46.68l81.812-83.327-81.812-83.327zM572.293 250.6c17.455 4.445 28.025 22.388 23.686 40.066l-104.727 426.669c-4.349 17.719-22.048 28.535-39.545 24.079-17.455-4.445-28.025-22.388-23.686-40.066l104.727-426.669c4.349-17.719 22.048-28.535 39.545-24.079z' /%3E%3C/svg%3E\")}.playkit-icon-link{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M355.028 445.537c12.497 12.497 12.497 32.758 0 45.255s-32.758 12.497-45.255 0l-24.141-24.141c-49.92-49.92-49.832-130.999 0.094-180.925 49.984-49.984 130.995-50.025 180.955-0.064l113.266 113.266c49.964 49.964 49.935 130.955-0.064 180.955-12.497 12.497-32.758 12.497-45.255 0s-12.497-32.758 0-45.255c25.013-25.013 25.027-65.482 0.064-90.445l-113.266-113.266c-24.957-24.957-65.445-24.936-90.445 0.064-24.955 24.955-24.998 65.511-0.094 90.416l24.141 24.141zM668.972 578.463c-12.497-12.497-12.497-32.758 0-45.255s32.758-12.497 45.255 0l24.141 24.141c49.92 49.92 49.832 130.999-0.094 180.925-49.984 49.984-130.995 50.025-180.955 0.064l-113.266-113.266c-49.964-49.964-49.935-130.955 0.064-180.955 12.497-12.497 32.758-12.497 45.255 0s12.497 32.758 0 45.255c-25.013 25.013-25.027 65.482-0.064 90.445l113.266 113.266c24.957 24.957 65.445 24.936 90.445-0.064 24.955-24.955 24.998-65.511 0.094-90.416l-24.141-24.141z' /%3E%3C/svg%3E\")}.playkit-icon-arrow-down{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M301.255 338.745c-24.994-24.994-65.516-24.994-90.51 0s-24.994 65.516 0 90.51l256 256c24.994 24.994 65.516 24.994 90.51 0l256-256c24.994-24.994 24.994-65.516 0-90.51s-65.516-24.994-90.51 0l-210.745 210.745-210.745-210.745z' /%3E%3C/svg%3E\")}.playkit-icon-start-over{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M255.271 339.053c94.182-126.513 270.298-165.203 410.222-84.418 150.758 87.040 202.411 279.813 115.371 430.571s-279.813 202.411-430.571 115.371c-61.424-35.463-107.948-89.4-134.169-153.673-7.677-18.818-29.156-27.85-47.974-20.173s-27.85 29.156-20.173 47.974c32.339 79.269 89.818 145.906 165.517 189.611 185.96 107.364 423.747 43.649 531.111-142.311s43.649-423.747-142.311-531.111c-172.433-99.554-389.428-52.014-505.682 103.69l-27.226-78.49c-6.66-19.202-27.626-29.368-46.828-22.708s-29.368 27.626-22.708 46.828l52.434 151.164c5.36 15.452 20.275 25.513 36.61 24.694l159.799-8.011c20.299-1.018 35.929-18.298 34.911-38.596s-18.298-35.929-38.596-34.911l-89.738 4.499z' /%3E%3C/svg%3E\")}.playkit-icon-seek-end{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M742.494 323.053c-94.182-126.513-270.298-165.203-410.222-84.418-150.758 87.040-202.411 279.813-115.371 430.571s279.813 202.411 430.571 115.371c61.424-35.463 107.948-89.4 134.169-153.673 7.677-18.818 29.156-27.85 47.974-20.173s27.85 29.156 20.173 47.974c-32.339 79.269-89.818 145.906-165.517 189.611-185.96 107.364-423.747 43.649-531.111-142.311s-43.649-423.747 142.311-531.111c172.433-99.554 389.428-52.014 505.682 103.69l27.226-78.49c6.66-19.202 27.626-29.368 46.828-22.708s29.368 27.626 22.708 46.828l-52.434 151.164c-5.36 15.452-20.275 25.513-36.61 24.694l-159.799-8.011c-20.299-1.018-35.929-18.298-34.911-38.596s18.298-35.929 38.596-34.911l89.738 4.499z'/%3E%3C/svg%3E\")}.playkit-icon-rewind{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' opacity='0.5' d='M258.471 323.053c94.182-126.513 270.298-165.203 410.222-84.418 150.758 87.040 202.411 279.813 115.371 430.571s-279.813 202.411-430.571 115.371c-61.424-35.463-107.948-89.4-134.169-153.673-7.677-18.818-29.156-27.85-47.974-20.173s-27.85 29.156-20.173 47.974c32.339 79.269 89.818 145.906 165.517 189.611 185.96 107.364 423.747 43.649 531.111-142.311s43.649-423.747-142.311-531.111c-172.433-99.554-389.428-52.014-505.682 103.69l-27.226-78.49c-6.66-19.202-27.626-29.368-46.828-22.708s-29.368 27.626-22.708 46.828l52.434 151.164c5.36 15.452 20.275 25.513 36.61 24.694l159.799-8.011c20.299-1.018 35.929-18.298 34.911-38.596s-18.298-35.929-38.596-34.911l-89.738 4.499z'%3E%3C/path%3E%3Cpath fill='%23fff' d='M816.068 431.974c-20.553-78.699-71.369-149.456-147.375-193.338-139.923-80.785-316.040-42.095-410.222 84.418l89.738-4.499c20.299-1.018 37.579 14.613 38.596 34.911s-14.613 37.579-34.911 38.596l-159.799 8.011c-16.335 0.819-31.25-9.242-36.61-24.694l-52.434-151.164c-6.66-19.202 3.506-40.167 22.708-46.828s40.167 3.506 46.828 22.708l27.226 78.49c116.254-155.703 333.248-203.244 505.682-103.69 91.184 52.645 152.976 136.648 179.618 230.523l-69.044 26.555z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-rewind-10{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M258.471 323.053c94.182-126.513 270.298-165.203 410.222-84.418 150.758 87.040 202.411 279.813 115.371 430.571s-279.813 202.411-430.571 115.371c-61.424-35.463-107.948-89.4-134.169-153.673-7.677-18.818-29.156-27.85-47.974-20.173s-27.85 29.156-20.173 47.974c32.339 79.269 89.818 145.906 165.517 189.611 185.96 107.364 423.747 43.649 531.111-142.311s43.649-423.747-142.311-531.111c-172.433-99.554-389.428-52.014-505.682 103.69l-27.226-78.49c-6.66-19.202-27.626-29.368-46.828-22.708s-29.368 27.626-22.708 46.828l52.434 151.164c5.36 15.452 20.275 25.513 36.61 24.694l159.799-8.011c20.299-1.018 35.929-18.298 34.911-38.596s-18.298-35.929-38.596-34.911l-89.738 4.499z'%3E%3C/path%3E%3Cpath fill='%23fff' d='M413.327 636.083h67.358v-252.083h-48.527c-2.173 7.358-4.949 13.589-8.329 18.693s-7.726 9.139-13.037 12.106c-5.311 2.967-11.709 5.103-19.193 6.409s-16.417 1.958-26.798 1.958v41.302h48.527v171.616zM596.807 554.192c0 17.803 1.569 29.849 4.708 36.139s8.208 9.435 15.21 9.435c7.001 0 12.071-3.145 15.21-9.435s4.708-18.336 4.708-36.139v-83.316c0-17.803-1.569-29.849-4.708-36.139s-8.208-9.435-15.21-9.435c-7.001 0-12.071 3.145-15.21 9.435s-4.708 18.336-4.708 36.139v83.316zM529.449 512.534c0-25.398 1.75-46.405 5.251-63.021s8.812-29.789 15.934-39.522c7.122-9.732 16.176-16.497 27.16-20.295s23.962-5.697 38.93-5.697c14.969 0 27.945 1.899 38.93 5.697s20.038 10.563 27.16 20.295c7.122 9.732 12.433 22.906 15.934 39.522s5.251 37.622 5.251 63.021c0 25.636-1.75 46.702-5.251 63.199s-8.812 29.552-15.934 39.166c-7.122 9.613-16.176 16.2-27.16 19.761s-23.962 5.341-38.93 5.341c-14.969 0-27.945-1.78-38.93-5.341s-20.038-10.147-27.16-19.761c-7.122-9.613-12.433-22.668-15.934-39.166s-5.251-37.563-5.251-63.199z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-forward{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' opacity='0.5' d='M765.529 323.053c-94.182-126.513-270.298-165.203-410.222-84.418-150.758 87.040-202.411 279.813-115.371 430.571s279.813 202.411 430.571 115.371c61.424-35.463 107.948-89.4 134.169-153.673 7.677-18.818 29.156-27.85 47.974-20.173s27.85 29.156 20.173 47.974c-32.339 79.269-89.818 145.906-165.517 189.611-185.96 107.364-423.747 43.649-531.111-142.311s-43.649-423.747 142.311-531.111c172.433-99.554 389.428-52.014 505.682 103.69l27.226-78.49c6.66-19.202 27.626-29.368 46.828-22.708s29.368 27.626 22.708 46.828l-52.434 151.164c-5.36 15.452-20.275 25.513-36.61 24.694l-159.799-8.011c-20.299-1.018-35.929-18.298-34.911-38.596s18.298-35.929 38.596-34.911l89.738 4.499z'%3E%3C/path%3E%3Cpath fill='%23fff' d='M207.932 431.974c20.553-78.699 71.369-149.456 147.375-193.338 139.923-80.785 316.040-42.095 410.222 84.418l-89.738-4.499c-20.299-1.018-37.579 14.613-38.596 34.911s14.613 37.579 34.911 38.596l159.799 8.011c16.335 0.819 31.25-9.242 36.61-24.694l52.434-151.164c6.66-19.202-3.506-40.167-22.708-46.828s-40.167 3.506-46.828 22.708l-27.226 78.49c-116.254-155.703-333.248-203.244-505.682-103.69-91.184 52.645-152.976 136.648-179.618 230.523l69.044 26.555z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-forward-10{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M765.529 323.053c-94.182-126.513-270.298-165.203-410.222-84.418-150.758 87.040-202.411 279.813-115.371 430.571s279.813 202.411 430.571 115.371c61.424-35.463 107.948-89.4 134.169-153.673 7.677-18.818 29.156-27.85 47.974-20.173s27.85 29.156 20.173 47.974c-32.339 79.269-89.818 145.906-165.517 189.611-185.96 107.364-423.747 43.649-531.111-142.311s-43.649-423.747 142.311-531.111c172.433-99.554 389.428-52.014 505.682 103.69l27.226-78.49c6.66-19.202 27.626-29.368 46.828-22.708s29.368 27.626 22.708 46.828l-52.434 151.164c-5.36 15.452-20.275 25.513-36.61 24.694l-159.799-8.011c-20.299-1.018-35.929-18.298-34.911-38.596s18.298-35.929 38.596-34.911l89.738 4.499z'%3E%3C/path%3E%3Cpath fill='%23fff' d='M365.327 636.083h67.358v-252.083h-48.527c-2.173 7.358-4.949 13.589-8.329 18.693s-7.726 9.139-13.037 12.106c-5.311 2.967-11.709 5.103-19.193 6.409s-16.417 1.958-26.798 1.958v41.302h48.527v171.616zM548.807 554.192c0 17.803 1.569 29.849 4.708 36.139s8.208 9.435 15.21 9.435c7.001 0 12.071-3.145 15.21-9.435s4.708-18.336 4.708-36.139v-83.316c0-17.803-1.569-29.849-4.708-36.139s-8.208-9.435-15.21-9.435c-7.001 0-12.071 3.145-15.21 9.435s-4.708 18.336-4.708 36.139v83.316zM481.449 512.534c0-25.398 1.75-46.405 5.251-63.021s8.812-29.789 15.934-39.522c7.122-9.732 16.176-16.497 27.16-20.295s23.962-5.697 38.93-5.697c14.969 0 27.945 1.899 38.93 5.697s20.038 10.563 27.16 20.295c7.122 9.732 12.433 22.906 15.934 39.522s5.251 37.622 5.251 63.021c0 25.636-1.75 46.702-5.251 63.199s-8.812 29.552-15.934 39.166c-7.122 9.613-16.176 16.2-27.16 19.761s-23.962 5.341-38.93 5.341c-14.969 0-27.945-1.78-38.93-5.341s-20.038-10.147-27.16-19.761c-7.122-9.613-12.433-22.668-15.934-39.166s-5.251-37.563-5.251-63.199z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-vr-stereo{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M864 255.996c53.019 0 96 42.981 96 96v384.004c0 53.019-42.981 96-96 96h-219.764c-33.721 0-64.97-17.693-82.319-46.608l-49.917-83.195-49.917 83.195c-17.349 28.916-48.598 46.608-82.319 46.608h-219.764c-53.019 0-96-42.981-96-96v-384.003c0-53.019 42.981-96 96-96h704zM128 351.997v384.003c0 17.673 14.327 32 32 32h219.764c11.24 0 21.657-5.898 27.44-15.536l49.917-83.195c5.405-9.008 12.944-16.547 21.952-21.952 30.309-18.185 69.622-8.357 87.807 21.952l49.917 83.195c5.783 9.639 16.199 15.536 27.44 15.536h219.764c17.673 0 32-14.327 32-32v-384.004c0-17.673-14.327-32-32-32h-704c-17.673 0-32 14.327-32 32zM304 624c-44.183 0-80-35.817-80-80s35.817-80 80-80c44.183 0 80 35.817 80 80s-35.817 80-80 80zM720 624c-44.183 0-80-35.817-80-80s35.817-80 80-80c44.183 0 80 35.817 80 80s-35.817 80-80 80z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-vr-stereo-full{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%2301ACCD' d='M864 255.996c53.019 0 96 42.981 96 96v384.004c0 53.019-42.981 96-96 96h-219.764c-33.721 0-64.97-17.693-82.319-46.608l-49.917-83.195-49.917 83.195c-17.349 28.916-48.598 46.608-82.319 46.608h-219.764c-53.019 0-96-42.981-96-96v-384.003c0-53.019 42.981-96 96-96h704zM304 624c44.183 0 80-35.817 80-80s-35.817-80-80-80c-44.183 0-80 35.817-80 80s35.817 80 80 80zM720 624c44.183 0 80-35.817 80-80s-35.817-80-80-80c-44.183 0-80 35.817-80 80s35.817 80 80 80z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-chromecast{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M160 704v96h96c0-53.12-42.88-96-96-96zM160 576v64c88.32 0 160 71.68 160 160h64c0-123.84-100.16-224-224-224zM736 352h-448v52.16c126.72 40.96 226.88 141.12 267.84 267.84h180.16v-320zM160 448v64c159.040 0 288 128.96 288 288h64c0-194.56-157.76-352-352-352zM800 224h-576c-35.2 0-64 28.8-64 64v96h64v-96h576v448h-224v64h224c35.2 0 64-28.8 64-64v-448c0-35.2-28.8-64-64-64z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-chromecast-brand{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%2301accd' d='M160 704v96h96c0-53.12-42.88-96-96-96zM160 576v64c88.32 0 160 71.68 160 160h64c0-123.84-100.16-224-224-224zM736 352h-448v52.16c126.72 40.96 226.88 141.12 267.84 267.84h180.16v-320zM160 448v64c159.040 0 288 128.96 288 288h64c0-194.56-157.76-352-352-352zM800 224h-576c-35.2 0-64 28.8-64 64v96h64v-96h576v448h-224v64h224c35.2 0 64-28.8 64-64v-448c0-35.2-28.8-64-64-64z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-next{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M640 549.333l-264.982 154.573c-30.386 17.725-55.018 3.388-55.018-32.094v-319.625c0-35.45 24.605-49.835 55.018-32.094l264.982 154.573v-154.448c0-17.794 14.204-32.219 32-32.219 17.673 0 32 14.398 32 32.219v383.562c0 17.794-14.204 32.219-32 32.219-17.673 0-32-14.398-32-32.219v-154.448z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-prev{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M384 549.333l264.982 154.573c30.386 17.725 55.018 3.388 55.018-32.094v-319.625c0-35.45-24.605-49.835-55.018-32.094l-264.982 154.573v-154.448c0-17.794-14.204-32.219-32-32.219-17.673 0-32 14.398-32 32.219v383.562c0 17.794 14.204 32.219 32 32.219 17.673 0 32-14.398 32-32.219v-154.448z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-picture-in-picture-start{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M224 256c-17.673 0-32 14.327-32 32v448c0 17.673 14.327 32 32 32h576c17.673 0 32-14.327 32-32v-448c0-17.673-14.327-32-32-32h-576zM224 192h576c53.019 0 96 42.981 96 96v448c0 53.019-42.981 96-96 96h-576c-53.019 0-96-42.981-96-96v-448c0-53.019 42.981-96 96-96z'%3E%3C/path%3E%3Cpath fill='%23fff' d='M544 512h192c17.673 0 32 14.327 32 32v128c0 17.673-14.327 32-32 32h-192c-17.673 0-32-14.327-32-32v-128c0-17.673 14.327-32 32-32z'%3E%3C/path%3E%3C/svg%3E\")}.playkit-icon-picture-in-picture-stop{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%23fff' d='M800 192c51.126 0 92.917 39.965 95.837 90.359l0.163 5.641v448c0 51.126-39.965 92.917-90.359 95.837l-5.641 0.163h-576c-51.126 0-92.917-39.965-95.837-90.359l-0.163-5.641v-64c0-17.673 14.327-32 32-32 16.411 0 29.936 12.353 31.785 28.268l0.215 3.732v64c0 16.411 12.353 29.936 28.268 31.785l3.732 0.215h576c16.411 0 29.936-12.353 31.785-28.268l0.215-3.732v-448c0-16.411-12.353-29.936-28.268-31.785l-3.732-0.215h-192c-17.673 0-32-14.327-32-32 0-16.411 12.353-29.936 28.268-31.785l3.732-0.215h192z'%3E%3C/path%3E%3Cpath fill='%23fff' d='M416 192c17.673 0 32 14.327 32 32 0 16.411-12.353 29.936-28.268 31.785l-3.732 0.215-178.752-0.032 202.711 202.736c12.497 12.497 12.497 32.758 0 45.255-11.535 11.535-29.687 12.423-42.24 2.662l-3.015-2.662-202.704-202.679v178.72c0 16.411-12.353 29.936-28.268 31.785l-3.732 0.215c-16.411 0-29.936-12.353-31.785-28.268l-0.215-3.732v-256l0.005-0.588c0.014-0.757 0.054-1.514 0.122-2.268l-0.127 2.856c0-1.62 0.12-3.212 0.353-4.767 0.083-0.544 0.182-1.101 0.295-1.656 0.141-0.705 0.307-1.399 0.495-2.084 0.14-0.5 0.288-0.992 0.449-1.482 0.204-0.629 0.434-1.262 0.684-1.885 0.227-0.568 0.466-1.121 0.722-1.669 0.311-0.661 0.644-1.314 0.998-1.954 0.212-0.388 0.439-0.779 0.676-1.166 0.503-0.818 1.040-1.614 1.61-2.382 0.174-0.238 0.351-0.47 0.532-0.7 1.588-2.021 3.42-3.854 5.45-5.446l-2.891 2.563c1.133-1.133 2.329-2.163 3.578-3.090 0.774-0.571 1.569-1.108 2.389-1.609 0.386-0.239 0.777-0.466 1.171-0.685 0.633-0.348 1.285-0.681 1.951-0.993 0.544-0.255 1.098-0.495 1.656-0.718 0.632-0.253 1.265-0.483 1.907-0.694 0.476-0.154 0.969-0.302 1.464-0.438 0.69-0.192 1.384-0.359 2.086-0.502 0.557-0.111 1.115-0.209 1.674-0.293 0.327-0.051 0.672-0.097 1.019-0.137l0.876-0.088c0.755-0.067 1.511-0.108 2.268-0.122l0.588-0.005h256z'%3E%3C/path%3E%3C/svg%3E\")}@keyframes playkit-openDropmenu{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.playkit-dropdown{position:relative;font-size:15px}.playkit-dropdown.playkit-active .playkit-dropdown-menu{display:block;opacity:1}.playkit-dropdown.playkit-active .playkit-dropdown-button .playkit-icon-arrow-down{transform:rotate(180deg)}.playkit-dropdown .playkit-dropdown-button{font-weight:bold;line-height:18px;color:#fff;cursor:pointer;padding-left:20px}.playkit-dropdown .playkit-dropdown-button .playkit-icon{width:16px;height:16px;vertical-align:middle;margin-left:6px;transition:150ms transform;will-change:transform}.playkit-dropdown-menu{display:block;opacity:1;position:absolute;background-color:#333333;box-shadow:0 2px 8px 0 rgba(0,0,0,0.3);border-radius:4px;padding:6px 0;z-index:5;animation:playkit-openDropmenu 100ms ease-out forwards;max-height:220px;overflow-y:auto;font-size:15px;text-align:left}.playkit-dropdown-menu.playkit-top{margin-bottom:10px;bottom:100%}.playkit-dropdown-menu.playkit-bottom{margin-top:10px;top:100%}.playkit-dropdown-menu.playkit-right{left:0}.playkit-dropdown-menu.playkit-left{right:0}.playkit-dropdown-menu.playkit-stick-bottom{bottom:-95px;margin:5px 0}.playkit-dropdown-menu .playkit-dropdown-menu-item{padding:2px 10px 2px 16px;white-space:nowrap;min-height:30px;cursor:pointer}.playkit-dropdown-menu .playkit-dropdown-menu-item:hover{color:#fff}.playkit-dropdown-menu .playkit-dropdown-menu-item.playkit-active{color:#01accd}.playkit-dropdown-menu .playkit-dropdown-menu-item.playkit-active .playkit-icon-check{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 1024 1024' width='36' height='36'%3E%3Cpath fill='%2301accd' d='M342.481 563.894c-12.577-12.416-32.838-12.285-45.254 0.292s-12.285 32.838 0.292 45.254l118.857 117.333c13.275 13.105 34.901 12.123 46.933-2.131l297.143-352c11.4-13.505 9.694-33.694-3.811-45.094s-33.694-9.694-45.094 3.811l-274.828 325.566-94.238-93.030z' /%3E%3C/svg%3E\")}.playkit-dropdown-menu .playkit-dropdown-menu-item.playkit-active .playkit-menu-icon-container{opacity:1}.playkit-dropdown-menu .playkit-dropdown-menu-item .playkit-icon-check{display:inline-block;margin-left:16px;vertical-align:middle;width:24px;height:24px}.playkit-dropdown-menu .playkit-dropdown-menu-item span{vertical-align:middle;line-height:26px}.playkit-dropdown-menu .playkit-dropdown-menu-item .playkit-menu-icon-container{opacity:0}.playkit-player .playkit-control-button{width:32px;height:32px;background:transparent;display:inline-block;opacity:0.8;border:none;padding:0;cursor:pointer}.playkit-player .playkit-control-button i{width:32px;height:32px}.playkit-player .playkit-control-button.playkit-active{opacity:1}.playkit-player .playkit-control-button:disabled{opacity:0.4;cursor:default}.playkit-player .playkit-control-button.playkit-control-button-rounded{width:36px;height:36px;padding:2px}.playkit-player:not(.playkit-touch) .playkit-control-button:not(:disabled):hover{opacity:1}.playkit-player:not(.playkit-touch) .playkit-control-button:not(:disabled).playkit-control-button-rounded:hover{background-color:rgba(0,0,0,0.4);border-radius:18px}.playkit-player .playkit-control-button-container{display:inline-block;position:relative;vertical-align:top}.playkit-player.playkit-touch .playkit-player .playkit-control-button-container{position:static}.playkit-player.playkit-touch .playkit-control-button{position:relative}.playkit-player.playkit-state-idle .playkit-no-idle-control{display:none}.playkit-rotate{-moz-animation:playkit-spin 0.3s 1 linear;-o-animation:playkit-spin 0.3s 1 linear;-webkit-animation:playkit-spin 0.3s 1 linear;animation:playkit-spin 0.3s 1 linear}.playkit-reverse-rotate{-moz-animation:playkit-reverse-spin 0.3s 1 linear;-o-animation:playkit-reverse-spin 0.3s 1 linear;-webkit-animation:playkit-reverse-spin 0.3s 1 linear;animation:playkit-reverse-spin 0.3s 1 linear}@-webkit-keyframes playkit-spin{0%{-webkit-transform:rotate(359deg)}100%{-webkit-transform:rotate(0deg)}}@-moz-keyframes playkit-spin{0%{-moz-transform:rotate(359deg)}100%{-moz-transform:rotate(0deg)}}@-o-keyframes playkit-spin{0%{-o-transform:rotate(359deg)}100%{-o-transform:rotate(0deg)}}@-ms-keyframes playkit-spin{0%{-ms-transform:rotate(359deg)}100%{-ms-transform:rotate(0deg)}}@keyframes playkit-spin{0%{transform:rotate(359deg)}100%{transform:rotate(0deg)}}@-webkit-keyframes playkit-reverse-spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}@-moz-keyframes playkit-reverse-spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}@-o-keyframes playkit-reverse-spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}@-ms-keyframes playkit-reverse-spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}@keyframes playkit-reverse-spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}.playkit-player a{font-size:15px;line-height:18px;cursor:pointer}.playkit-player a:hover{color:#01819a}.playkit-player a:active{opacity:0.7}.playkit-player{overflow:hidden;user-select:none;width:100%;height:100%;position:relative;outline:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.playkit-player .playkit-playback-gui-wrapper,.playkit-player .playkit-ad-gui-wrapper{font-family:sans-serif}.playkit-player:-webkit-full-screen{width:100%;height:100%;max-width:none}.playkit-player *{box-sizing:border-box;outline:none}.playkit-player ::selection{background-color:rgba(0,0,0,0.1)}.playkit-player video{width:100%;left:0}.playkit-player video::-webkit-media-controls-panel-container,.playkit-player video::-webkit-media-controls{display:none !important;-webkit-appearance:none}.playkit-player video::-webkit-media-controls-start-playback-button{display:none !important;-webkit-appearance:none}.playkit-player .playkit-player-gui{overflow:hidden;font-size:0}.playkit-player .playkit-player-gui label{margin-bottom:0}.playkit-player .overlay-portal{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.playkit-player.playkit-overlay-active .overlay-portal{z-index:11;pointer-events:initial}.playkit-player.playkit-nav *:focus{outline:1px solid #00cbff !important}.playkit-player [id^='playkit-ads-container']{transition:transform 100ms}.playkit-player [id^='playkit-ads-container'][data-adtype='overlay']{z-index:1}.playkit-player:not(.playkit-ad-break).playkit-metadata-loaded.playkit-hover [id^='playkit-ads-container'],.playkit-player:not(.playkit-ad-break).playkit-metadata-loaded.playkit-state-paused [id^='playkit-ads-container'],.playkit-player:not(.playkit-ad-break).playkit-metadata-loaded.playkit-state-idle [id^='playkit-ads-container']{transform:translateY(-60px);-webkit-transform:translateY(-60px);-ms-transform:translateY(-60px)}.playkit-player video::-webkit-media-text-track-container{max-height:none}.playkit-player.playkit-iOS video::-webkit-media-text-track-container{position:absolute;top:0;bottom:0;left:0;right:0}.playkit-player.playkit-state-paused video::-webkit-media-text-track-container,.playkit-player.playkit-state-idle video::-webkit-media-text-track-container,.playkit-player.playkit-hover video::-webkit-media-text-track-container{padding:0 0 50px 0}.playkit-player.playkit-state-paused.playkit-Safari video::-webkit-media-text-track-container,.playkit-player.playkit-state-paused.playkit-iOS video::-webkit-media-text-track-container,.playkit-player.playkit-state-idle.playkit-Safari video::-webkit-media-text-track-container,.playkit-player.playkit-state-idle.playkit-iOS video::-webkit-media-text-track-container,.playkit-player.playkit-hover.playkit-Safari video::-webkit-media-text-track-container,.playkit-player.playkit-hover.playkit-iOS video::-webkit-media-text-track-container{padding:initial;max-height:calc(100% - 50px)}.playkit-player.playkit-state-paused.playkit-fullscreen.playkit-iOS video::-webkit-media-text-track-display,.playkit-player.playkit-state-idle.playkit-fullscreen.playkit-iOS video::-webkit-media-text-track-display,.playkit-player.playkit-hover.playkit-fullscreen.playkit-iOS video::-webkit-media-text-track-display{transform:translateY(-50px);-webkit-transform:translateY(-50px);-ms-transform:translateY(-50px)}.playkit-player.playkit-fullscreen.playkit-iOS video::-webkit-media-text-track-container{max-height:none}.playkit-player.playkit-overlay-active .playkit-subtitles{visibility:hidden}.playkit-player .playkit-subtitles{top:50px;transform:translateY(0px);-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transition:ease-in 100ms}.playkit-player:not(.playkit-overlay-active).playkit-state-paused .playkit-subtitles,.playkit-player:not(.playkit-overlay-active).playkit-state-idle .playkit-subtitles,.playkit-player:not(.playkit-overlay-active).playkit-hover .playkit-subtitles{transform:translateY(-50px);-webkit-transform:translateY(-50px);-ms-transform:translateY(-50px)}.playkit-player:not(.playkit-overlay-active).playkit-fullscreen.playkit-iOS .playkit-subtitles{transform:translateY(0px);-webkit-transform:translateY(0px);-ms-transform:translateY(0px)}.playkit-video-player{position:absolute;top:0;left:0;width:100%;height:100%;background:black;transition:all 500ms;transition-property:left, right, bottom, top, width, height}.playkit-overlay-active .playkit-video-player{filter:blur(16px)}@keyframes playkit-openOverlay{from{opacity:0}to{opacity:1}}.playkit-overlay{position:absolute;width:100%;height:100%;display:none;opacity:0;animation:playkit-openOverlay 100ms ease-in-out forwards;z-index:11}.playkit-overlay.playkit-active{display:block;opacity:1}.playkit-overlay .playkit-overlay-contents{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);z-index:4;text-align:center;color:#fff;padding:60px 20px 30px 20px;overflow-y:auto}.playkit-overlay .playkit-title{font-size:24px;font-weight:bold;line-height:29px;margin-bottom:60px}.playkit-overlay .playkit-close-overlay{position:absolute;top:48px;right:48px;z-index:5;cursor:pointer}.playkit-overlay .playkit-close-overlay .playkit-icon-close{width:24px;height:24px}.playkit-overlay .playkit-overlay-screen{display:none}.playkit-overlay .playkit-overlay-screen.playkit-active{display:block}.playkit-player.playkit-size-md .playkit-overlay .playkit-overlay-contents{padding:36px 20px}.playkit-player.playkit-size-md .playkit-overlay .playkit-close-overlay{top:38px}.playkit-player.playkit-size-md .playkit-overlay .playkit-title{margin-bottom:24px}.playkit-player.playkit-size-sm .playkit-overlay .playkit-overlay-contents,.playkit-player.playkit-size-xs .playkit-overlay .playkit-overlay-contents{padding:16px 24px}.playkit-player.playkit-size-sm .playkit-overlay .playkit-close-overlay,.playkit-player.playkit-size-xs .playkit-overlay .playkit-close-overlay{top:15px;right:24px}.playkit-player.playkit-size-sm .playkit-overlay .playkit-title,.playkit-player.playkit-size-xs .playkit-overlay .playkit-title{font-size:20px;line-height:19px;margin-bottom:24px}@keyframes playkit-openSmartContainer{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes playkit-closeSmartContainer{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}.playkit-player:not(.playkit-touch) .playkit-smart-container{background-color:#222222;box-shadow:0 2px 8px 0 rgba(0,0,0,0.3);border-radius:4px;position:absolute;right:0px;min-width:193px;font-size:15px;z-index:10;display:block;animation:playkit-openSmartContainer 100ms ease-out forwards}.playkit-player:not(.playkit-touch) .playkit-smart-container.playkit-leaving{animation:playkit-closeSmartContainer 100ms ease-out forwards}.playkit-player:not(.playkit-touch) .playkit-smart-container.playkit-top{bottom:100%;margin-bottom:6px}.playkit-player:not(.playkit-touch) .playkit-smart-container.playkit-top:before{display:block;content:' ';position:absolute;bottom:-6px;left:0;width:100%;height:6px}.playkit-player:not(.playkit-touch) .playkit-smart-container.playkit-bottom{top:100%;margin-top:6px}.playkit-player:not(.playkit-touch) .playkit-smart-container.playkit-right{left:0px}.playkit-player:not(.playkit-touch) .playkit-smart-container.playkit-left{right:0px}.playkit-player:not(.playkit-touch) .playkit-smart-container .playkit-smart-container-item{margin:16px;color:rgba(244,244,244,0.8);white-space:nowrap;display:flex;justify-content:space-between}.playkit-player:not(.playkit-touch) .playkit-smart-container .playkit-smart-container-item.playkit-select-menu-item label .playkit-label-icon{display:none}.playkit-player:not(.playkit-touch) .playkit-smart-container .playkit-smart-container-item.playkit-select-menu-item .playkit-dropdown,.playkit-player:not(.playkit-touch) .playkit-smart-container .playkit-smart-container-item.playkit-select-menu-item select{align-self:flex-end}.playkit-player:not(.playkit-touch) .playkit-smart-container .playkit-smart-container-item.playkit-select-menu-item .playkit-dropdown span{max-width:100px;overflow:hidden;text-overflow:ellipsis;display:inline-block;vertical-align:middle}.playkit-player:not(.playkit-touch) .playkit-smart-container .playkit-smart-container-item.playkit-select-menu-item select{text-align-last:right}.playkit-player.playkit-touch .playkit-smart-container-item,.playkit-player.playkit-size-sm .playkit-smart-container-item,.playkit-player.playkit-size-xs .playkit-smart-container-item{width:300px;max-width:100%;margin:16px auto;color:rgba(244,244,244,0.8);white-space:nowrap;text-align:left;display:flex;justify-content:space-between}.playkit-player.playkit-touch .playkit-smart-container-item.playkit-select-menu-item label,.playkit-player.playkit-size-sm .playkit-smart-container-item.playkit-select-menu-item label,.playkit-player.playkit-size-xs .playkit-smart-container-item.playkit-select-menu-item label{font-size:16px;color:rgba(255,255,255,0.8);margin-right:20px}.playkit-player.playkit-touch .playkit-smart-container-item.playkit-select-menu-item label .playkit-label-icon,.playkit-player.playkit-size-sm .playkit-smart-container-item.playkit-select-menu-item label .playkit-label-icon,.playkit-player.playkit-size-xs .playkit-smart-container-item.playkit-select-menu-item label .playkit-label-icon{width:24px;height:24px;display:inline-block;vertical-align:middle;margin-right:16px}.playkit-player.playkit-touch .playkit-smart-container-item.playkit-select-menu-item .playkit-dropdown,.playkit-player.playkit-touch .playkit-smart-container-item.playkit-select-menu-item select,.playkit-player.playkit-size-sm .playkit-smart-container-item.playkit-select-menu-item .playkit-dropdown,.playkit-player.playkit-size-sm .playkit-smart-container-item.playkit-select-menu-item select,.playkit-player.playkit-size-xs .playkit-smart-container-item.playkit-select-menu-item .playkit-dropdown,.playkit-player.playkit-size-xs .playkit-smart-container-item.playkit-select-menu-item select{align-self:flex-end}.playkit-player.playkit-touch .playkit-smart-container-item.playkit-select-menu-item select,.playkit-player.playkit-size-sm .playkit-smart-container-item.playkit-select-menu-item select,.playkit-player.playkit-size-xs .playkit-smart-container-item.playkit-select-menu-item select{text-align-last:right;min-width:1px;line-height:24px}.playkit-player.playkit-touch.playkit-Windows select option,.playkit-player.playkit-size-sm.playkit-Windows select option,.playkit-player.playkit-size-xs.playkit-Windows select option{color:black;background-color:white}.playkit-overlay.playkit-share-overlay .playkit-share-icons{margin:60px 0}.playkit-overlay.playkit-share-overlay .playkit-share-icons .playkit-btn-rounded{margin:0 8px;transition:transform 100ms;will-change:transform;border:none}.playkit-overlay.playkit-share-overlay .playkit-share-icons .playkit-btn-rounded:first-child{margin-left:0}.playkit-overlay.playkit-share-overlay .playkit-share-icons .playkit-btn-rounded:last-child{margin-right:0}.playkit-overlay.playkit-share-overlay .playkit-share-icons .playkit-btn-rounded.playkit-facebook{background-color:#3b5998}.playkit-overlay.playkit-share-overlay .playkit-share-icons .playkit-btn-rounded.playkit-twitter{background-color:#1da1f2}.playkit-overlay.playkit-share-overlay .playkit-share-icons .playkit-btn-rounded.playkit-linkedin{background-color:#00a0dc}.playkit-overlay.playkit-share-overlay .playkit-link-options-container{width:auto;display:inline-block;max-width:100%;text-align:left;margin:0 auto}.playkit-overlay.playkit-share-overlay .playkit-link-options-container .playkit-copy-url-row{display:flex}.playkit-overlay.playkit-share-overlay .playkit-link-options-container .playkit-copy-url-row .playkit-input-copy-url{margin:0}.playkit-overlay.playkit-share-overlay .playkit-link-options-container .playkit-copy-url-row .playkit-btn-copy-url .playkit-icon{width:32px;margin-top:5px}.playkit-overlay.playkit-share-overlay .playkit-link-options-container .playkit-video-start-options-row{margin-top:24px}.playkit-overlay.playkit-share-overlay .playkit-link-options-container .playkit-video-start-options-row .playkit-checkbox{margin-right:15px}.playkit-overlay.playkit-share-overlay .playkit-link-options-container .playkit-video-start-options-row .playkit-form-group{margin:0}.playkit-share-main-container{width:300px;max-width:100%;margin:0 auto;text-align:center}.playkit-player:not(.playkit-touch) .playkit-overlay.playkit-share-overlay .playkit-share-icons .playkit-btn-rounded:hover{transform:scale(1.1667)}.playkit-player.playkit-size-md .playkit-overlay.playkit-share-overlay .playkit-share-icons{margin:40px 0}.playkit-player.playkit-size-sm .playkit-overlay.playkit-share-overlay .playkit-share-icons{margin:20px 0}.playkit-overlay.playkit-cvaa-overlay .playkit-sample{border:2px solid rgba(255,255,255,0.2);border-radius:4px;font-size:16px;font-weight:bold;line-height:36px;text-align:center;padding:0 31px;display:inline-block;margin:0 12px;position:relative}.playkit-overlay.playkit-cvaa-overlay .playkit-sample:not(.playkit-custom){cursor:pointer}.playkit-overlay.playkit-cvaa-overlay .playkit-sample.playkit-black-bg{background-color:#000}.playkit-overlay.playkit-cvaa-overlay .playkit-sample.playkit-yellow-text{color:#faff00}.playkit-overlay.playkit-cvaa-overlay .playkit-sample .playkit-active-tick{height:16px;width:16px;border-radius:8px;background-color:#01accd;position:absolute;top:-5px;right:-5px}.playkit-overlay.playkit-cvaa-overlay .playkit-sample .playkit-active-tick .playkit-icon{vertical-align:top}.playkit-overlay.playkit-cvaa-overlay .playkit-sample span{font-size:16px !important;line-height:1;vertical-align:middle}.playkit-overlay.playkit-cvaa-overlay .playkit-button-save-cvaa{margin-top:50px;height:40px;width:400px;max-width:100%;border:2px solid rgba(255,255,255,0.2);border-radius:4px;font-size:16px;font-weight:bold;line-height:38px;text-align:center;display:inline-block;color:#fff;text-decoration:none;cursor:pointer}.playkit-overlay.playkit-cvaa-overlay .playkit-custom-captions-applied{margin-top:50px}.playkit-overlay.playkit-cvaa-overlay .playkit-custom-captions-applied a{color:#01accd}.playkit-overlay.playkit-cvaa-overlay .playkit-custom-caption-form{width:300px;max-width:100%;margin:0 auto}.playkit-overlay.playkit-cvaa-overlay .playkit-custom-caption-form a{color:white;line-height:36px;text-decoration:none}.playkit-overlay.playkit-cvaa-overlay .playkit-custom-caption-form a:hover,.playkit-overlay.playkit-cvaa-overlay .playkit-custom-caption-form a:focus{text-decoration:underline}.playkit-overlay.playkit-cvaa-overlay .playkit-custom-caption-form .playkit-slider{float:right;width:100px;margin-top:5px}.playkit-overlay.playkit-cvaa-overlay .playkit-preview-container{width:100%;text-align:center;font-size:16px}.playkit-player.playkit-size-sm .playkit-overlay.playkit-cvaa-overlay .playkit-sample{width:30%;margin:2.33%;padding:0}.playkit-player.playkit-size-sm .playkit-overlay.playkit-cvaa-overlay .playkit-sample:first-child{margin-left:0}.playkit-player.playkit-size-sm .playkit-overlay.playkit-cvaa-overlay .playkit-sample:last-child{margin-right:0}.playkit-player.playkit-size-sm .playkit-overlay.playkit-cvaa-overlay .playkit-sample.playkit-custom{width:auto;padding:0 10px}.playkit-player.playkit-size-sm .playkit-overlay.playkit-cvaa-overlay .playkit-button-save-cvaa,.playkit-player.playkit-size-sm .playkit-overlay.playkit-cvaa-overlay .playkit-custom-captions-applied{margin-top:20px}.playkit-font-size,.playkit-font-color,.playkit-font-family,.playkit-font-style,.playkit-font-opacity,.playkit-background-color,.playkit-background-opacity{background:initial}@keyframes playkit-kaltura-spinner{0%{transform:rotate(0deg) scale(0.7);opacity:1}70%{transform:rotate(360deg) scale(0.7);opacity:1}82%{transform:rotate(360deg) scale(0);opacity:0}87%{transform:rotate(360deg) scale(0.9);opacity:1}100%{transform:rotate(360deg) scale(0.7);opacity:1}}.playkit-loading-backdrop{position:absolute;top:50%;left:50%;transition:100ms opacity;opacity:0;z-index:5}.playkit-loading-backdrop.playkit-show{opacity:1}.playkit-loading-backdrop.playkit-show .playkit-spinner-container{display:block}.playkit-loading-backdrop .playkit-spinner-container{display:none;position:absolute;top:50%;left:50%;transform:translate3d(-50px, -50px, 0)}.playkit-spinner{width:100px;height:100px;position:relative;animation:playkit-kaltura-spinner 2.5s infinite}.playkit-spinner span{width:8px;height:8px;background-color:#fff;display:block;border-radius:8px;position:absolute;top:50%;left:50%;margin-top:-4px;margin-left:-4px}.playkit-spinner span:nth-child(1){transform:rotate(45deg) translateX(-25px) translateY(-25px);background-color:#da1f26}.playkit-spinner span:nth-child(2){transform:rotate(90deg) translateX(-25px) translateY(-25px);background-color:#06a885}.playkit-spinner span:nth-child(3){transform:rotate(135deg) translateX(-25px) translateY(-25px);background-color:#009344}.playkit-spinner span:nth-child(4){transform:rotate(180deg) translateX(-25px) translateY(-25px);background-color:#f8a61a}.playkit-spinner span:nth-child(5){transform:rotate(225deg) translateX(-25px) translateY(-25px);background-color:#1b4a97}.playkit-spinner span:nth-child(6){transform:rotate(270deg) translateX(-25px) translateY(-25px);background-color:#00abcc}.playkit-spinner span:nth-child(7){transform:rotate(315deg) translateX(-25px) translateY(-25px);background-color:#b1d238}.playkit-spinner span:nth-child(8){transform:rotate(360deg) translateX(-25px) translateY(-25px);background-color:#fcd203}.playkit-control-button-container.playkit-control-play-pause .playkit-control-button{transition:400ms transform}.playkit-control-button-container.playkit-control-play-pause .playkit-control-button .playkit-icon-pause{transition:400ms opacity;opacity:0;display:none}.playkit-control-button-container.playkit-control-play-pause .playkit-control-button .playkit-icon-play{transition:400ms opacity;opacity:1;display:block}.playkit-control-button-container.playkit-control-play-pause .playkit-control-button.playkit-is-playing{transform:rotate(360deg)}.playkit-control-button-container.playkit-control-play-pause .playkit-control-button.playkit-is-playing .playkit-icon-pause{opacity:1;display:block}.playkit-control-button-container.playkit-control-play-pause .playkit-control-button.playkit-is-playing .playkit-icon-play{opacity:0;display:none}.playkit-control-button-container.playkit-volume-control{display:inline-block !important}.playkit-control-button-container.playkit-volume-control.playkit-hover .playkit-volume-control-bar{display:block !important}.playkit-control-button-container.playkit-volume-control.playkit-is-muted .playkit-icon-volume-waves{opacity:0;-webkit-transform:translateX(-5px);-ms-transform:translateX(-5px);transform:translateX(-5px)}.playkit-control-button-container.playkit-volume-control.playkit-is-muted .playkit-icon-volume-mute{opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.playkit-control-button-container.playkit-volume-control.playkit-dragging-active .playkit-volume-control-bar{display:block}.playkit-control-button-container.playkit-volume-control .playkit-icon-volume-waves{-webkit-transform:translateX(0px);-ms-transform:translateX(0px);transform:translateX(0px)}.playkit-control-button-container.playkit-volume-control .playkit-icon-volume-mute{opacity:1;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}.playkit-control-button-container.playkit-volume-control .playkit-icon-volume-waves,.playkit-control-button-container.playkit-volume-control .playkit-icon-volume-mute{transition:300ms transform, 300ms opacity}.playkit-control-button-container.playkit-volume-control i{position:absolute;top:0;left:0}.playkit-volume-control-bar{position:absolute;z-index:2;bottom:38px;left:0;height:112px;width:34px;border-radius:4px;box-shadow:0 2px 8px 0 rgba(0,0,0,0.3);background-color:#333333;padding:6px;display:none}.playkit-volume-control-bar:before{position:absolute;width:34px;height:14px;bottom:-8px;left:0;content:' ';display:block}.playkit-volume-control-bar .playkit-bar{background-color:#424242;height:100%;position:relative;cursor:pointer}.playkit-volume-control-bar .playkit-progress{position:absolute;bottom:0;left:0;width:100%;border-radius:0 0 2px 2px;background-color:#01accd}.playkit-player.playkit-smart-container-open .playkit-control-button-container.playkit-volume-control.playkit-hover .playkit-volume-control-bar,.playkit-size-ty .playkit-control-button-container.playkit-volume-control.playkit-hover .playkit-volume-control-bar{display:none !important}.playkit-touch .playkit-control-button-container.playkit-volume-control.playkit-hover .playkit-volume-control-bar,.playkit-size-ty .playkit-control-button-container.playkit-volume-control.playkit-hover .playkit-volume-control-bar{display:none !important}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button{transition:100ms transform;transform:scale(1)}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button .playkit-icon-minimize{display:none}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button.playkit-is-fullscreen .playkit-icon-maximize{display:none}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button.playkit-is-fullscreen .playkit-icon-minimize{display:block}.playkit-player:not(.playkit-touch) .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button:hover{transform:scale(1.1)}.playkit-player .playkit-seek-bar{padding:12px 0;margin:-6px 0;cursor:pointer;position:relative}.playkit-player .playkit-seek-bar:hover .playkit-time-preview,.playkit-player .playkit-seek-bar:hover .playkit-frame-preview,.playkit-player .playkit-seek-bar.playkit-hover .playkit-time-preview,.playkit-player .playkit-seek-bar.playkit-hover .playkit-frame-preview,.playkit-player .playkit-seek-bar.playkit-dragging-active .playkit-time-preview,.playkit-player .playkit-seek-bar.playkit-dragging-active .playkit-frame-preview{display:block}.playkit-player .playkit-seek-bar:hover .playkit-progress-bar .playkit-scrubber,.playkit-player .playkit-seek-bar.playkit-hover .playkit-progress-bar .playkit-scrubber,.playkit-player .playkit-seek-bar.playkit-dragging-active .playkit-progress-bar .playkit-scrubber{transform:scale(1)}.playkit-player .playkit-seek-bar:hover .playkit-progress-bar .playkit-virtual-progress,.playkit-player .playkit-seek-bar.playkit-hover .playkit-progress-bar .playkit-virtual-progress,.playkit-player .playkit-seek-bar.playkit-dragging-active .playkit-progress-bar .playkit-virtual-progress{display:block}.playkit-player .playkit-seek-bar.playkit-ad-break{cursor:initial}.playkit-player .playkit-seek-bar.playkit-ad-break .playkit-progress-bar .playkit-progress{background-color:#f9a71b}.playkit-player .playkit-seek-bar.playkit-live .playkit-progress-bar .playkit-progress{background-color:#da1f26}.playkit-player .playkit-seek-bar .playkit-progress-bar{height:4px;background-color:rgba(255,255,255,0.3);border-radius:2px;position:relative}.playkit-player .playkit-seek-bar .playkit-progress-bar .playkit-progress{position:absolute;top:0;left:0;height:100%;border-radius:2px 0 0 2px;background-color:#01accd}.playkit-player .playkit-seek-bar .playkit-progress-bar .playkit-virtual-progress{display:none}.playkit-player .playkit-seek-bar .playkit-progress-bar .playkit-buffered,.playkit-player .playkit-seek-bar .playkit-progress-bar .playkit-virtual-progress{position:absolute;top:0;left:0;height:100%;border-radius:2px 0 0 2px;background-color:rgba(255,255,255,0.3)}.playkit-player .playkit-seek-bar .playkit-progress-bar .playkit-scrubber{position:absolute;cursor:pointer;display:block;top:-6px;right:-8px;border-radius:8px;height:16px;width:16px;background-color:#ffffff;box-shadow:0 0 31px 0 rgba(0,0,0,0.3);transform:scale(0);transition:100ms transform}.playkit-player .playkit-seek-bar .playkit-progress-bar .playkit-scrubber:active{opacity:1;cursor:grabbing}.playkit-player .playkit-seek-bar .playkit-frame-preview{position:absolute;bottom:16px;left:0;height:94px;width:164px;border:2px solid rgba(255,255,255,0.2);border-radius:4px}.playkit-player .playkit-seek-bar .playkit-frame-preview:hover{display:none !important}.playkit-player .playkit-seek-bar .playkit-frame-preview .playkit-frame-preview-img{background-size:auto 100%;width:100%;height:100%;position:relative}.playkit-player .playkit-seek-bar .playkit-time-preview{position:absolute;bottom:22px;left:0;height:22px;min-width:48px;padding:0 3px;text-align:center;border-radius:3px;background-color:rgba(0,0,0,0.7);font-size:13px;font-weight:bold;line-height:22px;color:#fff}.playkit-player .playkit-seek-bar .playkit-time-preview,.playkit-player .playkit-seek-bar .playkit-frame-preview{display:none}.playkit-touch .playkit-virtual-progress,.playkit-touch .playkit-time-preview,.playkit-touch .playkit-frame-preview{display:none !important}.playkit-player.playkit-size-sm .playkit-virtual-progress,.playkit-player.playkit-size-sm .playkit-time-preview,.playkit-player.playkit-size-sm .playkit-frame-preview{display:none}.playkit-player.playkit-size-ty .playkit-seek-bar{padding:12px 0;cursor:pointer;position:relative;float:left;width:calc(100% - 45px);margin:1px 0}.playkit-player .playkit-time-display{display:inline-block;line-height:32px;vertical-align:top;font-size:14px;padding:0 23px;font-weight:bold}.playkit-touch .playkit-time-display{padding-left:0}.playkit-player.playkit-size-md .playkit-time-display{padding:0 12px}.playkit-player.playkit-size-xs .playkit-time-display,.playkit-player.playkit-size-sm .playkit-time-display{padding:0 12px 0 0}.playkit-player .playkit-video-playing-title{font-size:15px;font-weight:bold;line-height:18px;padding:6px 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.playkit-player .playkit-bottom-bar{background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.6) 100%);padding:6px 16px;color:#fff;opacity:0;visibility:hidden;transition:100ms opacity;width:100%;margin-top:auto;position:absolute;bottom:0;left:0;z-index:1}.playkit-player .playkit-bottom-bar.playkit-hide{display:none}.playkit-player .playkit-bottom-bar .playkit-left-controls{float:left;text-align:left}.playkit-player .playkit-bottom-bar .playkit-left-controls .playkit-control-button-container:first-child{margin-left:0px}.playkit-player .playkit-bottom-bar .playkit-right-controls{float:right;text-align:left}.playkit-player .playkit-bottom-bar .playkit-right-controls .playkit-control-button-container:last-child{margin-right:0px}.playkit-player .playkit-bottom-bar .playkit-control-button-container{margin:0 6px}.playkit-player.playkit-size-ty .playkit-left-controls{display:none}.playkit-player.playkit-size-ty .playkit-control-button-container{display:none;margin:0}.playkit-player.playkit-size-xs .playkit-left-controls .playkit-control-button-container{display:none}.playkit-player.playkit-size-xs .playkit-control-button-container,.playkit-player.playkit-size-sm .playkit-control-button-container{margin:0 3px}.playkit-player.playkit-casting .playkit-bottom-bar,.playkit-player.playkit-metadata-loaded.playkit-hover .playkit-bottom-bar,.playkit-player.playkit-state-paused .playkit-bottom-bar,.playkit-player.playkit-state-idle .playkit-bottom-bar,.playkit-player.playkit-ad-break .playkit-bottom-bar,.playkit-player.playkit-menu-active .playkit-bottom-bar{opacity:1;visibility:visible}.playkit-player.playkit-overlay-active .playkit-bottom-bar{opacity:0;visibility:hidden}.playkit-player.playkit-size-sm .playkit-bottom-bar{padding:6px 8px}.playkit-player.playkit-size-sm .playkit-bottom-bar .playkit-time-display{padding-left:0}.playkit-player .playkit-top-bar{background:linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.6) 100%);padding:14px 16px;color:#fff;opacity:0;visibility:hidden;transition:100ms opacity;width:100%;position:absolute;top:0;left:0;z-index:1}.playkit-player .playkit-top-bar.playkit-disabled{pointer-events:none}.playkit-player .playkit-top-bar.playkit-hide{display:none}.playkit-player .playkit-top-bar .playkit-left-controls{float:left;text-align:left;min-width:0}.playkit-player .playkit-top-bar .playkit-right-controls{float:right;text-align:left}.playkit-player .playkit-top-bar .playkit-right-controls .playkit-control-button-container{margin:0 6px}.playkit-player .playkit-top-bar .playkit-right-controls .playkit-control-button-container:last-child{margin-right:0}.playkit-player.playkit-casting .playkit-top-bar,.playkit-player.playkit-metadata-loaded.playkit-hover .playkit-top-bar,.playkit-player.playkit-state-paused .playkit-top-bar,.playkit-player.playkit-state-idle .playkit-top-bar,.playkit-player.playkit-ad-break .playkit-top-bar,.playkit-player.playkit-menu-active .playkit-top-bar{opacity:1;visibility:visible}.playkit-player.playkit-overlay-active .playkit-top-bar{opacity:0;visibility:hidden}.playkit-player.playkit-size-sm .playkit-player .playkit-top-bar{padding:8px 8px 20px 8px}@keyframes playkit-overlayActionIconIn{0%{opacity:0;transform:scale(0)}10%{opacity:0.1;transform:scale(0.1)}20%{opacity:0.3;transform:scale(0.2)}30%{opacity:0.5;transform:scale(0.3)}40%{opacity:0.7;transform:scale(0.4)}50%{opacity:0.9;transform:scale(0.5)}60%{opacity:0.9;transform:scale(0.5)}70%{opacity:0.9;transform:scale(0.5)}75%{opacity:0.9;transform:scale(0.5)}80%{opacity:1;transform:scale(0.5)}85%{opacity:1;transform:scale(0.5)}90%{opacity:1;transform:scale(0.5)}93%{opacity:0.7;transform:scale(0.5)}95%{opacity:0.5;transform:scale(0.5)}98%{opacity:0.2;transform:scale(0.5)}100%{opacity:0;transform:scale(0.5)}}.playkit-overlay-action .playkit-icon{width:144px;height:144px;position:absolute;top:50%;left:50%;margin:-72px 0 0 -72px;opacity:0}.playkit-player  .playkit-overlay-action.playkit-in .playkit-icon{animation:playkit-overlayActionIconIn 300ms linear forwards}.playkit-pre-playback-play-overlay{position:absolute;top:0;left:0;width:100%;height:100%}.playkit-pre-playback-play-overlay .playkit-pre-playback-play-button{z-index:1;position:absolute;top:50%;left:50%;height:108px;width:108px;border:2px solid rgba(255,255,255,0.2);background-color:rgba(0,0,0,0.5);transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);border-radius:54px;padding:20px;cursor:pointer}.playkit-pre-playback-play-overlay .playkit-pre-playback-play-button:hover{border:2px solid rgba(255,255,255,0.4)}.playkit-pre-playback-play-overlay .playkit-pre-playback-play-button:active{opacity:0.7;transform:scale(1) translate(-50%, -50%)}.playkit-pre-playback .playkit-bottom-bar,.playkit-pre-playback .playkit-top-bar{opacity:0;display:none}.playkit-player.playkit-size-ty .playkit-pre-playback-play-button{width:75px;height:75px;padding:12px}.playkit-player.playkit-size-xs .playkit-pre-playback-play-button{width:85px;height:85px;padding:15px}.playkit-player .playkit-btn-skip-ad{font-weight:lighter;position:absolute;bottom:60px;right:16px;line-height:36px}.playkit-player .playkit-skip-ad{color:#fff;font-size:20px;font-weight:lighter;line-height:24px;text-shadow:0 0 6px rgba(0,0,0,0.6);position:absolute;bottom:66px;right:16px}.playkit-row{display:block}.playkit-row:after{content:'';clear:both;display:block}.playkit-d-inline-block{display:inline-block}.playkit-mobile-hidden-select{display:block;opacity:0;position:absolute;top:0;left:0px;width:100%;height:100%}.playkit-font-size-base,.playkit-ad-notice{font-size:15px}.playkit-live-tag{color:#da1f26;font-size:14px;font-weight:bold;letter-spacing:1px;line-height:19px;border:2px solid #da1f26;border-radius:4px;text-transform:uppercase;text-align:center;display:inline-block;padding:0 3px 0 5px;margin:5px 23px;cursor:default}.playkit-live-tag.playkit-non-live-playhead{background-color:rgba(255,255,255,0.2);border:none;color:#fff;line-height:23px;padding:0 5px 0 7px;cursor:pointer}.playkit-player.playkit-size-sm .playkit-live-tag{margin-left:0}.playkit-unmute-button-container{display:inline-block;position:absolute;top:13px;left:16px;z-index:15}.playkit-unmute-button-container a{color:#fff}.playkit-unmute-button-container.playkit-show-icon-only .playkit-btn.playkit-unmute-button{max-width:64px}.playkit-unmute-button-container.playkit-show-icon-only .playkit-btn.playkit-unmute-button span{transform:translateX(10px);opacity:0}.playkit-btn.playkit-unmute-button{font-size:15px;max-width:200px;transition:max-width 200ms;padding:0 16px;white-space:nowrap}.playkit-btn.playkit-unmute-button span{transform:translateX(0px);opacity:1;transition:transform 100ms, opacity 100ms;display:inline-block;color:#fff}.playkit-btn.playkit-unmute-button.playkit-has-top-bar{transition:100ms transform}.playkit-unmute-icon-container{width:32px;height:32px;display:inline-block;vertical-align:top;position:relative;margin-right:3px}.playkit-unmute-icon-container i{position:absolute;top:0;left:0}.playkit-player.playkit-hover .playkit-unmute-button-container.playkit-has-top-bar,.playkit-player.playkit-state-paused .playkit-unmute-button-container.playkit-has-top-bar,.playkit-player.playkit-state-idle .playkit-unmute-button-container.playkit-has-top-bar,.playkit-player.playkit-menu-active .playkit-unmute-button-container.playkit-has-top-bar{transform:translateY(32px)}.playkit-overlay.playkit-error-overlay{background-color:#333;font-size:0em}.playkit-overlay-contents .playkit-error-overlay{padding-top:20px}.playkit-error-overlay{position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%}.playkit-error-overlay .playkit-copy-url-row{display:flex}.playkit-error-overlay .playkit-svg-container{flex:4;display:flex;justify-content:space-around;flex-flow:column}.playkit-error-overlay .playkit-headline{color:#fff;font-size:18px;margin:10px 0 14px 0;flex:1}.playkit-error-overlay .playkit-error-session{font-size:14px;color:#ccc;margin-bottom:20px;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 auto}.playkit-error-overlay .playkit-control-button-container{flex:5}.playkit-error-overlay .playkit-retry-btn{height:36px;width:auto;min-width:120px;padding:0 8px;border:2px solid #333;border-radius:18px;background-color:black;color:#fff;font-size:15px;font-weight:bold;line-height:32px;cursor:pointer}.playkit-error-overlay .playkit-error-text{height:0px;visibility:hidden}.playkit-link-options-container{width:auto}.playkit-link-options-container .playkit-copy-url-row .playkit-input-copy-url{margin:0}.playkit-link-options-container .playkit-copy-url-row .playkit-btn-copy-url{margin-left:10px}.playkit-link-options-container .playkit-copy-url-row .playkit-btn-copy-url .playkit-icon{height:24px;width:24px;margin-top:-3px}.playkit-slider{height:8px;border-radius:4px;background-color:rgba(255,255,255,0.2)}.playkit-slider .playkit-progress{background-color:#01accd;height:8px;border-radius:4px;position:relative}.playkit-slider .playkit-progress .playkit-handle{height:12px;width:12px;border-radius:5px;background-color:#ffffff;box-shadow:0 2px 8px 0 rgba(0,0,0,0.3);position:absolute;right:0;top:0px;transform:translate3d(6px, -2px, 0);cursor:pointer}.playkit-btn{text-decoration:none;height:36px;border-radius:18px;color:#fff;line-height:36px;font-weight:bold;cursor:pointer;display:inline-block;padding:0 24px}.playkit-btn.playkit-btn-block{display:block}.playkit-btn.playkit-btn-dark-transparent{background-color:rgba(0,0,0,0.5);border:2px solid rgba(255,255,255,0.2);line-height:32px}.playkit-btn.playkit-btn-dark-transparent:hover{color:#fff;border:2px solid rgba(255,255,255,0.4)}.playkit-btn.playkit-btn-branded{background-color:#01accd}.playkit-btn.playkit-btn-branded:hover{color:#fff}.playkit-btn-rounded{height:36px;width:36px;min-width:36px;min-height:36px;border-radius:18px;background-color:rgba(0,0,0,0.4);display:inline-block;padding:2px}.playkit-player button:focus{outline:none}.playkit-player .playkit-learn-more{font-weight:lighter}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button{transition:100ms transform;transform:scale(1)}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button .playkit-icon-minimize{display:none}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button.playkit-is-fullscreen .playkit-icon-maximize{display:none}.playkit-player .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button.playkit-is-fullscreen .playkit-icon-minimize{display:block}.playkit-player:not(.playkit-touch) .playkit-control-button-container.playkit-control-fullscreen .playkit-control-button:hover{transform:scale(1.1)}.playkit-player .playkit-watermark{position:absolute;padding:5px;transition:visibility 0s 1s, opacity 1s linear, transform ease-out 100ms}.playkit-player .playkit-watermark.playkit-hide-watermark{visibility:hidden;opacity:0}.playkit-player .playkit-watermark.playkit-top{top:0}.playkit-player .playkit-watermark.playkit-bottom{bottom:0}.playkit-player .playkit-watermark.playkit-right{right:0}.playkit-player .playkit-watermark.playkit-left{left:0}.playkit-player:not(.playkit-pre-playback):not(.playkit-overlay-active).playkit-state-paused .playkit-watermark.playkit-bottom,.playkit-player:not(.playkit-pre-playback):not(.playkit-overlay-active).playkit-state-idle .playkit-watermark.playkit-bottom,.playkit-player:not(.playkit-pre-playback):not(.playkit-overlay-active).playkit-hover .playkit-watermark.playkit-bottom{transform:translateY(-60px)}.playkit-player a:not([href]).playkit-advanced-captions-menu-link{color:#01accd;text-decoration:underline}.playkit-control-button-container.playkit-control-vr-stereo .playkit-control-button .playkit-icon-vr-stereo-full{display:none}.playkit-control-button-container.playkit-control-vr-stereo .playkit-control-button.playkit-vr-stereo-mode .playkit-icon-vr-stereo{display:none}.playkit-control-button-container.playkit-control-vr-stereo .playkit-control-button.playkit-vr-stereo-mode .playkit-icon-vr-stereo-full{display:block}.playkit-player .playkit-cast-button{display:block;width:28px;height:30px;background-color:rgba(255,255,255,0);border:none;cursor:pointer;--connected-color: rgba(1, 172, 205, 0.8);--disconnected-color: #ccc}.playkit-player .playkit-cast-button:hover{--disconnected-color: #fff;--connected-color: #01accd}.playkit-player .playkit-cast-overlay{position:absolute;top:0;left:0;width:100%;height:100%}.playkit-player .playkit-cast-overlay .playkit-cast-poster{all:inherit;background-size:contain;background:black no-repeat center center}.playkit-player .playkit-cast-overlay .playkit-cast-poster.playkit-has-poster{background-color:#000}.playkit-player .playkit-cast-overlay .playkit-cast-black-cover{all:inherit;background:linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0) 72%, rgba(0,0,0,0) 100%)}.playkit-player .playkit-cast-box .playkit-cast-icon{position:absolute;bottom:0;left:46px;height:128px}.playkit-player .playkit-cast-box .playkit-cast-icon .playkit-icon{width:30px;height:22px;color:rgba(255,255,255,0.6);opacity:0.6}.playkit-player .playkit-cast-box .playkit-cast-connecting-spinner{height:21px;width:21px;-webkit-animation:playkit-spin 0.9s infinite linear;border:3px solid rgba(255,255,255,0.4);border-top-color:rgba(255,255,255,0.8);border-radius:100%}.playkit-player .playkit-cast-box .playkit-cast-text{position:absolute;bottom:0;left:89px;height:128px;font-weight:lighter}.playkit-player .playkit-cast-box .playkit-cast-text .playkit-cast-status{display:inline-block;margin-top:3px;font-size:16px;color:rgba(255,255,255,0.6);float:left;font-weight:inherit}.playkit-player .playkit-cast-box .playkit-cast-text .playkit-cast-device{left:0;display:inline-block;font-weight:inherit;font-size:25px;color:#ffffff;line-height:40px}@keyframes playkit-castOnTVAnimation{0%{opacity:0;transform:rotateY(70deg)}33%{opacity:0.3;transform:rotateY(50deg)}66%{opacity:0.6;transform:rotateY(30deg)}100%{opacity:1;transform:rotateY(0)}}.playkit-player .playkit-cast-on-tv-button-container{position:absolute;width:100%;text-align:center;bottom:20px;opacity:0}.playkit-player .playkit-cast-on-tv-button-container span{font-weight:lighter;color:white}.playkit-player .playkit-cast-on-tv-button-container.playkit-show-cast-on-tv{animation:playkit-castOnTVAnimation 300ms linear forwards}.playkit-player .playkit-btn.playkit-cast-on-tv-button{font-size:15px;max-width:200px;transition:max-width 200ms;padding:0 16px;white-space:nowrap}.playkit-player .playkit-btn.playkit-cast-on-tv-button span{transform:translateX(0px);opacity:1;transition:transform 100ms, opacity 100ms;display:inline-block}.playkit-player .playkit-cast-on-tv-icon-container{width:32px;height:32px;display:inline-block;vertical-align:top;position:relative;margin-right:3px}.playkit-player .playkit-cast-on-tv-icon-container i{position:absolute;top:0;left:0}.playkit-player .playkit-backdrop{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6);transition:100ms opacity;z-index:5}.playkit-control-button-container.playkit-control-playlist-button .playkit-poster-preview{position:absolute;bottom:35px;width:160px;height:90px;border:2px solid rgba(255,255,255,0.2);border-radius:4px;opacity:0;transition:400ms opacity;pointer-events:none}.playkit-control-button-container.playkit-control-playlist-button .playkit-poster-preview:hover{opacity:0 !important}.playkit-control-button-container.playkit-control-playlist-button .playkit-poster-preview .playkit-poster-preview-text{position:absolute;padding:8px;width:100%}.playkit-control-button-container.playkit-control-playlist-button .playkit-poster-preview .playkit-poster-preview-text .playkit-poster-preview-text-title{font-size:14px;font-weight:400;margin-bottom:3px;opacity:0.7}.playkit-control-button-container.playkit-control-playlist-button .playkit-poster-preview .playkit-poster-preview-text .playkit-poster-preview-text-name{font-size:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.playkit-control-button-container.playkit-control-playlist-button .playkit-poster-preview .playkit-poster-preview-img{height:100%;background-size:contain;background-repeat:round}.playkit-control-button-container.playkit-control-playlist-button .playkit-poster-preview .playkit-poster-preview-img:after{display:block;background-image:linear-gradient(rgba(0,0,0,0.8), transparent);height:60%;content:''}.playkit-control-button-container.playkit-control-playlist-button:hover .playkit-poster-preview{opacity:1}.playkit-icon-picture-in-picture-stop{display:none}.playkit-is-in-picture-in-picture .playkit-icon-picture-in-picture-start{display:none}.playkit-is-in-picture-in-picture .playkit-icon-picture-in-picture -stop{display:block}.playkit-player-gui>.playkit-playback-controls,.playkit-center-playback-controls{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);white-space:nowrap}.playkit-bottom-bar .playkit-playback-controls{display:inline}.playkit-player.playkit-size-sm.playkit-state-idle .playkit-control-playlist-button,.playkit-player.playkit-size-xs.playkit-state-idle .playkit-control-playlist-button,.playkit-player.playkit-touch.playkit-state-idle .playkit-control-playlist-button{display:none}.playkit-player.playkit-size-sm:not(.playkit-state-idle) .playkit-bottom-bar .playkit-playback-controls,.playkit-player.playkit-size-xs:not(.playkit-state-idle) .playkit-bottom-bar .playkit-playback-controls,.playkit-player.playkit-touch:not(.playkit-state-idle) .playkit-bottom-bar .playkit-playback-controls{display:none}.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls,.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls{display:block}.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-control-button,.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-control-button,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-control-button,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-control-button,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-control-button,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-control-button{width:auto;height:auto;padding:0 16px;-webkit-filter:drop-shadow(0px 0px 8px rgba(0,0,0,0.5));filter:drop-shadow(0px 0px 8px rgba(0,0,0,0.5))}.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-icon,.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-icon,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-icon,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-icon,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-icon,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-icon{width:64px;height:64px}.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-poster-preview,.playkit-player.playkit-size-sm:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-poster-preview,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-poster-preview,.playkit-player.playkit-size-xs:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-poster-preview,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-player-gui>.playkit-playback-controls .playkit-poster-preview,.playkit-player.playkit-touch:not(.playkit-state-idle).playkit-hover .playkit-center-playback-controls .playkit-poster-preview{opacity:0}@keyframes playkit-slideIn{0%{right:-160px}100%{right:0}}.playkit-player .playkit-playlist-countdown{height:72px;position:absolute;right:0;bottom:0;margin:16px;transform:translateY(0px);transition:transform ease-in 100ms, opacity 400ms, bottom 300ms;cursor:pointer}.playkit-player .playkit-playlist-countdown.playkit-slideIn{right:-160px;animation:playkit-slideIn 500ms 500ms forwards}.playkit-player .playkit-playlist-countdown.playkit-hidden{pointer-events:none;opacity:0}.playkit-player .playkit-playlist-countdown.playkit-hidden .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background{width:0}.playkit-player .playkit-playlist-countdown.playkit-hidden .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content{opacity:0}.playkit-player .playkit-playlist-countdown.playkit-canceled{bottom:-50px;opacity:0}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-poster{width:120px;height:inherit;float:left;border-radius:4px 0 0 4px;background-size:contain;background-repeat:round}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder{width:160px;height:inherit;float:right}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background{width:inherit;border-radius:0 4px 3px 0;background-color:rgba(0,0,0,0.7);height:inherit;transition:width 500ms 1000ms}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content{width:inherit;transition:opacity 300ms 1200ms}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text{width:100%;padding:10px;text-align:left;color:#fff;float:left;line-height:initial}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-title{font-size:14px;font-weight:400;margin-bottom:12px;opacity:0.7}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-name{font-size:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:600}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel{position:absolute;top:4px;right:4px}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-indicator-bar{height:4px;background-color:rgba(255,255,255,0.3);position:absolute;bottom:0;width:inherit;border-radius:inherit}.playkit-player .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-indicator-bar .playkit-playlist-countdown-indicator-progress{max-width:100%;height:100%;background-color:rgba(255,255,255,0.5);transition:width 400ms linear}.playkit-player:not(.playkit-overlay-active).playkit-state-paused .playkit-playlist-countdown,.playkit-player:not(.playkit-overlay-active).playkit-state-idle .playkit-playlist-countdown,.playkit-player:not(.playkit-overlay-active).playkit-hover .playkit-playlist-countdown{transform:translateY(-50px)}.playkit-player.playkit-size-md .playkit-playlist-countdown{height:54px}.playkit-player.playkit-size-md .playkit-playlist-countdown .playkit-playlist-countdown-poster{width:96px}.playkit-player.playkit-size-md .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder{width:152px}.playkit-player.playkit-size-md .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text{padding:8px}.playkit-player.playkit-size-md .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-title{margin-bottom:4px}.playkit-player.playkit-size-md .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel{top:0;right:0}.playkit-player.playkit-size-sm .playkit-playlist-countdown,.playkit-player.playkit-size-xs .playkit-playlist-countdown,.playkit-player.playkit-size-ty .playkit-playlist-countdown{z-index:1;height:36px;margin:8px}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-poster,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-poster,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-poster{display:none}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder{width:108px}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background{transition:width 500ms;border-radius:2px}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text{width:90%;padding:3px 0 0 4px}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-title,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-title,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-title{font-size:12px;margin-bottom:0}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-name,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-name,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-text .playkit-playlist-countdown-text-name{font-size:12px;font-weight:400}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel{width:24px;height:24px;margin-top:3px}.playkit-player.playkit-size-sm .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel *,.playkit-player.playkit-size-xs .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel *,.playkit-player.playkit-size-ty .playkit-playlist-countdown .playkit-playlist-countdown-content-placeholder .playkit-playlist-countdown-content-background .playkit-playlist-countdown-content .playkit-playlist-countdown-cancel *{width:inherit;height:inherit}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay{position:absolute;width:100%;height:100%;background-color:rgba(0,0,0,0.5)}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content{position:relative;top:50%;transform:translateY(-50%)}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-text{position:absolute;width:100%;top:-90px;font-size:15px;color:#fff;padding:4px 8px 12px 8px;text-align:center}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-text .playkit-playlist-next-screen-text-title{padding:4px;font-weight:100}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-text .playkit-playlist-next-screen-text-name{padding:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder{position:relative;margin:auto;width:384px}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio{width:100%;padding-top:56%}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster{position:absolute;top:0;left:0;bottom:0;right:0;border:2px solid rgba(255,255,255,0.2);border-radius:4px;cursor:pointer}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-playlist-next-screen-poster-img{height:100%;border-radius:3px;background-size:contain;background-repeat:round}.playkit-player.playkit-state-idle .playkit-playlist-next-screen-overlay .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-icon{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:64px;height:64px}.playkit-player.playkit-state-idle.playkit-size-lg .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder{width:37.5%}.playkit-player.playkit-state-idle.playkit-size-md .playkit-playlist-next-screen-content .playkit-playlist-next-screen-text{top:-58px}.playkit-player.playkit-state-idle.playkit-size-md .playkit-playlist-next-screen-content .playkit-playlist-next-screen-text .playkit-playlist-next-screen-text-name{padding:0}.playkit-player.playkit-state-idle.playkit-size-md .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder{width:42%}.playkit-player.playkit-state-idle.playkit-size-sm .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder,.playkit-player.playkit-state-idle.playkit-size-xs .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder,.playkit-player.playkit-state-idle.playkit-size-ty .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder{width:32px}.playkit-player.playkit-state-idle.playkit-size-sm .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster,.playkit-player.playkit-state-idle.playkit-size-xs .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster,.playkit-player.playkit-state-idle.playkit-size-ty .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster{border:0}.playkit-player.playkit-state-idle.playkit-size-sm .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-playlist-next-screen-poster-img,.playkit-player.playkit-state-idle.playkit-size-xs .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-playlist-next-screen-poster-img,.playkit-player.playkit-state-idle.playkit-size-ty .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-playlist-next-screen-poster-img{display:none}.playkit-player.playkit-state-idle.playkit-size-sm .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-icon,.playkit-player.playkit-state-idle.playkit-size-xs .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-icon,.playkit-player.playkit-state-idle.playkit-size-ty .playkit-playlist-next-screen-content .playkit-playlist-next-screen-poster-placeholder .playkit-playlist-next-screen-poster-aspect-ratio .playkit-playlist-next-screen-poster .playkit-icon{width:32px;height:32px}.playkit-picture-in-picture-overlay{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-poster{all:inherit;background-size:contain;background:black no-repeat center center}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-poster.playkit-has-poster{background-color:#000}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-poster .playkit-dark-layer{background-color:rgba(0,0,0,0.4);position:absolute;top:0;left:0;width:100%;height:100%}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-control{position:absolute;display:flex;flex-direction:column;height:100%}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-control::after{content:'';flex:3}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-control::before{content:'';flex:1}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-text{color:#fff;font-size:18px;white-space:nowrap;overflow:hidden}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-button{height:36px;width:120px;border:2px solid #424242;border-radius:18px;background-color:#333;color:#fff;font-size:15px;font-weight:bold;line-height:30px;cursor:pointer;margin-top:20px;align-self:center}.playkit-picture-in-picture-overlay .playkit-picture-in-picture-button:hover{background-color:#424242}.playkit-copy-url-row .playkit-input-copy-url{margin:0}.playkit-copy-url-row .playkit-btn-copy-url{margin-left:10px}.playkit-copy-url-row .playkit-btn-copy-url .playkit-icon{height:24px;width:24px;margin-top:-3px;display:none}.playkit-copy-url-row .playkit-btn-copy-url .playkit-icon-copy{display:block}.playkit-copy-url-row .playkit-btn-copy-url.playkit-copied .playkit-icon-copy{display:none}.playkit-copy-url-row .playkit-btn-copy-url.playkit-copied .playkit-icon-check{display:block}.playkit-IE.playkit-player .playkit-tooltip .playkit-tooltip-label{white-space:nowrap}.playkit-player .playkit-tooltip{position:relative;display:inline-block;height:100%;width:100%}.playkit-player .playkit-tooltip .playkit-tooltip-label{visibility:hidden;background-color:#fff;color:#333;text-align:center;padding:4px 6px;border-radius:4px;position:absolute;line-height:normal;font-weight:bold;font-size:13px;opacity:0;transition:opacity 1s;width:max-content;display:table}.playkit-player .playkit-tooltip .playkit-tooltip-label:after{content:'';position:absolute;border-width:5px;border-style:solid;border-radius:3px;color:#fff;z-index:-1}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-top{bottom:calc(100% + 10px);left:50%;transform:translate(-50%)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-top:after{bottom:-4px;left:50%;transform:translate(-50%) rotate(45deg) skew(5deg, 5deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-top-left{bottom:calc(100% + 10px);left:50%;transform:translate(-100%);margin-left:16px}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-top-left:after{bottom:-4px;right:0;margin-right:11px;transform:rotate(45deg) skew(5deg, 5deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-top-right{bottom:calc(100% + 10px);left:50%;transform:translate(-16px)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-top-right:after{bottom:-4px;left:0;margin-left:11px;transform:rotate(45deg) skew(5deg, 5deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-bottom{top:calc(100% + 10px);left:50%;transform:translate(-50%)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-bottom:after{top:-4px;left:50%;margin-left:-5px;transform:rotate(45deg) skew(5deg, 5deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-bottom-right{top:calc(100% + 10px);left:50%;transform:translate(-16px)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-bottom-right:after{top:-4px;left:0;margin-left:11px;transform:rotate(45deg) skew(5deg, 5deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-bottom-left{top:calc(100% + 10px);transform:translate(-100%);left:50%;margin-left:16px}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-bottom-left:after{top:-4px;right:0;margin-right:11px;transform:rotate(45deg) skew(5deg, 5deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-left{top:50%;right:calc(100% + 10px);transform:translate(0, -50%)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-left:after{top:50%;left:100%;margin-left:-6px;margin-top:-5px;transform:rotate(135deg) skew(10deg, 10deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-right{top:50%;left:calc(100% + 10px);transform:translate(0, -50%)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-tooltip-right:after{top:50%;right:100%;margin-top:-5px;margin-right:-6px;transform:rotate(135deg) skew(10deg, 10deg)}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-show{visibility:visible;opacity:1}.playkit-player .playkit-tooltip .playkit-tooltip-label.playkit-hide{transition:opacity 0.15s ease-in-out}.playkit-side-panel{position:absolute;overflow:hidden;transition:all 500ms;transition-property:left, right, bottom, top, opacity}.playkit-vertical-side-panel{height:100%}.playkit-horizontal-side-panel{height:0;left:0;right:0}.playkit-side-panel-content{width:100%;height:100%}.playkit-interactive-area{pointer-events:none;width:100%;height:100%;position:absolute;top:0;transition:top 500ms,height 500ms}.playkit-player:not(.playkit-overlay-active).playkit-state-paused .playkit-interactive-area,.playkit-player:not(.playkit-overlay-active).playkit-state-idle .playkit-interactive-area,.playkit-player:not(.playkit-overlay-active).playkit-hover .playkit-interactive-area{height:calc(100% - 120px);top:60px}.playkit-video-area{pointer-events:none;transition:all 500ms;transition-property:left, right, bottom, top, width, height}.playkit-gui-area{pointer-events:none;transition:all 500ms;transition-property:left, right, bottom, top}\n",""]),t.locals={row:"playkit-row","d-inline-block":"playkit-d-inline-block",dInlineBlock:"playkit-d-inline-block","mobile-hidden-select":"playkit-mobile-hidden-select",mobileHiddenSelect:"playkit-mobile-hidden-select","font-size-base":"playkit-font-size-base",fontSizeBase:"playkit-font-size-base","ad-notice":"playkit-ad-notice",adNotice:"playkit-ad-notice",player:"playkit-player","form-group":"playkit-form-group",formGroup:"playkit-form-group","has-error":"playkit-has-error",hasError:"playkit-has-error","form-control":"playkit-form-control",formControl:"playkit-form-control","has-icon":"playkit-has-icon",hasIcon:"playkit-has-icon",icon:"playkit-icon",checkbox:"playkit-checkbox","form-group-row":"playkit-form-group-row",formGroupRow:"playkit-form-group-row",dropdown:"playkit-dropdown",btn:"playkit-btn","btn-block":"playkit-btn-block",btnBlock:"playkit-btn-block","btn-dark-transparent":"playkit-btn-dark-transparent",btnDarkTransparent:"playkit-btn-dark-transparent","btn-branded":"playkit-btn-branded",btnBranded:"playkit-btn-branded","btn-rounded":"playkit-btn-rounded",btnRounded:"playkit-btn-rounded","icon-maximize":"playkit-icon-maximize",iconMaximize:"playkit-icon-maximize","icon-minimize":"playkit-icon-minimize",iconMinimize:"playkit-icon-minimize","icon-play":"playkit-icon-play",iconPlay:"playkit-icon-play","icon-pause":"playkit-icon-pause",iconPause:"playkit-icon-pause","icon-volume-base":"playkit-icon-volume-base",iconVolumeBase:"playkit-icon-volume-base","icon-volume-waves":"playkit-icon-volume-waves",iconVolumeWaves:"playkit-icon-volume-waves","icon-volume-wave":"playkit-icon-volume-wave",iconVolumeWave:"playkit-icon-volume-wave","icon-volume-mute":"playkit-icon-volume-mute",iconVolumeMute:"playkit-icon-volume-mute","icon-close":"playkit-icon-close",iconClose:"playkit-icon-close","icon-share":"playkit-icon-share",iconShare:"playkit-icon-share","icon-settings":"playkit-icon-settings",iconSettings:"playkit-icon-settings","icon-check":"playkit-icon-check",iconCheck:"playkit-icon-check","icon-language":"playkit-icon-language",iconLanguage:"playkit-icon-language","icon-quality":"playkit-icon-quality",iconQuality:"playkit-icon-quality","icon-captions":"playkit-icon-captions",iconCaptions:"playkit-icon-captions","icon-speed":"playkit-icon-speed",iconSpeed:"playkit-icon-speed","icon-speed-down":"playkit-icon-speed-down",iconSpeedDown:"playkit-icon-speed-down","icon-speed-up":"playkit-icon-speed-up",iconSpeedUp:"playkit-icon-speed-up","icon-audio":"playkit-icon-audio",iconAudio:"playkit-icon-audio","icon-copy":"playkit-icon-copy",iconCopy:"playkit-icon-copy","icon-facebook":"playkit-icon-facebook",iconFacebook:"playkit-icon-facebook","icon-twitter":"playkit-icon-twitter",iconTwitter:"playkit-icon-twitter","icon-linkedin":"playkit-icon-linkedin",iconLinkedin:"playkit-icon-linkedin","icon-email":"playkit-icon-email",iconEmail:"playkit-icon-email","icon-embed":"playkit-icon-embed",iconEmbed:"playkit-icon-embed","icon-link":"playkit-icon-link",iconLink:"playkit-icon-link","icon-arrow-down":"playkit-icon-arrow-down",iconArrowDown:"playkit-icon-arrow-down","icon-start-over":"playkit-icon-start-over",iconStartOver:"playkit-icon-start-over","icon-seek-end":"playkit-icon-seek-end",iconSeekEnd:"playkit-icon-seek-end","icon-rewind":"playkit-icon-rewind",iconRewind:"playkit-icon-rewind","icon-rewind-10":"playkit-icon-rewind-10",iconRewind10:"playkit-icon-rewind-10","icon-forward":"playkit-icon-forward",iconForward:"playkit-icon-forward","icon-forward-10":"playkit-icon-forward-10",iconForward10:"playkit-icon-forward-10","icon-vr-stereo":"playkit-icon-vr-stereo",iconVrStereo:"playkit-icon-vr-stereo","icon-vr-stereo-full":"playkit-icon-vr-stereo-full",iconVrStereoFull:"playkit-icon-vr-stereo-full","icon-chromecast":"playkit-icon-chromecast",iconChromecast:"playkit-icon-chromecast","icon-chromecast-brand":"playkit-icon-chromecast-brand",iconChromecastBrand:"playkit-icon-chromecast-brand","icon-next":"playkit-icon-next",iconNext:"playkit-icon-next","icon-prev":"playkit-icon-prev",iconPrev:"playkit-icon-prev","icon-picture-in-picture-start":"playkit-icon-picture-in-picture-start",iconPictureInPictureStart:"playkit-icon-picture-in-picture-start","icon-picture-in-picture-stop":"playkit-icon-picture-in-picture-stop",iconPictureInPictureStop:"playkit-icon-picture-in-picture-stop",active:"playkit-active","dropdown-menu":"playkit-dropdown-menu",dropdownMenu:"playkit-dropdown-menu","dropdown-button":"playkit-dropdown-button",dropdownButton:"playkit-dropdown-button",openDropmenu:"playkit-openDropmenu",top:"playkit-top",bottom:"playkit-bottom",right:"playkit-right",left:"playkit-left","stick-bottom":"playkit-stick-bottom",stickBottom:"playkit-stick-bottom","dropdown-menu-item":"playkit-dropdown-menu-item",dropdownMenuItem:"playkit-dropdown-menu-item","menu-icon-container":"playkit-menu-icon-container",menuIconContainer:"playkit-menu-icon-container","control-button":"playkit-control-button",controlButton:"playkit-control-button","control-button-rounded":"playkit-control-button-rounded",controlButtonRounded:"playkit-control-button-rounded",touch:"playkit-touch","control-button-container":"playkit-control-button-container",controlButtonContainer:"playkit-control-button-container","state-idle":"playkit-state-idle",stateIdle:"playkit-state-idle","no-idle-control":"playkit-no-idle-control",noIdleControl:"playkit-no-idle-control",rotate:"playkit-rotate",spin:"playkit-spin","reverse-rotate":"playkit-reverse-rotate",reverseRotate:"playkit-reverse-rotate","reverse-spin":"playkit-reverse-spin",reverseSpin:"playkit-reverse-spin","playback-gui-wrapper":"playkit-playback-gui-wrapper",playbackGuiWrapper:"playkit-playback-gui-wrapper","ad-gui-wrapper":"playkit-ad-gui-wrapper",adGuiWrapper:"playkit-ad-gui-wrapper","player-gui":"playkit-player-gui",playerGui:"playkit-player-gui","overlay-active":"playkit-overlay-active",overlayActive:"playkit-overlay-active",nav:"playkit-nav","ad-break":"playkit-ad-break",adBreak:"playkit-ad-break","metadata-loaded":"playkit-metadata-loaded",metadataLoaded:"playkit-metadata-loaded",hover:"playkit-hover","state-paused":"playkit-state-paused",statePaused:"playkit-state-paused",iOS:"playkit-iOS",iOs:"playkit-iOS",Safari:"playkit-Safari",safari:"playkit-Safari",fullscreen:"playkit-fullscreen","video-player":"playkit-video-player",videoPlayer:"playkit-video-player",overlay:"playkit-overlay",openOverlay:"playkit-openOverlay","overlay-contents":"playkit-overlay-contents",overlayContents:"playkit-overlay-contents",title:"playkit-title","close-overlay":"playkit-close-overlay",closeOverlay:"playkit-close-overlay","overlay-screen":"playkit-overlay-screen",overlayScreen:"playkit-overlay-screen","size-md":"playkit-size-md",sizeMd:"playkit-size-md","size-sm":"playkit-size-sm",sizeSm:"playkit-size-sm","size-xs":"playkit-size-xs",sizeXs:"playkit-size-xs","smart-container":"playkit-smart-container",smartContainer:"playkit-smart-container",openSmartContainer:"playkit-openSmartContainer",leaving:"playkit-leaving",closeSmartContainer:"playkit-closeSmartContainer","smart-container-item":"playkit-smart-container-item",smartContainerItem:"playkit-smart-container-item","select-menu-item":"playkit-select-menu-item",selectMenuItem:"playkit-select-menu-item","label-icon":"playkit-label-icon",labelIcon:"playkit-label-icon",Windows:"playkit-Windows",windows:"playkit-Windows","share-overlay":"playkit-share-overlay",shareOverlay:"playkit-share-overlay","share-icons":"playkit-share-icons",shareIcons:"playkit-share-icons",facebook:"playkit-facebook",twitter:"playkit-twitter",linkedin:"playkit-linkedin","link-options-container":"playkit-link-options-container",linkOptionsContainer:"playkit-link-options-container","copy-url-row":"playkit-copy-url-row",copyUrlRow:"playkit-copy-url-row","input-copy-url":"playkit-input-copy-url",inputCopyUrl:"playkit-input-copy-url","btn-copy-url":"playkit-btn-copy-url",btnCopyUrl:"playkit-btn-copy-url","video-start-options-row":"playkit-video-start-options-row",videoStartOptionsRow:"playkit-video-start-options-row","share-main-container":"playkit-share-main-container",shareMainContainer:"playkit-share-main-container","cvaa-overlay":"playkit-cvaa-overlay",cvaaOverlay:"playkit-cvaa-overlay",sample:"playkit-sample",custom:"playkit-custom","black-bg":"playkit-black-bg",blackBg:"playkit-black-bg","yellow-text":"playkit-yellow-text",yellowText:"playkit-yellow-text","active-tick":"playkit-active-tick",activeTick:"playkit-active-tick","button-save-cvaa":"playkit-button-save-cvaa",buttonSaveCvaa:"playkit-button-save-cvaa","custom-captions-applied":"playkit-custom-captions-applied",customCaptionsApplied:"playkit-custom-captions-applied","custom-caption-form":"playkit-custom-caption-form",customCaptionForm:"playkit-custom-caption-form",slider:"playkit-slider","preview-container":"playkit-preview-container",previewContainer:"playkit-preview-container","font-size":"playkit-font-size",fontSize:"playkit-font-size","font-color":"playkit-font-color",fontColor:"playkit-font-color","font-family":"playkit-font-family",fontFamily:"playkit-font-family","font-style":"playkit-font-style",fontStyle:"playkit-font-style","font-opacity":"playkit-font-opacity",fontOpacity:"playkit-font-opacity","background-color":"playkit-background-color",backgroundColor:"playkit-background-color","background-opacity":"playkit-background-opacity",backgroundOpacity:"playkit-background-opacity","loading-backdrop":"playkit-loading-backdrop",loadingBackdrop:"playkit-loading-backdrop",show:"playkit-show","spinner-container":"playkit-spinner-container",spinnerContainer:"playkit-spinner-container",spinner:"playkit-spinner","kaltura-spinner":"playkit-kaltura-spinner",kalturaSpinner:"playkit-kaltura-spinner","control-play-pause":"playkit-control-play-pause",controlPlayPause:"playkit-control-play-pause","is-playing":"playkit-is-playing",isPlaying:"playkit-is-playing","volume-control":"playkit-volume-control",volumeControl:"playkit-volume-control","volume-control-bar":"playkit-volume-control-bar",volumeControlBar:"playkit-volume-control-bar","is-muted":"playkit-is-muted",isMuted:"playkit-is-muted","dragging-active":"playkit-dragging-active",draggingActive:"playkit-dragging-active",bar:"playkit-bar",progress:"playkit-progress","smart-container-open":"playkit-smart-container-open",smartContainerOpen:"playkit-smart-container-open","size-ty":"playkit-size-ty",sizeTy:"playkit-size-ty","control-fullscreen":"playkit-control-fullscreen",controlFullscreen:"playkit-control-fullscreen","is-fullscreen":"playkit-is-fullscreen",isFullscreen:"playkit-is-fullscreen","seek-bar":"playkit-seek-bar",seekBar:"playkit-seek-bar","time-preview":"playkit-time-preview",timePreview:"playkit-time-preview","frame-preview":"playkit-frame-preview",framePreview:"playkit-frame-preview","progress-bar":"playkit-progress-bar",progressBar:"playkit-progress-bar",scrubber:"playkit-scrubber","virtual-progress":"playkit-virtual-progress",virtualProgress:"playkit-virtual-progress",live:"playkit-live",buffered:"playkit-buffered","frame-preview-img":"playkit-frame-preview-img",framePreviewImg:"playkit-frame-preview-img","time-display":"playkit-time-display",timeDisplay:"playkit-time-display","video-playing-title":"playkit-video-playing-title",videoPlayingTitle:"playkit-video-playing-title","bottom-bar":"playkit-bottom-bar",bottomBar:"playkit-bottom-bar",hide:"playkit-hide","left-controls":"playkit-left-controls",leftControls:"playkit-left-controls","right-controls":"playkit-right-controls",rightControls:"playkit-right-controls",casting:"playkit-casting","menu-active":"playkit-menu-active",menuActive:"playkit-menu-active","top-bar":"playkit-top-bar",topBar:"playkit-top-bar",disabled:"playkit-disabled","overlay-action":"playkit-overlay-action",overlayAction:"playkit-overlay-action",in:"playkit-in",overlayActionIconIn:"playkit-overlayActionIconIn","pre-playback-play-overlay":"playkit-pre-playback-play-overlay",prePlaybackPlayOverlay:"playkit-pre-playback-play-overlay","pre-playback-play-button":"playkit-pre-playback-play-button",prePlaybackPlayButton:"playkit-pre-playback-play-button","pre-playback":"playkit-pre-playback",prePlayback:"playkit-pre-playback","btn-skip-ad":"playkit-btn-skip-ad",btnSkipAd:"playkit-btn-skip-ad","skip-ad":"playkit-skip-ad",skipAd:"playkit-skip-ad","live-tag":"playkit-live-tag",liveTag:"playkit-live-tag","non-live-playhead":"playkit-non-live-playhead",nonLivePlayhead:"playkit-non-live-playhead","unmute-button-container":"playkit-unmute-button-container",unmuteButtonContainer:"playkit-unmute-button-container","show-icon-only":"playkit-show-icon-only",showIconOnly:"playkit-show-icon-only","unmute-button":"playkit-unmute-button",unmuteButton:"playkit-unmute-button","has-top-bar":"playkit-has-top-bar",hasTopBar:"playkit-has-top-bar","unmute-icon-container":"playkit-unmute-icon-container",unmuteIconContainer:"playkit-unmute-icon-container","error-overlay":"playkit-error-overlay",errorOverlay:"playkit-error-overlay","svg-container":"playkit-svg-container",svgContainer:"playkit-svg-container",headline:"playkit-headline","error-session":"playkit-error-session",errorSession:"playkit-error-session","retry-btn":"playkit-retry-btn",retryBtn:"playkit-retry-btn","error-text":"playkit-error-text",errorText:"playkit-error-text",handle:"playkit-handle","learn-more":"playkit-learn-more",learnMore:"playkit-learn-more",watermark:"playkit-watermark","hide-watermark":"playkit-hide-watermark",hideWatermark:"playkit-hide-watermark","advanced-captions-menu-link":"playkit-advanced-captions-menu-link",advancedCaptionsMenuLink:"playkit-advanced-captions-menu-link","control-vr-stereo":"playkit-control-vr-stereo",controlVrStereo:"playkit-control-vr-stereo","vr-stereo-mode":"playkit-vr-stereo-mode",vrStereoMode:"playkit-vr-stereo-mode","cast-button":"playkit-cast-button",castButton:"playkit-cast-button","cast-overlay":"playkit-cast-overlay",castOverlay:"playkit-cast-overlay","cast-poster":"playkit-cast-poster",castPoster:"playkit-cast-poster","has-poster":"playkit-has-poster",hasPoster:"playkit-has-poster","cast-black-cover":"playkit-cast-black-cover",castBlackCover:"playkit-cast-black-cover","cast-box":"playkit-cast-box",castBox:"playkit-cast-box","cast-icon":"playkit-cast-icon",castIcon:"playkit-cast-icon","cast-connecting-spinner":"playkit-cast-connecting-spinner",castConnectingSpinner:"playkit-cast-connecting-spinner","cast-text":"playkit-cast-text",castText:"playkit-cast-text","cast-status":"playkit-cast-status",castStatus:"playkit-cast-status","cast-device":"playkit-cast-device",castDevice:"playkit-cast-device","cast-on-tv-button-container":"playkit-cast-on-tv-button-container",castOnTvButtonContainer:"playkit-cast-on-tv-button-container","show-cast-on-tv":"playkit-show-cast-on-tv",showCastOnTv:"playkit-show-cast-on-tv",castOnTVAnimation:"playkit-castOnTVAnimation",castOnTvAnimation:"playkit-castOnTVAnimation","cast-on-tv-button":"playkit-cast-on-tv-button",castOnTvButton:"playkit-cast-on-tv-button","cast-on-tv-icon-container":"playkit-cast-on-tv-icon-container",castOnTvIconContainer:"playkit-cast-on-tv-icon-container",backdrop:"playkit-backdrop","control-playlist-button":"playkit-control-playlist-button",controlPlaylistButton:"playkit-control-playlist-button","poster-preview":"playkit-poster-preview",posterPreview:"playkit-poster-preview","poster-preview-text":"playkit-poster-preview-text",posterPreviewText:"playkit-poster-preview-text","poster-preview-text-title":"playkit-poster-preview-text-title",posterPreviewTextTitle:"playkit-poster-preview-text-title","poster-preview-text-name":"playkit-poster-preview-text-name",posterPreviewTextName:"playkit-poster-preview-text-name","poster-preview-img":"playkit-poster-preview-img",posterPreviewImg:"playkit-poster-preview-img","is-in-picture-in-picture":"playkit-is-in-picture-in-picture",isInPictureInPicture:"playkit-is-in-picture-in-picture","icon-picture-in-picture":"playkit-icon-picture-in-picture",iconPictureInPicture:"playkit-icon-picture-in-picture","playback-controls":"playkit-playback-controls",playbackControls:"playkit-playback-controls","center-playback-controls":"playkit-center-playback-controls",centerPlaybackControls:"playkit-center-playback-controls","playlist-countdown":"playkit-playlist-countdown",playlistCountdown:"playkit-playlist-countdown",slideIn:"playkit-slideIn",hidden:"playkit-hidden","playlist-countdown-content-placeholder":"playkit-playlist-countdown-content-placeholder",playlistCountdownContentPlaceholder:"playkit-playlist-countdown-content-placeholder","playlist-countdown-content-background":"playkit-playlist-countdown-content-background",playlistCountdownContentBackground:"playkit-playlist-countdown-content-background","playlist-countdown-content":"playkit-playlist-countdown-content",playlistCountdownContent:"playkit-playlist-countdown-content",canceled:"playkit-canceled","playlist-countdown-poster":"playkit-playlist-countdown-poster",playlistCountdownPoster:"playkit-playlist-countdown-poster","playlist-countdown-text":"playkit-playlist-countdown-text",playlistCountdownText:"playkit-playlist-countdown-text","playlist-countdown-text-title":"playkit-playlist-countdown-text-title",playlistCountdownTextTitle:"playkit-playlist-countdown-text-title","playlist-countdown-text-name":"playkit-playlist-countdown-text-name",playlistCountdownTextName:"playkit-playlist-countdown-text-name","playlist-countdown-cancel":"playkit-playlist-countdown-cancel",playlistCountdownCancel:"playkit-playlist-countdown-cancel","playlist-countdown-indicator-bar":"playkit-playlist-countdown-indicator-bar",playlistCountdownIndicatorBar:"playkit-playlist-countdown-indicator-bar","playlist-countdown-indicator-progress":"playkit-playlist-countdown-indicator-progress",playlistCountdownIndicatorProgress:"playkit-playlist-countdown-indicator-progress","playlist-next-screen-overlay":"playkit-playlist-next-screen-overlay",playlistNextScreenOverlay:"playkit-playlist-next-screen-overlay","playlist-next-screen-content":"playkit-playlist-next-screen-content",playlistNextScreenContent:"playkit-playlist-next-screen-content","playlist-next-screen-text":"playkit-playlist-next-screen-text",playlistNextScreenText:"playkit-playlist-next-screen-text","playlist-next-screen-text-title":"playkit-playlist-next-screen-text-title",playlistNextScreenTextTitle:"playkit-playlist-next-screen-text-title","playlist-next-screen-text-name":"playkit-playlist-next-screen-text-name",playlistNextScreenTextName:"playkit-playlist-next-screen-text-name","playlist-next-screen-poster-placeholder":"playkit-playlist-next-screen-poster-placeholder",playlistNextScreenPosterPlaceholder:"playkit-playlist-next-screen-poster-placeholder","playlist-next-screen-poster-aspect-ratio":"playkit-playlist-next-screen-poster-aspect-ratio",playlistNextScreenPosterAspectRatio:"playkit-playlist-next-screen-poster-aspect-ratio","playlist-next-screen-poster":"playkit-playlist-next-screen-poster",playlistNextScreenPoster:"playkit-playlist-next-screen-poster","playlist-next-screen-poster-img":"playkit-playlist-next-screen-poster-img",playlistNextScreenPosterImg:"playkit-playlist-next-screen-poster-img","size-lg":"playkit-size-lg",sizeLg:"playkit-size-lg","picture-in-picture-overlay":"playkit-picture-in-picture-overlay",pictureInPictureOverlay:"playkit-picture-in-picture-overlay","picture-in-picture-poster":"playkit-picture-in-picture-poster",pictureInPicturePoster:"playkit-picture-in-picture-poster","dark-layer":"playkit-dark-layer",darkLayer:"playkit-dark-layer","picture-in-picture-control":"playkit-picture-in-picture-control",pictureInPictureControl:"playkit-picture-in-picture-control","picture-in-picture-text":"playkit-picture-in-picture-text",pictureInPictureText:"playkit-picture-in-picture-text","picture-in-picture-button":"playkit-picture-in-picture-button",pictureInPictureButton:"playkit-picture-in-picture-button",copied:"playkit-copied",IE:"playkit-IE",ie:"playkit-IE",tooltip:"playkit-tooltip","tooltip-label":"playkit-tooltip-label",tooltipLabel:"playkit-tooltip-label","tooltip-top":"playkit-tooltip-top",tooltipTop:"playkit-tooltip-top","tooltip-top-left":"playkit-tooltip-top-left",tooltipTopLeft:"playkit-tooltip-top-left","tooltip-top-right":"playkit-tooltip-top-right",tooltipTopRight:"playkit-tooltip-top-right","tooltip-bottom":"playkit-tooltip-bottom",tooltipBottom:"playkit-tooltip-bottom","tooltip-bottom-right":"playkit-tooltip-bottom-right",tooltipBottomRight:"playkit-tooltip-bottom-right","tooltip-bottom-left":"playkit-tooltip-bottom-left",tooltipBottomLeft:"playkit-tooltip-bottom-left","tooltip-left":"playkit-tooltip-left",tooltipLeft:"playkit-tooltip-left","tooltip-right":"playkit-tooltip-right",tooltipRight:"playkit-tooltip-right","side-panel":"playkit-side-panel",sidePanel:"playkit-side-panel","vertical-side-panel":"playkit-vertical-side-panel",verticalSidePanel:"playkit-vertical-side-panel","horizontal-side-panel":"playkit-horizontal-side-panel",horizontalSidePanel:"playkit-horizontal-side-panel","side-panel-content":"playkit-side-panel-content",sidePanelContent:"playkit-side-panel-content","interactive-area":"playkit-interactive-area",interactiveArea:"playkit-interactive-area","video-area":"playkit-video-area",videoArea:"playkit-video-area","gui-area":"playkit-gui-area",guiArea:"playkit-gui-area"},e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"h",(function(){return N})),n.d(t,"createPortal",(function(){return Xe})),n.d(t,"preact",(function(){return r})),n.d(t,"redux",(function(){return o})),n.d(t,"preacti18n",(function(){return a})),n.d(t,"preactHooks",(function(){return i})),n.d(t,"style",(function(){return Ya.a})),n.d(t,"Reducers",(function(){return E})),n.d(t,"Presets",(function(){return k})),n.d(t,"Components",(function(){return w})),n.d(t,"Utils",(function(){return b})),n.d(t,"reducers",(function(){return E})),n.d(t,"presets",(function(){return k})),n.d(t,"components",(function(){return w})),n.d(t,"utils",(function(){return b})),n.d(t,"EventType",(function(){return zn})),n.d(t,"UIManager",(function(){return vE})),n.d(t,"VERSION",(function(){return WE})),n.d(t,"NAME",(function(){return YE})),n.d(t,"SidePanelPositions",(function(){return Pr})),n.d(t,"SidePanelModes",(function(){return Rr}));var r={};n.r(r),n.d(r,"render",(function(){return ne})),n.d(r,"hydrate",(function(){return re})),n.d(r,"createElement",(function(){return N})),n.d(r,"h",(function(){return N})),n.d(r,"Fragment",(function(){return F})),n.d(r,"createRef",(function(){return U})),n.d(r,"isValidElement",(function(){return S})),n.d(r,"Component",(function(){return B})),n.d(r,"cloneElement",(function(){return ie})),n.d(r,"createContext",(function(){return oe})),n.d(r,"toChildArray",(function(){return W})),n.d(r,"__u",(function(){return ee})),n.d(r,"options",(function(){return T}));var i={};n.r(i),n.d(i,"useState",(function(){return ve})),n.d(i,"useReducer",(function(){return ge})),n.d(i,"useEffect",(function(){return me})),n.d(i,"useLayoutEffect",(function(){return be})),n.d(i,"useRef",(function(){return _e})),n.d(i,"useImperativeHandle",(function(){return ke})),n.d(i,"useMemo",(function(){return Ee})),n.d(i,"useCallback",(function(){return we})),n.d(i,"useContext",(function(){return Te})),n.d(i,"useDebugValue",(function(){return Se})),n.d(i,"useErrorBoundary",(function(){return Ae}));var o={};n.r(o),n.d(o,"Provider",(function(){return pt})),n.d(o,"connectAdvanced",(function(){return At})),n.d(o,"ReactReduxContext",(function(){return st})),n.d(o,"connect",(function(){return on})),n.d(o,"batch",(function(){return rt})),n.d(o,"useDispatch",(function(){return cn})),n.d(o,"createDispatchHook",(function(){return ln})),n.d(o,"useSelector",(function(){return dn})),n.d(o,"createSelectorHook",(function(){return pn})),n.d(o,"useStore",(function(){return un})),n.d(o,"createStoreHook",(function(){return sn})),n.d(o,"shallowEqual",(function(){return Pt}));var a={};n.r(a),n.d(a,"default",(function(){return In})),n.d(a,"IntlProvider",(function(){return bn})),n.d(a,"Localizer",(function(){return Rn})),n.d(a,"MarkupText",(function(){return Cn})),n.d(a,"Text",(function(){return On})),n.d(a,"intl",(function(){return _n})),n.d(a,"withText",(function(){return Dn}));var s={};n.r(s),n.d(s,"types",(function(){return Ar})),n.d(s,"SidePanelOrientation",(function(){return Or})),n.d(s,"SidePanelPositions",(function(){return Pr})),n.d(s,"SidePanelModes",(function(){return Rr})),n.d(s,"initialState",(function(){return Dr})),n.d(s,"default",(function(){return Ir})),n.d(s,"actions",(function(){return Lr}));var u={};n.r(u),n.d(u,"types",(function(){return Ei})),n.d(u,"initialState",(function(){return wi})),n.d(u,"default",(function(){return Ti})),n.d(u,"actions",(function(){return Si}));var l={};n.r(l),n.d(l,"types",(function(){return xi})),n.d(l,"initialState",(function(){return Di})),n.d(l,"default",(function(){return Ii})),n.d(l,"actions",(function(){return Li}));var c={};n.r(c),n.d(c,"types",(function(){return Ui})),n.d(c,"initialState",(function(){return Fi})),n.d(c,"default",(function(){return Bi})),n.d(c,"actions",(function(){return Vi}));var f={};n.r(f),n.d(f,"types",(function(){return zi})),n.d(f,"initialState",(function(){return Wi})),n.d(f,"default",(function(){return Yi})),n.d(f,"actions",(function(){return qi}));var p={};n.r(p),n.d(p,"types",(function(){return Qi})),n.d(p,"initialState",(function(){return Zi})),n.d(p,"default",(function(){return eo})),n.d(p,"actions",(function(){return to}));var d={};n.r(d),n.d(d,"types",(function(){return oo})),n.d(d,"initialState",(function(){return ao})),n.d(d,"default",(function(){return so})),n.d(d,"actions",(function(){return uo}));var h={};n.r(h),n.d(h,"types",(function(){return po})),n.d(h,"initialState",(function(){return ho})),n.d(h,"default",(function(){return yo})),n.d(h,"actions",(function(){return vo}));var y={};n.r(y),n.d(y,"types",(function(){return _o})),n.d(y,"initialState",(function(){return ko})),n.d(y,"default",(function(){return Eo})),n.d(y,"actions",(function(){return wo}));var v={};n.r(v),n.d(v,"types",(function(){return Oo})),n.d(v,"initialState",(function(){return Po})),n.d(v,"default",(function(){return Ro})),n.d(v,"actions",(function(){return Co}));var g={};n.r(g),n.d(g,"types",(function(){return Lo})),n.d(g,"initialState",(function(){return Mo})),n.d(g,"default",(function(){return No})),n.d(g,"actions",(function(){return jo}));var m={};n.r(m),n.d(m,"types",(function(){return Vo})),n.d(m,"initialState",(function(){return Go})),n.d(m,"default",(function(){return Ko})),n.d(m,"actions",(function(){return Ho}));var b={};n.r(b),n.d(b,"bindActions",(function(){return jr})),n.d(b,"KeyMap",(function(){return Wn})),n.d(b,"getLogger",(function(){return Kn}));var _={};n.r(_),n.d(_,"isPlayingAdOrPlayback",(function(){return ac}));var k={};n.r(k),n.d(k,"idleUI",(function(){return Wl})),n.d(k,"playbackUI",(function(){return v_})),n.d(k,"adsUI",(function(){return ek})),n.d(k,"errorUI",(function(){return hk})),n.d(k,"liveUI",(function(){return Vk}));var E={};n.r(E),n.d(E,"backdrop",(function(){return g})),n.d(E,"config",(function(){return u})),n.d(E,"cvaa",(function(){return h})),n.d(E,"engine",(function(){return l})),n.d(E,"getters",(function(){return _})),n.d(E,"loading",(function(){return p})),n.d(E,"overlayAction",(function(){return v})),n.d(E,"playlist",(function(){return m})),n.d(E,"seekbar",(function(){return c})),n.d(E,"setting",(function(){return y})),n.d(E,"share",(function(){return d})),n.d(E,"shell",(function(){return s})),n.d(E,"volume",(function(){return f}));var w={};n.r(w),n.d(w,"AdLearnMore",(function(){return G_})),n.d(w,"AdSkip",(function(){return M_})),n.d(w,"AdNotice",(function(){return X_})),n.d(w,"BaseComponent",(function(){return AE})),n.d(w,"BottomBar",(function(){return kv})),n.d(w,"CVAAOverlay",(function(){return cy})),n.d(w,"DropDown",(function(){return Yd})),n.d(w,"EngineConnector",(function(){return za})),n.d(w,"ErrorOverlay",(function(){return pk})),n.d(w,"EventDispatcherProvider",(function(){return Zs})),n.d(w,"withEventDispatcher",(function(){return yu})),n.d(w,"Keyboard",(function(){return Hf})),n.d(w,"withKeyboardEvent",(function(){return hp})),n.d(w,"KeyboardEventProvider",(function(){return ep})),n.d(w,"Icon",(function(){return ic})),n.d(w,"IconType",(function(){return rc})),n.d(w,"LiveTag",(function(){return Ik})),n.d(w,"Loading",(function(){return Ml})),n.d(w,"Menu",(function(){return Ud})),n.d(w,"Overlay",(function(){return ad})),n.d(w,"OverlayAction",(function(){return _c})),n.d(w,"OverlayPortal",(function(){return xv})),n.d(w,"PlayerProvider",(function(){return Zo})),n.d(w,"withPlayer",(function(){return sa})),n.d(w,"PrePlaybackPlayOverlay",(function(){return Hc})),n.d(w,"SeekBarLivePlaybackContainer",(function(){return Sk})),n.d(w,"SeekBarPlaybackContainer",(function(){return Vp})),n.d(w,"withLogger",(function(){return nr})),n.d(w,"ShareOverlay",(function(){return hb})),n.d(w,"Shell",(function(){return Ku})),n.d(w,"Slider",(function(){return Lh})),n.d(w,"SmartContainer",(function(){return Ad})),n.d(w,"SmartContainerItem",(function(){return ah})),n.d(w,"TimeDisplay",(function(){return ov})),n.d(w,"TimeDisplayAdsContainer",(function(){return O_})),n.d(w,"TimeDisplayPlaybackContainer",(function(){return hv})),n.d(w,"Tooltip",(function(){return Cc})),n.d(w,"TopBar",(function(){return jb})),n.d(w,"UnmuteIndication",(function(){return Vv})),n.d(w,"VideoPlayer",(function(){return Zu})),n.d(w,"Watermark",(function(){return Jv})),n.d(w,"Logo",(function(){return zb})),n.d(w,"CastOverlay",(function(){return UE})),n.d(w,"CastBeforePlay",(function(){return gg})),n.d(w,"CastAfterPlay",(function(){return zE})),n.d(w,"PlaylistButton",(function(){return Bg})),n.d(w,"PlaylistNextScreen",(function(){return Cm})),n.d(w,"PictureInPicture",(function(){return Gm})),n.d(w,"PlaybackControls",(function(){return um})),n.d(w,"Button",(function(){return jc})),n.d(w,"PlayerArea",(function(){return mr})),n.d(w,"withPlayerPreset",(function(){return mi})),n.d(w,"VideoArea",(function(){return s_})),n.d(w,"GuiArea",(function(){return Hl})),n.d(w,"InteractiveArea",(function(){return Zb})),n.d(w,"KeyboardControl",(function(){return Hf})),n.d(w,"Cast",(function(){return lg})),n.d(w,"CastControl",(function(){return lg})),n.d(w,"Fullscreen",(function(){return Vy})),n.d(w,"FullscreenControl",(function(){return Vy})),n.d(w,"Language",(function(){return Oy})),n.d(w,"LanguageControl",(function(){return Oy})),n.d(w,"PlayPause",(function(){return Qg})),n.d(w,"PlayPauseControl",(function(){return Qg})),n.d(w,"Rewind",(function(){return mf})),n.d(w,"RewindControl",(function(){return mf})),n.d(w,"Forward",(function(){return Rf})),n.d(w,"ForwardControl",(function(){return Rf})),n.d(w,"SeekBar",(function(){return Pp})),n.d(w,"SeekBarControl",(function(){return Pp})),n.d(w,"Settings",(function(){return gh})),n.d(w,"SettingsControl",(function(){return gh})),n.d(w,"Share",(function(){return Ob})),n.d(w,"ShareControl",(function(){return Ob})),n.d(w,"Volume",(function(){return Zp})),n.d(w,"VolumeControl",(function(){return Zp})),n.d(w,"VrStereo",(function(){return Jy})),n.d(w,"VrStereoControl",(function(){return Jy}));var T,S,A,O,P,R,C,x={},D=[],I=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function L(e,t){for(var n in t)e[n]=t[n];return e}function M(e){var t=e.parentNode;t&&t.removeChild(e)}function N(e,t,n){var r,i=arguments,o={};for(r in t)"key"!==r&&"ref"!==r&&(o[r]=t[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(i[r]);if(null!=n&&(o.children=n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===o[r]&&(o[r]=e.defaultProps[r]);return j(e,o,t&&t.key,t&&t.ref,null)}function j(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return null==i&&(o.__v=o),T.vnode&&T.vnode(o),o}function U(){return{current:null}}function F(e){return e.children}function B(e,t){this.props=e,this.context=t}function V(e,t){if(null==t)return e.__?V(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?V(e):null}function G(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return G(e)}}function K(e){(!e.__d&&(e.__d=!0)&&A.push(e)&&!H.__r++||P!==T.debounceRendering)&&((P=T.debounceRendering)||O)(H)}function H(){for(var e;H.__r=A.length;)e=A.sort((function(e,t){return e.__v.__b-t.__v.__b})),A=[],e.some((function(e){var t,n,r,i,o,a,s;e.__d&&(a=(o=(t=e).__v).__e,(s=t.__P)&&(n=[],(r=L({},o)).__v=r,i=J(s,o,r,t.__n,void 0!==s.ownerSVGElement,null,n,null==a?V(o):a),Q(n,o),i!=a&&G(o)))}))}function z(e,t,n,r,i,o,a,s,u,l){var c,f,p,d,h,y,v,g=r&&r.__k||D,m=g.length;for(u==x&&(u=null!=a?a[0]:m?V(r,0):null),n.__k=[],c=0;c<t.length;c++)if(null!=(d=n.__k[c]=null==(d=t[c])||"boolean"==typeof d?null:"string"==typeof d||"number"==typeof d?j(null,d,null,null,d):Array.isArray(d)?j(F,{children:d},null,null,null):null!=d.__e||null!=d.__c?j(d.type,d.props,d.key,null,d.__v):d)){if(d.__=n,d.__b=n.__b+1,null===(p=g[c])||p&&d.key==p.key&&d.type===p.type)g[c]=void 0;else for(f=0;f<m;f++){if((p=g[f])&&d.key==p.key&&d.type===p.type){g[f]=void 0;break}p=null}h=J(e,d,p=p||x,i,o,a,s,u,l),(f=d.ref)&&p.ref!=f&&(v||(v=[]),p.ref&&v.push(p.ref,null,d),v.push(f,d.__c||h,d)),null!=h?(null==y&&(y=h),u=Y(e,d,p,g,a,h,u),"option"==n.type?e.value="":"function"==typeof n.type&&(n.__d=u)):u&&p.__e==u&&u.parentNode!=e&&(u=V(p))}if(n.__e=y,null!=a&&"function"!=typeof n.type)for(c=a.length;c--;)null!=a[c]&&M(a[c]);for(c=m;c--;)null!=g[c]&&ee(g[c],g[c]);if(v)for(c=0;c<v.length;c++)Z(v[c],v[++c],v[++c])}function W(e){return null==e||"boolean"==typeof e?[]:Array.isArray(e)?D.concat.apply([],e.map(W)):[e]}function Y(e,t,n,r,i,o,a){var s,u,l;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(i==n||o!=a||null==o.parentNode)e:if(null==a||a.parentNode!==e)e.appendChild(o),s=null;else{for(u=a,l=0;(u=u.nextSibling)&&l<r.length;l+=2)if(u==o)break e;e.insertBefore(o,a),s=a}return void 0!==s?s:o.nextSibling}function q(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===I.test(t)?n+"px":null==n?"":n}function X(e,t,n,r,i){var o,a,s,u,l;if(i?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(o=e.style,"string"==typeof n)o.cssText=n;else{if("string"==typeof r&&(o.cssText="",r=null),r)for(u in r)n&&u in n||q(o,u,"");if(n)for(l in n)r&&n[l]===r[l]||q(o,l,n[l])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),s=t.toLowerCase(),t=(s in e?s:t).slice(2),n?(r||e.addEventListener(t,$,a),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,$,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!i&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function $(e){this.l[e.type](T.event?T.event(e):e)}function J(e,t,n,r,i,o,a,s,u){var l,c,f,p,d,h,y,v,g,m,b,_=t.type;if(void 0!==t.constructor)return null;(l=T.__b)&&l(t);try{e:if("function"==typeof _){if(v=t.props,g=(l=_.contextType)&&r[l.__c],m=l?g?g.props.value:l.__:r,n.__c?y=(c=t.__c=n.__c).__=c.__E:("prototype"in _&&_.prototype.render?t.__c=c=new _(v,m):(t.__c=c=new B(v,m),c.constructor=_,c.render=te),g&&g.sub(c),c.props=v,c.state||(c.state={}),c.context=m,c.__n=r,f=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=_.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=L({},c.__s)),L(c.__s,_.getDerivedStateFromProps(v,c.__s))),p=c.props,d=c.state,f)null==_.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==_.getDerivedStateFromProps&&v!==p&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(v,m),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(v,c.__s,m)||t.__v===n.__v){c.props=v,c.state=c.__s,t.__v!==n.__v&&(c.__d=!1),c.__v=t,t.__e=n.__e,t.__k=n.__k,c.__h.length&&a.push(c),function e(t,n,r){var i,o;for(i=0;i<t.__k.length;i++)(o=t.__k[i])&&(o.__=t,o.__e&&("function"==typeof o.type&&o.__k.length>1&&e(o,n,r),n=Y(r,o,o,t.__k,null,o.__e,n),"function"==typeof t.type&&(t.__d=n)))}(t,s,e);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(v,c.__s,m),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(p,d,h)}))}c.context=m,c.props=v,c.state=c.__s,(l=T.__r)&&l(t),c.__d=!1,c.__v=t,c.__P=e,l=c.render(c.props,c.state,c.context),c.state=c.__s,null!=c.getChildContext&&(r=L(L({},r),c.getChildContext())),f||null==c.getSnapshotBeforeUpdate||(h=c.getSnapshotBeforeUpdate(p,d)),b=null!=l&&l.type==F&&null==l.key?l.props.children:l,z(e,Array.isArray(b)?b:[b],t,n,r,i,o,a,s,u),c.base=t.__e,c.__h.length&&a.push(c),y&&(c.__E=c.__=null),c.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,i,o,a,s){var u,l,c,f,p,d=n.props,h=t.props;if(i="svg"===t.type||i,null!=o)for(u=0;u<o.length;u++)if(null!=(l=o[u])&&((null===t.type?3===l.nodeType:l.localName===t.type)||e==l)){e=l,o[u]=null;break}if(null==e){if(null===t.type)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,h.is&&{is:h.is}),o=null,s=!1}if(null===t.type)d!==h&&e.data!=h&&(e.data=h);else{if(null!=o&&(o=D.slice.call(e.childNodes)),c=(d=n.props||x).dangerouslySetInnerHTML,f=h.dangerouslySetInnerHTML,!s){if(null!=o)for(d={},p=0;p<e.attributes.length;p++)d[e.attributes[p].name]=e.attributes[p].value;(f||c)&&(f&&c&&f.__html==c.__html||(e.innerHTML=f&&f.__html||""))}(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||X(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||X(e,o,t[o],n[o],r)})(e,h,d,i,s),f?t.__k=[]:(u=t.props.children,z(e,Array.isArray(u)?u:[u],t,n,r,"foreignObject"!==t.type&&i,o,a,x,s)),s||("value"in h&&void 0!==(u=h.value)&&u!==e.value&&X(e,"value",u,d.value,!1),"checked"in h&&void 0!==(u=h.checked)&&u!==e.checked&&X(e,"checked",u,d.checked,!1))}return e}(n.__e,t,n,r,i,o,a,u);(l=T.diffed)&&l(t)}catch(e){t.__v=null,T.__e(e,t,n)}return t.__e}function Q(e,t){T.__c&&T.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){T.__e(e,t.__v)}}))}function Z(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){T.__e(e,n)}}function ee(e,t,n){var r,i,o;if(T.unmount&&T.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Z(r,null,t)),n||"function"==typeof e.type||(n=null!=(i=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){T.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&ee(r[o],t,n);null!=i&&M(i)}function te(e,t,n){return this.constructor(e,n)}function ne(e,t,n){var r,i,o;T.__&&T.__(e,t),i=(r=n===R)?null:n&&n.__k||t.__k,e=N(F,null,[e]),o=[],J(t,(r?t:n||t).__k=e,i||x,x,void 0!==t.ownerSVGElement,n&&!r?[n]:i?null:t.childNodes.length?D.slice.call(t.childNodes):null,o,n||x,r),Q(o,e)}function re(e,t){ne(e,t,R)}function ie(e,t){var n,r;for(r in t=L(L({},e.props),t),arguments.length>2&&(t.children=D.slice.call(arguments,2)),n={},t)"key"!==r&&"ref"!==r&&(n[r]=t[r]);return j(e.type,n,t.key||e.key,t.ref||e.ref,null)}function oe(e){var t={},n={__c:"__cC"+C++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,i=this;return this.getChildContext||(r=[],this.getChildContext=function(){return t[n.__c]=i,t},this.shouldComponentUpdate=function(e){i.props.value!==e.value&&r.some((function(t){t.context=e.value,K(t)}))},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Consumer.contextType=n,n.Provider.__=n,n}T={__e:function(e,t){for(var n,r;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(e)),r)return K(n.__E=n)}catch(t){e=t}throw e}},S=function(e){return null!=e&&void 0===e.constructor},B.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=L({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&L(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),K(this))},B.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),K(this))},B.prototype.render=F,A=[],O="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,H.__r=0,R=x,C=0;var ae,se,ue,le=0,ce=[],fe=T.__r,pe=T.diffed,de=T.__c,he=T.unmount;function ye(e,t){T.__h&&T.__h(se,e,le||t),le=0;var n=se.__H||(se.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ve(e){return le=1,ge(De,e)}function ge(e,t,n){var r=ye(ae++,2);return r.t=e,r.__c||(r.__c=se,r.__=[n?n(t):De(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}]),r.__}function me(e,t){var n=ye(ae++,3);!T.__s&&xe(n.__H,t)&&(n.__=e,n.__H=t,se.__H.__h.push(n))}function be(e,t){var n=ye(ae++,4);!T.__s&&xe(n.__H,t)&&(n.__=e,n.__H=t,se.__h.push(n))}function _e(e){return le=5,Ee((function(){return{current:e}}),[])}function ke(e,t,n){le=6,be((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))}function Ee(e,t){var n=ye(ae++,7);return xe(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function we(e,t){return le=8,Ee((function(){return e}),t)}function Te(e){var t=se.context[e.__c],n=ye(ae++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(se)),t.props.value):e.__}function Se(e,t){T.useDebugValue&&T.useDebugValue(t?t(e):e)}function Ae(e){var t=ye(ae++,10),n=ve();return t.__=e,se.componentDidCatch||(se.componentDidCatch=function(e){t.__&&t.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}function Oe(){ce.some((function(e){if(e.__P)try{e.__H.__h.forEach(Re),e.__H.__h.forEach(Ce),e.__H.__h=[]}catch(t){return e.__H.__h=[],T.__e(t,e.__v),!0}})),ce=[]}T.__r=function(e){fe&&fe(e),ae=0;var t=(se=e.__c).__H;t&&(t.__h.forEach(Re),t.__h.forEach(Ce),t.__h=[])},T.diffed=function(e){pe&&pe(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==ce.push(t)&&ue===T.requestAnimationFrame||((ue=T.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),Pe&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Pe&&(t=requestAnimationFrame(n))})(Oe))},T.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Re),e.__h=e.__h.filter((function(e){return!e.__||Ce(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],T.__e(n,e.__v)}})),de&&de(e,t)},T.unmount=function(e){he&&he(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(Re)}catch(e){T.__e(e,t.__v)}};var Pe="function"==typeof requestAnimationFrame;function Re(e){"function"==typeof e.u&&e.u()}function Ce(e){e.u=e.__()}function xe(e,t){return!e||t.some((function(t,n){return t!==e[n]}))}function De(e,t){return"function"==typeof t?t(e):t}function Ie(e,t){for(var n in t)e[n]=t[n];return e}function Le(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}var Me=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isPureReactComponent=!0,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.shouldComponentUpdate=function(e,t){return Le(this.props,e)||Le(this.state,t)},r}(B),Ne=T.__b;T.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ne&&Ne(e)};var je="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ue(e){function t(t,n){var r=Ie({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=je,t.render=t,t.prototype.isReactComponent=t.t=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Fe=function(e,t){return e?W(e).reduce((function(e,n,r){return e.concat(t(n,r))}),[]):null},Be={map:Fe,forEach:Fe,count:function(e){return e?W(e).length:0},only:function(e){if(1!==(e=W(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:W},Ve=T.__e;function Ge(e){return e&&((e=Ie({},e)).__c=null,e.__k=e.__k&&e.__k.map(Ge)),e}function Ke(){this.__u=0,this.o=null,this.__b=null}function He(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function ze(){this.i=null,this.l=null}T.__e=function(e,t,n){if(e.then)for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return r.__c(e,t.__c);Ve(e,t,n)},(Ke.prototype=new B).__c=function(e,t){var n=this;null==n.o&&(n.o=[]),n.o.push(t);var r=He(n.__v),i=!1,o=function(){i||(i=!0,r?r(a):a())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){o(),t.__c&&t.__c()};var a=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(o,o)},Ke.prototype.render=function(e,t){return this.__b&&(this.__v.__k&&(this.__v.__k[0]=Ge(this.__b)),this.__b=null),[N(F,null,t.u?null:e.children),t.u&&e.fallback]};var We=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(ze.prototype=new B).u=function(e){var t=this,n=He(t.__v),r=t.l.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),We(t,e,r)):i()};n?n(o):o()}},ze.prototype.render=function(e){this.i=null,this.l=new Map;var t=W(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},ze.prototype.componentDidUpdate=ze.prototype.componentDidMount=function(){var e=this;e.l.forEach((function(t,n){We(e,n,t)}))};var Ye=function(){function e(){}var t=e.prototype;return t.getChildContext=function(){return this.props.context},t.render=function(e){return e.children},e}();function qe(e){var t=this,n=e.container,r=N(Ye,{context:t.context},e.vnode);return t.s&&t.s!==n&&(t.v.parentNode&&t.s.removeChild(t.v),ee(t.h),t.p=!1),e.vnode?t.p?(n.__k=t.__k,ne(r,n),t.__k=n.__k):(t.v=document.createTextNode(""),re("",n),n.appendChild(t.v),t.p=!0,t.s=n,ne(r,n,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),ee(t.h)),t.h=r,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),ee(t.h)},null}function Xe(e,t){return N(qe,{vnode:e,container:t})}var $e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;B.prototype.isReactComponent={};var Je="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Qe=T.event;function Ze(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}T.event=function(e){Qe&&(e=Qe(e)),e.persist=function(){};var t=!1,n=!1,r=e.stopPropagation;e.stopPropagation=function(){r.call(e),t=!0};var i=e.preventDefault;return e.preventDefault=function(){i.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var et={configurable:!0,get:function(){return this.class}},tt=T.vnode;function nt(e){return!!e&&e.$$typeof===Je}T.vnode=function(e){e.$$typeof=Je;var t=e.type,n=e.props;if(t){if(n.class!=n.className&&(et.enumerable="className"in n,null!=n.className&&(n.class=n.className),Object.defineProperty(n,"className",et)),"function"!=typeof t){var r,i,o;for(o in n.defaultValue&&void 0!==n.value&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&"select"===t&&(W(n.children).forEach((function(e){-1!=n.value.indexOf(e.props.value)&&(e.props.selected=!0)})),delete n.value),n)if(r=$e.test(o))break;if(r)for(o in i=e.props={},n)i[$e.test(o)?o.replace(/[A-Z0-9]/,"-$&").toLowerCase():o]=n[o]}!function(t){var n=e.type,r=e.props;if(r&&"string"==typeof n){var i={};for(var o in r)/^on(Ani|Tra|Tou)/.test(o)&&(r[o.toLowerCase()]=r[o],delete r[o]),i[o.toLowerCase()]=o;if(i.ondoubleclick&&(r.ondblclick=r[i.ondoubleclick],delete r[i.ondoubleclick]),i.onbeforeinput&&(r.onbeforeinput=r[i.onbeforeinput],delete r[i.onbeforeinput]),i.onchange&&("textarea"===n||"input"===n.toLowerCase()&&!/^fil|che|ra/i.test(r.type))){var a=i.oninput||"oninput";r[a]||(r[a]=r[i.onchange],delete r[i.onchange])}}}(),"function"==typeof t&&!t.m&&t.prototype&&(Ze(t.prototype,"componentWillMount"),Ze(t.prototype,"componentWillReceiveProps"),Ze(t.prototype,"componentWillUpdate"),t.m=!0)}tt&&tt(e)};var rt=function(e,t){return e(t)},it={useState:ve,useReducer:ge,useEffect:me,useLayoutEffect:be,useRef:_e,useImperativeHandle:ke,useMemo:Ee,useCallback:we,useContext:Te,useDebugValue:Se,version:"16.8.0",Children:Be,render:function(e,t,n){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return ne(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return re(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(ne(null,e),!0)},createPortal:Xe,createElement:N,createContext:oe,createFactory:function(e){return N.bind(null,e)},cloneElement:function(e){return nt(e)?ie.apply(null,arguments):e},createRef:U,Fragment:F,isValidElement:nt,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:B,PureComponent:Me,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:Le(this.props,e)}function r(t){return this.shouldComponentUpdate=n,N(e,t)}return r.prototype.isReactComponent=!0,r.displayName="Memo("+(e.displayName||e.name)+")",r.t=!0,r},forwardRef:Ue,unstable_batchedUpdates:rt,StrictMode:F,Suspense:Ke,SuspenseList:ze,lazy:function(e){var t,n,r;function i(i){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return N(n,i)}return i.displayName="Lazy",i.t=!0,i}},ot=n(2),at=n.n(ot),st=it.createContext(null);st.displayName="ReactRedux";var ut=function(e){e()},lt={notify:function(){}},ct=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=lt,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=ut,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=lt)},e}();function ft(e){var t=e.store,n=e.context,r=e.children,i=Ee((function(){var e=new ct(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),o=Ee((function(){return t.getState()}),[t]);me((function(){var e=i.subscription;return e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,o]);var a=n||st;return it.createElement(a.Provider,{value:i},r)}ft.propTypes={store:at.a.shape({subscribe:at.a.func.isRequired,dispatch:at.a.func.isRequired,getState:at.a.func.isRequired}),context:at.a.object,children:at.a.any};var pt=ft;function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ht(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var yt=n(4),vt=n.n(yt),gt=n(3),mt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?be:me,bt=[],_t=[null,null];function kt(e,t){var n=e[1];return[t.payload,n+1]}function Et(e,t,n){mt((function(){return e.apply(void 0,t)}),n)}function wt(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function Tt(e,t,n,r,i,o,a,s,u,l){if(e){var c=!1,f=null,p=function(){if(!c){var e,n,p=t.getState();try{e=r(p,i.current)}catch(e){n=e,f=e}n||(f=null),e===o.current?a.current||u():(o.current=e,s.current=e,a.current=!0,l({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=p,n.trySubscribe(),p(),function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var St=function(){return[null,0]};function At(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,a=void 0===o?"connectAdvanced":o,s=n.renderCountProp,u=void 0===s?void 0:s,l=n.shouldHandleStateChanges,c=void 0===l||l,f=n.storeKey,p=void 0===f?"store":f,d=n.withRef,h=void 0!==d&&d,y=n.forwardRef,v=void 0!==y&&y,g=n.context,m=void 0===g?st:g,b=ht(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);if(void 0!==u)throw new Error("renderCountProp is removed. render counting is built into the latest React Dev Tools profiling extension");if(h)throw new Error("withRef is removed. To access the wrapped instance, use a ref on the connected component");if("store"!==p)throw new Error("storeKey has been removed and does not do anything. To use a custom Redux store for specific components, create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like: <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect");var _=m;return function(t){if(!Object(gt.isValidElementType)(t))throw new Error("You must pass a component to the function returned by "+a+". Instead received "+function(e){try{return JSON.stringify(e)}catch(t){return String(e)}}(t));var n=t.displayName||t.name||"Component",r=i(n),o=dt({},b,{getDisplayName:i,methodName:a,renderCountProp:u,shouldHandleStateChanges:c,storeKey:p,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=b.pure,l=s?Ee:function(e){return e()};function f(n){var i=Ee((function(){var e=n.reactReduxForwardedRef,t=ht(n,["reactReduxForwardedRef"]);return[n.context,e,t]}),[n]),a=i[0],s=i[1],u=i[2],f=Ee((function(){return a&&a.Consumer&&Object(gt.isContextConsumer)(it.createElement(a.Consumer,null))?a:_}),[a,_]),p=Te(f),d=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch),h=Boolean(p)&&Boolean(p.store);if(!d&&!h)throw new Error('Could not find "store" in the context of "'+r+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+r+" in connect options.");var y=d?n.store:p.store,v=Ee((function(){return function(t){return e(t.dispatch,o)}(y)}),[y]),g=Ee((function(){if(!c)return _t;var e=new ct(y,d?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[y,d,p]),m=g[0],b=g[1],k=Ee((function(){return d?p:dt({},p,{subscription:m})}),[d,p,m]),E=ge(kt,bt,St),w=E[0][0],T=E[1];if(w&&w.error)throw w.error;var S=_e(),A=_e(u),O=_e(),P=_e(!1),R=l((function(){return O.current&&u===A.current?O.current:v(y.getState(),u)}),[y,w,u]);Et(wt,[A,S,P,u,R,O,b]),Et(Tt,[c,y,m,v,A,S,P,O,b,T],[y,m,v]);var C=Ee((function(){return it.createElement(t,dt({},R,{ref:s}))}),[s,t,R]);return Ee((function(){return c?it.createElement(f.Provider,{value:k},C):C}),[f,C,k])}var d=s?it.memo(f):f;if(d.WrappedComponent=t,d.displayName=r,v){var h=it.forwardRef((function(e,t){return it.createElement(d,dt({},e,{reactReduxForwardedRef:t}))}));return h.displayName=r,h.WrappedComponent=t,vt()(h,t)}return vt()(d,t)}}function Ot(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Pt(e,t){if(Ot(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Ot(e[n[i]],t[n[i]]))return!1;return!0}var Rt=n(5),Ct=function(){return Math.random().toString(36).substring(7).split("").join(".")},xt={INIT:"@@redux/INIT"+Ct(),REPLACE:"@@redux/REPLACE"+Ct(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ct()}};function Dt(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function It(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(It)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,u=!1;function l(){s===a&&(s=a.slice())}function c(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return l(),s.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,l();var n=s.indexOf(e);s.splice(n,1),a=null}}}function p(e){if(!Dt(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++)(0,t[n])();return e}function d(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,p({type:xt.REPLACE})}function h(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[Rt.a]=function(){return this},e}return p({type:xt.INIT}),(r={dispatch:p,subscribe:f,getState:c,replaceReducer:d})[Rt.a]=h,r}function Lt(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function Mt(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Nt(e,t){return function(){return t(e.apply(this,arguments))}}function jt(e,t){if("function"==typeof e)return Nt(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=Nt(i,t))}return n}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(n,!0).forEach((function(t){Ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Gt(){}function Kt(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function Ht(e,t,n){(function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n})(e)||Kt(n+"() in "+t+" must return a plain object. Instead received "+e+".")}function zt(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Wt(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Yt(e,t){return function(n,r){var i=r.displayName,o=function(e,t){return o.dependsOnOwnProps?o.mapToProps(e,t):o.mapToProps(e)};return o.dependsOnOwnProps=!0,o.mapToProps=function(n,r){o.mapToProps=e,o.dependsOnOwnProps=Wt(e);var a=o(n,r);return"function"==typeof a&&(o.mapToProps=a,o.dependsOnOwnProps=Wt(a),a=o(n,r)),Ht(a,i,t),a},o}}"string"==typeof Gt.name&&"isCrushed"!==Gt.name&&Lt('You are currently using minified code outside of NODE_ENV === "production". This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) to ensure you have the correct code for your production build.');var qt=[function(e){return"function"==typeof e?Yt(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:zt((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?zt((function(t){return jt(e,t)})):void 0}],Xt=[function(e){return"function"==typeof e?Yt(e,"mapStateToProps"):void 0},function(e){return e?void 0:zt((function(){return{}}))}];function $t(e,t,n){return dt({},n,{},e,{},t)}var Jt=[function(e){return"function"==typeof e?function(e){return function(t,n){var r,i=n.displayName,o=n.pure,a=n.areMergedPropsEqual,s=!1;return function(t,n,u){var l=e(t,n,u);return s?o&&a(l,r)||(r=l):(s=!0,Ht(r=l,i,"mergeProps")),r}}}(e):void 0},function(e){return e?void 0:function(){return $t}}];function Qt(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||Kt("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}function Zt(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function en(e,t,n,r,i){var o,a,s,u,l,c=i.areStatesEqual,f=i.areOwnPropsEqual,p=i.areStatePropsEqual,d=!1;function h(i,d){var h,y,v=!f(d,a),g=!c(i,o);return o=i,a=d,v&&g?(s=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):v?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):g?(h=e(o,a),y=!p(h,s),s=h,y&&(l=n(s,u,a)),l):l}return function(i,c){return d?h(i,c):(s=e(o=i,a=c),u=t(r,a),l=n(s,u,a),d=!0,l)}}function tn(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=ht(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return function(e,t,n,r){Qt(e,"mapStateToProps",r),Qt(t,"mapDispatchToProps",r),Qt(n,"mergeProps",r)}(a,s,u,o.displayName),(o.pure?en:Zt)(a,s,u,e,o)}function nn(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function rn(e,t){return e===t}var on=function(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?At:n,i=t.mapStateToPropsFactories,o=void 0===i?Xt:i,a=t.mapDispatchToPropsFactories,s=void 0===a?qt:a,u=t.mergePropsFactories,l=void 0===u?Jt:u,c=t.selectorFactory,f=void 0===c?tn:c;return function(e,t,n,i){void 0===i&&(i={});var a=i,u=a.pure,c=void 0===u||u,p=a.areStatesEqual,d=void 0===p?rn:p,h=a.areOwnPropsEqual,y=void 0===h?Pt:h,v=a.areStatePropsEqual,g=void 0===v?Pt:v,m=a.areMergedPropsEqual,b=void 0===m?Pt:m,_=ht(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),k=nn(e,o,"mapStateToProps"),E=nn(t,s,"mapDispatchToProps"),w=nn(n,l,"mergeProps");return r(f,dt({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:k,initMapDispatchToProps:E,initMergeProps:w,pure:c,areStatesEqual:d,areOwnPropsEqual:y,areStatePropsEqual:g,areMergedPropsEqual:b},_))}}();function an(){var e=Te(st);if(!e)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return e}function sn(e){void 0===e&&(e=st);var t=e===st?an:function(){return Te(e)};return function(){return t().store}}var un=sn();function ln(e){void 0===e&&(e=st);var t=e===st?un:sn(e);return function(){return t().dispatch}}var cn=ln(),fn=function(e,t){return e===t};function pn(e){void 0===e&&(e=st);var t=e===st?an:function(){return Te(e)};return function(e,n){if(void 0===n&&(n=fn),!e)throw new Error("You must pass a selector to useSelector");var r=t(),i=function(e,t,n,r){var i,o=ge((function(e){return e+1}),0)[1],a=Ee((function(){return new ct(n,r)}),[n,r]),s=_e(),u=_e(),l=_e(),c=_e(),f=n.getState();try{i=e!==u.current||f!==l.current||s.current?e(f):c.current}catch(e){throw s.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),e}return mt((function(){u.current=e,l.current=f,c.current=i,s.current=void 0})),mt((function(){function e(){try{var e=u.current(n.getState());if(t(e,c.current))return;c.current=e}catch(e){s.current=e}o()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[n,a]),i}(e,n,r.store,r.subscription);return Se(i),i}}var dn=pn();ut=rt;var hn=n(6),yn=n.n(hn);function vn(e){return null!=e}function gn(e,t){for(var n in t)e[n]=t[n];return e}var mn=/[?&#]intl=show/,bn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getChildContext=function(){var e=this.props,t=e.scope,n=e.definition,r=e.mark,i=gn({},this.context.intl||{});return t&&(i.scope=t),n&&(i.dictionary=function e(t,n){var r=gn({},t);for(var i in n)n.hasOwnProperty(i)&&(t[i]&&n[i]&&"object"==typeof t[i]&&"object"==typeof n[i]?r[i]=e(t[i],n[i]):r[i]=t[i]||n[i]);return r}(i.dictionary||{},n)),(r||"undefined"!=typeof location&&String(location).match(mn))&&(i.mark=!0),{intl:i}},t.prototype.render=function(e){return e.children},t}(B);function _n(e,t){if(arguments.length<2)return t=e,function(e){return _n(e,t)};function n(n){return N(bn,t||{},N(e,n))}return n.getWrappedComponent=e&&e.getWrappedComponent||function(){return e},n}var kn,En={};function wn(e,t){return kn=t||En,e&&e.replace(/\{\{([\w.-]+)\}\}/g,Tn)}function Tn(e,t){for(var n=t.split("."),r=kn,i=0;i<n.length;i++)if(null==(r=r[n[i]]))return"";return"string"==typeof r&&r.match(/\{\{/)&&(r=wn(r,kn)),r}function Sn(e,t,n,r,i,o){t&&(e=t+"."+e);var a=n&&yn()(n,e);return(i||0===i)&&a&&"object"==typeof a&&(a=a.splice?a[i]||a[0]:0===i&&vn(a.none)?a.none:1===i&&vn(a.one||a.singular)?a.one||a.singular:a.some||a.many||a.plural||a.other||a),a&&wn(a,r)||o||null}function An(e,t){var n=e.value,r=e.id,i=t.intl;if(i&&i.mark){var o="dictionary"+(i&&i.scope?"."+i.scope:"")+"."+r;return N("mark",{style:{background:n?yn()(i,o)?"rgba(119,231,117,.5)":"rgba(229,226,41,.5)":"rgba(228,147,51,.5)"},title:r},n)}return n}function On(e,t){var n=e.id,r=e.children,i=e.plural,o=e.fields,a=t.intl;return N(An,{id:n,value:Sn(n,a&&a.scope,a&&a.dictionary,o,i,r)})}function Pn(e,t,n){var r={};for(var i in t=t||{},e=function(e){if("string"==typeof(e=e||{})&&(e=e.split(",")),"join"in e){for(var t={},n=0;n<e.length;n++){var r=e[n].trim();r&&(t[r.split(".").pop()]=r)}return t}return e}(e))if(e.hasOwnProperty(i)&&e[i]){var o=e[i];n||"string"!=typeof o?o.type===On&&(o=gn({fallback:o.props.children},o.props),r[i]=Sn(o.id,t.scope,t.dictionary,o.fields,o.plural,o.fallback)):r[i]=Sn(o,t.scope,t.dictionary)}return r}function Rn(e,t){var n=e.children,r=t.intl;return n&&n.length?n.map((function(e){return ie(e,Pn(e.props,r,!0))})):n&&ie(n,Pn(n.props,r,!0))}function Cn(e){return N(Rn,null,N(xn,{html:N(On,e),id:e.id}))}function xn(e){var t=e.html,n=e.id,r=t?"string"==typeof t?N("span",{dangerouslySetInnerHTML:{__html:t}}):N("span",null,t):t;return N(An,{id:n,value:r})}function Dn(e){return function(t){function n(n,r){var i=Pn("function"==typeof e?e(n,r):e,r.intl);return N(t,gn(gn({},n),i))}return n.getWrappedComponent=t&&t.getWrappedComponent||function(){return t},n}}_n.intl=_n,_n.IntlProvider=bn,_n.Text=On,_n.MarkupText=Cn,_n.Localizer=Rn,_n.withText=Dn;var In=_n;function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(e){return e&&"object"===Nn(e)&&!Array.isArray(e)}function Un(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();if(jn(e)&&jn(i))for(var o in i)jn(i[o])?(e[o]||Object.assign(e,Mn({},o,{})),Un(e[o],i[o])):Object.assign(e,Mn({},o,i[o]));return Un.apply(void 0,[e].concat(n))}var Fn=n(1),Bn={DEBUG:Fn.DEBUG,INFO:Fn.INFO,TIME:Fn.TIME,WARN:Fn.WARN,ERROR:Fn.ERROR,OFF:Fn.OFF};function Vn(e){return e?Fn.get(e):Fn}function Gn(e,t){Vn(t).setLevel(e)}Fn.useDefaults({defaultLevel:Fn.ERROR});var Kn=Vn,Hn="playkit-ui",zn={UI_CLICKED:"".concat(Hn,"-uiclicked"),UI_VISIBILITY_CHANGED:"".concat(Hn,"-uivisibilitychanged"),GUI_RESIZE:"".concat(Hn,"-guiresize"),PLAYER_RESIZE:"".concat(Hn,"-playerresize"),VIDEO_RESIZE:"".concat(Hn,"-videoresize"),UI_PRESET_CHANGE:"".concat(Hn,"-uipresetchange"),USER_CLICKED_PLAY:"".concat(Hn,"-userclickedplay"),USER_CLICKED_PAUSE:"".concat(Hn,"-userclickedpause"),USER_CLICKED_REWIND:"".concat(Hn,"-userclickedrewind"),USER_CLICKED_FORWARD:"".concat(Hn,"-userclickedforward"),USER_CLICKED_LIVE_TAG:"".concat(Hn,"-userclickedlivetag"),USER_CLICKED_MUTE:"".concat(Hn,"-userclickedmute"),USER_CLICKED_UNMUTE:"".concat(Hn,"-userclickedunmute"),USER_CHANGED_VOLUME:"".concat(Hn,"-userchangedvolume"),USER_SELECTED_CAPTION_TRACK:"".concat(Hn,"-userselectedcaptiontrack"),USER_SELECTED_AUDIO_TRACK:"".concat(Hn,"-userselectedaudiotrack"),USER_SELECTED_QUALITY_TRACK:"".concat(Hn,"-userselectedqualitytrack"),USER_ENTERED_FULL_SCREEN:"".concat(Hn,"-userenteredfullscreen"),USER_EXITED_FULL_SCREEN:"".concat(Hn,"-userexitedfullscreen"),USER_ENTERED_PICTURE_IN_PICTURE:"".concat(Hn,"-userenteredpictureinpicture"),USER_EXITED_PICTURE_IN_PICTURE:"".concat(Hn,"-userexitedpictureinpicture"),USER_SELECTED_CAPTIONS_STYLE:"".concat(Hn,"-userselectedcaptionsstyle"),USER_SELECTED_SPEED:"".concat(Hn,"-userselectedspeed"),USER_SEEKED:"".concat(Hn,"-userseeked"),RESIZE:"".concat(Hn,"-resize")},Wn={TAB:9,ENTER:13,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,P:80,C:67,F:70,M:77,SEMI_COLON:186,COMMA:188,PERIOD:190};function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(){return(qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $n(e,t){return($n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e,t){return!t||"object"!==Yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zn,er,tr,nr=function(e){return function(t){return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(a,n);var r,i,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qn(e);if(t){var i=Qn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jn(this,n)}}(a);function a(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).logger=Kn("UI ".concat(e)),t.logger.debug("Initialized"),t}return r=a,(i=[{key:"render",value:function(){return N(t,qn({},this.props,{logger:this.logger}))}}])&&Xn(r.prototype,i),a}(B)}};function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e){return function(e){if(Array.isArray(e))return or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ur(e,t){return(ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e,t){return!t||"object"!==rr(t)&&"function"!=typeof t?cr(e):t}function cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dr(e,t){return e[t]=e[t]||{before:[],after:[],replace:null},e[t]}var hr,yr,vr,gr={playerAreaComponents:null,hasPositionedComponents:!1,presetComponentsOnlyMode:!0},mr=nr("PlayerArea")(Zn=on((function(e){return{activePresetName:e.shell.activePresetName}}))((tr=er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fr(e);if(t){var i=fr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lr(this,n)}}(i);function i(){var e;ar(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return pr(cr(e=r.call.apply(r,[this].concat(n))),"_updateAreaComponents",(function(t){if(!(t.length<1)){var n=e.props,r=n.activePresetName,i=n.name;e.props.logger.debug("Player area '".concat(i,"' in preset '").concat(r,"' - update children components"));var o={},a={appendedComponents:[],positionedComponentMap:o},s=!1;t.forEach((function(e){e.beforeComponent?(dr(o,e.beforeComponent).before.push(e),s=!0):e.afterComponent?(dr(o,e.afterComponent).after.push(e),s=!0):e.replaceComponent?(dr(o,e.replaceComponent).replace=e,s=!0):a.appendedComponents.push(e)})),e.setState({playerAreaComponents:a,hasPositionedComponents:s,presetComponentsOnlyMode:!1})}})),e}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e,t){return this.state.playerAreaComponents!==t.playerAreaComponents||e.activePresetName!==this.props.activePresetName}},{key:"componentDidUpdate",value:function(e){e.activePresetName!==this.props.activePresetName&&this._registerListener()}},{key:"_unregisterListener",value:function(){this.props.logger.debug("Player area '".concat(this.props.name,"' - unregister to changes")),"function"==typeof this._unregisterListenerCallback&&(this._unregisterListenerCallback(),this._unregisterListenerCallback=null)}},{key:"_registerListener",value:function(){var e=this.props,t=e.activePresetName,n=e.name;this._unregisterListener(),t&&n&&(this.props.logger.debug("Player area '".concat(n,"' in preset '").concat(t,"' - register to changes")),this._unregisterListenerCallback=this.context.playerAreaComponentsStore.listen(t,n,this._updateAreaComponents))}},{key:"componentDidMount",value:function(){this.props.logger.debug("Player area '".concat(this.props.name,"' - handle did mount")),this.setState(gr),this._registerListener()}},{key:"componentWillUnmount",value:function(){var e=this.props.name;this.props.logger.debug("Player area '".concat(e,"' - handle will unmount")),this._unregisterListener()}},{key:"_renderUIComponent",value:function(e){return e.get?N(e.get,e.props):null}},{key:"renderContent",value:function(e){return N(F,null,e)}},{key:"_getPositionedComponents",value:function(e){var t=this,n=this.state.playerAreaComponents,r=[];return W(e).forEach((function(e){if("div"===e.type||e.type===F)return e.props.children=t._getPositionedComponents(e.props.children),void r.push(e);var i,o=(i=e)&&i.type?i.type.displayName:null;if(o){var a=n.positionedComponentMap[o];if(a){var s=a.replace,u=a.before,l=a.after;s?r.push(t._renderUIComponent(s)):(u.length&&u.forEach((function(e){r.push(t._renderUIComponent(e))})),r.push(e),l.length&&l.forEach((function(e){r.push(t._renderUIComponent(e))})))}else r.push(e)}else r.push(e)})),r}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.children,i=n.show,o=n.name,a=this.state,s=a.playerAreaComponents,u=a.hasPositionedComponents,l=a.presetComponentsOnlyMode;if(this.props.logger.debug("Player area '".concat(o,"' - render")),l)return this.renderContent(this.props.children);if(!s||!i)return null;var c,f=[];u?f=this._getPositionedComponents(r):(c=f).push.apply(c,ir(W(r)));var p=s.appendedComponents.map((function(e){return t._renderUIComponent(e)})),d=f.length;return(e=f).splice.apply(e,[d,0].concat(ir(p))),this.renderContent(f)}}])&&sr(t.prototype,n),i}(B),pr(er,"defaultProps",{show:!0}),Zn=tr))||Zn)||Zn,br=function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(e[n[i]]!==t[n[i]])return!1;return!0};function _r(e){return function(e){if(Array.isArray(e))return kr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){Tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sr,Ar={ADD_PLAYER_CLASS:"shell/ADD_PLAYER_CLASS",REMOVE_PLAYER_CLASS:"shell/REMOVE_PLAYER_CLASS",UPDATE_IS_MOBILE:"shell/UPDATE_IS_MOBILE",UPDATE_PLAYER_SIZE:"shell/UPDATE_PLAYER_SIZE",UPDATE_IS_SMALL_SIZE:"shell/UPDATE_IS_SMALL_SIZE",UPDATE_GUI_CLIENT_RECT:"shell/UPDATE_GUI_CLIENT_RECT",UPDATE_PLAYER_CLIENT_RECT:"shell/UPDATE_PLAYER_CLIENT_RECT",UPDATE_VIDEO_CLIENT_RECT:"shell/UPDATE_VIDEO_CLIENT_RECT",UPDATE_DOCUMENT_WIDTH:"shell/UPDATE_DOCUMENT_WIDTH",UPDATE_PLAYER_HOVER_STATE:"shell/UPDATE_PLAYER_HOVER_STATE",UPDATE_PLAYER_NAV_STATE:"shell/UPDATE_PLAYER_NAV_STATE",UPDATE_SMART_CONTAINER_OPEN:"shell/UPDATE_SMART_CONTAINER_OPEN",UPDATE_ACTIVE_PRESET_NAME:"shell/UPDATE_ACTIVE_PRESET_NAME",UPDATE_SIDE_PANEL_MODE:"shell/UPDATE_SIDE_PANEL_MODE",UPDATE_SIDE_PANEL_SIZE:"shell/UPDATE_SIDE_PANEL_SIZE",UPDATE_PRESET_SETTINGS:"shell/UPDATE_PRESET_SETTINGS",UPDATE_LAYOUT_STYLES:"shell/UPDATE_LAYOUT_STYLES"},Or={VERTICAL:"vertical",HORIZONTAL:"horizontal"},Pr={LEFT:"left",TOP:"top",BOTTOM:"bottom",RIGHT:"right"},Rr={ALONGSIDE:"alongside",HIDDEN:"hidden",OVER:"over"},Cr={x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0},xr={position:"absolute",left:0,right:0,top:0,bottom:0},Dr={playerClasses:[],guiClientRect:Cr,playerClientRect:Cr,videoClientRect:Cr,layoutStyles:{video:xr,gui:xr,sidePanels:(hr={},Tr(hr,Pr.LEFT,{}),Tr(hr,Pr.RIGHT,{}),Tr(hr,Pr.TOP,{}),Tr(hr,Pr.BOTTOM,{}),hr)},playerHover:!1,playerNav:!1,smartContainerOpen:!1,activePresetName:"",sidePanelsModes:(yr={},Tr(yr,Pr.LEFT,Rr.HIDDEN),Tr(yr,Pr.RIGHT,Rr.HIDDEN),Tr(yr,Pr.TOP,Rr.HIDDEN),Tr(yr,Pr.BOTTOM,Rr.HIDDEN),yr),sidePanelsSizes:(vr={},Tr(vr,Or.VERTICAL,{min:240,max:480,ratio:.33}),Tr(vr,Or.HORIZONTAL,{min:144,max:288,ratio:.33}),vr),presetSettings:{allowSidePanels:!1,allowPlayerArea:!1}},Ir=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ar.ADD_PLAYER_CLASS:return e.playerClasses.includes(t.className)?e:wr(wr({},e),{},{playerClasses:[].concat(_r(e.playerClasses),[t.className])});case Ar.REMOVE_PLAYER_CLASS:return wr(wr({},e),{},{playerClasses:e.playerClasses.filter((function(e){return e!==t.className}))});case Ar.UPDATE_IS_MOBILE:return wr(wr({},e),{},{isMobile:t.isMobile});case Ar.UPDATE_PLAYER_SIZE:return wr(wr({},e),{},{playerSize:t.playerSize});case Ar.UPDATE_IS_SMALL_SIZE:return wr(wr({},e),{},{isSmallSize:t.isSmallSize});case Ar.UPDATE_GUI_CLIENT_RECT:return wr(wr({},e),{},{guiClientRect:t.guiClientRect});case Ar.UPDATE_PLAYER_CLIENT_RECT:return wr(wr({},e),{},{playerClientRect:t.playerClientRect});case Ar.UPDATE_LAYOUT_STYLES:var n,r=e.layoutStyles,i=r.sidePanels,o=r.video,a=r.gui,s=t.layoutStyles,u=s.sidePanels,l=s.video,c=s.gui;return wr(wr({},e),{},{layoutStyles:{sidePanels:(n={},Tr(n,Pr.LEFT,br(i[Pr.LEFT],u[Pr.LEFT])?i[Pr.LEFT]:u[Pr.LEFT]),Tr(n,Pr.RIGHT,br(i[Pr.RIGHT],u[Pr.RIGHT])?i[Pr.RIGHT]:u[Pr.RIGHT]),Tr(n,Pr.TOP,br(i[Pr.TOP],u[Pr.TOP])?i[Pr.TOP]:u[Pr.TOP]),Tr(n,Pr.BOTTOM,br(i[Pr.BOTTOM],u[Pr.BOTTOM])?i[Pr.BOTTOM]:u[Pr.BOTTOM]),n),video:br(o,l)?o:l,gui:br(a,c)?a:c}});case Ar.UPDATE_VIDEO_CLIENT_RECT:return wr(wr({},e),{},{videoClientRect:t.videoClientRect});case Ar.UPDATE_DOCUMENT_WIDTH:return wr(wr({},e),{},{documentWidth:t.documentWidth});case Ar.UPDATE_PLAYER_HOVER_STATE:return wr(wr({},e),{},{playerHover:t.hover});case Ar.UPDATE_PLAYER_NAV_STATE:return wr(wr({},e),{},{playerNav:t.nav});case Ar.UPDATE_SMART_CONTAINER_OPEN:return wr(wr({},e),{},{smartContainerOpen:t.open});case Ar.UPDATE_ACTIVE_PRESET_NAME:return wr(wr({},e),{},{activePresetName:t.activePresetName});case Ar.UPDATE_SIDE_PANEL_MODE:return wr(wr({},e),{},{sidePanelsModes:wr(wr({},e.sidePanelsModes),{},Tr({},t.position,t.sidePanelMode))});case Ar.UPDATE_SIDE_PANEL_SIZE:var f=t.options,p=f.ratio,d=f.min,h=f.max,y=e.sidePanelsSizes[t.orientation],v={ratio:"number"==typeof p&&p<=1?p:y.ratio,min:"number"==typeof d?d:y.min,max:"number"==typeof h?h:y.max};return wr(wr({},e),{},{sidePanelsSizes:wr(wr({},e.sidePanelsSizes),{},Tr({},t.orientation,v))});case Ar.UPDATE_PRESET_SETTINGS:return wr(wr({},e),{},{presetSettings:wr(wr({},{allowSidePanels:!1,allowPlayerArea:!1}),t.presetSettings||{})});default:return e}},Lr={addPlayerClass:function(e){return{type:Ar.ADD_PLAYER_CLASS,className:e}},removePlayerClass:function(e){return{type:Ar.REMOVE_PLAYER_CLASS,className:e}},updateIsMobile:function(e){return{type:Ar.UPDATE_IS_MOBILE,isMobile:e}},updatePlayerSize:function(e){return{type:Ar.UPDATE_PLAYER_SIZE,playerSize:e}},updateIsSmallSize:function(e){return{type:Ar.UPDATE_IS_SMALL_SIZE,isSmallSize:e}},updateGuiClientRect:function(e){return{type:Ar.UPDATE_GUI_CLIENT_RECT,guiClientRect:e}},updatePlayerClientRect:function(e){return{type:Ar.UPDATE_PLAYER_CLIENT_RECT,playerClientRect:e}},updateVideoClientRect:function(e){return{type:Ar.UPDATE_VIDEO_CLIENT_RECT,videoClientRect:e}},updateDocumentWidth:function(e){return{type:Ar.UPDATE_DOCUMENT_WIDTH,documentWidth:e}},updatePlayerHoverState:function(e){return{type:Ar.UPDATE_PLAYER_HOVER_STATE,hover:e}},updatePlayerNavState:function(e){return{type:Ar.UPDATE_PLAYER_NAV_STATE,nav:e}},updateSmartContainerOpen:function(e){return{type:Ar.UPDATE_SMART_CONTAINER_OPEN,open:e}},updateActivePresetName:function(e){return{type:Ar.UPDATE_ACTIVE_PRESET_NAME,activePresetName:e}},updateSidePanelMode:function(e,t){return{type:Ar.UPDATE_SIDE_PANEL_MODE,position:e,sidePanelMode:t}},updateSidePanelSize:function(e,t){return{type:Ar.UPDATE_SIDE_PANEL_SIZE,orientation:e,options:t}},updatePresetSettings:function(e){return{type:Ar.UPDATE_PRESET_SETTINGS,presetSettings:e}},updateLayoutStyles:function(e){return{type:Ar.UPDATE_LAYOUT_STYLES,layoutStyles:e}}};function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jr(e){return function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},jt(e,t))}}function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e){var t,n=e.sidePanelsSizes,r=e.sidePanelsModes,i=e.playerClientRect,o=e.isVideo,a=n[Or.VERTICAL],s=i.width,u=Math.max(a.min,Math.min(a.max,s*a.ratio)),l=r[Pr.LEFT],c=r[Pr.RIGHT];return{verticalPanelWidth:u,videoWidth:s-(t=o?l===Rr.ALONGSIDE&&c===Rr.ALONGSIDE?2:1:l!==Rr.HIDDEN&&c!==Rr.HIDDEN?2:1)*u,verticalPanelCount:t}}function Gr(e){var t,n=e.sidePanelsSizes,r=e.sidePanelsModes,i=e.playerClientRect,o=e.isVideo,a=n[Or.HORIZONTAL],s=i.height,u=Math.max(a.min,Math.min(a.max,s*a.ratio)),l=r[Pr.TOP],c=r[Pr.BOTTOM];return{horizontalPanelHeight:u,videoHeight:s-(t=o?l===Rr.ALONGSIDE&&c===Rr.ALONGSIDE?2:1:l!==Rr.HIDDEN&&c!==Rr.HIDDEN?2:1)*u,horizontalPanelCount:t}}function Kr(e){var t=e.sidePanelsModes,n=e.allowSidePanels,r={position:"absolute",left:0,right:0,top:0,bottom:0},i=n?t[Pr.LEFT]:Rr.HIDDEN,o=n?t[Pr.RIGHT]:Rr.HIDDEN,a=n?t[Pr.TOP]:Rr.HIDDEN,s=n?t[Pr.BOTTOM]:Rr.HIDDEN;if(i===Rr.ALONGSIDE||o===Rr.ALONGSIDE){var u=Vr(Fr(Fr({},e),{},{isVideo:!0})),l=u.verticalPanelWidth,c=u.videoWidth;r.left=i===Rr.ALONGSIDE?l:0,r.right=o===Rr.ALONGSIDE?l:0,r.width=c,r.position="absolute"}if(a===Rr.ALONGSIDE||s===Rr.ALONGSIDE){var f=Gr(Fr(Fr({},e),{},{isVideo:!0})),p=f.horizontalPanelHeight,d=f.videoHeight;r.top=a===Rr.ALONGSIDE?p:0,r.bottom=s===Rr.ALONGSIDE?p:0,r.height=d,r.position="absolute"}return r}function Hr(e){var t=e.position,n=e.sidePanelsModes,r=n[Pr.LEFT],i=n[Pr.RIGHT],o=n[Pr.TOP],a=n[Pr.BOTTOM];if(-1!==[Pr.RIGHT,Pr.LEFT].indexOf(t)){var s={},u=Vr(e).verticalPanelWidth;return s.width=u,t===Pr.RIGHT?(i===Rr.HIDDEN?(s.right=-u,s.opacity=0):(s.right=0,s.opacity=1),s):(r===Rr.HIDDEN?(s.left=-u,s.opacity=0):(s.left=0,s.opacity=1),s)}var l={},c=Gr(e).horizontalPanelHeight,f=Vr(e).verticalPanelWidth;return l.height=c,r!==Rr.HIDDEN&&(l.left=f),i!==Rr.HIDDEN&&(l.right=f),t===Pr.TOP?(o===Rr.HIDDEN?(l.top=-c,l.opacity=0):(l.top=0,l.opacity=1),l):(a===Rr.HIDDEN?(l.bottom=-c,l.opacity=0):(l.bottom=0,l.opacity=1),l)}function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xr(e,t){return!t||"object"!==zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){Zr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ei(e){var t,n;return e.allowSidePanels?(Zr(t={},Pr.TOP,Hr(Qr(Qr({},e),{},{position:Pr.TOP}))),Zr(t,Pr.BOTTOM,Hr(Qr(Qr({},e),{},{position:Pr.BOTTOM}))),Zr(t,Pr.RIGHT,Hr(Qr(Qr({},e),{},{position:Pr.RIGHT}))),Zr(t,Pr.LEFT,Hr(Qr(Qr({},e),{},{position:Pr.LEFT}))),t):(Zr(n={},Pr.TOP,{}),Zr(n,Pr.BOTTOM,{}),Zr(n,Pr.RIGHT,{}),Zr(n,Pr.LEFT,{}),n)}var ti,ni=on((function(e){return{sidePanelsModes:e.shell.sidePanelsModes,sidePanelsSizes:e.shell.sidePanelsSizes,allowSidePanels:e.shell.presetSettings.allowSidePanels,playerClientRect:e.shell.playerClientRect}}),jr(Lr))(Sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$r(e);if(t){var i=$r(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xr(this,n)}}(i);function i(){return Wr(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.sidePanelsModes,r=t.sidePanelsSizes,i=t.allowSidePanels,o=t.playerClientRect,a=e.sidePanelsModes,s=e.sidePanelsSizes,u=e.allowSidePanels,l=e.playerClientRect;return!(n===a&&r===s&&i===u&&o===l)}},{key:"componentDidUpdate",value:function(){var e={sidePanelsModes:this.props.sidePanelsModes,sidePanelsSizes:this.props.sidePanelsSizes,playerClientRect:this.props.playerClientRect,allowSidePanels:this.props.allowSidePanels},t=function(e){var t=e.sidePanelsModes,n=e.playerClientRect,r=e.allowSidePanels,i={position:"absolute",left:0,right:0,top:0,bottom:0},o=n.width,a=n.height,s=r?t[Pr.LEFT]:Rr.HIDDEN,u=r?t[Pr.RIGHT]:Rr.HIDDEN,l=r?t[Pr.TOP]:Rr.HIDDEN,c=r?t[Pr.BOTTOM]:Rr.HIDDEN;if(s!==Rr.HIDDEN||u!==Rr.HIDDEN){var f=Vr(e).verticalPanelWidth;s!==Rr.HIDDEN&&(i.left=f),u!==Rr.HIDDEN&&(i.right=f)}if(l!==Rr.HIDDEN||c!==Rr.HIDDEN){var p=Gr(e).horizontalPanelHeight;l!==Rr.HIDDEN&&(i.top=p),c!==Rr.HIDDEN&&(i.bottom=p)}o=o-i.right-i.left,a=a-i.top-i.bottom;var d=n.left+(s!==Rr.HIDDEN?i.left:0),h=n.top+(l!==Rr.HIDDEN?i.top:0);return{style:i,rect:{x:d,y:h,width:o,height:a,top:h,right:n.right+(u!==Rr.HIDDEN?i.right:0),bottom:n.bottom+(c!==Rr.HIDDEN?i.bottom:0),left:d}}}(e),n=t.style,r=t.rect;this.props.updateLayoutStyles({gui:n,video:Kr(e),sidePanels:ei(e)}),this.props.updateGuiClientRect(r)}},{key:"render",value:function(){return null}}])&&Yr(t.prototype,n),i}(B))||Sr;function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ai(e,t){return!t||"object"!==ri(t)&&"function"!=typeof t?si(e):t}function si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ci=nr("PlayerAreaProvider")(ti=on((function(e){return{activePresetName:e.shell.activePresetName}}))(ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ui(e);if(t){var i=ui(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ai(this,n)}}(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),li(si(e=r.call(this)),"_validateComponentData",(function(t){var n=t.container||t.area;return!!(t.get&&t.presets&&n)||(e.props.logger.warn("component data with label '".concat(t.label||"","' is invalid (did you remember to set 'get', 'presets' and 'area'?)")),!1)})),li(si(e),"_addNewComponentAndUpdateListeners",(function(t){return e._addNewComponent(t,!0)})),li(si(e),"_addNewComponent",(function(t,n){var r=Object.assign({},t);if(r.container&&(r.area=r.area||r.container,delete r.container),!e._validateComponentData(r))return function(){};var i=r.area;return r.presets.forEach((function(t){if((e._componentsByPreset[t]||(e._componentsByPreset[t]=[])).push(r),n){var o=e._findListeners(i,t);e._emitListeners(o)}})),function(){e._removeNewComponent(r)}})),li(si(e),"_removeNewComponent",(function(t){e._validateComponentData(t)&&t.presets.forEach((function(n){var r=e._componentsByPreset[n]||[],i=r.indexOf(t);if(-1!==i){r.splice(i,1);var o=e._findListeners(t.area,t.presetName);e._emitListeners(o)}}))})),li(si(e),"_findListeners",(function(t,n){return t?e._listeners.filter((function(e){return(!n||e.presetName===n)&&e.areaName===t})):[]})),li(si(e),"_listen",(function(t,n,r){if(!t||!n||!r)return function(){};var i=e._findListeners(n,t);i&&i.length>0&&(e.props.logger.warn("Another component is already registered to updates for player area '".concat(n,"' in preset '").concat(t,"'. Unlisten to previous listener")),i.forEach((function(t){e._unlisten(t)})));var o={presetName:t,areaName:n,callback:r};return e._listeners.push(o),e._emitListeners([o]),function(){e._unlisten(o)}})),li(si(e),"_unlisten",(function(t){var n=e._listeners.indexOf(t);-1!==n&&e._listeners.splice(n,1)})),li(si(e),"_getAreaComponents",(function(t,n){if(!n||!t)return[];var r=e._componentsByPreset[t];return(r?r.filter((function(e){return e.area===n})):[])||[]})),e._listeners=[],e._componentsByPreset={},e}return t=i,(n=[{key:"_initializePlayerComponents",value:function(){this.props.uiComponents&&this.props.uiComponents.length>0&&(this.props.uiComponents.forEach(this._addNewComponent),this._emitAllListeners())}},{key:"_emitListeners",value:function(e){var t=this,n=this.props.activePresetName;(e||[]).forEach((function(e){var r=e.presetName===n?t._getAreaComponents(n,e.areaName):[];try{e.callback(r)}catch(n){t.props.logger.error("Error occurred when handling player area ".concat(e.areaName," of preset ").concat(e.presetName,"."),n)}}))}},{key:"_emitAllListeners",value:function(){this._emitListeners(this._listeners)}},{key:"componentDidMount",value:function(){this._initializePlayerComponents()}},{key:"componentDidUpdate",value:function(e){e.activePresetName!==this.props.activePresetName&&this._emitAllListeners()}},{key:"getChildContext",value:function(){return{playerAreaComponentsStore:{listen:this._listen,addNewComponent:this._addNewComponentAndUpdateListeners,getAreaComponents:this._getAreaComponents}}}},{key:"render",value:function(e){return N(F,null,N(ni,null),e.children)}}])&&ii(t.prototype,n),i}(B))||ti)||ti;function fi(e){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yi(e,t){return!t||"object"!==fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gi={allowSidePanels:!1,allowPlayerArea:!1},mi=function(e){return function(t){var n;return on(null,jr(Lr))(n=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}(a,n);var r,i,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vi(e);if(t){var i=vi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yi(this,n)}}(a);function a(){return pi(this,a),o.apply(this,arguments)}return r=a,(i=[{key:"componentDidMount",value:function(){var t=Object.assign({},gi,e),n=t.allowSidePanels,r=t.allowPlayerArea;this.props.updatePresetSettings({allowSidePanels:n,allowPlayerArea:r})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(e){return N(t,e)}}])&&di(r.prototype,i),a}(B))||n}};function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){ki(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ei={UPDATE:"config/UPDATE",UPDATE_COMPONENT:"config/UPDATE_COMPONENT",RESET:"config/RESET"},wi={forceTouchUI:!1,components:{watermark:{},seekbar:{},vrStereo:{},share:{},logo:{},fullscreen:{},sidePanels:{}}},Ti=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ei.UPDATE:var n=Un({},e,t.config);return _i(_i({},e),n);case Ei.UPDATE_COMPONENT:return _i(_i({},e),{},{components:_i(_i({},e.components),{},ki({},t.componentAlias,Un({},e.components[t.componentAlias],t.config)))});default:return e}},Si={updateConfig:function(e){return{type:Ei.UPDATE,config:e}},updateComponentConfig:function(e,t){return{type:Ei.UPDATE_COMPONENT,componentAlias:e,config:t}}};function Ai(e,t,n){var r=n.config.components&&n.config.components[e];return r?Un(t,r):t}function Oi(e,t,n){return n.componentAlias===e?Un(t,n.config):t}function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){Ci(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xi={UPDATE_PLAYER_STATE:"".concat("engine","/UPDATE_PLAYER_STATE"),UPDATE_PRE_PLAYBACK:"".concat("engine","/UPDATE_PRE_PLAYBACK"),UPDATE_IS_PLAYING:"".concat("engine","/UPDATE_IS_PLAYING"),UPDATE_IS_PAUSED:"".concat("engine","/UPDATE_IS_PAUSED"),UPDATE_IS_SEEKING:"".concat("engine","/UPDATE_IS_SEEKING"),UPDATE_LAST_SEEK_POINT:"".concat("engine","/UPDATE_LAST_SEEK_POINT"),UPDATE_IS_CHANGING_SOURCE:"".concat("engine","/UPDATE_IS_CHANGING_SOURCE"),UPDATE_IS_ENDED:"".concat("engine","/UPDATE_IS_ENDED"),UPDATE_IS_PLAYBACK_STARTED:"".concat("engine","/UPDATE_IS_PLAYBACK_STARTED"),UPDATE_IS_PLAYBACK_ENDED:"".concat("engine","/UPDATE_IS_PLAYBACK_ENDED"),UPDATE_CURRENT_TIME:"".concat("engine","/UPDATE_CURRENT_TIME"),UPDATE_DURATION:"".concat("engine","/UPDATE_DURATION"),UPDATE_VOLUME:"".concat("engine","/UPDATE_VOLUME"),UPDATE_MUTED:"".concat("engine","/UPDATE_MUTED"),UPDATE_METADATA_LOADING_STATUS:"".concat("engine","/UPDATE_METADATA_LOADING_STATUS"),UPDATE_AUDIO_TRACKS:"".concat("engine","/UPDATE_AUDIO_TRACKS"),UPDATE_VIDEO_TRACKS:"".concat("engine","/UPDATE_VIDEO_TRACKS"),UPDATE_TEXT_TRACKS:"".concat("engine","/UPDATE_TEXT_TRACKS"),UPDATE_AD_BREAK:"".concat("engine","/UPDATE_AD_BREAK"),UPDATE_AD_BREAK_PROGRESS:"".concat("engine","/UPDATE_AD_BREAK_PROGRESS"),UPDATE_AD_BREAK_COMPLETED:"".concat("engine","/UPDATE_AD_BREAK_COMPLETED"),UPDATE_AD_IS_PLAYING:"".concat("engine","/UPDATE_AD_IS_PLAYING"),UPDATE_AD_SKIP_TIME_OFFSET:"".concat("engine","/UPDATE_AD_SKIP_TIME_OFFSET"),UPDATE_AD_SKIPPABLE_STATE:"".concat("engine","/UPDATE_AD_SKIPPABLE_STATE"),UPDATE_AD_URL:"".concat("engine","/UPDATE_AD_URL"),UPDATE_AD_IS_LINEAR:"".concat("engine","/UPDATE_AD_IS_LINEAR"),UPDATE_PLAYER_POSTER:"".concat("engine","/UPDATE_PLAYER_POSTER"),UPDATE_IS_LIVE:"".concat("engine","/UPDATE_IS_LIVE"),UPDATE_IS_DVR:"".concat("engine","/UPDATE_IS_DVR"),UPDATE_ERROR:"".concat("engine","/ERROR"),UPDATE_IS_IDLE:"".concat("engine","/UPDATE_IS_IDLE"),UPDATE_FALLBACK_TO_MUTED_AUTOPLAY:"".concat("engine","/UPDATE_FALLBACK_TO_MUTED_AUTOPLAY"),UPDATE_IS_VR:"".concat("engine","/UPDATE_IS_VR"),UPDATE_VR_STEREO_MODE:"".concat("engine","/UPDATE_VR_STEREO_MODE"),UPDATE_IS_CASTING:"".concat("engine","/UPDATE_IS_CASTING"),UPDATE_CAST_SESSION:"".concat("engine","/UPDATE_CAST_SESSION"),UPDATE_IS_CAST_AVAILABLE:"".concat("engine","/UPDATE_IS_CAST_AVAILABLE"),UPDATE_PLAYLIST:"".concat("engine","/UPDATE_PLAYLIST"),UPDATE_PICTURE_IN_PICTURE_SUPPORTED:"".concat("engine","/UPDATE_PICTURE_IN_PICTURE_SUPPORTED"),UPDATE_PICTURE_IN_PICTURE_MODE:"".concat("engine","/UPDATE_PICTURE_IN_PICTURE_MODE"),UPDATE_FULLSCREEN:"".concat("engine","/UPDATE_FULLSCREEN")},Di={isIdle:!1,isPlaying:!1,isPaused:!1,isSeeking:!1,isEnded:!1,isPlaybackStarted:!1,isPlaybackEnded:!1,isChangingSource:!1,prePlayback:!0,metadataLoaded:!1,playerState:{previousState:"",currentState:""},fallbackToMutedAutoPlay:!1,poster:"",currentTime:0,lastSeekPoint:0,duration:0,volume:1,muted:!1,videoTracks:[],audioTracks:[],textTracks:[],adIsLinear:!1,adBreak:!1,adIsPlaying:!1,adSkipTimeOffset:0,adSkippableState:!1,isLive:!1,isDvr:!1,adProgress:{currentTime:0,duration:0},adUrl:"",hasError:!1,isVr:!1,vrStereoMode:!1,isCasting:!1,castSession:null,isCastAvailable:!1,pictureInPictureSupported:!1,isInPictureInPicture:!1,playlist:null,fullscreen:!1},Ii=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ei.UPDATE:return Ai("engine",e,t);case Ei.UPDATE_COMPONENT:return Oi("engine",e,t);case xi.UPDATE_ERROR:return Ri(Ri({},e),{},{hasError:t.hasError});case xi.UPDATE_PLAYER_STATE:return Ri(Ri({},e),{},{playerState:t.playerState});case xi.UPDATE_PRE_PLAYBACK:return Ri(Ri({},e),{},{prePlayback:t.prePlayback});case xi.UPDATE_IS_PLAYING:return Ri(Ri({},e),{},{isPlaying:t.isPlaying});case xi.UPDATE_IS_PAUSED:return Ri(Ri({},e),{},{isPaused:t.isPaused});case xi.UPDATE_IS_SEEKING:return Ri(Ri({},e),{},{isSeeking:t.isSeeking});case xi.UPDATE_LAST_SEEK_POINT:return Ri(Ri({},e),{},{lastSeekPoint:t.lastSeekPoint});case xi.UPDATE_IS_ENDED:return Ri(Ri({},e),{},{isEnded:t.isEnded});case xi.UPDATE_IS_PLAYBACK_STARTED:return Ri(Ri({},e),{},{isPlaybackStarted:t.isPlaybackStarted});case xi.UPDATE_IS_PLAYBACK_ENDED:return Ri(Ri({},e),{},{isPlaybackEnded:t.isPlaybackEnded});case xi.UPDATE_CURRENT_TIME:return Ri(Ri({},e),{},{currentTime:t.currentTime});case xi.UPDATE_DURATION:return Ri(Ri({},e),{},{duration:t.duration});case xi.UPDATE_VOLUME:return Ri(Ri({},e),{},{volume:t.volume});case xi.UPDATE_MUTED:return Ri(Ri({},e),{},{muted:t.muted});case xi.UPDATE_METADATA_LOADING_STATUS:return Ri(Ri({},e),{},{metadataLoaded:t.metadataLoaded});case xi.UPDATE_AUDIO_TRACKS:return Ri(Ri({},e),{},{audioTracks:t.tracks});case xi.UPDATE_VIDEO_TRACKS:return Ri(Ri({},e),{},{videoTracks:t.tracks});case xi.UPDATE_TEXT_TRACKS:return Ri(Ri({},e),{},{textTracks:t.tracks});case xi.UPDATE_AD_BREAK:return Ri(Ri({},e),{},{adBreak:t.adBreak});case xi.UPDATE_AD_BREAK_PROGRESS:return Ri(Ri({},e),{},{adProgress:t.adProgress});case xi.UPDATE_AD_BREAK_COMPLETED:return Ri(Ri({},e),{},{adProgress:{currentTime:e.adProgress.duration,duration:e.adProgress.duration}});case xi.UPDATE_AD_IS_PLAYING:return Ri(Ri({},e),{},{adIsPlaying:t.adIsPlaying});case xi.UPDATE_AD_IS_LINEAR:return Ri(Ri({},e),{},{adIsLinear:t.adIsLinear});case xi.UPDATE_AD_SKIP_TIME_OFFSET:return Ri(Ri({},e),{},{adSkipTimeOffset:t.adSkipTimeOffset});case xi.UPDATE_AD_SKIPPABLE_STATE:return Ri(Ri({},e),{},{adSkippableState:t.adSkippableState});case xi.UPDATE_AD_URL:return Ri(Ri({},e),{},{adUrl:t.adUrl});case xi.UPDATE_PLAYER_POSTER:return Ri(Ri({},e),{},{poster:t.poster});case xi.UPDATE_IS_LIVE:return Ri(Ri({},e),{},{isLive:t.isLive});case xi.UPDATE_IS_DVR:return Ri(Ri({},e),{},{isDvr:t.isDvr});case xi.UPDATE_IS_IDLE:return Ri(Ri({},e),{},{isIdle:t.IsIdle});case xi.UPDATE_FALLBACK_TO_MUTED_AUTOPLAY:return Ri(Ri({},e),{},{fallbackToMutedAutoPlay:t.fallback});case xi.UPDATE_IS_VR:return Ri(Ri({},e),{},{isVr:t.isVr});case xi.UPDATE_VR_STEREO_MODE:return Ri(Ri({},e),{},{vrStereoMode:t.vrStereoMode});case xi.UPDATE_IS_CASTING:return Ri(Ri({},e),{},{isCasting:t.isCasting});case xi.UPDATE_CAST_SESSION:return Ri(Ri({},e),{},{castSession:t.castSession});case xi.UPDATE_IS_CAST_AVAILABLE:return Ri(Ri({},e),{},{isCastAvailable:t.isCastAvailable});case xi.UPDATE_IS_CHANGING_SOURCE:return Ri(Ri({},e),{},{isChangingSource:t.isChangingSource});case xi.UPDATE_PLAYLIST:return Ri(Ri({},e),{},{playlist:t.playlist});case xi.UPDATE_PICTURE_IN_PICTURE_SUPPORTED:return Ri(Ri({},e),{},{isPictureInPictureSupported:t.isPictureInPictureSupported});case xi.UPDATE_PICTURE_IN_PICTURE_MODE:return Ri(Ri({},e),{},{isInPictureInPicture:t.isInPictureInPicture});case xi.UPDATE_FULLSCREEN:return Ri(Ri({},e),{},{fullscreen:t.fullscreen});default:return e}},Li={updateHasError:function(e){return{type:xi.UPDATE_ERROR,hasError:e}},updatePlayerState:function(e,t){return{type:xi.UPDATE_PLAYER_STATE,playerState:{prevoiusState:e,currentState:t}}},updatePrePlayback:function(e){return{type:xi.UPDATE_PRE_PLAYBACK,prePlayback:e}},updateIsPlaying:function(e){return{type:xi.UPDATE_IS_PLAYING,isPlaying:e}},updateIsPaused:function(e){return{type:xi.UPDATE_IS_PAUSED,isPaused:e}},updateIsSeeking:function(e){return{type:xi.UPDATE_IS_SEEKING,isSeeking:e}},updateLastSeekPoint:function(e){return{type:xi.UPDATE_LAST_SEEK_POINT,lastSeekPoint:e}},updateIsEnded:function(e){return{type:xi.UPDATE_IS_ENDED,isEnded:e}},updateIsPlaybackStarted:function(e){return{type:xi.UPDATE_IS_PLAYBACK_STARTED,isPlaybackStarted:e}},updateIsPlaybackEnded:function(e){return{type:xi.UPDATE_IS_PLAYBACK_ENDED,isPlaybackEnded:e}},updateCurrentTime:function(e){return{type:xi.UPDATE_CURRENT_TIME,currentTime:e}},updateDuration:function(e){return{type:xi.UPDATE_DURATION,duration:e}},updateVolume:function(e){return{type:xi.UPDATE_VOLUME,volume:e}},updateMuted:function(e){return{type:xi.UPDATE_MUTED,muted:e}},updateMetadataLoadingStatus:function(e){return{type:xi.UPDATE_METADATA_LOADING_STATUS,metadataLoaded:e}},updateAudioTracks:function(e){return{type:xi.UPDATE_AUDIO_TRACKS,tracks:e}},updateVideoTracks:function(e){return{type:xi.UPDATE_VIDEO_TRACKS,tracks:e}},updateTextTracks:function(e){return{type:xi.UPDATE_TEXT_TRACKS,tracks:e}},updateAdBreak:function(e){return{type:xi.UPDATE_AD_BREAK,adBreak:e}},updateAdBreakProgress:function(e,t){return{type:xi.UPDATE_AD_BREAK_PROGRESS,adProgress:{currentTime:e,duration:t}}},updateAdBreakCompleted:function(){return{type:xi.UPDATE_AD_BREAK_COMPLETED}},updateAdIsPlaying:function(e){return{type:xi.UPDATE_AD_IS_PLAYING,adIsPlaying:e}},updateAdSkipTimeOffset:function(e){return{type:xi.UPDATE_AD_SKIP_TIME_OFFSET,adSkipTimeOffset:e}},updateAdSkippableState:function(e){return{type:xi.UPDATE_AD_SKIPPABLE_STATE,adSkippableState:e}},updateAdClickUrl:function(e){return{type:xi.UPDATE_AD_URL,adUrl:e}},updateAdIsLinear:function(e){return{type:xi.UPDATE_AD_IS_LINEAR,adIsLinear:e}},updatePlayerPoster:function(e){return{type:xi.UPDATE_PLAYER_POSTER,poster:e}},updateIsLive:function(e){return{type:xi.UPDATE_IS_LIVE,isLive:e}},updateIsDvr:function(e){return{type:xi.UPDATE_IS_DVR,isDvr:e}},updateIsIdle:function(e){return{type:xi.UPDATE_IS_IDLE,IsIdle:e}},updateFallbackToMutedAutoPlay:function(e){return{type:xi.UPDATE_FALLBACK_TO_MUTED_AUTOPLAY,fallback:e}},updateIsVr:function(e){return{type:xi.UPDATE_IS_VR,isVr:e}},updateVrStereoMode:function(e){return{type:xi.UPDATE_VR_STEREO_MODE,vrStereoMode:e}},updateIsCasting:function(e){return{type:xi.UPDATE_IS_CASTING,isCasting:e}},updateCastSession:function(e){return{type:xi.UPDATE_CAST_SESSION,castSession:e}},updateIsCastAvailable:function(e){return{type:xi.UPDATE_IS_CAST_AVAILABLE,isCastAvailable:e}},updateIsChangingSource:function(e){return{type:xi.UPDATE_IS_CHANGING_SOURCE,isChangingSource:e}},updatePlaylist:function(e){return{type:xi.UPDATE_PLAYLIST,playlist:e}},updatePictureInPictureSupport:function(e){return{type:xi.UPDATE_PICTURE_IN_PICTURE_SUPPORTED,isPictureInPictureSupported:e}},updateIsInPictureInPicture:function(e){return{type:xi.UPDATE_PICTURE_IN_PICTURE_MODE,isInPictureInPicture:e}},updateFullscreen:function(e){return{type:xi.UPDATE_FULLSCREEN,fullscreen:e}}};function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){ji(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ui={UPDATE_SEEKBAR_DRAGGING_STATUS:"seekbar/UPDATE_SEEKBAR_DRAGGING_STATUS",UPDATE_SEEKBAR_HOVER_ACTIVE:"seekbar/UPDATE_SEEKBAR_HOVER_ACTIVE",UPDATE_CURRENT_TIME:"seekbar/UPDATE_CURRENT_TIME",UPDATE_DURATION:"seekbar/UPDATE_DURATION"},Fi={currentTime:0,duration:0,draggingActive:!1,hoverActive:!1},Bi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ui.UPDATE_SEEKBAR_DRAGGING_STATUS:return Ni(Ni({},e),{},{draggingActive:t.draggingActive});case Ui.UPDATE_SEEKBAR_HOVER_ACTIVE:return Ni(Ni({},e),{},{hoverActive:t.hoverActive});case Ui.UPDATE_CURRENT_TIME:return Ni(Ni({},e),{},{currentTime:t.currentTime});case Ui.UPDATE_DURATION:return Ni(Ni({},e),{},{duration:t.duration});default:return e}},Vi={updateSeekbarDraggingStatus:function(e){return{type:Ui.UPDATE_SEEKBAR_DRAGGING_STATUS,draggingActive:e}},updateSeekbarHoverActive:function(e){return{type:Ui.UPDATE_SEEKBAR_HOVER_ACTIVE,hoverActive:e}},updateDuration:function(e){return{type:Ui.UPDATE_DURATION,duration:e}},updateCurrentTime:function(e){return{type:Ui.UPDATE_CURRENT_TIME,currentTime:e}}};function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){Hi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zi={UPDATE_VOLUME_DRAGGING_STATUS:"volume/UPDATE_VOLUME_DRAGGING_STATUS",UPDATE_HOVER:"volume/UPDATE_HOVER"},Wi={draggingActive:!1,hover:!1},Yi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zi.UPDATE_VOLUME_DRAGGING_STATUS:return Ki(Ki({},e),{},{draggingActive:t.draggingActive});case zi.UPDATE_HOVER:return Ki(Ki({},e),{},{hover:t.hover});default:return e}},qi={updateVolumeDraggingStatus:function(e){return{type:zi.UPDATE_VOLUME_DRAGGING_STATUS,draggingActive:e}},updateVolumeHover:function(e){return{type:zi.UPDATE_HOVER,hover:e}}};function Xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(n),!0).forEach((function(t){Ji(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qi={UPDATE_LOADING_SPINNER_STATE:"".concat("loading","/UPDATE_LOADING_SPINNER_STATE")},Zi={show:!1},eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ei.UPDATE:return Ai("loading",e,t);case Ei.UPDATE_COMPONENT:return Oi("loading",e,t);case Qi.UPDATE_LOADING_SPINNER_STATE:return $i($i({},e),{},{show:t.show});default:return e}},to={updateLoadingSpinnerState:function(e){return{type:Qi.UPDATE_LOADING_SPINNER_STATE,show:e}}};function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oo={TOGGLE_SHARE_OVERLAY:"share/TOGGLE_SHARE_OVERLAY"},ao={overlayOpen:!1},so=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ei.UPDATE:return Ai("share",e,t);case Ei.UPDATE_COMPONENT:return Oi("share",e,t);case oo.TOGGLE_SHARE_OVERLAY:return ro(ro({},e),{},{overlayOpen:t.show});default:return e}},uo={toggleShareOverlay:function(e){return{type:oo.TOGGLE_SHARE_OVERLAY,show:e}}};function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var po={TOGGLE_CVAA_OVERLAY:"cvaa/TOGGLE_CVAA_OVERLAY",UPDATE_CAPTIONS_STYLE:"cvaa/UPDATE_CAPTIONS_STYLE"},ho={overlayOpen:!1,style:"default"},yo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case po.TOGGLE_CVAA_OVERLAY:return co(co({},e),{},{overlayOpen:t.show});case po.UPDATE_CAPTIONS_STYLE:return co(co({},e),{},{style:t.style});default:return e}},vo={toggleCVAAOverlay:function(e){return{type:po.TOGGLE_CVAA_OVERLAY,show:e}},updateCaptionsStyle:function(e){return{type:po.UPDATE_CAPTIONS_STYLE,style:e}}};function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?go(Object(n),!0).forEach((function(t){bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _o={UPDATE_QUALITY:"settings/UPDATE_QUALITY",UPDATE_SPEED:"settings/UPDATE_SPEED"},ko={quality:1,speed:2},Eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _o.UPDATE_QUALITY:return mo(mo({},e),{},{quality:t.quality});case _o.UPDATE_SPEED:return mo(mo({},e),{},{speed:t.speed});default:return e}},wo={updateQuality:function(e){return{type:_o.UPDATE_QUALITY,quality:e}},updateSpeed:function(e){return{type:_o.UPDATE_SPEED,speed:e}}};function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function So(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){Ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oo={UPDATE_ACTION_ICON:"overlay-action/UPDATE_ACTION_ICON"},Po={iconType:null},Ro=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oo.UPDATE_ACTION_ICON:return So(So({},e),{},{iconType:t.iconType});default:return e}},Co={updateOverlayActionIcon:function(e){return{type:Oo.UPDATE_ACTION_ICON,iconType:e}}};function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach((function(t){Io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lo={UPDATE_BACKDROP_VISIBILITY:"backdrop/UPDATE_BACKDROP_VISIBILITY"},Mo={show:!1},No=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lo.UPDATE_BACKDROP_VISIBILITY:return Do(Do({},e),{},{show:t.show});default:return e}},jo={updateBackdropVisibility:function(e){return{type:Lo.UPDATE_BACKDROP_VISIBILITY,show:e}}};function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){Bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vo={UPDATE_PLAYLIST_COUNTDOWN_CANCELED:"playlist-countdown/UPDATE_PLAYLIST_COUNTDOWN_CANCELED"},Go={countdownCanceled:!1},Ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Vo.UPDATE_PLAYLIST_COUNTDOWN_CANCELED:return Fo(Fo({},e),{},{countdownCanceled:t.countdownCanceled});default:return e}},Ho={updatePlaylistCountdownCanceled:function(e){return{type:Vo.UPDATE_PLAYLIST_COUNTDOWN_CANCELED,countdownCanceled:e}}},zo=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];void 0===e[i]&&Lt('No reducer provided for key "'+i+'"'),"function"==typeof e[i]&&(n[i]=e[i])}var o,a,s=Object.keys(n);o={};try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:xt.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:xt.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+xt.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;var r=function(e,t,n,r){var i=Object.keys(t),o=n&&n.type===xt.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===i.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!Dt(e))return"The "+o+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+i.join('", "')+'"';var a=Object.keys(e).filter((function(e){return!t.hasOwnProperty(e)&&!r[e]}));return a.forEach((function(e){r[e]=!0})),n&&n.type===xt.REPLACE?void 0:a.length>0?"Unexpected "+(a.length>1?"keys":"key")+' "'+a.join('", "')+'" found in '+o+'. Expected to find one of the known reducer keys instead: "'+i.join('", "')+'". Unexpected keys will be ignored.':void 0}(e,n,t,o);r&&Lt(r);for(var i=!1,u={},l=0;l<s.length;l++){var c=s[l],f=n[c],p=e[c],d=f(p,t);if(void 0===d){var h=Mt(c,t);throw new Error(h)}u[c]=d,i=i||d!==p}return(i=i||s.length!==Object.keys(e).length)?u:e}}({config:Ti,engine:Ii,shell:Ir,seekbar:Bi,volume:Yi,loading:eo,share:so,cvaa:yo,settings:Eo,overlayAction:Ro,backdrop:No,playlist:Ko}),Wo=n(9);function Yo(e){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $o(e,t){return($o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jo(e,t){return!t||"object"!==Yo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$o(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qo(e);if(t){var i=Qo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jo(this,n)}}(i);function i(){return qo(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"getChildContext",value:function(){return{player:this.props.player}}},{key:"render",value:function(){return this.props.children&&W(this.props.children)[0]||null}}])&&Xo(t.prototype,n),i}(B);function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(){return(ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oa(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sa=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(o,t);var n,r,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aa(e);if(t){var i=aa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oa(this,n)}}(o);function o(){return na(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"render",value:function(){var t=this.context.player;return N(e,ta({},this.props,{player:t}))}}])&&ra(n.prototype,r),o}(B)};function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ca=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._map=new Map}var t,n;return t=e,(n=[{key:"push",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);Array.isArray(n)&&(n.push(t),this._map.set(e,n))}else this._map.set(e,[t])}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=this._map.get(e);return t?t.slice():[]}},{key:"getAll",value:function(){var e,t=[],n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ua(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ua(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._map.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"remove",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);if(Array.isArray(n))for(var r=0;r<n.length;++r)n[r]===t&&(n.splice(r,1),--r)}}},{key:"keys",value:function(){return this._map.keys()}},{key:"clear",value:function(){this._map.clear()}}])&&la(t.prototype,n),e}();function fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pa,da,ha=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1,n&&(this.payload=n)}var t,n;return t=e,(n=[{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}])&&fa(t.prototype,n),e}();function ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}da=zn,"Type"in(pa=ha)?Object.defineProperty(pa,"Type",{value:da,enumerable:!0,configurable:!0,writable:!0}):pa.Type=da;var va=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listeners=new ca,this.dispatchTarget=this}var t,n;return t=e,(n=[{key:"addEventListener",value:function(e,t){this._listeners.push(e,t)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"dispatchEvent",value:function(e){for(var t=this._listeners.get(e.type)||[],n=0;n<t.length;++n){e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.stopped)break}return e.defaultPrevented}}])&&ya(t.prototype,n),e}();function ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ma(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _a(e,t,n){return t&&ba(e.prototype,t),n&&ba(e,n),e}var ka=function(){function e(){ma(this,e),this._bindingMap=new ca}return _a(e,[{key:"destroy",value:function(){return this.removeAll(),this._bindingMap=null,Promise.resolve()}},{key:"listenOnce",value:function(e,t,n,r){var i=this;this.listen(e,t,(function r(o){i.unlisten(e,t,r),n.call(i,o)}),r)}},{key:"listen",value:function(e,t,n,r){var i=new Ea(e,t,n,r);this._bindingMap&&this._bindingMap.push(t,i)}},{key:"unlisten",value:function(e,t,n){if(this._bindingMap)for(var r=this._bindingMap.get(t),i=0;i<r.length;++i){var o=r[i];o.target!==e||o.listener!==n&&n||(o.unlisten(),this._bindingMap&&this._bindingMap.remove(t,o))}}},{key:"removeAll",value:function(){if(this._bindingMap){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ga(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this._bindingMap.getAll());try{for(t.s();!(e=t.n()).done;)e.value.unlisten()}catch(e){t.e(e)}finally{t.f()}this._bindingMap&&this._bindingMap.clear()}}}]),e}(),Ea=function(){function e(t,n,r,i){ma(this,e),this.target=t,this.type=n,this.listener=r,this.options=i,this.target.addEventListener(n,r,!1)}return _a(e,[{key:"unlisten",value:function(){this.target&&(this.target.removeEventListener(this.type,this.listener,this.options),this.target=null,this.listener=null,this.options=null)}}]),e}();function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ta(){return(Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oa(e,t){return(Oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pa(e,t){return!t||"object"!==wa(t)&&"function"!=typeof t?Ra(e):t}function Ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ca(e){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Da,Ia,La,Ma=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oa(e,t)}(o,t);var n,r,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ca(e);if(t){var i=Ca(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pa(this,n)}}(o);function o(){var e;Sa(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xa(Ra(e=i.call.apply(i,[this].concat(n))),"eventManager",new ka),e}return n=o,(r=[{key:"componentWillUnmount",value:function(){this.eventManager&&(this.eventManager.destroy(),this.eventManager=null)}},{key:"render",value:function(){return N(e,Ta({},this.props,{eventManager:this.eventManager}))}}])&&Aa(n.prototype,r),o}(B)};function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fa(e,t){return(Fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e,t){return!t||"object"!==Na(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(n),!0).forEach((function(t){Ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var za=(Da=on(Ii,jr(Ka(Ka(Ka({},Li),to),Lr))),Ia=nr("EngineConnector"),Da(La=sa(La=Ma(La=Ia(La=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fa(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Va(e);if(t){var i=Va(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ba(this,n)}}(i);function i(){return ja(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.player,r=t.eventManager,i=n.Track;this.props.updatePrePlayback(!n.config.playback.autoplay),r.listen(n,n.Event.PLAYER_RESET,(function(){e.props.updateCurrentTime(0),e.props.updateIsIdle(!0),e.props.updateIsPlaybackStarted(!1)})),r.listen(n,n.Event.SOURCE_SELECTED,(function(){e.props.updateIsVr(n.isVr()),e.props.updateIsInPictureInPicture(n.isInPictureInPicture()),n.config.playback.autoplay?e.props.updateLoadingSpinnerState(!0):e.props.updateLoadingSpinnerState(!1)})),r.listen(n,n.Event.CHANGE_SOURCE_STARTED,(function(){e.props.updatePrePlayback(!n.config.playback.autoplay&&!e.props.engine.isPlaybackStarted),e.props.updateIsChangingSource(!0),e.props.updateFallbackToMutedAutoPlay(!1),e.props.updateAdBreak(!1),e.props.updateAdIsPlaying(!1),e.props.updateIsPlaying(!1),e.props.updateIsEnded(!1),e.props.updateIsPlaybackEnded(!1),e.props.updateLastSeekPoint(0),e.props.updateIsPaused(!1),e.props.engine.isCasting&&e.props.updateLoadingSpinnerState(!0)})),r.listen(n,n.Event.CHANGE_SOURCE_ENDED,(function(){e.props.updateIsChangingSource(!1),e.props.updatePlayerPoster(n.poster),e.props.updateIsIdle(!1)})),r.listen(n,n.Event.PLAYER_STATE_CHANGED,(function(t){e.props.updatePlayerState(t.payload.oldState.type,t.payload.newState.type)})),r.listen(n,n.Event.TIME_UPDATE,(function(){e.props.updateCurrentTime(n.currentTime)})),r.listen(n,n.Event.DURATION_CHANGE,(function(){e.props.updateDuration(n.duration)})),r.listen(n,n.Event.LOADED_DATA,(function(){e.props.updateDuration(n.duration),e.props.updatePictureInPictureSupport(n.isPictureInPictureSupported())})),r.listen(n,n.Event.LOADED_METADATA,(function(){e.props.updateMuted(n.muted),e.props.updateMetadataLoadingStatus(!0),e.props.updateIsLive(n.isLive()),e.props.updateIsDvr(n.isDvr()),e.props.updatePlayerPoster(n.poster)})),r.listen(n,n.Event.VOLUME_CHANGE,(function(){e.props.updateVolume(n.volume)})),r.listen(n,n.Event.MUTE_CHANGE,(function(){e.props.updateMuted(n.muted),e.props.engine.fallbackToMutedAutoPlay&&e.props.updateFallbackToMutedAutoPlay(n.muted)})),r.listen(n,n.Event.PLAYBACK_START,(function(){e.props.updatePrePlayback(!1),e.props.updateIsPlaybackStarted(!0),e.props.updateLoadingSpinnerState(!0)})),r.listen(n,n.Event.AUTOPLAY_FAILED,(function(){e.props.updatePrePlayback(!0)})),r.listen(n,n.Event.FIRST_PLAY,(function(){e.props.updatePrePlayback(!1)})),r.listen(n,n.Event.PLAY,(function(){e.props.updateIsPlaying(!0),e.props.updateIsEnded(!1),e.props.updateIsPaused(!1),e.props.updateIsPlaybackEnded(!1)})),r.listen(n,n.Event.PAUSE,(function(){e.props.updateIsPlaying(!1),e.props.updateIsPaused(!0)})),r.listen(n,n.Event.SEEKING,(function(){e.props.updateIsSeeking(!0)})),r.listen(n,n.Event.SEEKED,(function(){e.props.updateIsSeeking(!1),e.props.updateLastSeekPoint(n.currentTime),e.props.updateIsPlaybackEnded(!1)})),r.listen(n,n.Event.ENDED,(function(){e.props.updateIsEnded(!0),e.props.updateIsPlaying(!1),e.props.updateIsPaused(!0)})),r.listen(n,n.Event.PLAYBACK_ENDED,(function(){e.props.updateIsPlaybackEnded(!0)})),r.listen(n,n.Event.TRACKS_CHANGED,(function(){var t=n.getTracks(i.AUDIO),r=n.getTracks(i.VIDEO),o=n.getTracks(i.TEXT);e.props.updateAudioTracks(t),e.props.updateVideoTracks(r),e.props.updateTextTracks(o)})),r.listen(n,n.Event.TEXT_TRACK_CHANGED,(function(){var t=n.getTracks(i.TEXT);e.props.updateTextTracks(t)})),r.listen(n,n.Event.AUDIO_TRACK_CHANGED,(function(){var t=n.getTracks(i.AUDIO);e.props.updateAudioTracks(t)})),r.listen(n,n.Event.VIDEO_TRACK_CHANGED,(function(){var t=n.getTracks(i.VIDEO);e.props.updateVideoTracks(t)})),r.listen(n,n.Event.AD_BREAK_START,(function(){e.props.updateHasError(!1),e.props.updateAdBreak(!0)})),r.listen(n,n.Event.AD_BREAK_END,(function(){e.props.updateAdBreak(!1)})),r.listen(n,n.Event.ALL_ADS_COMPLETED,(function(){e.props.updateAdBreak(!1)})),r.listen(n,n.Event.AD_PROGRESS,(function(t){var n=t.payload.adProgress.currentTime,r=t.payload.adProgress.duration;e.props.updateAdBreakProgress(n,r)})),r.listen(n,n.Event.AD_COMPLETED,(function(){e.props.updateAdBreakCompleted()})),r.listen(n,n.Event.AD_STARTED,(function(){e.props.updateLoadingSpinnerState(!1),e.props.updateAdIsPlaying(!0),e.props.updatePrePlayback(!1)})),r.listen(n,n.Event.AD_RESUMED,(function(){e.props.updateAdIsPlaying(!0)})),r.listen(n,n.Event.AD_PAUSED,(function(){e.props.updateAdIsPlaying(!1)})),r.listen(n,n.Event.AD_ERROR,(function(t){t.payload.severity===n.Error.Severity.CRITICAL&&e.props.updateAdBreak(!1)})),r.listen(n,n.Event.FALLBACK_TO_MUTED_AUTOPLAY,(function(){e.props.updateFallbackToMutedAutoPlay(!0)})),r.listen(n,n.Event.AD_LOADED,(function(t){var n=t.payload.ad;e.props.updateAdIsLinear(n.linear),e.props.updateAdClickUrl(n.clickThroughUrl),e.props.updateAdSkipTimeOffset(n.skipOffset),e.props.updateAdSkippableState(n.skippable)})),r.listen(n,n.Event.VR_STEREO_MODE_CHANGED,(function(t){e.props.updateVrStereoMode(t.payload.mode)})),r.listen(n,n.Event.ERROR,(function(t){t.payload.severity===n.Error.Severity.CRITICAL&&(e.props.updateIsIdle(!1),e.props.updateHasError(!0))})),r.listen(n,n.Event.Cast.CAST_SESSION_STARTED,(function(t){var n=t.payload.session;e.props.updateIsCasting(!0),e.props.updateCastSession(n),n.resuming&&e.props.updateLoadingSpinnerState(!1)})),r.listen(n,n.Event.Cast.CAST_SESSION_ENDED,(function(){e.props.updateIsCasting(!1),e.props.updateCastSession(null)})),r.listen(n,n.Event.Cast.CAST_AVAILABLE,(function(t){var n=t.payload.available;e.props.updateIsCastAvailable(n)})),r.listen(n,n.Event.Playlist.PLAYLIST_ITEM_CHANGED,(function(){e.props.updatePlaylist({next:n.playlist.next,prev:n.playlist.prev})})),r.listen(n,n.Event.ENTER_PICTURE_IN_PICTURE,(function(){e.props.updateIsInPictureInPicture(!0)})),r.listen(n,n.Event.LEAVE_PICTURE_IN_PICTURE,(function(){e.props.updateIsInPictureInPicture(!1)})),r.listen(n,n.Event.PRESENTATION_MODE_CHANGED,(function(){n.isInPictureInPicture()?e.props.updateIsInPictureInPicture(!0):e.props.updateIsInPictureInPicture(!1)})),r.listen(n,n.Event.ENTER_FULLSCREEN,(function(){e.props.updateFullscreen(!0)})),r.listen(n,n.Event.EXIT_FULLSCREEN,(function(){e.props.updateFullscreen(!1)}))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return N("span",null)}}])&&Ua(t.prototype,n),i}(B))||La)||La)||La)||La);za.displayName="EngineConnector";var Wa=n(0),Ya=n.n(Wa);function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){return(Xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $a(e,t){return!t||"object"!==qa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ja(e){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xa(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ja(e);if(t){var i=Ja(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.USER_SELECTED_AUDIO_TRACK)).payload={audioTrack:e},r}return n}(ha);function Za(e){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){return(es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ts(e,t){return!t||"object"!==Za(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ns(e){return(ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&es(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ns(e);if(t){var i=ns(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ts(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.USER_SELECTED_CAPTION_TRACK)).payload={captionTrack:e},r}return n}(ha);function is(e){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function os(e,t){return(os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function as(e,t){return!t||"object"!==is(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ss(e){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&os(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ss(e);if(t){var i=ss(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return as(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.USER_SELECTED_CAPTIONS_STYLE)).payload={captionsStyle:e},r}return n}(ha);function ls(e){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cs(e,t){return(cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fs(e,t){return!t||"object"!==ls(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ps(e){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ds=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cs(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ps(e);if(t){var i=ps(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fs(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.USER_SELECTED_QUALITY_TRACK)).payload={qualityTrack:e},r}return n}(ha);function hs(e){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){return(ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vs(e,t){return!t||"object"!==hs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gs(e){return(gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ys(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gs(e);if(t){var i=gs(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vs(this,n)}}(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,ha.Type.USER_SEEKED)).payload={from:e,to:r},i}return n}(ha);function bs(e){return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _s(e,t){return(_s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ks(e,t){return!t||"object"!==bs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ws=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_s(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Es(e);if(t){var i=Es(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ks(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.USER_SELECTED_SPEED)).payload={speed:e},r}return n}(ha);function Ts(e){return(Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ss(e,t){return(Ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function As(e,t){return!t||"object"!==Ts(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ps=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ss(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Os(e);if(t){var i=Os(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return As(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.UI_VISIBILITY_CHANGED)).payload={visible:e},r}return n}(ha);function Rs(e){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cs(e,t){return(Cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xs(e,t){return!t||"object"!==Rs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ds(e){return(Ds=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Is=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cs(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ds(e);if(t){var i=Ds(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xs(this,n)}}(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,ha.Type.USER_CLICKED_REWIND)).payload={from:e,to:r},i}return n}(ha);function Ls(e){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ms(e,t){return(Ms=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ns(e,t){return!t||"object"!==Ls(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function js(e){return(js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ms(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=js(e);if(t){var i=js(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ns(this,n)}}(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,ha.Type.USER_CLICKED_FORWARD)).payload={from:e,to:r},i}return n}(ha);function Fs(e){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bs(e,t){return(Bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vs(e,t){return!t||"object"!==Fs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gs(e){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ks,Hs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bs(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gs(e);if(t){var i=Gs(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vs(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.USER_CHANGED_VOLUME)).payload={volume:e},r}return n}(ha);function zs(e){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ws(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qs(e,t){return(qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xs(e,t){return!t||"object"!==zs(t)&&"function"!=typeof t?$s(e):t}function $s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Js(e){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qs(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Js(e);if(t){var i=Js(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xs(this,n)}}(i);function i(){var e;Ws(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Qs($s(e=r.call.apply(r,[this].concat(n))),"_notifyClick",(function(t){return nu(e.props.store,t,e.props.player)})),Qs($s(e),"_notifyChange",(function(t){return tu(e.props.store,t,e.props.player)})),Qs($s(e),"_notifyHoverChange",(function(t){return eu(e.props.store,t,e.props.player)})),e}return t=i,(n=[{key:"getChildContext",value:function(){return{notifyClick:this._notifyClick,notifyChange:this._notifyChange,notifyHoverChange:this._notifyHoverChange}}},{key:"render",value:function(){return this.props.children&&W(this.props.children)[0]||null}}])&&Ys(t.prototype,n),i}(B);function eu(e,t,n){var r=e.getState().engine,i=e.getState().shell;!r.adBreak&&r.isPlaying&&i.playerHover!==t.payload.hover&&n.dispatchEvent(new Ps(t.payload.hover))}function tu(e,t,n){switch(t.name){case"Volume":n.dispatchEvent(new Hs(t.payload.volume));break;case"SeekBarPlaybackContainer":n.dispatchEvent(new ms(t.payload.from,t.payload.to));break;case"ActivePreset":n.dispatchEvent(new ha(ha.Type.UI_PRESET_CHANGE,t.payload))}}function nu(e,t,n){switch(t.name){case"Keyboard":su[t.payload.key](e,t,n);break;case"OverlayAction":!function(e,t,n){"PlayPause"===t.payload.type?ru(e,0,n):"Fullscreen"===t.payload.type&&ou(0,0,n)}(e,t,n);break;case"Settings":!function(e,t,n){t.payload.type===n.Track.VIDEO?n.dispatchEvent(new ds(t.payload.track)):n.dispatchEvent(new ws(t.payload.speed))}(0,t,n);break;case"CVAAOverlay":n.dispatchEvent(new us(t.payload.textStyle));break;case"Fullscreen":ou(0,0,n);break;case"Language":!function(e,t,n){t.payload.type===n.Track.AUDIO?n.dispatchEvent(new Qa(t.payload.track)):t.payload.type===n.Track.TEXT&&n.dispatchEvent(new rs(t.payload.track))}(0,t,n);break;case"Shell":n.dispatchEvent(new ha(ha.Type.UI_CLICKED));break;case"Rewind":n.dispatchEvent(new Is(t.payload.from,t.payload.to));break;case"Forward":n.dispatchEvent(new Us(t.payload.from,t.payload.to));break;case"LiveTag":n.dispatchEvent(new ha(ha.Type.USER_CLICKED_LIVE_TAG));break;case"PrePlaybackPlayOverlay":case"PlayPause":ru(e,0,n);break;case"Volume":iu(e,0,n);break;case"PictureInPicture":au(0,0,n)}}function ru(e,t,n){var r=e.getState().engine;r.adBreak?r.adIsPlaying?n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PAUSE)):n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PLAY)):r.isPlaying?n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PAUSE)):n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PLAY))}function iu(e,t,n){e.getState().engine.muted?n.dispatchEvent(new ha(ha.Type.USER_CLICKED_MUTE)):n.dispatchEvent(new ha(ha.Type.USER_CLICKED_UNMUTE))}function ou(e,t,n){n.isFullscreen()?n.dispatchEvent(new ha(ha.Type.USER_EXITED_FULL_SCREEN)):n.dispatchEvent(new ha(ha.Type.USER_ENTERED_FULL_SCREEN))}function au(e,t,n){n.isInPictureInPicture()?n.dispatchEvent(new ha(ha.Type.USER_EXITED_PICTURE_IN_PICTURE)):n.dispatchEvent(new ha(ha.Type.USER_ENTERED_PICTURE_IN_PICTURE))}var su=(Qs(Ks={},Wn.SPACE,(function(e,t,n){ru(e,0,n)})),Qs(Ks,Wn.UP,(function(e,t,n){n.dispatchEvent(new Hs(t.payload.volume))})),Qs(Ks,Wn.DOWN,(function(e,t,n){n.dispatchEvent(new Hs(t.payload.volume))})),Qs(Ks,Wn.F,(function(e,t,n){ou(0,0,n)})),Qs(Ks,Wn.P,(function(e,t,n){au(0,0,n)})),Qs(Ks,Wn.ESC,(function(e,t,n){ou(0,0,n)})),Qs(Ks,Wn.LEFT,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),Qs(Ks,Wn.RIGHT,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),Qs(Ks,Wn.HOME,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),Qs(Ks,Wn.END,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),Qs(Ks,Wn.M,(function(e,t,n){iu(e,0,n)})),Qs(Ks,Wn.SEMI_COLON,(function(e,t,n){n.dispatchEvent(new ws(t.payload.speed))})),Qs(Ks,Wn.PERIOD,(function(e,t,n){n.dispatchEvent(new ws(t.payload.speed))})),Qs(Ks,Wn.COMMA,(function(e,t,n){n.dispatchEvent(new ws(t.payload.speed))})),Qs(Ks,Wn.C,(function(e,t,n){n.dispatchEvent(new rs(t.payload.track))})),Ks);function uu(e){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(){return(lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pu(e,t){return(pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function du(e,t){return!t||"object"!==uu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hu(e){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yu=function(e){return function(t){return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pu(e,t)}(a,n);var r,i,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hu(e);if(t){var i=hu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return du(this,n)}}(a);function a(){return cu(this,a),o.apply(this,arguments)}return r=a,(i=[{key:"notifyClick",value:function(t){this.context.notifyClick({name:e,payload:t})}},{key:"notifyChange",value:function(t){this.context.notifyChange({name:e,payload:t})}},{key:"notifyHoverChange",value:function(t){this.context.notifyHoverChange({name:e,payload:t})}},{key:"render",value:function(){var e=this;return N(t,lu({},this.props,{notifyHoverChange:function(t){return e.notifyHoverChange(t)},notifyChange:function(t){return e.notifyChange(t)},notifyClick:function(t){return e.notifyClick(t)}}))}}])&&fu(r.prototype,i),a}(B)}};function vu(e){return(vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bu(e,t,n){return t&&mu(e.prototype,t),n&&mu(e,n),e}function _u(e,t){return(_u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ku(e,t){return!t||"object"!==vu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eu(e){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wu,Tu,Su,Au,Ou=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_u(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Eu(e);if(t){var i=Eu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ku(this,n)}}(n);function n(){return gu(this,n),t.apply(this,arguments)}return bu(n,[{key:"destroy",value:function(){this._observer&&this._observer.disconnect(),this._observer=null,this._el=null}},{key:"init",value:function(e){this._observer||(this._el=e,window.ResizeObserver?this._createNativeObserver():this._createIframeObserver(),this._el instanceof HTMLElement&&this._observer&&this._observer.observe(this._el))}},{key:"_createNativeObserver",value:function(){var e=this;this._observer=new window.ResizeObserver((function(t){t.forEach((function(){e._triggerResize()}))}))}},{key:"_createIframeObserver",value:function(){this._observer=new Pu(this._triggerResize.bind(this))}},{key:"_triggerResize",value:function(){this.dispatchEvent(new ha(ha.Type.RESIZE))}}]),n}(va),Pu=function(){function e(t){gu(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_observersStore",{}),this._onChangeCallback=t}return bu(e,[{key:"observe",value:function(e){var t=this,n=this._createIframe(),r=e.getAttribute("id");this._observersStore[r]=n,e.appendChild(n),n.contentWindow.onresize=function(){return t._onChangeCallback()}}},{key:"disconnect",value:function(){for(var e in this._observersStore){var t=document.getElementById(e),n=this._observersStore[e];n.onresize=null,t&&(t.removeChild(n),delete this._observersStore[t.getAttribute("id")])}}},{key:"_createIframe",value:function(){var e=document.createElement("iframe");return e.className="playkit-size-iframe",e}}]),e}(),Ru=function(e,t){var n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(void 0,i)}),t)}};function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Du(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lu(e,t){return(Lu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mu(e,t){return!t||"object"!==Cu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nu(e){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){Fu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bu,Vu,Gu={TINY:"tiny",EXTRA_SMALL:"extrasmall",SMALL:"small",MEDIUM:"medium",LARGE:"large",EXTRA_LARGE:"extralarge"},Ku=(wu=on((function(e){return{targetId:e.config.targetId,forceTouchUI:e.config.forceTouchUI,metadataLoaded:e.engine.metadataLoaded,currentState:e.engine.playerState.currentState,playerClasses:e.shell.playerClasses,isMobile:e.shell.isMobile,playerSize:e.shell.playerSize,isCasting:e.engine.isCasting,guiClientRect:e.shell.guiClientRect,playerHover:e.shell.playerHover,playerNav:e.shell.playerNav,seekbarDraggingActive:e.seekbar.draggingActive,seekbarHoverActive:e.seekbar.hoverActive,volumeHoverActive:e.volume.hover,adBreak:e.engine.adBreak,prePlayback:e.engine.prePlayback,smartContainerOpen:e.shell.smartContainerOpen,fullscreen:e.engine.fullscreen,fallbackToMutedAutoPlay:e.engine.fallbackToMutedAutoPlay,playlist:e.engine.playlist}}),jr(Uu(Uu({},Lr),Li))),Tu=nr("Shell"),Su=yu("Shell"),wu(Au=sa(Au=Ma(Au=Tu(Au=Su(Au=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lu(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nu(e);if(t){var i=Nu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mu(this,n)}}(i);function i(){return Du(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"onMouseOver",value:function(){this.props.isMobile||this.state.nav&&(this.setState({nav:!1}),this.props.updatePlayerNavState(!1))}},{key:"onMouseLeave",value:function(e){Object.prototype.hasOwnProperty.call(e,"toElement")&&(this.props.isMobile||this.state.hover&&(this.setState({hover:!1}),this.props.updatePlayerHoverState(!1),this.props.notifyHoverChange({hover:!1})))}},{key:"onMouseMove",value:function(){this.props.isMobile||this._updatePlayerHoverState()}},{key:"onMouseUp",value:function(){this.unMuteFallback(),this.props.notifyClick()}},{key:"unMuteFallback",value:function(){this.props.fallbackToMutedAutoPlay&&(this.props.player.muted=!1)}},{key:"onTouchEnd",value:function(e){this.props.prePlayback||(this.props.fallbackToMutedAutoPlay&&(this.props.player.muted=!1),this.state.hover||e.stopPropagation(),this._updatePlayerHoverState())}},{key:"onKeyDown",value:function(e){this.state.nav||e.keyCode!==Wn.TAB||(this.setState({nav:!0}),this.props.updatePlayerNavState(!0)),!this.state.nav||e.keyCode!==Wn.ENTER&&e.keyCode!==Wn.SPACE||this.unMuteFallback()}},{key:"componentWillMount",value:function(){var e=this.props,t=e.player,n=e.forceTouchUI;this._environmentClasses=["".concat("playkit","-").concat(t.env.os.name.replace(/ /g,"-")),"".concat("playkit","-").concat(t.env.browser.name.replace(/ /g,"-"))];var r=t.env,i=r.isIPadOS,o=r.isTablet,a=r.isMobile;this.props.updateIsMobile(i||o||a||n)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.player,r=t.eventManager;r.listen(window,"resize",Ru((function(){e._onWindowResize()}),100)),this._playerResizeWatcher=new Ou,this._playerResizeWatcher.init(document.getElementById(this.props.targetId)),r.listen(this._playerResizeWatcher,ha.Type.RESIZE,Ru((function(){e._onWindowResize()}),100)),r.listen(n,n.Event.FIRST_PLAY,(function(){return e._onWindowResize()})),this._onWindowResize()}},{key:"_onWindowResize",value:function(){var e=document.getElementById(this.props.targetId);e&&this.props.updatePlayerClientRect(e.getBoundingClientRect()),document.body&&this.props.updateDocumentWidth(document.body.clientWidth)}},{key:"componentWillUnmount",value:function(){this._clearHoverTimeout(),this._playerResizeWatcher.destroy()}},{key:"_updatePlayerHoverState",value:function(){this.props.prePlayback||(this.state.hover||(this.props.updatePlayerHoverState(!0),this.props.notifyHoverChange({hover:!0}),this.setState({hover:!0})),this._startHoverTimeout())}},{key:"_canEndHoverState",value:function(){return!this.props.seekbarDraggingActive&&!this.props.seekbarHoverActive&&!this.props.volumeHoverActive&&!this.props.smartContainerOpen&&(!this.props.player.paused||this.props.adBreak)}},{key:"_startHoverTimeout",value:function(){var e=this;this._clearHoverTimeout(),this.hoverTimeout=setTimeout((function(){e._canEndHoverState()&&(e.props.updatePlayerHoverState(!1),e.props.notifyHoverChange({hover:!1}),e.setState({hover:!1}))}),this.props.hoverTimeout||3e3)}},{key:"_clearHoverTimeout",value:function(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)}},{key:"componentDidUpdate",value:function(e){("playing"===this.props.currentState&&"paused"===e.currentState||!this.props.prePlayback&&e.prePlayback||!this.props.adBreak&&e.adBreak||this.props.adBreak&&!e.adBreak)&&this._updatePlayerHoverState()}},{key:"render",value:function(e){var t=this,n=[Ya.a.player,Ya.a.skinDefault].concat(function(e){return function(e){if(Array.isArray(e))return xu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this._environmentClasses)).concat(e.playerClasses);return this.props.prePlayback&&n.push(Ya.a.prePlayback),this.props.isCasting&&n.push("".concat("playkit","-casting")),this.props.isMobile&&n.push(Ya.a.touch),this.props.playerNav&&n.push(Ya.a.nav),(this.props.playerHover||this.props.playerNav)&&n.push(Ya.a.hover),this.props.metadataLoaded&&n.push(Ya.a.metadataLoaded),this.props.adBreak&&n.push(Ya.a.adBreak),this.props.metadataLoaded&&n.push(Ya.a["state-"+this.props.currentState]),this.props.seekbarDraggingActive&&n.push(Ya.a.hover),this.props.fullscreen&&n.push(Ya.a.fullscreen),this.props.playlist&&n.push(Ya.a.playlist),this.props.guiClientRect&&(this.props.guiClientRect.width<=280?(n.push(Ya.a.sizeTy),this.props.updatePlayerSize(Gu.TINY)):this.props.guiClientRect.width<=380?(n.push(Ya.a.sizeXs),this.props.updatePlayerSize(Gu.EXTRA_SMALL)):this.props.guiClientRect.width<=480?(n.push(Ya.a.sizeSm),this.props.updatePlayerSize(Gu.SMALL)):this.props.guiClientRect.width<=768?(n.push(Ya.a.sizeMd),this.props.updatePlayerSize(Gu.MEDIUM)):this.props.guiClientRect.width<=1024?(n.push(Ya.a.sizeLg),this.props.updatePlayerSize(Gu.LARGE)):this.props.updatePlayerSize(Gu.EXTRA_LARGE),this.props.updateIsSmallSize([Gu.SMALL,Gu.EXTRA_SMALL].includes(this.props.playerSize))),n.push("notranslate"),N("div",{tabIndex:"0",className:n=n.join(" "),onTouchEnd:function(e){return t.onTouchEnd(e)},onMouseUp:function(){return t.onMouseUp()},onMouseOver:function(){return t.onMouseOver()},onMouseMove:function(){return t.onMouseMove()},onMouseLeave:function(e){return t.onMouseLeave(e)},onKeyDown:function(e){return t.onKeyDown(e)}},e.children)}}])&&Iu(t.prototype,n),i}(B))||Au)||Au)||Au)||Au)||Au);function Hu(e){return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yu(e,t){return(Yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qu(e,t){return!t||"object"!==Hu(t)&&"function"!=typeof t?Xu(e):t}function Xu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $u(e){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qu,Zu=(Bu=on((function(e){return{videoStyles:e.shell.layoutStyles.video,targetId:e.config.targetId}}),jr(Lr)),sa(Vu=Ma(Vu=Bu(Vu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yu(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$u(e);if(t){var i=$u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qu(this,n)}}(i);function i(){var e;zu(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Ju(Xu(e=r.call.apply(r,[this].concat(n))),"_onVideoResize",(function(){var t=e.props.player.getVideoElement();t&&e.props.updateVideoClientRect(t.getBoundingClientRect())})),Ju(Xu(e),"_setRef",(function(t){e._videoResizeWatcher&&(e.props.eventManager.unlisten(e._videoResizeWatcher,ha.Type.RESIZE,e._onVideoResize),e._videoResizeWatcher.destroy()),t&&(e._el=t),e._el?e._el.appendChild(e.props.player.getView()):e.props.updateVideoClientRect({x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0})})),e}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){return e.videoStyles!==this.props.videoStyles}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.eventManager,r=t.player;n.listen(r,r.Event.SOURCE_SELECTED,(function(){return e._onVideoResize()}));var i=new Ou;i.init(this._el),this._videoResizeWatcher=i,this.props.eventManager.listen(this._videoResizeWatcher,ha.Type.RESIZE,this._onVideoResize)}},{key:"componentWillUnmount",value:function(){this._videoResizeWatcher.destroy()}},{key:"render",value:function(){var e=this.props,t=e.videoStyles,n=e.targetId;return N("div",{id:"".concat(n,"-video"),className:Ya.a.videoPlayer,style:t,ref:this._setRef})}}])&&Wu(t.prototype,n),i}(B))||Vu)||Vu)||Vu);function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function il(e,t){return(il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ol(e,t){return!t||"object"!==el(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function al(e){return(al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sl,ul=Kn("ActivePreset"),ll=yu("ActivePreset")(Qu=on((function(e){return{state:{shell:e.shell,engine:{adBreak:e.engine.adBreak,isLive:e.engine.isLive,hasError:e.engine.hasError,isIdle:e.engine.isIdle,isVr:e.engine.isVr,playlist:e.engine.playlist}},config:e.config}}),jr(Lr))(Qu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&il(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=al(e);if(t){var i=al(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ol(this,n)}}(i);function i(){return nl(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"getMatchedUI",value:function(e,t){var n,r,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return tl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(void 0===o.condition||o.condition(t)){n=o;break}}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"render",value:function(e){var t,n=this.props,r=n.uis,i=n.state.shell.activePresetName;if(r.length>0){var o=(t=this.getMatchedUI(r,e.state))?t.template(e):r[r.length-1].template(e),a=o&&o.type.displayName||"";return i!==a&&(e.notifyChange({from:i,to:a}),e.updateActivePresetName(a),e.updatePresetSettings(null),ul.debug("update active preset to '".concat(i,"' and reset preset settings"))),o}}}])&&rl(t.prototype,n),i}(B))||Qu)||Qu;function cl(e){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dl(e,t){return(dl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hl(e,t){return!t||"object"!==cl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yl(e){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vl,gl=on((function(e){return{sidePanelsStyles:e.shell.layoutStyles.sidePanels,playerClientRect:e.shell.playerClientRect}}))(sl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dl(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yl(e);if(t){var i=yl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hl(this,n)}}(i);function i(){return fl(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.sidePanelsStyles,r=t.position,i=e.sidePanelsStyles,o=e.position;return n[r]!==i[o]}},{key:"render",value:function(e){var t=e.position,n=e.sidePanelsStyles,r=-1!==[Pr.RIGHT,Pr.LEFT].indexOf(t)?"verticalSidePanel":"horizontalSidePanel",i=[Ya.a.sidePanel,Ya.a[r]],o="SidePanel".concat(t.charAt(0).toUpperCase()+t.slice(1).toLowerCase());return N("div",{style:n[t],className:i.join(" ")},N("div",{className:Ya.a.sidePanelContent},N(mr,{name:o})))}}])&&pl(t.prototype,n),i}(B))||sl;function ml(e){return(ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kl(e,t){return(kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function El(e,t){return!t||"object"!==ml(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wl(e){return(wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tl,Sl,Al,Ol=on((function(e){return{allowSidePanels:e.shell.presetSettings.allowSidePanels,allowPlayerArea:e.shell.presetSettings.allowPlayerArea,sidePanelsConfig:e.config.components.sidePanels}}),jr(Lr))(vl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kl(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wl(e);if(t){var i=wl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return El(this,n)}}(i);function i(){return bl(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidUpdate",value:function(){var e=this.props.sidePanelsConfig,t=e.verticalSizes,n=e.horizontalSizes;t&&this.props.updateSidePanelSize(Or.VERTICAL,t),n&&this.props.updateSidePanelSize(Or.HORIZONTAL,n)}},{key:"render",value:function(){var e=this.props,t=e.uis,n=e.playerContainer,r=e.allowSidePanels,i=e.allowPlayerArea;return N(F,null,N(ll,{uis:t,playerContainer:n}),r?N(F,null,N(gl,{position:Pr.RIGHT}),N(gl,{position:Pr.LEFT}),N(gl,{position:Pr.TOP}),N(gl,{position:Pr.BOTTOM})):void 0,i?N(mr,{name:"PlayerArea"}):void 0)}}])&&_l(t.prototype,n),i}(B))||vl;function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xl(e,t){return(xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dl(e,t){return!t||"object"!==Pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Il(e){return(Il=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ll,Ml=(Tl=on((function(e){return{show:e.loading.show,isMobile:e.shell.isMobile,adBreak:e.engine.adBreak,adIsLinear:e.engine.adIsLinear}}),jr(to)),Sl=nr("Loading"),Tl(Al=sa(Al=Ma(Al=Sl(Al=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xl(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Il(e);if(t){var i=Il(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dl(this,n)}}(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).setState({afterPlayingEvent:!1}),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.player,r=t.eventManager;r.listen(n,n.Event.PLAYER_STATE_CHANGED,(function(t){if(e.state.afterPlayingEvent){var r=n.State;t.payload.newState.type===r.IDLE||t.payload.newState.type===r.PLAYING||t.payload.newState.type===r.PAUSED?e.props.updateLoadingSpinnerState(!1):e.props.updateLoadingSpinnerState(!0)}})),r.listen(n,n.Event.AD_BREAK_START,(function(){e.props.updateLoadingSpinnerState(!0)})),r.listen(n,n.Event.AD_STARTED,(function(){e.props.adIsLinear&&e.props.updateLoadingSpinnerState(!1)})),r.listen(n,n.Event.ALL_ADS_COMPLETED,(function(){e.props.updateLoadingSpinnerState(!1)})),r.listen(n,n.Event.AUTOPLAY_FAILED,(function(){e.props.updateLoadingSpinnerState(!1)})),r.listen(n,n.Event.PLAYING,(function(){e.setState({afterPlayingEvent:!0}),e.props.updateLoadingSpinnerState(!1)})),r.listen(n,n.Event.CHANGE_SOURCE_STARTED,(function(){e.setState({afterPlayingEvent:!1})}))}},{key:"render",value:function(e){if(e.show)return N("div",{className:[Ya.a.loadingBackdrop,Ya.a.show].join(" ")},N("div",{className:Ya.a.spinnerContainer},N("div",{className:Ya.a.spinner},function(e){return function(e){if(Array.isArray(e))return Rl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rl(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(8)).map((function(e){return N("span",{key:e})})))))}}])&&Cl(t.prototype,n),i}(B))||Al)||Al)||Al)||Al);function Nl(e){return(Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fl(e,t){return(Fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bl(e,t){return!t||"object"!==Nl(t)&&"function"!=typeof t?Vl(e):t}function Vl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gl(e){return(Gl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ml.displayName="Loading";var Hl=on((function(e){return{guiStyles:e.shell.layoutStyles.gui}}))(Ll=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fl(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gl(e);if(t){var i=Gl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bl(this,n)}}(i);function i(){var e;jl(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Kl(Vl(e=r.call.apply(r,[this].concat(n))),"_setRef",(function(t){t&&(e._ref=t,e.setState((function(e){return{render:!e.render}})))})),e}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e,t){return e.guiStyles!==this.props.guiStyles||t.render!==this.state.render}},{key:"render",value:function(){var e=this.props,t=e.guiStyles,n=e.children;return N("div",{ref:this._setRef,style:t,className:Ya.a.guiArea},N("div",{style:{pointerEvents:"auto"}},N(mr,{name:"GuiArea"},"function"==typeof n?n({containerRef:this._ref}):n)))}}])&&Ul(t.prototype,n),i}(B))||Ll;function zl(){return N("div",{className:Ya.a.playbackGuiWrapper},N(mr,{name:"PresetArea"},N(Hl,null,N(Ml,null))))}function Wl(e){return N(zl,e)}function Yl(e){return(Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ql(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $l(e,t){return($l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jl(e,t){return!t||"object"!==Yl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ql(e){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}zl.displayName="Idle";var Zl,ec,tc,nc,rc={Maximize:"maximize",Minimize:"minimize",Play:"play",Pause:"pause",VolumeBase:"volume-base",VolumeWaves:"volume-waves",VolumeWave:"volume-wave",VolumeMute:"volume-mute",Close:"close",Share:"share",Settings:"settings",Check:"check",Language:"language",Quality:"quality",Captions:"captions",Speed:"speed",SpeedDown:"speed-down",SpeedUp:"speed-up",Audio:"audio",Copy:"copy",Facebook:"facebook",Twitter:"twitter",GooglePlus:"google-plus",Linkedin:"linkedin",Email:"email",Embed:"embed",Link:"link",ArrowDown:"arrow-down",StartOver:"start-over",SeekEnd:"seek-end",Rewind:"rewind",Rewind10:"rewind10",Forward:"forward",Forward10:"forward10",vrStereo:"vr-stereo",vrStereoFull:"vr-stereo-full",Cast:"cast",CastBrand:"cast-brand",Next:"next",Prev:"prev",PictureInPictureStart:"picture-in-picture-start",PictureInPictureStop:"picture-in-picture-stop"},ic=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$l(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ql(e);if(t){var i=Ql(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jl(this,n)}}(i);function i(){return ql(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){switch(e.type){case rc.Maximize:return N("i",{className:[Ya.a.icon,Ya.a.iconMaximize].join(" ")});case rc.Minimize:return N("i",{className:[Ya.a.icon,Ya.a.iconMinimize].join(" ")});case rc.Play:return N("i",{className:[Ya.a.icon,Ya.a.iconPlay].join(" ")});case rc.Pause:return N("i",{className:[Ya.a.icon,Ya.a.iconPause].join(" ")});case rc.VolumeBase:return N("i",{className:[Ya.a.icon,Ya.a.iconVolumeBase].join(" ")});case rc.VolumeWaves:return N("i",{className:[Ya.a.icon,Ya.a.iconVolumeWaves].join(" ")});case rc.VolumeWave:return N("i",{className:[Ya.a.icon,Ya.a.iconVolumeWave].join(" ")});case rc.VolumeMute:return N("i",{className:[Ya.a.icon,Ya.a.iconVolumeMute].join(" ")});case rc.Close:return N("i",{className:[Ya.a.icon,Ya.a.iconClose].join(" ")});case rc.Share:return N("i",{className:[Ya.a.icon,Ya.a.iconShare].join(" ")});case rc.Settings:return N("i",{className:[Ya.a.icon,Ya.a.iconSettings].join(" ")});case rc.Check:return N("i",{className:[Ya.a.icon,Ya.a.iconCheck].join(" ")});case rc.Language:return N("i",{className:[Ya.a.icon,Ya.a.iconLanguage].join(" ")});case rc.Quality:return N("i",{className:[Ya.a.icon,Ya.a.iconQuality].join(" ")});case rc.Captions:return N("i",{className:[Ya.a.icon,Ya.a.iconCaptions].join(" ")});case rc.Speed:return N("i",{className:[Ya.a.icon,Ya.a.iconSpeed].join(" ")});case rc.SpeedDown:return N("i",{className:[Ya.a.icon,Ya.a.iconSpeedDown].join(" ")});case rc.SpeedUp:return N("i",{className:[Ya.a.icon,Ya.a.iconSpeedUp].join(" ")});case rc.Audio:return N("i",{className:[Ya.a.icon,Ya.a.iconAudio].join(" ")});case rc.Copy:return N("i",{className:[Ya.a.icon,Ya.a.iconCopy].join(" ")});case rc.Facebook:return N("i",{className:[Ya.a.icon,Ya.a.iconFacebook].join(" ")});case rc.Twitter:return N("i",{className:[Ya.a.icon,Ya.a.iconTwitter].join(" ")});case rc.GooglePlus:return N("i",{className:[Ya.a.icon,Ya.a.iconGooglePlus].join(" ")});case rc.Linkedin:return N("i",{className:[Ya.a.icon,Ya.a.iconLinkedin].join(" ")});case rc.Email:return N("i",{className:[Ya.a.icon,Ya.a.iconEmail].join(" ")});case rc.Embed:return N("i",{className:[Ya.a.icon,Ya.a.iconEmbed].join(" ")});case rc.Link:return N("i",{className:[Ya.a.icon,Ya.a.iconLink].join(" ")});case rc.ArrowDown:return N("i",{className:[Ya.a.icon,Ya.a.iconArrowDown].join(" ")});case rc.StartOver:return N("i",{className:[Ya.a.icon,Ya.a.iconStartOver].join(" ")});case rc.SeekEnd:return N("i",{className:[Ya.a.icon,Ya.a.iconSeekEnd].join(" ")});case rc.Rewind:return N("i",{className:[Ya.a.icon,Ya.a.iconRewind].join(" ")});case rc.Rewind10:return N("i",{className:[Ya.a.icon,Ya.a.iconRewind10].join(" ")});case rc.Forward:return N("i",{className:[Ya.a.icon,Ya.a.iconForward].join(" ")});case rc.Forward10:return N("i",{className:[Ya.a.icon,Ya.a.iconForward10].join(" ")});case rc.vrStereo:return N("i",{className:[Ya.a.icon,Ya.a.iconVrStereo].join(" ")});case rc.vrStereoFull:return N("i",{className:[Ya.a.icon,Ya.a.iconVrStereoFull].join(" ")});case rc.Cast:return N("i",{className:[Ya.a.icon,Ya.a.iconChromecast].join(" ")});case rc.CastBrand:return N("i",{className:[Ya.a.icon,Ya.a.iconChromecastBrand].join(" ")});case rc.Next:return N("i",{className:[Ya.a.icon,Ya.a.iconNext].join(" ")});case rc.Prev:return N("i",{className:[Ya.a.icon,Ya.a.iconPrev].join(" ")});case rc.PictureInPictureStart:return N("i",{className:[Ya.a.icon,Ya.a.iconPictureInPictureStart].join(" ")});case rc.PictureInPictureStop:return N("i",{className:[Ya.a.icon,Ya.a.iconPictureInPictureStop].join(" ")})}}}])&&Xl(t.prototype,n),i}(B),oc=ic,ac=function(e){return e.adBreak&&e.adIsPlaying||!e.adBreak&&e.isPlaying};function sc(e){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cc(e,t){return(cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fc(e,t){return!t||"object"!==sc(t)&&"function"!=typeof t?pc(e):t}function pc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dc(e){return(dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(n),!0).forEach((function(t){vc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gc,mc,bc,_c=(Zl=on((function(e){return{isPlayingAdOrPlayback:ac(e.engine),iconType:e.overlayAction.iconType,playerHover:e.shell.playerHover,isMobile:e.shell.isMobile,guiStyles:e.shell.layoutStyles.gui,isSmartContainerOpen:e.shell.smartContainerOpen,fullscreenConfig:e.config.components.fullscreen}}),jr(yc(yc({},Co),Lr))),ec=nr("OverlayAction"),tc=yu("OverlayAction"),Zl(nc=sa(nc=ec(nc=tc(nc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cc(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dc(e);if(t){var i=dc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fc(this,n)}}(i);function i(){var e;uc(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return vc(pc(e=r.call.apply(r,[this].concat(n))),"_iconTimeout",null),vc(pc(e),"_pointerDownPosX",NaN),vc(pc(e),"_pointerDownPosY",NaN),vc(pc(e),"_firstClickTime",0),vc(pc(e),"_clickTimeout",null),e}return t=i,(n=[{key:"togglePlayPause",value:function(){this.props.isPlayingAdOrPlayback?(this.props.player.pause(),this.props.updateOverlayActionIcon(rc.Pause)):(this.props.player.play(),this.props.updateOverlayActionIcon(rc.Play)),this.props.updatePlayerHoverState(!0),this.props.notifyHoverChange({hover:!0}),this.props.notifyClick({type:"PlayPause"})}},{key:"toggleFullscreen",value:function(){this.props.player.isFullscreen()?(this.props.logger.debug("Exit fullscreen"),this.props.player.exitFullscreen()):(this.props.logger.debug("Enter fullscreen"),this.props.player.enterFullscreen()),this.props.notifyClick({type:"Fullscreen"})}},{key:"onOverlayPointerDown",value:function(e){this._pointerDownPosX=e.clientX||e.changedTouches&&e.changedTouches[0]&&e.changedTouches[0].clientX,this._pointerDownPosY=e.clientY||e.changedTouches&&e.changedTouches[0]&&e.changedTouches[0].clientY}},{key:"onOverlayMouseUp",value:function(e){this.isDragging(e)||this.overlayClick()}},{key:"onOverlayTouchEnd",value:function(e){e.preventDefault(),this.props.playerHover&&!this.isDragging(e)&&this.togglePlayPause()}},{key:"isDragging",value:function(e){var t=e.clientX||e.changedTouches&&e.changedTouches[0]&&e.changedTouches[0].clientX,n=e.clientY||e.changedTouches&&e.changedTouches[0]&&e.changedTouches[0].clientY;return Math.abs(t-this._pointerDownPosX)>5||Math.abs(n-this._pointerDownPosY)>5}},{key:"overlayClick",value:function(){var e=this;if(!this.props.isSmartContainerOpen){if(!this.props.fullscreenConfig.disableDoubleClick){var t=Date.now();if(t-this._firstClickTime<200)return this.cancelClickTimeout(),void this.toggleFullscreen();if(t-this._firstClickTime<500)return this.cancelClickTimeout(),this.togglePlayPause(),this.toggleFullscreen(),void(this._firstClickTime=0);this._firstClickTime=t}this._clickTimeout=setTimeout((function(){e._clickTimeout=null,e.togglePlayPause()}),200)}}},{key:"cancelClickTimeout",value:function(){this._clickTimeout&&(clearTimeout(this._clickTimeout),this._clickTimeout=null)}},{key:"shouldComponentUpdate",value:function(e){return e.iconType&&this.toggleOverlayActionIcon(e.iconType),!0}},{key:"toggleOverlayActionIcon",value:function(e){var t=this,n=function(){t.setState({animation:!0,iconType:e},(function(){t._iconTimeout=setTimeout((function(){t._iconTimeout=null,t.setState({animation:!1})}),300)}))};null!==this._iconTimeout?(clearTimeout(this._iconTimeout),this._iconTimeout=null,this.setState({animation:!1},(function(){t.forceUpdate(),n()}))):n()}},{key:"render",value:function(){var e=this;return N("div",{style:this.props.guiStyles,className:"".concat(Ya.a.overlayAction," ").concat(this.state.animation?Ya.a.in:""),onMouseDown:function(t){return e.onOverlayPointerDown(t)},onTouchStart:function(t){return e.onOverlayPointerDown(t)},onMouseUp:function(t){return e.onOverlayMouseUp(t)},onTouchEnd:function(t){return e.onOverlayTouchEnd(t)}},this.state.animation?this.renderIcons():void 0)}},{key:"renderIcons",value:function(){return Array.isArray(this.state.iconType)?this.state.iconType.map((function(e,t){return N(oc,{key:t,type:e})})):N(oc,{type:this.state.iconType})}},{key:"componentDidUpdate",value:function(){this.state.animation&&this.props.updateOverlayActionIcon(null)}}])&&lc(t.prototype,n),i}(B))||nc)||nc)||nc)||nc);function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ec(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tc(e,t){return(Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sc(e,t){return!t||"object"!==kc(t)&&"function"!=typeof t?Ac(e):t}function Ac(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oc(e){return(Oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_c.displayName="OverlayAction";var Rc={Top:"top",Bottom:"bottom",TopRight:"top-right",TopLeft:"top-left",BottomRight:"bottom-right",BottomLeft:"bottom-left",Left:"left",Right:"right"},Cc=on((function(e){return{playerClientRect:e.shell.playerClientRect,guiClientRect:e.shell.guiClientRect,isMobile:e.shell.isMobile}}))((bc=mc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tc(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oc(e);if(t){var i=Oc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sc(this,n)}}(i);function i(){var e;Ec(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Pc(Ac(e=r.call.apply(r,[this].concat(n))),"lastAlternativeTypeIndex",-1),e}return t=i,(n=[{key:"onMouseOver",value:function(){var e=this;this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null),this._hoverTimeout=setTimeout((function(){e.setState({showTooltip:!0})}),250)}},{key:"onMouseLeave",value:function(){this.setState({showTooltip:!1}),clearTimeout(this._hoverTimeout),this._hoverTimeout=null}},{key:"getAlternateType",value:function(){var e=this;return Object.values(Rc).find((function(t,n){return n>e.lastAlternativeTypeIndex&&t!=e.props.type&&(e.lastAlternativeTypeIndex=n,!0)}))}},{key:"isToolTipInBoundaries",value:function(){var e=this.textElement.getBoundingClientRect(),t=this.props.playerClientRect;return e.top>t.top+5&&e.bottom<t.bottom-5&&e.right<t.right-5&&e.left>t.left+5}},{key:"componentWillMount",value:function(){this.setState({valid:!1,type:this.props.type})}},{key:"componentDidUpdate",value:function(e){if(this.props.guiClientRect!==e.guiClientRect)this.lastAlternativeTypeIndex=-1,this.setState({valid:!1,type:this.props.type});else if(this.state.showTooltip)if(this.isToolTipInBoundaries())this.state.valid||this.setState({valid:!0});else{var t=this.getAlternateType();t&&this.setState({valid:!1,type:t})}}},{key:"render",value:function(e){var t=this,n=[Ya.a.tooltipLabel,Ya.a["tooltip-".concat(this.state.type)]];return this.state.showTooltip&&this.state.valid?n.push(Ya.a.show):n.push(Ya.a.hide),e.isMobile?W(e.children)[0]:N("div",{className:Ya.a.tooltip,onMouseOver:function(){return t.onMouseOver()},onMouseLeave:function(){return t.onMouseLeave()}},e.children,N("span",{style:{maxWidth:e.maxWidth},ref:function(e){return e?t.textElement=e:void 0},className:n.join(" ")},e.label))}}])&&wc(t.prototype,n),i}(B),Pc(mc,"defaultProps",{type:Rc.Top,maxWidth:"240px"}),gc=bc))||gc;function xc(){return(xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Dc,Ic,Lc,Mc,Nc,jc=Ue((function(e,t){return N("button",xc({type:"button",ref:t},e))}));function Uc(e){return(Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vc(e,t){return(Vc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gc(e,t){return!t||"object"!==Uc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kc(e){return(Kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}jc.displayName="Button";var Hc=(Dc=on((function(e){return{prePlayback:e.engine.prePlayback,isPlaybackEnded:e.engine.isPlaybackEnded,playlist:e.engine.playlist,loading:e.loading.show}}),jr(to)),Ic=nr("PrePlaybackPlayOverlay"),Lc=yu("PrePlaybackPlayOverlay"),Mc=Dn({startOverText:"controls.startOver",playText:"controls.play"}),Dc(Nc=sa(Nc=Ic(Nc=Lc(Nc=Mc(Nc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vc(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kc(e);if(t){var i=Kc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gc(this,n)}}(i);function i(){return Fc(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"handleClick",value:function(){this.props.player.getView().focus(),this.props.playlist&&this.props.isPlaybackEnded?this.props.player.playlist.playNext():this.props.player.play(),this.props.notifyClick()}},{key:"render",value:function(e){var t=this;if(!(!e.prePlayback&&(!e.isPlaybackEnded||e.playlist&&e.playlist.next)||e.loading)){var n=e.isPlaybackEnded?e.startOverText:e.playText;return N("div",{className:Ya.a.prePlaybackPlayOverlay,onMouseOver:function(e){return e.stopPropagation()},onClick:function(){return t.handleClick()}},N(jc,{className:Ya.a.prePlaybackPlayButton,tabIndex:"0","aria-label":n,onKeyDown:function(e){e.keyCode===Wn.ENTER&&t.handleClick()}},N(Cc,{label:n},e.isPlaybackEnded?N(oc,{type:rc.StartOver}):N(oc,{type:rc.Play}))))}}}])&&Bc(t.prototype,n),i}(B))||Nc)||Nc)||Nc)||Nc)||Nc);function zc(e){return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wc(){return(Wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xc(e,t){return(Xc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $c(e,t){return!t||"object"!==zc(t)&&"function"!=typeof t?Jc(e):t}function Jc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qc(e){return(Qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Hc.displayName="PrePlaybackPlayOverlay";var ef,tf,nf,rf,of,af=function(e){return function(t){return Ma(function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xc(e,t)}(a,n);var r,i,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qc(e);if(t){var i=Qc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $c(this,n)}}(a);function a(){var e;Yc(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zc(Jc(e=o.call.apply(o,[this].concat(n))),"ref",{current:null}),e}return r=a,(i=[{key:"componentDidMount",value:function(){var t=this;this.props.eventManager.listen(this.ref.current,"animationend",(function(){t.ref.current.classList.remove(e)}))}},{key:"componentWillUnmount",value:function(){this.ref.current.classList.remove(e)}},{key:"animate",value:function(){this.ref.current.classList.add(e)}},{key:"render",value:function(){var e=this;return N(t,Wc({},this.props,{innerRef:this.ref,animate:function(){e.animate()}}))}}])&&qc(r.prototype,i),a}(B))}};function sf(e){return(sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cf(e,t){return(cf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ff(e,t){return!t||"object"!==sf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pf(e){return(pf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var df,hf,yf,vf,gf,mf=(ef=nr("Rewind"),tf=yu("Rewind"),nf=af(Ya.a.rotate),rf=Dn({rewindText:"controls.rewind"}),sa(of=ef(of=tf(of=nf(of=rf(of=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cf(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pf(e);if(t){var i=pf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ff(this,n)}}(i);function i(){return uf(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"onClick",value:function(){var e;this.props.animate();var t=this.props.step||10,n=this.props.player.currentTime;e=this.props.player.currentTime-t<0?0:this.props.player.currentTime-t,this.props.player.currentTime=e,this.props.notifyClick({from:n,to:e})}},{key:"render",value:function(e){var t=this;return N("div",{className:[Ya.a.controlButtonContainer,Ya.a.noIdleControl].join(" ")},N(Cc,{label:this.props.rewindText},N(jc,{tabIndex:"0","aria-label":this.props.rewindText,className:"".concat(Ya.a.controlButton),ref:this.props.innerRef,onClick:function(){return t.onClick()}},N(oc,{type:e.step&&10!==e.step?rc.Rewind:rc.Rewind10}))))}}])&&lf(t.prototype,n),i}(B))||of)||of)||of)||of)||of);function bf(e){return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ef(e,t){return(Ef=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wf(e,t){return!t||"object"!==bf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tf(e){return(Tf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}mf.displayName="Rewind";var Sf,Af,Of,Pf,Rf=(df=nr("Forward"),hf=yu("Forward"),yf=af(Ya.a.reverseRotate),vf=Dn({forwardText:"controls.forward"}),sa(gf=df(gf=hf(gf=yf(gf=vf(gf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ef(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tf(e);if(t){var i=Tf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wf(this,n)}}(i);function i(){return _f(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"onClick",value:function(){var e,t=this.props.player;this.props.animate();var n=this.props.step||10,r=t.currentTime;e=t.currentTime+n>t.duration?t.duration:t.currentTime+n,t.currentTime=e,this.props.notifyClick({from:r,to:e})}},{key:"render",value:function(e){var t=this;return N("div",{className:[Ya.a.controlButtonContainer,Ya.a.noIdleControl].join(" ")},N(Cc,{label:this.props.forwardText},N(jc,{tabIndex:"0","aria-label":this.props.forwardText,className:"".concat(Ya.a.controlButton),ref:this.props.innerRef,onClick:function(){return t.onClick()}},N(oc,{type:e.step&&10!==e.step?rc.Forward:rc.Forward10}))))}}])&&kf(t.prototype,n),i}(B))||gf)||gf)||gf)||gf)||gf);function Cf(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),i=t-3600*n-60*r;return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),"".concat("00"!==n?n+":":"").concat(r,":").concat(i)}function xf(e,t){return function(){t.apply(e,arguments)}}function Df(e){return(Df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function If(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mf(e,t){return(Mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nf(e,t){return!t||"object"!==Df(t)&&"function"!=typeof t?jf(e):t}function jf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uf(e){return(Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Rf.displayName="Forward";var Bf,Vf,Gf,Kf={preventDefault:!1,payload:null},Hf=(Sf=on((function(e){return{isPlayingAdOrPlayback:ac(e.engine),playerNav:e.shell.playerNav,textTracks:e.engine.textTracks,shareOverlay:e.share.overlayOpen}}),jr(Object.assign({},Lr,Co))),Af=nr("Keyboard"),Of=yu("Keyboard"),Sf(Pf=sa(Pf=Af(Pf=Of(Pf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mf(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Uf(e);if(t){var i=Uf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nf(this,n)}}(i);function i(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ff(jf(n=r.call(this)),"_lastActiveTextLanguage",""),Ff(jf(n),"_hoverTimeout",null),Ff(jf(n),"keyboardHandlers",(Ff(t={},Wn.SPACE,(function(){return n.props.isPlayingAdOrPlayback?(n.props.player.pause(),n.props.updateOverlayActionIcon(rc.Pause)):(n.props.player.play(),n.props.updateOverlayActionIcon(rc.Play)),n.toggleHoverState(),{preventDefault:!0,payload:!0}})),Ff(t,Wn.UP,(function(){var e=(Math.round(100*n.props.player.volume)+5)/100;return e=e>1?1:e,n.props.logger.debug("Changing volume. ".concat(n.props.player.volume," => ").concat(e)),n.props.player.muted&&(n.props.player.muted=!1),n.props.player.volume=e,n.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeWaves]),{preventDefault:!0,payload:{volume:n.props.player.volume}}})),Ff(t,Wn.DOWN,(function(){var e=(Math.round(100*n.props.player.volume)-5)/100;return e=e<0?0:e,n.props.logger.debug("Changing volume. ".concat(n.props.player.volume," => ").concat(e)),n.props.player.volume=e,0===e?(n.props.player.muted=!0,n.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeMute])):n.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeWave]),{preventDefault:!0,payload:{volume:n.props.player.volume}}})),Ff(t,Wn.F,(function(){return n.props.player.isFullscreen()?{preventDefault:!0,payload:null}:(n.props.logger.debug("Enter fullscreen"),n.props.player.enterFullscreen(),{preventDefault:!0,payload:!0})})),Ff(t,Wn.P,(function(){return n.props.player.isInPictureInPicture()?(n.props.logger.debug("Exit Picture In Picture"),n.props.player.exitPictureInPicture()):(n.props.logger.debug("Enter Picture In Picture"),n.props.player.enterPictureInPicture()),n.toggleHoverState(),{preventDefault:!0,payload:!0}})),Ff(t,Wn.ESC,(function(){return n.props.player.isFullscreen()?(n.props.logger.debug("Exit fullscreen"),n.props.player.exitFullscreen(),{preventDefault:!0,payload:!0}):{preventDefault:!0,payload:null}})),Ff(t,Wn.LEFT,(function(){if((!n.props.player.ads||!n.props.player.ads.isAdBreak())&&(!n.props.player.isLive()||n.props.player.isDvr())){var e=n.props.player.currentTime-5,t=n.props.player.currentTime,r=e>0?e:0;return n.props.logger.debug("Seek. ".concat(t," => ").concat(r)),n.props.player.currentTime=r,n.props.updateOverlayActionIcon(rc.Rewind),n.toggleHoverState(),{preventDefault:!0,payload:{from:t,to:r}}}return{preventDefault:!0,payload:null}})),Ff(t,Wn.RIGHT,(function(){if((!n.props.player.ads||!n.props.player.ads.isAdBreak())&&(!n.props.player.isLive()||n.props.player.isDvr())){var e=n.props.player.currentTime+5,t=n.props.player.currentTime,r=e>n.props.player.duration?n.props.player.duration:e;return n.props.logger.debug("Seek. ".concat(t," => ").concat(r)),n.props.player.currentTime=e>n.props.player.duration?n.props.player.duration:e,n.props.updateOverlayActionIcon(rc.Forward),n.toggleHoverState(),{preventDefault:!0,payload:{from:t,to:r}}}return{preventDefault:!0,payload:null}})),Ff(t,Wn.HOME,(function(){if((!n.props.player.ads||!n.props.player.ads.isAdBreak())&&(!n.props.player.isLive()||n.props.player.isDvr())){var e=n.props.player.currentTime;return n.props.logger.debug("Seek. ".concat(e," => ").concat(0)),n.props.player.currentTime=0,n.props.updateOverlayActionIcon(rc.StartOver),n.toggleHoverState(),{preventDefault:!0,payload:{from:e,to:0}}}return{preventDefault:!0,payload:null}})),Ff(t,Wn.END,(function(){if((!n.props.player.ads||!n.props.player.ads.isAdBreak())&&(!n.props.player.isLive()||n.props.player.isDvr())){var e=n.props.player.currentTime,t=n.props.player.duration;return n.props.logger.debug("Seek. ".concat(e," => ").concat(t)),n.props.player.currentTime=t,n.props.updateOverlayActionIcon(rc.SeekEnd),n.toggleHoverState(),{preventDefault:!0,payload:{from:e,to:t}}}return{preventDefault:!0,payload:null}})),Ff(t,Wn.M,(function(){return n.props.logger.debug(n.props.player.muted?"Umnute":"Mute"),n.props.player.muted=!n.props.player.muted,n.props.player.muted?n.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeMute]):n.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeWaves]),{preventDefault:!0,payload:!0}})),Ff(t,Wn.SEMI_COLON,(function(e){return e.shiftKey?n.props.player.playbackRate!==n.props.player.defaultPlaybackRate?(n.props.logger.debug("Changing playback rate. ".concat(n.props.player.playbackRate," => ").concat(n.props.player.defaultPlaybackRate)),n.props.player.playbackRate=n.props.player.defaultPlaybackRate,n.props.updateOverlayActionIcon(rc.Speed),{preventDefault:!0,payload:{speed:n.props.player.defaultPlaybackRate}}):{preventDefault:!0,payload:null}:Kf})),Ff(t,Wn.PERIOD,(function(e){if(e.shiftKey){var t=n.props.player.playbackRate,r=n.props.player.playbackRates.indexOf(t);return r<n.props.player.playbackRates.length-1?(n.props.logger.debug("Changing playback rate. ".concat(t," => ").concat(n.props.player.playbackRates[r+1])),n.props.player.playbackRate=n.props.player.playbackRates[r+1],n.props.updateOverlayActionIcon(rc.SpeedUp),{preventDefault:!0,payload:{speed:n.props.player.playbackRates[r+1]}}):{preventDefault:!0,payload:null}}return Kf})),Ff(t,Wn.COMMA,(function(e){if(e.shiftKey){var t=n.props.player.playbackRate,r=n.props.player.playbackRates.indexOf(t);return r>0?(n.props.logger.debug("Changing playback rate. ".concat(t," => ").concat(n.props.player.playbackRates[r-1])),n.props.player.playbackRate=n.props.player.playbackRates[r-1],n.props.updateOverlayActionIcon(rc.SpeedDown),{preventDefault:!0,payload:{speed:n.props.player.playbackRates[r-1]}}):{preventDefault:!0,payload:null}}return Kf})),Ff(t,Wn.C,(function(e){var t=n.props.player.getActiveTracks().text;if(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey)return Kf;if(t){if("off"===t.language&&n._lastActiveTextLanguage){n.props.logger.debug("Changing text track to language",n._lastActiveTextLanguage);var r=n.props.player.getTracks("text").find((function(e){return e.language===n._lastActiveTextLanguage}));return n.props.player.selectTrack(r),{preventDefault:!0,payload:{track:r}}}"off"===t.language||n._lastActiveTextLanguage||(n.props.logger.debug("Hiding text track"),n._lastActiveTextLanguage=t.language,n.props.player.hideTextTrack())}return{preventDefault:!0,payload:null}})),t));var o=document.getElementById(e.config.targetId);return o?(o.onkeydown=function(e){var t=e.target instanceof Node&&e.target.nodeName||"";if(-1===["INPUT","SELECT","TEXTAREA"].indexOf(t)&&!n.props.shareOverlay&&!n.props.playerNav&&"function"==typeof n.keyboardHandlers[e.keyCode]){n.props.logger.debug("KeyDown -> keyName: ".concat(function(e){for(var t in Wn)if(Wn[t]===e)return t;return"NOT_FOUND"}(e.keyCode),", shiftKey: ").concat(e.shiftKey.toString()));var r=n.keyboardHandlers[e.keyCode](e),i=r.preventDefault,o=r.payload;i&&e.preventDefault(),o&&n.props.notifyClick(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?If(Object(n),!0).forEach((function(t){Ff(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):If(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:e.keyCode},o))}},n):Nf(n)}return t=i,(n=[{key:"componentWillReceiveProps",value:function(e){var t=this.props.textTracks.find((function(e){return e.active})),n=e.textTracks.find((function(e){return e.active}));t&&"off"!==t.language&&n&&"off"===n.language?this._lastActiveTextLanguage=t.language:n&&"off"!==n.language&&(this._lastActiveTextLanguage="")}},{key:"toggleHoverState",value:function(){var e=this;null!==this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null),this.props.updatePlayerHoverState(!0),this.props.notifyHoverChange({hover:!0}),this._hoverTimeout=setTimeout((function(){e.props.updatePlayerHoverState(!1),e.props.notifyHoverChange({hover:!1})}),3e3)}}])&&Lf(t.prototype,n),i}(B))||Pf)||Pf)||Pf)||Pf);function zf(e){return(zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qf(e,t){return(qf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xf(e,t){return!t||"object"!==zf(t)&&"function"!=typeof t?$f(e):t}function $f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jf(e){return(Jf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zf=["keydown","keyup"],ep=(Bf=on((function(e){return{playerNav:e.shell.playerNav,shareOverlay:e.share.overlayOpen}})),Vf=nr("KEYBOARD_PROVIDER"),Bf(Gf=Ma(Gf=Vf(Gf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qf(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jf(e);if(t){var i=Jf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xf(this,n)}}(i);function i(){var e;Wf(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Qf($f(e=r.call.apply(r,[this].concat(n))),"_keyboardListeners",[]),Qf($f(e),"_isKeyboardEnable",!1),Qf($f(e),"_componentToHandle",null),Qf($f(e),"_addKeyboardHandler",(function(t,n,r,i){var o=e._createKeyCode(n,r);e._keyboardListeners[o]?e.props.logger.warn("Combination of key ".concat(r.code," altKey ").concat((!!r.altKey).toString()," ctrlKey ").concat((!!r.ctrlKey).toString()," \n      metaKey ").concat((!!r.metaKey).toString()," shiftKey ").concat((!!r.shiftKey).toString()," already exist")):e._keyboardListeners[o]={callback:i,componentName:t}})),Qf($f(e),"_removeKeyboardHandler",(function(t,n){var r=e._createKeyCode(t,n);e._keyboardListeners[r]&&delete e._keyboardListeners[r]})),Qf($f(e),"_updateIsKeyboardEnabled",(function(t){e._isKeyboardEnable=t})),Qf($f(e),"_setKeyboardEventToScope",(function(t){e._componentToHandle=t})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.eventManager,r=t.playerContainer;this.keyEventHandler=this._keyEventHandler.bind(this),Zf.forEach((function(t){n.listen(r,t,e.keyEventHandler)}))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"_keyEventHandler",value:function(e){var t=this._createKeyCode(e.type,{code:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}),n=e.target instanceof Node&&e.target.nodeName||"";-1!==["INPUT","SELECT","TEXTAREA"].indexOf(n)||!this._shouldHandleKeyboardEvents()||!this._keyboardListeners[t]||"function"!=typeof this._keyboardListeners[t].callback||this._componentToHandle&&this._keyboardListeners[t].componentName!==this._componentToHandle||(e.preventDefault(),e.stopPropagation(),this._keyboardListeners[t].callback(e))}},{key:"_shouldHandleKeyboardEvents",value:function(){return this._isKeyboardEnable&&!this.props.playerNav&&!this.props.shareOverlay}},{key:"_createKeyCode",value:function(e,t){var n=Zf.indexOf(e),r=t.altKey?1:0,i=t.ctrlKey?1:0,o=t.metaKey?1:0,a=t.shiftKey?1:0;return parseInt(""+n+t.code+r+i+o+a)}},{key:"getChildContext",value:function(){return{addKeyboardHandler:this._addKeyboardHandler,removeKeyboardHandler:this._removeKeyboardHandler,updateIsKeyboardEnabled:this._updateIsKeyboardEnabled,setKeyboardEventToScope:this._setKeyboardEventToScope}}},{key:"render",value:function(){return this.props.children&&W(this.props.children)[0]||null}}])&&Yf(t.prototype,n),i}(B))||Gf)||Gf)||Gf);function tp(e){return(tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function np(){return(np=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function op(e,t){return(op=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ap(e,t){return!t||"object"!==tp(t)&&"function"!=typeof t?sp(e):t}function sp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function up(e){return(up=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cp,fp,pp,dp,hp=function(e){return function(t){return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&op(e,t)}(a,n);var r,i,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=up(e);if(t){var i=up(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ap(this,n)}}(a);function a(){var t;rp(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lp(sp(t=o.call.apply(o,[this].concat(r))),"keyboardEventHandlers",[]),lp(sp(t),"_updateIsKeyboardEnabled",(function(e){t.context.updateIsKeyboardEnabled(e)})),lp(sp(t),"_setKeyboardEventToScope",(function(n){n?t.context.setKeyboardEventToScope(e):t.context.setKeyboardEventToScope(null)})),t}return r=a,(i=[{key:"componentDidMount",value:function(){var t=this;this.keyboardEventHandlers.forEach((function(n){var r=n.eventType?n.eventType:Zf[0];t._addKeyboardHandler(e,r,n.key,n.action)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.keyboardEventHandlers.forEach((function(t){var n=t.eventType?t.eventType:Zf[0];e._removeKeyboardHandler(n,t.key)}))}},{key:"registerKeyboardEvents",value:function(e){this.keyboardEventHandlers=e}},{key:"_addKeyboardHandler",value:function(e,t,n,r){this.context.addKeyboardHandler(e,t,n,r)}},{key:"_removeKeyboardHandler",value:function(e,t){this.context.removeKeyboardHandler(e,t)}},{key:"render",value:function(){var e=this;return N(t,np({},this.props,{setKeyboardEventToScope:function(t){return e._setKeyboardEventToScope(t)},updateIsKeyboardEnabled:function(t){return e._updateIsKeyboardEnabled(t)},registerKeyboardEvents:function(t){return e.registerKeyboardEvents(t)}}))}}])&&ip(r.prototype,i),a}(B)}};function yp(e){return(yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gp(e,t){return(gp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mp(e,t){return!t||"object"!==yp(t)&&"function"!=typeof t?bp(e):t}function bp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _p(e){return(_p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kp(Object(n),!0).forEach((function(t){wp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tp,Sp,Ap,Op,Pp=(cp=on((function(e){return{config:e.config.components.seekbar,isMobile:e.shell.isMobile}}),jr(Ep(Ep({},Lr),Co))),fp=hp("SeekBar"),pp=Dn({sliderAriaLabel:"controls.seekBarSlider"}),cp(dp=sa(dp=fp(dp=pp(dp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gp(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_p(e);if(t){var i=_p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mp(this,n)}}(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),wp(bp(e=r.call(this)),"_keyboardEventHandlers",[{key:{code:Wn.LEFT},action:function(t){e.handleKeydown(t,!1)}},{key:{code:Wn.RIGHT},action:function(t){e.handleKeydown(t,!1)}},{key:{code:Wn.HOME},action:function(t){e.handleKeydown(t,!1)}},{key:{code:Wn.END},action:function(t){e.handleKeydown(t,!1)}}]),e.onPlayerMouseUp=xf(bp(e),e.onPlayerMouseUp),e.onPlayerMouseMove=xf(bp(e),e.onPlayerMouseMove),e}return t=i,(n=[{key:"componentWillMount",value:function(){this.setState({virtualTime:0})}},{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.onPlayerMouseUp),document.addEventListener("mousemove",this.onPlayerMouseMove),this.props.registerKeyboardEvents(this._keyboardEventHandlers)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.onPlayerMouseUp),document.removeEventListener("mousemove",this.onPlayerMouseMove)}},{key:"onSeekbarMouseDown",value:function(e){if(!this.props.isMobile&&(e.preventDefault(),this.props.updateSeekbarDraggingStatus(!0),this.props.isDraggingActive)){var t=this.getTime(e);this.updateSeekBarProgress(t,this.props.duration)}}},{key:"onPlayerMouseUp",value:function(e){if(!this.props.isMobile&&this.props.isDraggingActive){var t=this.props.player.currentTime,n=this.getTime(e);this.props.changeCurrentTime(n),this.updateSeekBarProgress(n,this.props.duration),this.props.updateSeekbarDraggingStatus(!1),this.props.notifyChange({from:t,to:n})}}},{key:"onPlayerMouseMove",value:function(e){if(!this.props.isMobile&&this.props.isDraggingActive){var t=this.getTime(e);this.updateSeekBarProgress(t,this.props.duration),this.updateSeekBarProgress(t,this.props.duration,!0)}}},{key:"onSeekbarMouseMove",value:function(e){if(!this.props.isMobile){var t=this.getTime(e);this.updateSeekBarProgress(t,this.props.duration,!0)}}},{key:"onSeekbarTouchStart",value:function(e){if(this.props.updateSeekbarDraggingStatus(!0),this.props.isDraggingActive){var t=this.getTime(e);this.updateSeekBarProgress(t,this.props.duration)}}},{key:"onSeekbarTouchMove",value:function(e){var t=this.getTime(e);this.updateSeekBarProgress(t,this.props.duration,!0),this.props.isDraggingActive&&this.updateSeekBarProgress(t,this.props.duration),e.preventDefault()}},{key:"handleKeydown",value:function(e,t){var n,r=this,i=this.props.player,o=function(e,t){r.props.changeCurrentTime(t),r.updateSeekBarProgress(i.currentTime,r.props.duration,!0),r.props.notifyChange({from:e,to:t})};switch(e.keyCode){case Wn.LEFT:t||this.props.updateOverlayActionIcon(rc.Rewind),n=i.currentTime-5>0?i.currentTime-5:0,o(i.currentTime,n);break;case Wn.RIGHT:t||this.props.updateOverlayActionIcon(rc.Forward),n=i.currentTime+5>i.duration?i.duration:i.currentTime+5,o(i.currentTime,n);break;case Wn.HOME:t||this.props.updateOverlayActionIcon(rc.StartOver),n=0,o(i.currentTime,n);break;case Wn.END:t||this.props.updateOverlayActionIcon(rc.SeekEnd),n=i.duration,o(i.currentTime,n)}}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case Wn.LEFT:case Wn.RIGHT:this.handleKeydown(e,!0)}}},{key:"onSeekbarTouchEnd",value:function(e){if(this.props.isDraggingActive){var t=this.getTime(e),n=this.props.player.currentTime,r=t;this.props.changeCurrentTime(r),this.updateSeekBarProgress(r,this.props.duration),this.props.notifyChange({from:n,to:r})}this.props.updateSeekbarDraggingStatus(!1)}},{key:"onSeekbarMouseOver",value:function(){this.props.isMobile||this.props.updateSeekbarHoverActive(!0)}},{key:"onSeekbarMouseLeave",value:function(){this.props.isMobile||this.props.updateSeekbarHoverActive(!1)}},{key:"updateSeekBarProgress",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n?this.setState({virtualTime:e}):this.props.updateCurrentTime(e)}},{key:"getOffset",value:function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft+this._getTransformX(e),n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return this.props.player.isFullscreen()&&(t=0),{top:n,left:t}}},{key:"_getTransformX",value:function(e){var t=getComputedStyle(e),n=(t.getPropertyValue("transform")||t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")).match(/-?\d+/g),r=0;return n&&n.length>0&&(r=parseFloat(n[4])),r}},{key:"getTime",value:function(e){var t="number"==typeof e.clientX?e.clientX:e.changedTouches&&e.changedTouches[0]&&e.changedTouches[0].clientX,n=this.props.duration*((t-this._seekBarElement.offsetLeft-this.getOffset(this.props.playerElement).left)/this._seekBarElement.clientWidth);return(n=parseFloat(n.toFixed(2)))<0?0:n>this.props.duration?this.props.duration:n}},{key:"getBufferedPercent",value:function(){var e=this.props.player;if(this.props.duration>0&&e.buffered.length>0){var t=(e.isLive()?e.buffered.end(0)-e.getStartTimeOfDvrWindow():e.buffered.end(0))/this.props.duration*100;return t<100?t:100}return 0}},{key:"getThumbSpriteOffset",value:function(){var e=this.state.virtualTime/this.props.duration;return-Math.ceil(this.props.config.thumbsSlices*e)*this.props.config.thumbsWidth+"px 0px"}},{key:"getFramePreviewOffset",value:function(){if(this._seekBarElement&&this._framePreviewElement){var e=this.state.virtualTime/this.props.duration*this._seekBarElement.clientWidth-this._framePreviewElement.clientWidth/2;return e<0?0:e>this._seekBarElement.clientWidth-this._framePreviewElement.clientWidth?this._seekBarElement.clientWidth-this._framePreviewElement.clientWidth:e}return 0}},{key:"getTimeBubbleOffset",value:function(){if(this._timeBubbleElement){var e=this.state.virtualTime/this.props.duration*this._seekBarElement.clientWidth-this._timeBubbleElement.clientWidth/2;return e<0?0:e>this._seekBarElement.clientWidth-this._timeBubbleElement.clientWidth?this._seekBarElement.clientWidth-this._timeBubbleElement.clientWidth:e}return 0}},{key:"renderFramePreview",value:function(){var e=this;if(this.props.config.thumbsSprite&&this.props.config.thumbsSlices&&this.props.config.thumbsWidth&&this.props.showFramePreview&&!this.props.isMobile)return N("div",{className:Ya.a.framePreview,style:this._getFramePreviewStyle(),ref:function(t){return t?e._framePreviewElement=t:void 0}},N("div",{className:Ya.a.framePreviewImg,style:this._getFramePreviewImgStyle()}))}},{key:"_getFramePreviewImgStyle",value:function(){var e="background-image: url(".concat(this.props.config.thumbsSprite,");");return(e+="background-position: ".concat(this.getThumbSpriteOffset(),";"))+"background-size: ".concat(this.props.config.thumbsSlices*this.props.config.thumbsWidth,"px 100%;")}},{key:"_getFramePreviewStyle",value:function(){return"left: ".concat(this.getFramePreviewOffset(),"px;")+"width: ".concat(this.props.config.thumbsWidth,"px;")}},{key:"renderTimeBubble",value:function(){var e=this;if(this.props.showTimeBubble&&!this.props.isMobile){var t="left: ".concat(this.getTimeBubbleOffset(),"px"),n=this.props.isDvr?"-"+Cf(this.props.duration-this.state.virtualTime):Cf(this.state.virtualTime);return N("div",{className:Ya.a.timePreview,style:t,ref:function(t){return t?e._timeBubbleElement=t:void 0}},n)}}},{key:"render",value:function(e){var t=this,n="".concat(this.state.virtualTime/e.duration*100,"%"),r="".concat(e.currentTime/e.duration*100,"%"),i="".concat(Math.round(this.getBufferedPercent()),"%"),o=[Ya.a.seekBar];return e.adBreak&&o.push(Ya.a.adBreak),e.isDvr&&o.push(Ya.a.live),e.isMobile&&o.push(Ya.a.hover),e.isDraggingActive&&o.push(Ya.a.hover),N("div",{tabIndex:"0",className:o.join(" "),ref:function(e){return e?t._seekBarElement=e:void 0},role:"slider","aria-label":e.sliderAriaLabel,"aria-valuemin":"0","aria-valuemax":Math.round(this.props.duration),"aria-valuenow":Math.round(this.props.currentTime),"aria-valuetext":"".concat(Cf(this.props.currentTime)," of ").concat(Cf(this.props.duration)),onMouseOver:function(){return t.onSeekbarMouseOver()},onMouseLeave:function(){return t.onSeekbarMouseLeave()},onMouseMove:function(e){return t.onSeekbarMouseMove(e)},onMouseDown:function(e){return t.onSeekbarMouseDown(e)},onTouchStart:function(e){return t.onSeekbarTouchStart(e)},onTouchMove:function(e){return t.onSeekbarTouchMove(e)},onTouchEnd:function(e){return t.onSeekbarTouchEnd(e)},onKeyDown:function(e){return t.onKeyDown(e)}},N("div",{className:Ya.a.progressBar},this.renderFramePreview(),this.renderTimeBubble(),N("div",{className:Ya.a.virtualProgress,style:{width:n}}),N("div",{className:Ya.a.buffered,style:{width:i}}),N("div",{className:Ya.a.progress,style:{width:r}},e.adBreak?void 0:N("a",{className:Ya.a.scrubber}))))}}])&&vp(t.prototype,n),i}(B))||dp)||dp)||dp)||dp);function Rp(e){return(Rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dp(e,t){return(Dp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ip(e,t){return!t||"object"!==Rp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lp(e){return(Lp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Pp.displayName="SeekBar";var Mp,Np,jp,Up,Fp,Bp,Vp=(Tp=on((function(e){return{currentTime:e.seekbar.currentTime,duration:e.engine.duration,isDraggingActive:e.seekbar.draggingActive,isMobile:e.shell.isMobile,poster:e.engine.poster}}),jr(Vi)),Sp=nr("SeekBarPlaybackContainer"),Ap=yu("SeekBarPlaybackContainer"),Tp(Op=sa(Op=Ma(Op=Sp(Op=Ap(Op=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dp(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lp(e);if(t){var i=Lp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ip(this,n)}}(i);function i(){return Cp(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.eventManager.listen(this.props.player,this.props.player.Event.TIME_UPDATE,(function(){e.props.isDraggingActive||e.props.updateCurrentTime(e.props.player.currentTime)}))}},{key:"render",value:function(){var e=this;return N(Pp,{playerElement:this.props.playerContainer,showFramePreview:this.props.showFramePreview,showTimeBubble:this.props.showTimeBubble,changeCurrentTime:function(t){return e.props.player.currentTime=t},playerPoster:this.props.poster,updateSeekbarDraggingStatus:function(t){return e.props.updateSeekbarDraggingStatus(t)},updateSeekbarHoverActive:function(t){return e.props.updateSeekbarHoverActive(t)},updateCurrentTime:function(t){return e.props.updateCurrentTime(t)},currentTime:this.props.currentTime,duration:this.props.duration,isDraggingActive:this.props.isDraggingActive,isMobile:this.props.isMobile,notifyChange:function(t){return e.props.notifyChange(t)}})}}])&&xp(t.prototype,n),i}(B))||Op)||Op)||Op)||Op)||Op);function Gp(e){return(Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zp(e,t){return(zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wp(e,t){return!t||"object"!==Gp(t)&&"function"!=typeof t?Yp(e):t}function Yp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qp(e){return(qp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xp(Object(n),!0).forEach((function(t){Jp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Vp.displayName="SeekBarPlaybackContainer";var Qp,Zp=(Mp=on((function(e){return{isDraggingActive:e.volume.draggingActive,volume:e.engine.volume,muted:e.engine.muted,isMobile:e.shell.isMobile}}),jr($p($p($p({},qi),Li),Co))),Np=hp("Volume"),jp=nr("Volume"),Up=yu("Volume"),Fp=Dn({muteAriaLabel:"controls.mute",unmuteAriaLabel:"controls.unmute"}),Mp(Bp=sa(Bp=Ma(Bp=Np(Bp=jp(Bp=Up(Bp=Fp(Bp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zp(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qp(e);if(t){var i=qp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wp(this,n)}}(i);function i(){var e;Kp(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Jp(Yp(e=r.call.apply(r,[this].concat(n))),"_keyboardEventHandlers",[{key:{code:Wn.UP},action:function(t){e.handleKeydown(t,!1)}},{key:{code:Wn.DOWN},action:function(t){e.handleKeydown(t,!1)}},{key:{code:Wn.M},action:function(t){e.handleKeydown(t,!1)}}]),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.player;this.props.eventManager.listen(t,t.Event.LOADED_METADATA,(function(){e.props.updateVolume(t.volume),e.props.updateMuted(t.muted)})),this.props.eventManager.listen(t,t.Event.VOLUME_CHANGE,(function(){e.props.updateMuted(t.muted),e.props.updateVolume(t.volume)})),this.props.eventManager.listen(document,"mouseup",(function(t){return e.onVolumeProgressBarMouseUp(t)})),this.props.eventManager.listen(document,"mousemove",(function(t){return e.onVolumeProgressBarMouseMove(t)})),this.props.registerKeyboardEvents(this._keyboardEventHandlers)}},{key:"getVolumeProgressHeight",value:function(){return this.props.muted?"0%":Math.round(100*this.props.volume)+"%"}},{key:"onVolumeProgressBarMouseDown",value:function(){this.props.updateVolumeDraggingStatus(!0)}},{key:"onVolumeProgressBarMouseMove",value:function(e){this.props.isDraggingActive&&this.changeVolume(e)}},{key:"onMouseOver",value:function(){this.props.isMobile||(this.props.updateVolumeHover(!0),this.setState({hover:!0}))}},{key:"onMouseOut",value:function(){this.props.isMobile||(this.props.updateVolumeHover(!1),this.setState({hover:!1}))}},{key:"handleKeydown",value:function(e,t){var n,r=this,i=this.props.player,o=function(e){e===i.volume||e>100||e<0||(i.muted=e<5,i.volume=e/100,r.props.notifyChange({volume:i.volume}))};switch(e.keyCode){case Wn.UP:t?this.setState({hover:!0}):this.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeWaves]),o(n=Math.min(Math.round(100*i.volume)+5,100));break;case Wn.DOWN:n=Math.max(Math.round(100*i.volume)-5,0),t?this.setState({hover:!0}):0===n?this.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeMute]):this.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeWave]),o(n);break;case Wn.M:t||(i.muted?this.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeWaves]):this.props.updateOverlayActionIcon([rc.VolumeBase,rc.VolumeMute])),this.toggleMute();break;case Wn.ENTER:case Wn.SPACE:this.toggleMute()}}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case Wn.UP:case Wn.DOWN:case Wn.ENTER:case Wn.SPACE:this.handleKeydown(e,!0);break;default:this.setState({hover:!1})}}},{key:"onVolumeProgressBarMouseUp",value:function(e){this.props.isDraggingActive&&(this.props.updateVolumeDraggingStatus(!1),this.changeVolume(e))}},{key:"toggleMute",value:function(){var e=this.props.player;0===e.volume?(this.props.logger.debug("Toggle mute. Volume is 0, set mute to false & volume to 0.5"),e.muted=!1,e.volume=.5):(this.props.logger.debug("Toggle mute. ".concat(e.muted," => ").concat(!e.muted)),e.muted=!e.muted),this.props.notifyClick()}},{key:"changeVolume",value:function(e){var t,n=this.props.player,r=this._volumeProgressBarElement.getBoundingClientRect();t=r.height>r.width?this._getVerticalVolume(r,e):this._getHorizontalVolume(r,e),(t=parseFloat(t.toFixed(2)))<=1&&t>=0&&(this.props.logger.debug("Change volume from ".concat(n.volume," => ").concat(t)),n.volume=t,this.props.muted&&(n.muted=!1),this.props.notifyChange({volume:n.volume}))}},{key:"_getHorizontalVolume",value:function(e,t){var n=e.width,r=e.left,i=t.clientX;return 0!=n?(i-r)/n:0}},{key:"_getVerticalVolume",value:function(e,t){var n=e.height,r=e.top,i=t.clientY;return 0!=n?1-(i-r)/n:0}},{key:"render",value:function(){var e=this,t=this.props,n=t.player,r=t.isDraggingActive,i=t.muted,o=t.volume,a=t.smartContainerOpen,s=[Ya.a.controlButtonContainer,Ya.a.volumeControl];return r&&s.push(Ya.a.draggingActive),(i||0===o)&&s.push(Ya.a.isMuted),this.state.hover&&!a&&s.push(Ya.a.hover),N("div",{ref:function(t){return t?e._volumeControlElement=t:void 0},className:s.join(" "),onMouseOver:function(){return e.onMouseOver()},onMouseOut:function(){return e.onMouseOut()}},N(Cc,{label:i?this.props.unmuteAriaLabel:this.props.muteAriaLabel,type:Rc.Left},N(jc,{tabIndex:"0","aria-label":i?this.props.unmuteAriaLabel:this.props.muteAriaLabel,className:Ya.a.controlButton,onMouseUp:function(){return e.toggleMute()},onTouchEnd:function(e){return e.stopImmediatePropagation()},onKeyDown:function(t){return e.onKeyDown(t)}},N(oc,{type:rc.VolumeBase}),N(oc,{type:rc.VolumeWaves}),N(oc,{type:rc.VolumeMute}))),N("div",{className:Ya.a.volumeControlBar,role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":100*n.volume,"aria-valuetext":"".concat(100*n.volume,"% volume ").concat(n.muted?"muted":"")},N("div",{className:Ya.a.bar,ref:function(t){return t?e._volumeProgressBarElement=t:void 0},onMouseDown:function(){return e.onVolumeProgressBarMouseDown()}},N("div",{className:Ya.a.progress,style:{height:this.getVolumeProgressHeight()}}))))}}])&&Hp(t.prototype,n),i}(B))||Bp)||Bp)||Bp)||Bp)||Bp)||Bp)||Bp);function ed(e){return(ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function td(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rd(e,t){return(rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function id(e,t){return!t||"object"!==ed(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function od(e){return(od=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Zp.displayName="Volume";var ad=on(null,jr(Lr))(Qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rd(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=od(e);if(t){var i=od(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return id(this,n)}}(i);function i(){return td(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.props.addPlayerClass(Ya.a.overlayActive)}))}},{key:"componentWillUnmount",value:function(){this.props.removePlayerClass(Ya.a.overlayActive)}},{key:"renderCloseButton",value:function(e){return e.permanent?void 0:N(Rn,null,N("a",{role:"button",ref:function(t){e.addAccessibleChild&&e.addAccessibleChild(t)},tabIndex:"0",onClick:function(){return e.onClose()},onKeyDown:function(t){t.keyCode===Wn.ENTER&&(t.preventDefault(),e.onClose())},"aria-label":N(On,{id:"overlay.close"}),className:Ya.a.closeOverlay},N(oc,{type:rc.Close})))}},{key:"render",value:function(e){var t=[Ya.a.overlay];return e.type&&t.push(Ya.a[e.type+"-overlay"]),e.open&&t.push(Ya.a.active),N("div",{tabIndex:"-1",className:t.join(" "),role:"dialog",onKeyDown:function(t){e.handleKeyDown&&e.handleKeyDown(t)}},N("div",{className:Ya.a.overlayContents},e.children),this.renderCloseButton(e))}}])&&nd(t.prototype,n),i}(B))||Qp;function sd(e){return(sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ud(){return(ud=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ld(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fd(e,t){return(fd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pd(e,t){return!t||"object"!==sd(t)&&"function"!=typeof t?dd(e):t}function dd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hd(e){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ad.displayName="Overlay";var vd,gd=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fd(e,t)}(o,t);var n,r,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hd(e);if(t){var i=hd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pd(this,n)}}(o);function o(){var e;ld(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yd(dd(e=i.call.apply(i,[this].concat(n))),"_accessibleChildren",[]),yd(dd(e),"_isModal",!1),e}return n=o,(r=[{key:"componentDidMount",value:function(){this.focusOnDefault()}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case Wn.ESC:this.props.onClose&&(this.props.onClose(),e.stopPropagation());break;case Wn.DOWN:case Wn.UP:if(document.activeElement&&!this._isModal){var t=this._accessibleChildren.indexOf(document.activeElement);t=(t+(e.keyCode==Wn.DOWN?1:-1)+this._accessibleChildren.length)%this._accessibleChildren.length,this._accessibleChildren[t].focus(),e.preventDefault(),e.stopPropagation()}break;case Wn.TAB:this._isModal?e.shiftKey||document.activeElement!==this._accessibleChildren[this._accessibleChildren.length-1]?e.shiftKey&&document.activeElement===this._accessibleChildren[0]&&(this._accessibleChildren[this._accessibleChildren.length-1].focus(),e.preventDefault(),e.stopPropagation()):(this._accessibleChildren[0].focus(),e.preventDefault(),e.stopPropagation()):(this._previouslyActiveElement=null,this.props.onClose&&this.props.onClose())}}},{key:"componentWillUnmount",value:function(){this._previouslyActiveElement&&this._previouslyActiveElement.focus()}},{key:"render",value:function(t){var n=this;return N(e,ud({},t,{setDefaultFocusedElement:function(e){n.setDefaultFocusedElement(e)},focusOnDefault:function(){n.focusOnDefault()},addAccessibleChild:function(e){n.addAccessibleChild(e)},clearAccessibleChildren:function(){n.clearAccessibleChildren()},handleKeyDown:function(e){n.onKeyDown(e)},setIsModal:function(e){n.isModal=e}}))}},{key:"setDefaultFocusedElement",value:function(e){e&&(this._defaultFocusedElement=e)}},{key:"addAccessibleChild",value:function(e){e&&-1==this._accessibleChildren.indexOf(e)&&this._accessibleChildren.push(e)}},{key:"clearAccessibleChildren",value:function(){this._accessibleChildren=[]}},{key:"focusOnDefault",value:function(){var e=this._defaultFocusedElement||this._accessibleChildren.length&&this._accessibleChildren[0];e&&(this._previouslyActiveElement=document.activeElement,e.focus())}},{key:"isModal",set:function(e){this._isModal=e}}])&&cd(n.prototype,r),o}(B)};function md(e){return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ed(e,t){return(Ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wd(e,t){return!t||"object"!==md(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Td(e){return(Td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sd,Ad=on((function(e){return{isMobile:e.shell.isMobile,isSmallSize:e.shell.isSmallSize}}),jr(Lr))(vd=gd(vd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ed(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Td(e);if(t){var i=Td(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wd(this,n)}}(i);function i(){return _d(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentWillMount",value:function(){this.props.addPlayerClass(Ya.a.smartContainerOpen),this.props.updateSmartContainerOpen(!0)}},{key:"componentWillUnmount",value:function(){this.props.removePlayerClass(Ya.a.smartContainerOpen),this.props.updateSmartContainerOpen(!1)}},{key:"componentDidMount",value:function(){this.props.setIsModal(this.isPortal)}},{key:"render",value:function(e){var t=this,n="#".concat(this.props.targetId," .overlay-portal");return e.clearAccessibleChildren(),this.isPortal?Xe(N(ad,{open:!0,onClose:function(){return e.onClose()},handleKeyDown:function(e){return t.props.handleKeyDown(e)},addAccessibleChild:this.props.addAccessibleChild},N("div",{className:Ya.a.title},e.title),this.renderChildren(e)),document.querySelector(n)):N("div",{onKeyDown:function(t){e.handleKeyDown(t)},tabIndex:"-1",className:[Ya.a.smartContainer,Ya.a.top,Ya.a.left].join(" ")},this.renderChildren(e))}},{key:"renderChildren",value:function(e){var t=this;return W(e.children).map((function(n){if(n)return ie.apply(void 0,[n,{pushRef:function(t){e.addAccessibleChild(t)}}].concat(function(e){return function(e){if(Array.isArray(e))return bd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return bd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bd(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.props)))}))}},{key:"isPortal",get:function(){return this.props.isMobile||this.props.isSmallSize}}])&&kd(t.prototype,n),i}(B))||vd)||vd;function Od(e){return(Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pd(e){return function(e){if(Array.isArray(e))return Rd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rd(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dd(e,t,n){return t&&xd(e.prototype,t),n&&xd(e,n),e}function Id(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Ld(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jd(e);if(t){var i=jd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Md(this,n)}}function Md(e,t){return!t||"object"!==Od(t)&&"function"!=typeof t?Nd(e):t}function Nd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jd(e){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Ad.displayName="SmartContainer";var Ud=on((function(e){return{isMobile:e.shell.isMobile,isSmallSize:e.shell.isSmallSize,guiClientRect:e.shell.guiClientRect}}))(Sd=Ma(Sd=gd(Sd=function(e){Id(n,e);var t=Ld(n);function n(){var e;return Cd(this,n),(e=t.call(this)).handleClickOutside=xf(Nd(e),e.handleClickOutside),e}return Dd(n,[{key:"componentWillMount",value:function(){this.setState({position:[Ya.a.top,Ya.a.left]})}},{key:"componentDidMount",value:function(){this.props.eventManager.listen(document,"click",this.handleClickOutside),this.props.isMobile||this.props.isSmallSize||this.setState({position:this.getPosition()})}},{key:"getPosition",value:function(){var e=this._menuElement.getBoundingClientRect(),t=this.props.guiClientRect;return e.top>=t.top?[Ya.a.top,Ya.a.left]:e.bottom+e.height<t.bottom?[Ya.a.bottom,Ya.a.left]:(this._menuElement.style.maxHeight=.8*t.height+"px",[Ya.a.stickBottom,Ya.a.left])}},{key:"handleClickOutside",value:function(e){this.props.isMobile||this.props.isSmallSize||!this._menuElement||this._menuElement.contains(e.target)||this.props.onClose()}},{key:"isSelected",value:function(e){return e.active}},{key:"onSelect",value:function(e){this.props.onMenuChosen(e.value),this.props.options.filter((function(e){return e.active})).forEach((function(e){e.active=!1})),this.props.options.filter((function(t){return t.value===e.value}))[0].active=!0}},{key:"getActiveOptionLabel",value:function(){var e=this.props.options.filter((function(e){return e.active}));return e.length>0?e[0].label:this.props.options[0].label}},{key:"renderNativeSelect",value:function(e){var t=this,n=this.props.hideSelect?Ya.a.mobileHiddenSelect:"";return N("select",{"aria-labelledby":e,role:"listbox",ref:function(e){t.props.pushRef&&t.props.pushRef(e)},className:n+=" ".concat(Ya.a.dropdown),onChange:function(e){return t.onSelect(t.props.options[e.target.value])}},this.props.options.map((function(e,n){return N("option",{role:"option","aria-selected":t.isSelected(e)?"true":"",selected:t.isSelected(e),value:n,key:n},e.label)})))}},{key:"render",value:function(e){var t=this;return e.clearAccessibleChildren(),e.isMobile||e.isSmallSize?this.renderNativeSelect(e.labelledby):N("div",{role:"menu",onKeyDown:function(t){e.handleKeyDown(t)},ref:function(e){return e?t._menuElement=e:void 0},className:[Ya.a.dropdownMenu].concat(Pd(this.state.position)).join(" ")},e.options.map((function(n,r){return N(Bd,{setDefaultFocusedElement:e.setDefaultFocusedElement,addAccessibleChild:e.addAccessibleChild,isSelected:t.isSelected,onSelect:function(e){t.onSelect(e)},key:r,data:n})})))}}]),n}(B))||Sd)||Sd)||Sd;Ud.displayName="Menu";var Fd,Bd=function(e){Id(n,e);var t=Ld(n);function n(){return Cd(this,n),t.apply(this,arguments)}return Dd(n,[{key:"render",value:function(e){var t=this;return N("div",{role:"menuitemradio",tabIndex:"-1","aria-checked":e.isSelected(e.data)?"true":"false",ref:function(n){t.props.addAccessibleChild(n),e.isSelected(e.data)&&e.setDefaultFocusedElement(n)},className:e.isSelected(e.data)?[Ya.a.dropdownMenuItem,Ya.a.active].join(" "):Ya.a.dropdownMenuItem,onClick:function(n){n.stopPropagation(),t.props.onSelect(e.data)},onKeyDown:function(t){switch(t.keyCode){case Wn.ENTER:e.onSelect(e.data),t.stopPropagation()}}},N("span",null,e.data.label),N("span",{className:[Ya.a.menuIconContainer,Ya.a.active].join(" ")},N(oc,{type:rc.Check})))}}]),n}(B);function Vd(e){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hd(e,t){return(Hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zd(e,t){return!t||"object"!==Vd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wd(e){return(Wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yd=on((function(e){return{isMobile:e.shell.isMobile,isSmallSize:e.shell.isSmallSize}}))(Fd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hd(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wd(e);if(t){var i=Wd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zd(this,n)}}(i);function i(){return Gd(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentWillMount",value:function(){this.setState({dropMenuActive:!1})}},{key:"componentDidMount",value:function(){this.props.registerParentSelectedCallback&&this.props.registerParentSelectedCallback(this.toggleDropDown.bind(this))}},{key:"isSelected",value:function(e){return e.active}},{key:"onMenuChosen",value:function(e){this.props.onMenuChosen(e),this.setState({dropMenuActive:!1})}},{key:"onKeyDown",value:function(e){switch(e.keyCode){case Wn.ENTER:this.setState((function(e){return{dropMenuActive:!e.dropMenuActive}}));break;case Wn.ESC:this.state.dropMenuActive&&(this.onClose(),e.stopPropagation())}}},{key:"onClose",value:function(){this.setState({dropMenuActive:!1})}},{key:"getActiveOptionLabel",value:function(){var e=this.props.options.filter((function(e){return e.active}));try{return e[0].label}catch(e){return this.props.options[0].label||"Unlabled"}}},{key:"renderNativeSelect",value:function(e){var t=this;return N(Ud,{labelledby:e,pushRef:this.props.pushRef,options:this.props.options,onMenuChosen:function(e){return t.onMenuChosen(e)},onClose:function(){return t.onClose()}})}},{key:"render",value:function(e){var t=this,n=e.name+"Active";return e.isMobile||e.isSmallSize?this.renderNativeSelect(e.name):N("div",{name:e.name,className:this.state.dropMenuActive?[Ya.a.dropdown,Ya.a.active].join(" "):Ya.a.dropdown,ref:function(e){return e?t._el=e:void 0}},N("div",{tabIndex:e.tabbable?0:-1,ref:function(t){e.pushRef&&e.pushRef(t)},role:"menuitem","aria-haspopup":"true","aria-expanded":this.state.dropMenuActive?"true":"false","aria-labelledby":[e.name,n].join(" "),className:Ya.a.dropdownButton,onClick:function(e){e.stopPropagation(),t.toggleDropDown()},onKeyDown:function(e){switch(e.keyCode){case Wn.ENTER:t.toggleDropDown(),e.stopPropagation()}}},N("span",{id:n},this.getActiveOptionLabel()),N(oc,{type:rc.ArrowDown}),this.state.dropMenuActive?N(Ud,{parentEl:this._el,options:e.options,onMenuChosen:function(e){return t.onMenuChosen(e)},onClose:function(){return t.onClose()}}):void 0))}},{key:"toggleDropDown",value:function(){this.setState((function(e){return{dropMenuActive:!e.dropMenuActive}}))}}])&&Kd(t.prototype,n),i}(B))||Fd;function qd(e){return(qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jd(e,t){return(Jd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qd(e,t){return!t||"object"!==qd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zd(e){return(Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Yd.displayName="DropDown";var eh,th,nh,rh,ih,oh,ah=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jd(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zd(e);if(t){var i=Zd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qd(this,n)}}(i);function i(){return Xd(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){var t=e.label&&e.label.toLowerCase();return N("div",{className:[Ya.a.smartContainerItem,Ya.a.selectMenuItem].join(" ")},N("label",{id:t,htmlFor:t},e.icon?N("div",{className:Ya.a.labelIcon},N(oc,{type:e.icon})):void 0,e.label),N(Yd,{pushRef:function(t){e.pushRef(t)},name:t,onMenuChosen:function(t){return e.onMenuChosen(t)},options:e.options}))}}])&&$d(t.prototype,n),i}(B);function sh(e){return(sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ch(e,t){return(ch=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fh(e,t){return!t||"object"!==sh(t)&&"function"!=typeof t?ph(e):t}function ph(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dh(e){return(dh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(n),!0).forEach((function(t){vh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ah.displayName="SmartContainerItem";var gh=(eh=on((function(e){return{videoTracks:e.engine.videoTracks,isMobile:e.shell.isMobile,isSmallSize:e.shell.isSmallSize,isLive:e.engine.isLive}}),jr(yh(yh({},wo),Co))),th=Dn({qualityLabelText:"settings.quality",speedLabelText:"settings.speed",buttonLabel:"controls.settings",speedNormalLabelText:"settings.speedNormal",qualityAutoLabelText:"settings.qualityAuto"}),nh=hp("Settings"),rh=nr("Settings"),ih=yu("Settings"),eh(oh=th(oh=sa(oh=Ma(oh=nh(oh=rh(oh=ih(oh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ch(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dh(e);if(t){var i=dh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fh(this,n)}}(i);function i(){var e;uh(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return vh(ph(e=r.call.apply(r,[this].concat(n))),"_keyboardEventHandlers",[{key:{code:Wn.PERIOD,shiftKey:!0},action:function(t){e.handleKeydown(t)}},{key:{code:Wn.SEMI_COLON,shiftKey:!0},action:function(t){e.handleKeydown(t)}},{key:{code:Wn.COMMA,shiftKey:!0},action:function(t){e.handleKeydown(t)}}]),e}return t=i,(n=[{key:"componentWillMount",value:function(){this.setState({smartContainerOpen:!1})}},{key:"componentDidMount",value:function(){var e=this;this.props.eventManager.listen(document,"click",(function(t){return e.handleClickOutside(t)})),this.props.registerKeyboardEvents(this._keyboardEventHandlers)}},{key:"handleKeydown",value:function(e){var t,n,r=this.props,i=r.player,o=r.logger;switch(e.keyCode){case Wn.PERIOD:t=i.playbackRate,(n=i.playbackRates.indexOf(t))<i.playbackRates.length-1&&(o.debug("Changing playback rate. ".concat(t," => ").concat(i.playbackRates[n+1])),i.playbackRate=i.playbackRates[n+1],this.props.updateOverlayActionIcon(rc.SpeedUp),i.dispatchEvent(new ws(i.playbackRate)));break;case Wn.SEMI_COLON:i.playbackRate!==i.defaultPlaybackRate&&(o.debug("Changing playback rate. ".concat(i.playbackRate," => ").concat(i.defaultPlaybackRate)),i.playbackRate=i.defaultPlaybackRate,this.props.updateOverlayActionIcon(rc.Speed),i.dispatchEvent(new ws(i.playbackRate)));break;case Wn.COMMA:t=i.playbackRate,(n=i.playbackRates.indexOf(t))>0&&(o.debug("Changing playback rate. ".concat(t," => ").concat(i.playbackRates[n-1])),i.playbackRate=i.playbackRates[n-1],this.props.updateOverlayActionIcon(rc.SpeedDown),i.dispatchEvent(new ws(i.playbackRate)))}}},{key:"handleClickOutside",value:function(e){this.props.isMobile||this.props.isSmallSize||!this._controlSettingsElement||this._controlSettingsElement.contains(e.target)||!this.state.smartContainerOpen||this.setState({smartContainerOpen:!1})}},{key:"onControlButtonClick",value:function(){this.setState((function(e){return{smartContainerOpen:!e.smartContainerOpen}}))}},{key:"onSpeedChange",value:function(e){this.props.updateSpeed(e),this.props.player.playbackRate=e,this.props.notifyClick({speed:e})}},{key:"onQualityChange",value:function(e){var t=this.props.player;"auto"===e?t.enableAdaptiveBitrate():t.selectTrack(e),this.props.notifyClick({type:t.Track.VIDEO,track:e})}},{key:"filterUniqueQualities",value:function(e,t){var n=e.length-1,r=e[n];return n>-1&&t.label===r.label?t.bandwidth>r.bandwidth&&(e[n]=t):e.push(t),e}},{key:"render",value:function(e){var t=this,n=this.props,r=n.player,i=n.isLive,o=r.playbackRates.reduce((function(t,n){var i={value:n,label:1===n?e.speedNormalLabelText:n,active:!1};return n===r.playbackRate&&(i.active=!0),t.push(i),t}),[]),a=e.videoTracks.sort((function(e,t){return e.bandwidth<t.bandwidth?1:-1})).filter((function(e){return e.bandwidth||e.height})).reduce(this.filterUniqueQualities,[]).map((function(e){return{label:e.label,active:!r.isAdaptiveBitrateEnabled()&&e.active,value:e}}));if(a.length>1&&"progressive"!==r.streamType&&a.unshift({label:this.props.qualityAutoLabelText,active:r.isAdaptiveBitrateEnabled(),value:"auto"}),!(a.length<=1&&o.length<=1||i&&a.length<=1))return N("div",{ref:function(e){return e?t._controlSettingsElement=e:void 0},className:[Ya.a.controlButtonContainer,Ya.a.controlSettings].join(" ")},N(Cc,{label:e.buttonLabel},N(jc,{tabIndex:"0","aria-label":e.buttonLabel,className:this.state.smartContainerOpen?[Ya.a.controlButton,Ya.a.active].join(" "):Ya.a.controlButton,onClick:function(){return t.onControlButtonClick()}},N(oc,{type:rc.Settings}))),this.state.smartContainerOpen?N(Ad,{targetId:r.config.targetId,title:N(On,{id:"settings.title"}),onClose:function(){return t.onControlButtonClick()}},a.length<=1?"":N(ah,{icon:"quality",label:e.qualityLabelText,options:a,onMenuChosen:function(e){return t.onQualityChange(e)}}),i||o.length<=1?"":N(ah,{icon:"speed",label:e.speedLabelText,options:o,onMenuChosen:function(e){return t.onSpeedChange(e)}})):"")}}])&&lh(t.prototype,n),i}(B))||oh)||oh)||oh)||oh)||oh)||oh)||oh);gh.displayName="Settings";var mh,bh=function(e){return N("div",{role:"button",tabIndex:"0",ref:function(t){e.addAccessibleChild(t)},className:e.classNames.join(" "),onClick:function(){return e.changeCaptionsStyle(e.captionsStyle)},onKeyDown:function(t){t.keyCode===Wn.ENTER&&e.changeCaptionsStyle(e.captionsStyle)}},N(On,{id:"cvaa.sample_caption_tag"}),br(e.player.textStyle,e.captionsStyle)?N("div",{className:Ya.a.activeTick},N(oc,{type:rc.Check})):void 0)};function _h(e){return(_h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wh(e,t){return(wh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Th(e,t){return!t||"object"!==_h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sh(e){return(Sh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ah=sa(mh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wh(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sh(e);if(t){var i=Sh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Th(this,n)}}(i);function i(){return kh(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentWillMount",value:function(){var e=this.props.player;this.captionsStyleDefault=Object.assign(new e.TextStyle,{backgroundOpacity:e.TextStyle.StandardOpacities.TRANSPARENT}),this.captionsStyleYellow=Object.assign(new e.TextStyle,{backgroundOpacity:e.TextStyle.StandardOpacities.TRANSPARENT,fontColor:e.TextStyle.StandardColors.YELLOW}),this.captionsStyleBlackBG=Object.assign(new e.TextStyle,{backgroundColor:e.TextStyle.StandardColors.BLACK,fontColor:e.TextStyle.StandardColors.WHITE})}},{key:"render",value:function(e){return N("div",{className:[Ya.a.overlayScreen,Ya.a.active].join(" ")},N("div",{className:Ya.a.title},N(On,{id:"cvaa.title"})),N("div",null,N(bh,{addAccessibleChild:e.addAccessibleChild,classNames:[Ya.a.sample],changeCaptionsStyle:e.changeCaptionsStyle,captionsStyle:this.captionsStyleDefault,player:e.player}),N(bh,{addAccessibleChild:e.addAccessibleChild,classNames:[Ya.a.sample,Ya.a.blackBg],changeCaptionsStyle:e.changeCaptionsStyle,captionsStyle:this.captionsStyleBlackBG,player:e.player}),N(bh,{addAccessibleChild:e.addAccessibleChild,classNames:[Ya.a.sample,Ya.a.yellowText],changeCaptionsStyle:e.changeCaptionsStyle,captionsStyle:this.captionsStyleYellow,player:e.player})),this.isAdvancedStyleApplied()?N("div",{className:Ya.a.customCaptionsApplied},N("div",{className:[Ya.a.sample,Ya.a.custom].join(" "),style:e.customTextStyle.toCSS()},N(On,{id:"cvaa.sample_custom_caption_tag"}),N("div",{className:Ya.a.activeTick},N(oc,{type:rc.Check}))),N("a",{role:"button",tabIndex:"0","aria-haspopup":"true",onClick:function(){return e.transitionToState(e.cvaaOverlayState.CustomCaptions)},ref:function(t){e.addAccessibleChild(t)},onKeyDown:function(t){t.keyCode===Wn.ENTER&&e.transitionToState(e.cvaaOverlayState.CustomCaptions)}},N(On,{id:"cvaa.edit_caption"}))):N("a",{role:"button","aria-haspopup":"true",tabIndex:"0",className:Ya.a.buttonSaveCvaa,onClick:function(){return e.transitionToState(e.cvaaOverlayState.CustomCaptions)},ref:function(t){e.addAccessibleChild(t)},onKeyDown:function(t){t.keyCode===Wn.ENTER&&e.transitionToState(e.cvaaOverlayState.CustomCaptions)}},N(On,{id:"cvaa.set_custom_caption"})))}},{key:"isAdvancedStyleApplied",value:function(){var e=this.props.player;return!br(e.textStyle,this.captionsStyleDefault)&&!br(e.textStyle,this.captionsStyleBlackBG)&&!br(e.textStyle,this.captionsStyleYellow)}}])&&Eh(t.prototype,n),i}(B))||mh,Oh=function(e){return N("div",{className:e.classNames.join(" ")},N("label",{id:e.styleName},N(On,{id:e.labelId})),N(Yd,{name:e.styleName,pushRef:function(t){e.addAccessibleChild(t)},tabbable:!0,onMenuChosen:function(t){var n={};n[e.styleName]=t,e.changeCustomStyle(n)},options:e.options}))};function Ph(e){return(Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ch(e,t){return(Ch=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xh(e,t){return!t||"object"!==Ph(t)&&"function"!=typeof t?Dh(e):t}function Dh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ih(e){return(Ih=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ch(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ih(e);if(t){var i=Ih(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xh(this,n)}}(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).mouseUpHandler=xf(Dh(e),e.mouseUpHandler),e.mouseMoveHandler=xf(Dh(e),e.mouseMoveHandler),e}return t=i,(n=[{key:"componentWillMount",value:function(){this.setState({value:this.props.value||0,min:this.props.min||0,max:this.props.max||100,dragging:!1}),document.addEventListener("mouseup",this.mouseUpHandler),document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("touchend",this.mouseUpHandler),document.addEventListener("touchmove",this.mouseMoveHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.mouseUpHandler),document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("touchend",this.mouseUpHandler),document.removeEventListener("touchmove",this.mouseMoveHandler)}},{key:"componentDidMount",value:function(){this.sliderWidth=this._sliderElement.clientWidth,this._sliderElementOffsetLeft=this._sliderElement.getBoundingClientRect().left}},{key:"mouseDownHandler",value:function(e){var t=this;this._sliderElementOffsetLeft=this._sliderElement.getBoundingClientRect().left,this.state.dragging||this.setState((function(n){return{dragging:!0,value:t.mouseEventToValue(e,n)}}),(function(){t.props.onChange(t.mouseEventToValue(e,t.state))}))}},{key:"onKeyboardDragging",value:function(e){var t=this;e.stopPropagation(),this._sliderElementOffsetLeft=this._sliderElement.getBoundingClientRect().left;var n=this.props.value;switch(e.keyCode){case Wn.RIGHT:(n+=5)>this.state.max&&(n=this.state.max);break;case Wn.LEFT:(n-=5)<this.state.min&&(n=this.state.min)}this.setState({value:n,dragging:!1},(function(){t.props.onChange(n)}))}},{key:"mouseMoveHandler",value:function(e){var t=this;this.state.dragging&&this.setState((function(n){return{value:t.mouseEventToValue(e,n)}}),(function(){t.props.onChange(t.mouseEventToValue(e,t.state))}))}},{key:"mouseUpHandler",value:function(e){var t=this;this.state.dragging&&this.setState((function(n){return{value:t.mouseEventToValue(e,n),dragging:!1}}),(function(){t.props.onChange(t.mouseEventToValue(e,t.state))}))}},{key:"mouseEventToValue",value:function(e,t){var n=(e.touches&&e.touches.length>0?e.touches[0].clientX:e.changedTouches?e.changedTouches[0].pageX:e.clientX)-this._sliderElement.getBoundingClientRect().left,r=Math.round(n/this._sliderElement.clientWidth*100);return this.getValueByPersentage(r)<t.min?t.min:this.getValueByPersentage(r)>t.max?t.max:this.getValueByPersentage(r)}},{key:"getValueByPersentage",value:function(e){return this.state.max/100*e}},{key:"getPersentageByValue",value:function(){return Math.round(this.state.value/this.state.max*100)}},{key:"render",value:function(e){var t=this;return N("div",{role:"slider","aria-valuemin":this.state.min,"aria-valuenow":this.state.value,"aria-valuemax":this.state.max,"aria-labelledby":e.name,tabIndex:"0",ref:function(n){n&&(t._sliderElement=n,e.pushRef&&e.pushRef(n))},className:Ya.a.slider,onMouseDown:function(e){return t.mouseDownHandler(e)},onTouchStart:function(e){return t.mouseDownHandler(e)},onKeyDown:function(e){e.keyCode!==Wn.LEFT&&e.keyCode!==Wn.RIGHT||t.onKeyboardDragging(e)}},N("div",{className:Ya.a.progress,style:{width:this.getPersentageByValue()+"%"}},N("div",{className:Ya.a.handle,onMouseDown:function(e){return t.mouseDownHandler(e)},onTouchStart:function(e){return t.mouseDownHandler(e)}})))}}])&&Rh(t.prototype,n),i}(B);Lh.displayName="Slider";var Mh,Nh=function(e){return N("div",{className:e.classNames.join(" ")},N("label",{id:e.styleName},N(On,{id:e.labelId})),N(Lh,{name:e.styleName,pushRef:function(t){e.addAccessibleChild(t)},min:0,max:100,value:100*e.value,onChange:function(t){var n={};n[e.styleName]=t/100,e.changeCustomStyle(n)}}))};function jh(e){return(jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bh(e,t){return(Bh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vh(e,t){return!t||"object"!==jh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gh(e){return(Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kh,Hh,zh,Wh,Yh=sa(Mh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bh(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gh(e);if(t){var i=Gh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vh(this,n)}}(i);function i(){return Uh(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.focusOnDefault()}},{key:"render",value:function(e){var t=this.props.player,n=t.TextStyle.FontFamily,r=t.TextStyle.EdgeStyles,i=t.TextStyle.StandardColors,o=t.TextStyle.FontSizes.map((function(t){return{value:t.value,label:t.label,active:e.customTextStyle.fontScale===t.value}})),a=Object.keys(i).map((function(t){return{value:i[t],label:t.charAt(0).toUpperCase()+t.toLowerCase().slice(1),active:e.customTextStyle.fontColor.every((function(e,n){return e===i[t][n]}))}})),s=Object.keys(n).map((function(t){return{value:n[t],label:n[t],active:e.customTextStyle.fontFamily===n[t]}})),u=Object.keys(r).map((function(t){return{value:r[t],label:t.charAt(0).toUpperCase()+t.toLowerCase().slice(1),active:e.customTextStyle.fontEdge===r[t]}})),l=Object.keys(i).map((function(t){return{value:i[t],label:t.charAt(0).toUpperCase()+t.toLowerCase().slice(1),active:e.customTextStyle.backgroundColor.every((function(e,n){return e===i[t][n]}))}}));return N("div",{className:[Ya.a.overlayScreen,Ya.a.active].join(" ")},N("form",{className:[Ya.a.form,Ya.a.customCaptionForm].join(" ")},N(Oh,{addAccessibleChild:e.addAccessibleChild,labelId:"cvaa.size_label",options:o,classNames:[Ya.a.formGroupRow,Ya.a.fontSize],styleName:"fontScale",changeCustomStyle:e.changeCustomStyle}),N(Oh,{addAccessibleChild:e.addAccessibleChild,labelId:"cvaa.font_color_label",options:a,classNames:[Ya.a.formGroupRow,Ya.a.fontColor],styleName:"fontColor",changeCustomStyle:e.changeCustomStyle}),N(Oh,{addAccessibleChild:e.addAccessibleChild,labelId:"cvaa.font_family_label",options:s,classNames:[Ya.a.formGroupRow,Ya.a.fontFamily],styleName:"fontFamily",changeCustomStyle:e.changeCustomStyle}),N(Oh,{addAccessibleChild:e.addAccessibleChild,labelId:"cvaa.font_style_label",options:u,classNames:[Ya.a.formGroupRow,Ya.a.fontStyle],styleName:"fontEdge",changeCustomStyle:e.changeCustomStyle}),N(Nh,{addAccessibleChild:e.addAccessibleChild,labelId:"cvaa.font_opacity_label",value:e.customTextStyle.fontOpacity,classNames:[Ya.a.formGroupRow,Ya.a.fontOpacity],styleName:"fontOpacity",changeCustomStyle:e.changeCustomStyle}),N(Oh,{addAccessibleChild:e.addAccessibleChild,labelId:"cvaa.background_color_label",options:l,classNames:[Ya.a.formGroupRow,Ya.a.backgroundColor],styleName:"backgroundColor",changeCustomStyle:e.changeCustomStyle}),N(Nh,{addAccessibleChild:e.addAccessibleChild,labelId:"cvaa.background_opacity_label",value:e.customTextStyle.backgroundOpacity,classNames:[Ya.a.formGroupRow,Ya.a.backgroundOpacity],styleName:"backgroundOpacity",changeCustomStyle:e.changeCustomStyle}),N("div",{className:Ya.a.formGroupRow},N("a",{role:"button",tabIndex:"0",ref:function(t){e.addAccessibleChild(t)},onClick:function(){return e.changeCaptionsStyle(e.customTextStyle)},onKeyDown:function(t){t.keyCode===Wn.ENTER&&e.changeCaptionsStyle(e.customTextStyle)},className:[Ya.a.btn,Ya.a.btnBranded,Ya.a.btnBlock].join(" ")},N(On,{id:"cvaa.apply"}))),N("div",{className:Ya.a.previewContainer},N("span",{style:e.getPreviewStyle()},N(On,{id:"cvaa.caption_preview"})))))}}])&&Fh(t.prototype,n),i}(B))||Mh;function qh(e){return(qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jh(e,t){return(Jh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qh(e,t){return!t||"object"!==qh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zh(e){return(Zh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(n),!0).forEach((function(t){ny(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ny(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ry,iy,oy,ay,sy,uy,ly={Main:"main",CustomCaptions:"custom-captions"},cy=(Kh=on((function(e){return{open:e.cvaa.overlayOpen,style:e.cvaa.style}}),jr(ty(ty({},vo),Lr))),Hh=nr("CVAAOverlay"),zh=yu("CVAAOverlay"),Kh(Wh=sa(Wh=Hh(Wh=zh(Wh=gd(Wh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jh(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zh(e);if(t){var i=Zh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qh(this,n)}}(i);function i(){return Xh(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentWillUnmount",value:function(){this.setState({activeWindow:ly.Main})}},{key:"componentWillMount",value:function(){var e=this.props.player;this.setState({activeWindow:ly.Main,customTextStyle:e.textStyle}),this.props.setIsModal(!0)}},{key:"transitionToState",value:function(e){this.setState({activeWindow:e})}},{key:"changeCaptionsStyle",value:function(e){this.props.updateCaptionsStyle(e),this.props.player.textStyle=e,this.props.onClose(),this.props.notifyClick({textStyle:e})}},{key:"_getPreviewStyle",value:function(){var e=100*this.state.customTextStyle.implicitFontScale+"%",t=this.state.customTextStyle.toCSS();return"font-size: ".concat(e,"!important; ").concat(t)}},{key:"changeCustomStyle",value:function(e){this.setState((function(t){var n=t.customTextStyle.clone();return{customTextStyle:Object.assign(n,e)}}))}},{key:"render",value:function(e){var t=this;return e.clearAccessibleChildren(),N(ad,{handleKeyDown:function(e){return t.props.handleKeyDown(e)},addAccessibleChild:this.props.addAccessibleChild,open:!0,onClose:function(){return e.onClose()},type:"cvaa"},this.state.activeWindow===ly.Main?N(Ah,{cvaaOverlayState:ly,addAccessibleChild:e.addAccessibleChild,captionsStyleDefault:this.captionsStyleDefault,captionsStyleBlackBG:this.captionsStyleBlackBG,captionsStyleYellow:this.captionsStyleYellow,changeCaptionsStyle:this.changeCaptionsStyle.bind(this),transitionToState:this.transitionToState.bind(this),customTextStyle:this.state.customTextStyle}):N(Yh,{addAccessibleChild:e.addAccessibleChild,focusOnDefault:this.props.focusOnDefault,changeCaptionsStyle:this.changeCaptionsStyle.bind(this),changeCustomStyle:this.changeCustomStyle.bind(this),getPreviewStyle:this._getPreviewStyle.bind(this),customTextStyle:this.state.customTextStyle}))}}])&&$h(t.prototype,n),i}(B))||Wh)||Wh)||Wh)||Wh)||Wh);function fy(e){return(fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function py(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hy(e,t,n){return t&&dy(e.prototype,t),n&&dy(e,n),e}function yy(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function vy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=by(e);if(t){var i=by(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gy(this,n)}}function gy(e,t){return!t||"object"!==fy(t)&&"function"!=typeof t?my(e):t}function my(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function by(e){return(by=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cy.displayName="CVAAOverlay";var ky,Ey,wy,Ty,Sy,Ay,Oy=(ry=on((function(e){return{audioTracks:e.engine.audioTracks,textTracks:e.engine.textTracks,overlayOpen:e.cvaa.overlayOpen,isMobile:e.shell.isMobile,isSmallSize:e.shell.isSmallSize}}),jr(vo)),iy=hp("Language"),oy=nr("Language"),ay=yu("Language"),sy=Dn({audioLabelText:"language.audio",captionsLabelText:"language.captions",buttonLabel:"controls.language"}),ry(uy=sa(uy=Ma(uy=iy(uy=oy(uy=ay(uy=sy(uy=function(e){yy(n,e);var t=vy(n);function n(){var e;py(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _y(my(e=t.call.apply(t,[this].concat(i))),"_lastActiveTextLanguage",""),_y(my(e),"_keyboardEventHandlers",[{key:{code:Wn.C},action:function(){var t=e.props,n=t.player,r=t.logger,i=n.getActiveTracks().text;if(i)if("off"===i.language&&e._lastActiveTextLanguage){r.debug("Changing text track to language",e._lastActiveTextLanguage);var o=n.getTracks("text").find((function(t){return t.language===e._lastActiveTextLanguage}));n.selectTrack(o)}else"off"===i.language||e._lastActiveTextLanguage||(r.debug("Hiding text track"),e._lastActiveTextLanguage=i.language,n.hideTextTrack())}}]),e}return hy(n,[{key:"componentWillMount",value:function(){this.setState({smartContainerOpen:!1})}},{key:"componentDidMount",value:function(){var e=this;this.props.eventManager.listen(document,"click",(function(t){return e.handleClickOutside(t)})),this.props.registerKeyboardEvents(this._keyboardEventHandlers)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.textTracks.find((function(e){return e.active})),n=e.textTracks.find((function(e){return e.active}));t&&"off"!==t.language&&n&&"off"===n.language?this._lastActiveTextLanguage=t.language:n&&"off"!==n.language&&(this._lastActiveTextLanguage="")}},{key:"handleClickOutside",value:function(e){!this._controlLanguageElement||this.props.isMobile||this._controlLanguageElement.contains(e.target)||!this.state.smartContainerOpen||this.state.cvaaOverlay||this.props.isSmallSize||this.setState({smartContainerOpen:!1})}},{key:"toggleSmartContainerOpen",value:function(){this.setState((function(e){return{smartContainerOpen:!e.smartContainerOpen}}))}},{key:"onAudioChange",value:function(e){this.props.player.selectTrack(e),this.props.notifyClick({type:this.props.player.Track.AUDIO,track:e})}},{key:"onCaptionsChange",value:function(e){this.props.player.selectTrack(e),this.props.notifyClick({type:this.props.player.Track.TEXT,track:e})}},{key:"toggleCVAAOverlay",value:function(){this.setState((function(e){return{cvaaOverlay:!e.cvaaOverlay}}))}},{key:"renderAll",value:function(e,t){var n=this,r="#".concat(this.props.player.config.targetId," .overlay-portal");return N("div",{ref:function(e){return e?n._controlLanguageElement=e:void 0},className:[Ya.a.controlButtonContainer,Ya.a.controlLanguage].join(" ")},N(Cc,{label:this.props.buttonLabel},N(jc,{tabIndex:"0","aria-haspopup":"true","aria-label":this.props.buttonLabel,className:this.state.smartContainerOpen?[Ya.a.controlButton,Ya.a.active].join(" "):Ya.a.controlButton,onClick:function(){return n.toggleSmartContainerOpen()}},N(oc,{type:rc.Language}))),!this.state.smartContainerOpen||this.state.cvaaOverlay?void 0:N(Ad,{targetId:this.props.player.config.targetId,title:N(On,{id:"language.title"}),onClose:function(){return n.toggleSmartContainerOpen()}},e.length<=1?void 0:N(ah,{icon:"audio",label:this.props.audioLabelText,options:e,onMenuChosen:function(e){return n.onAudioChange(e)}}),t.length<=1?void 0:N(ah,{icon:"captions",label:this.props.captionsLabelText,options:t,onMenuChosen:function(e){return n.onCaptionsChange(e)}}),t.length<=1?void 0:N(Py,{isPortal:this.props.isMobile||this.props.isSmallSize,onMenuChosen:function(){return n.toggleCVAAOverlay()},onClose:function(){return n.toggleSmartContainerOpen()}})),this.state.cvaaOverlay?Xe(N(cy,{onClose:function(){n.toggleCVAAOverlay(),n.toggleSmartContainerOpen()}}),document.querySelector(r)):N("div",null))}},{key:"render",value:function(e){var t=e.audioTracks.filter((function(e){return e.label||e.language})).map((function(e){return{label:e.label||e.language,active:e.active,value:e}})),n=e.textTracks.map((function(e){return{label:e.label||e.language,active:e.active,value:e}}));return t.length>1||n.length>1?this.renderAll(t,n):void 0}}]),n}(B))||uy)||uy)||uy)||uy)||uy)||uy)||uy),Py=function(e){yy(n,e);var t=vy(n);function n(){return py(this,n),t.apply(this,arguments)}return hy(n,[{key:"render",value:function(e){var t=this;return N("div",{className:Ya.a.smartContainerItem},N("a",{role:"button","aria-haspopup":"true",tabIndex:e.isPortal?"0":"-1",ref:function(t){e.pushRef&&e.pushRef(t)},className:Ya.a.advancedCaptionsMenuLink,onClick:function(){return t.props.onMenuChosen()},onKeyDown:function(e){switch(e.keyCode){case Wn.ENTER:t.props.onMenuChosen(),e.stopPropagation()}}},N(On,{id:"language.advanced_captions_settings"})))}}]),n}(B);function Ry(e){return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dy(e,t){return(Dy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Iy(e,t){return!t||"object"!==Ry(t)&&"function"!=typeof t?Ly(e):t}function Ly(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function My(e){return(My=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ny(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Oy.displayName="Language";var jy,Uy,Fy,By,Vy=(ky=on((function(e){return{fullscreen:e.engine.fullscreen,targetId:e.config.targetId}})),Ey=nr("Fullscreen"),wy=hp("Fullscreen"),Ty=yu("Fullscreen"),Sy=Dn({fullscreenText:"controls.fullscreen"}),ky(Ay=sa(Ay=Ey(Ay=wy(Ay=Ty(Ay=Sy(Ay=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dy(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=My(e);if(t){var i=My(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Iy(this,n)}}(i);function i(){var e;Cy(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Ny(Ly(e=r.call.apply(r,[this].concat(n))),"_keyboardEventHandlers",[{key:{code:Wn.F},action:function(t){e.handleKeydown(t)}},{key:{code:Wn.ESC},action:function(t){e.handleKeydown(t)}}]),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.registerKeyboardEvents(this._keyboardEventHandlers)}},{key:"handleKeydown",value:function(e){switch(e.keyCode){case Wn.F:this.props.player.isFullscreen()||this.toggleFullscreen();break;case Wn.ESC:this.props.player.isFullscreen()&&this.toggleFullscreen()}}},{key:"toggleFullscreen",value:function(){var e=this.props,t=e.targetId,n=e.logger,r=e.player;n.debug("Toggle fullscreen");var i=document.getElementById(t);r.isFullscreen()?r.exitFullscreen():r.enterFullscreen(),i&&i.focus(),this.props.notifyClick()}},{key:"render",value:function(){var e=this;return N("div",{className:[Ya.a.controlButtonContainer,Ya.a.controlFullscreen].join(" ")},N(Cc,{label:this.props.fullscreenText},N(jc,{tabIndex:"0","aria-label":this.props.fullscreenText,className:this.props.fullscreen?[Ya.a.controlButton,Ya.a.isFullscreen].join(" "):Ya.a.controlButton,onClick:function(){return e.toggleFullscreen()}},N(oc,{type:rc.Maximize}),N(oc,{type:rc.Minimize}))))}}])&&xy(t.prototype,n),i}(B))||Ay)||Ay)||Ay)||Ay)||Ay)||Ay);function Gy(e){return(Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ky(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zy(e,t){return(zy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wy(e,t){return!t||"object"!==Gy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yy(e){return(Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qy(Object(n),!0).forEach((function(t){$y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Vy.displayName="Fullscreen";var Jy=(jy=on((function(e){return{isVr:e.engine.isVr,vrStereoMode:e.engine.vrStereoMode,config:e.config.components.vrStereo}}),jr(Xy(Xy({},Lr),Li))),Uy=nr("VrStereo"),Fy=Dn({vrStereoText:"controls.vrStereo"}),jy(By=sa(By=Uy(By=Fy(By=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zy(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yy(e);if(t){var i=Yy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wy(this,n)}}(i);function i(){return Ky(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"_shouldRender",value:function(){var e=this.props.config;return this.props.isVr&&!(0===Object.keys(e).length&&e.constructor===Object)}},{key:"onClick",value:function(){this.props.player.toggleVrStereoMode(),this.props.updateVrStereoMode(!this.props.vrStereoMode)}},{key:"componentWillMount",value:function(){this.props.updateVrStereoMode(this.props.config.vrStereoMode)}},{key:"render",value:function(){var e=this;if(this._shouldRender())return N("div",{className:[Ya.a.controlButtonContainer,Ya.a.controlVrStereo].join(" ")},N(Cc,{label:this.props.vrStereoText},N(jc,{tabIndex:"0","aria-label":this.props.vrStereoText,className:this.props.vrStereoMode?[Ya.a.controlButton,Ya.a.vrStereoMode].join(" "):Ya.a.controlButton,onClick:function(){return e.onClick()},onKeyDown:function(t){t.keyCode===Wn.ENTER&&e.onClick()}},N(oc,{type:rc.vrStereo}),N(oc,{type:rc.vrStereoFull}))))}}])&&Hy(t.prototype,n),i}(B))||By)||By)||By)||By);function Qy(e){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ev(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tv(e,t){return(tv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nv(e,t){return!t||"object"!==Qy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rv(e){return(rv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jy.displayName="VrStereo";var iv,ov=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tv(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rv(e);if(t){var i=rv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nv(this,n)}}(i);function i(){return Zy(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"getTimeDisplay",value:function(e,t,n){var r=n||"current / total",i=Cf(e),o=Cf(t),a=Cf(t-e);return(r=(r=r.replace(/current/g,i)).replace(/total/g,o)).replace(/left/g,a)}},{key:"render",value:function(e){return N("div",{className:Ya.a.timeDisplay},N("span",null,this.getTimeDisplay(e.currentTime,e.duration,e.format)))}}])&&ev(t.prototype,n),i}(B);function av(e){return(av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sv(){return(sv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function uv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cv(e,t){return(cv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fv(e,t){return!t||"object"!==av(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pv(e){return(pv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ov.displayName="TimeDisplay";var dv,hv=on((function(e){return{currentTime:e.engine.currentTime,duration:e.engine.duration}}))(iv=nr("TimeDisplayPlaybackContainer")(iv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cv(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pv(e);if(t){var i=pv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fv(this,n)}}(i);function i(){return uv(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){return N(ov,sv({currentTime:e.currentTime,duration:e.duration},e))}}])&&lv(t.prototype,n),i}(B))||iv)||iv;function yv(e){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mv(e,t){return(mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bv(e,t){return!t||"object"!==yv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _v(e){return(_v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}hv.displayName="TimeDisplayPlaybackContainer";var kv=on((function(e){return{isCasting:e.engine.isCasting,isPlaybackEnded:e.engine.isPlaybackEnded}}),jr(Lr))(dv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mv(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_v(e);if(t){var i=_v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bv(this,n)}}(i);function i(){return vv(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){var t=e.leftControls,n=e.rightControls,r=[Ya.a.bottomBar];return e.isCasting&&e.isPlaybackEnded&&r.push(Ya.a.hide),N("div",{className:r.join(" ")},N(mr,{name:"BottomBar"},e.children,N("div",{className:Ya.a.leftControls},N(mr,{name:"BottomBarLeftControls"},t)),N("div",{className:Ya.a.rightControls},N(mr,{name:"BottomBarRightControls"},n))))}}])&&gv(t.prototype,n),i}(B))||dv;function Ev(e){return(Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sv(e,t){return(Sv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Av(e,t){return!t||"object"!==Ev(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ov(e){return(Ov=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}kv.displayName="BottomBar";var Pv,Rv,Cv,xv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sv(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ov(e);if(t){var i=Ov(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Av(this,n)}}(i);function i(){return wv(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(e){return N("div",{className:"overlay-portal"},e.children)}}])&&Tv(t.prototype,n),i}(B);function Dv(e){return(Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mv(e,t){return(Mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nv(e,t){return!t||"object"!==Dv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jv(e){return(jv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}xv.displayName="OverlayPortal";var Uv,Fv,Bv,Vv=(Pv=on((function(e){return{fallbackToMutedAutoPlay:e.engine.fallbackToMutedAutoPlay}}),null),Rv=nr("UnmuteIndication"),Pv(Cv=sa(Cv=Ma(Cv=Rv(Cv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mv(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jv(e);if(t){var i=jv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nv(this,n)}}(i);function i(){return Iv(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this;!e.fallbackToMutedAutoPlay&&this.props.fallbackToMutedAutoPlay&&(this.props.eventManager.listenOnce(this.props.player,this.props.player.Event.PLAYING,(function(){return t._iconOnlyTimeout()})),this.props.eventManager.listenOnce(this.props.player,this.props.player.Event.AD_STARTED,(function(){return t._iconOnlyTimeout()})))}},{key:"_iconOnlyTimeout",value:function(){var e=this;setTimeout((function(){e.setState({iconOnly:!0})}),3e3)}},{key:"_keyDownHandler",value:function(e){e.keyCode===Wn.ENTER&&(this.props.player.muted=!this.props.player.muted)}},{key:"render",value:function(e){var t=this;if(this.props.fallbackToMutedAutoPlay){var n=[Ya.a.unmuteButtonContainer];return e.hasTopBar&&n.push(Ya.a.hasTopBar),this.state.iconOnly&&n.push(Ya.a.showIconOnly),N(Rn,null,N("div",{tabIndex:"0","aria-label":N(On,{id:"controls.unmute"}),className:n.join(" "),onMouseOver:function(){return t.setState({iconOnly:!1})},onMouseOut:function(){return t.setState({iconOnly:!0})},onMouseUp:function(){return t.props.player.muted=!t.props.player.muted},onTouchEnd:function(e){return e.stopImmediatePropagation()},onKeyDown:function(e){return t._keyDownHandler(e)}},N("a",{className:[Ya.a.btn,Ya.a.btnDarkTransparent,Ya.a.unmuteButton].join(" ")},N("div",{className:Ya.a.unmuteIconContainer},N(oc,{type:rc.VolumeBase}),N(oc,{type:rc.VolumeMute})),N("span",null,N(On,{id:"unmute.unmute"})))))}}}])&&Lv(t.prototype,n),i}(B))||Cv)||Cv)||Cv)||Cv);function Gv(e){return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hv(e,t){return(Hv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zv(e,t){return!t||"object"!==Gv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wv(e){return(Wv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Vv.displayName="UnmuteIndication";var Yv,qv,Xv,$v,Jv=(Uv=on((function(e){return{config:Object.assign({placement:"top-left",timeout:0},e.config.components.watermark)}})),Fv=nr("Watermark"),Uv(Bv=sa(Bv=Ma(Bv=Fv(Bv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hv(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wv(e);if(t){var i=Wv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zv(this,n)}}(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).setState({show:!0}),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=function(){e.props.config.timeout>0&&setTimeout((function(){return e.setState({show:!1})}),e.props.config.timeout)},n=this.props.player;this.props.eventManager.listenOnce(n,n.Event.PLAYING,t),this.props.eventManager.listen(n,n.Event.CHANGE_SOURCE_ENDED,(function(){e.setState({show:!0}),e.props.eventManager.listenOnce(n,n.Event.PLAYING,t)}))}},{key:"render",value:function(e){if(e.config.img){var t=[Ya.a.watermark];return e.config.placement.split("-").forEach((function(e){t.push(Ya.a[e])})),this.state.show||t.push(Ya.a.hideWatermark),N("div",{className:t.join(" ")},N("a",{href:e.config.url,target:"_blank",rel:"noopener noreferrer"},N("img",{src:e.config.img})))}}}])&&Kv(t.prototype,n),i}(B))||Bv)||Bv)||Bv)||Bv);function Qv(e){return(Qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tg(e,t){return(tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ng(e,t){return!t||"object"!==Qv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rg(e){return(rg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jv.displayName="Watermark";var ig,og,ag,sg,ug,lg=(Yv=on((function(e){return{isCasting:e.engine.isCasting,isCastAvailable:e.engine.isCastAvailable}}),jo),qv=nr("Cast"),Xv=Dn({castText:"cast.play_on_tv"}),Yv($v=sa($v=Ma($v=qv($v=Xv($v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tg(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rg(e);if(t){var i=rg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ng(this,n)}}(i);function i(){return Zv(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"onClick",value:function(){var e=this;this.props.updateBackdropVisibility(!0),this.props.eventManager.listenOnce(this.props.player,this.props.player.Event.Cast.CAST_SESSION_START_FAILED,(function(){return e.props.updateBackdropVisibility(!1)}))}},{key:"render",value:function(e){var t=this;if(e.isCasting||e.isCastAvailable)return N("div",{role:"button","aria-label":this.props.castText,className:Ya.a.controlButtonContainer,onClick:function(){return t.onClick()},onKeyDown:function(e){e.keyCode===Wn.ENTER&&(t.props.updateBackdropVisibility(!0),t.props.player.startCasting().catch((function(){return t.props.updateBackdropVisibility(!1)})))}},N(Cc,{label:this.props.castText},N("google-cast-launcher",{className:Ya.a.castButton,tabIndex:"0"})))}}])&&eg(t.prototype,n),i}(B))||$v)||$v)||$v)||$v)||$v);function cg(e){return(cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dg(e,t){return(dg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hg(e,t){return!t||"object"!==cg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yg(e){return(yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}lg.displayName="Cast";var vg,gg=(ig=on((function(e){return{isPlaybackEnded:e.engine.isPlaybackEnded,prePlayback:e.engine.prePlayback,loading:e.loading.show,isCastAvailable:e.engine.isCastAvailable}}),jo),og=nr("CastBeforePlay"),ig(ag=sa(ag=og((ug=sg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dg(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yg(e);if(t){var i=yg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hg(this,n)}}(i);function i(){return fg(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"onClick",value:function(){var e=this;this.props.updateBackdropVisibility(!0),this.props.player.startCasting().catch((function(){return e.props.updateBackdropVisibility(!1)}))}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({show:!0})}),700)}},{key:"render",value:function(e){var t=this;if(e.isCastAvailable&&!e.loading&&e.prePlayback){var n=[Ya.a.castOnTvButtonContainer];return this.state.show&&n.push(Ya.a.showCastOnTv),N("div",null,N("div",{className:n.join(" ")},N(Rn,null,N(jc,{tabIndex:"0","aria-label":N(On,{id:"cast.play_on_tv"}),onClick:function(){return t.onClick()},className:[Ya.a.btn,Ya.a.btnDarkTransparent,Ya.a.castOnTvButton].join(" ")},N("div",{className:Ya.a.castOnTvIconContainer},N(ic,{type:e.icon})),N("span",null,N(On,{id:"cast.play_on_tv"}))))))}}}])&&pg(t.prototype,n),i}(B),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sg,"defaultProps",{icon:rc.Cast}),ag=ug))||ag)||ag)||ag);function mg(e){return(mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kg(e,t){return(kg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Eg(e,t){return!t||"object"!==mg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wg(e){return(wg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}gg.displayName="CastBeforePlay";var Tg,Sg,Ag,Og=on((function(e){return{show:e.backdrop.show}}),null)(vg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kg(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wg(e);if(t){var i=wg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Eg(this,n)}}(i);function i(){return bg(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){if(e.show)return N("div",{className:Ya.a.backdrop})}}])&&_g(t.prototype,n),i}(B))||vg;function Pg(e){return(Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xg(e,t){return(xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dg(e,t){return!t||"object"!==Pg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ig(e){return(Ig=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Og.displayName="Backdrop";var Lg,Mg,Ng,jg,Ug,Fg,Bg=(Tg=on((function(e){return{playlist:e.engine.playlist}})),Sg=Dn({prevControlsText:"controls.prev",nextControlsText:"controls.next",playlistPrevText:"playlist.prev",playlistUpNextText:"playlist.up_next"}),Tg(Ag=sa(Ag=Sg(Ag=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xg(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ig(e);if(t){var i=Ig(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dg(this,n)}}(i);function i(){return Rg(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"onClick",value:function(){"prev"===this.props.type?this.props.player.playlist.playPrev():this.props.player.playlist.playNext()}},{key:"render",value:function(e){var t=e.playlist[e.type],n=t&&t.sources&&(t.sources.poster||t.sources.metadata&&t.sources.metadata.name);return N("div",{className:[Ya.a.controlButtonContainer,Ya.a.controlPlaylistButton].join(" ")},n?N("div",{className:Ya.a.posterPreview},N("div",{className:Ya.a.posterPreviewText},N("div",{className:Ya.a.posterPreviewTextTitle},"prev"===e.type?this.props.playlistPrevText:this.props.playlistUpNextText),N("div",{className:Ya.a.posterPreviewTextName},"".concat(t.sources.metadata?t.sources.metadata.name:""))),N("div",{className:Ya.a.posterPreviewImg,style:"background-image: url(".concat(t.sources.poster,");")})):void 0,n?this.bottomBarButton(t,e.type):N(Cc,{label:this.props["".concat(e.type,"ControlsText")]},this.bottomBarButton(t,e.type)))}},{key:"bottomBarButton",value:function(e,t){var n=this;return N(jc,{disabled:!e,tabIndex:"0","aria-label":this.props["".concat(t,"ControlsText")],className:"".concat(Ya.a.controlButton),onClick:function(){return n.onClick()}},N("div",null,N(oc,"prev"===t?{type:rc.Prev}:{type:rc.Next})))}}])&&Cg(t.prototype,n),i}(B))||Ag)||Ag)||Ag);function Vg(e){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hg(e,t){return(Hg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zg(e,t){return!t||"object"!==Vg(t)&&"function"!=typeof t?Wg(e):t}function Wg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yg(e){return(Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qg(Object(n),!0).forEach((function(t){$g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Bg.displayName="PlaylistButton";var Jg,Qg=(Lg=on((function(e){return{isPlayingAdOrPlayback:ac(e.engine),isPlaying:e.engine.isPlaying,adBreak:e.engine.adBreak,isPlaybackEnded:e.engine.isPlaybackEnded}}),jr(Xg(Xg({},wo),Co))),Mg=hp("PlayPause"),Ng=nr("PlayPause"),jg=yu("PlayPause"),Ug=Dn({startOverText:"controls.startOver",pauseText:"controls.pause",playText:"controls.play"}),Lg(Fg=sa(Fg=Mg(Fg=Ng(Fg=jg(Fg=Ug(Fg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hg(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yg(e);if(t){var i=Yg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zg(this,n)}}(i);function i(){var e;Gg(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return $g(Wg(e=r.call.apply(r,[this].concat(n))),"_keyboardEventHandlers",[{key:{code:Wn.SPACE},action:function(){e.props.isPlayingAdOrPlayback?e.props.updateOverlayActionIcon(rc.Pause):e.props.updateOverlayActionIcon(rc.Play),e.togglePlayPause()}}]),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.registerKeyboardEvents(this._keyboardEventHandlers)}},{key:"togglePlayPause",value:function(){this.props.logger.debug("Toggle play"),this.props.isPlayingAdOrPlayback?this.props.player.pause():this.props.player.play(),this.props.notifyClick()}},{key:"render",value:function(e){var t=this,n=this.props.isPlayingAdOrPlayback?[Ya.a.controlButton,Ya.a.isPlaying].join(" "):Ya.a.controlButton,r=e.isPlaybackEnded&&!this.props.adBreak,i=this.props.isPlayingAdOrPlayback?this.props.pauseText:this.props.playText,o=r?this.props.startOverText:i;return N("div",{className:[Ya.a.controlButtonContainer,Ya.a.controlPlayPause].join(" ")},N(Cc,{label:o},N(jc,{tabIndex:"0","aria-label":o,className:n,onClick:function(){return t.togglePlayPause()}},r?N(oc,{type:rc.StartOver}):N("div",null,N(oc,{type:rc.Play}),N(oc,{type:rc.Pause})))))}}])&&Kg(t.prototype,n),i}(B))||Fg)||Fg)||Fg)||Fg)||Fg)||Fg);function Zg(e){return(Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function em(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nm(e,t){return(nm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rm(e,t){return!t||"object"!==Zg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function im(e){return(im=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Qg.displayName="PlayPause";var om,am,sm,um=on((function(e){return{playlist:e.engine.playlist}}))(Jg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nm(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=im(e);if(t){var i=im(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rm(this,n)}}(i);function i(){return em(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){var t=e.className;return N("div",{className:[Ya.a.playbackControls,t].join(" ")},e.playlist?N(Bg,{type:"prev"}):void 0,N(Qg,null),e.playlist?N(Bg,{type:"next"}):void 0)}}])&&tm(t.prototype,n),i}(B))||Jg;function lm(e){return(lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fm(e,t){return(fm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pm(e,t){return!t||"object"!==lm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dm(e){return(dm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}um.displayName="PlaybackControls";var hm,ym,vm,gm=(om=on((function(e){return{playlist:e.engine.playlist,currentTime:e.engine.currentTime,duration:e.engine.duration,lastSeekPoint:e.engine.lastSeekPoint,isSeeking:e.engine.isSeeking,isPlaybackEnded:e.engine.isPlaybackEnded,countdownCanceled:e.playlist.countdownCanceled}}),jr(Ho)),am=nr("PlaylistCountdown"),om(sm=sa(sm=Ma(sm=am(sm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fm(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dm(e);if(t){var i=dm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pm(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).setState({focusable:!1}),t}return t=i,(n=[{key:"_shouldRender",value:function(e){return e.playlist&&e.playlist.next&&e.playlist.next.sources&&e.player.playlist.countdown.showing&&(e.player.playlist.options.autoContinue||e.player.playlist.options.loop)}},{key:"onClick",value:function(){this.props.player.playlist.playNext()}},{key:"cancelNext",value:function(e){this.props.logger.debug("Cancel auto play next item"),e.stopPropagation(),this.props.updatePlaylistCountdownCanceled(!0)}},{key:"_getTimeToShow",value:function(){var e=this.props.player.playlist.countdown,t=this.props.duration-e.duration;return e.timeToShow>=0&&e.timeToShow<=this.props.duration&&(t=Math.max(e.timeToShow,this.props.lastSeekPoint)),Math.max(0,Math.min(t,this.props.duration))}},{key:"componentWillUpdate",value:function(e){var t=this._getTimeToShow();e.currentTime>=t?this.setState({timeToShow:!0}):(this.setState({timeToShow:!1}),this.props.updatePlaylistCountdownCanceled(!1))}},{key:"isHidden",value:function(e){return!e.timeToShow||this.props.player.playlist.countdown.duration>=this.props.duration}},{key:"isCanceled",value:function(){return this.props.countdownCanceled}},{key:"isShown",value:function(e){return!this.isHidden(e)&&!this.isCanceled()}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this._shouldRender(e)){var r=this._getTimeToShow(),i=this.props.player.playlist.countdown;e.isSeeking||this.props.countdownCanceled||!(this.props.isPlaybackEnded||this.props.currentTime>=r+i.duration&&this.props.currentTime<this.props.duration)||this.props.player.playlist.playNext()}!t.shown&&this.state.shown?this.focusElement&&this.props.eventManager.listenOnce(this.focusElement,"animationend",(function(){n.isShown(n.state)&&(n.focusElement.focus(),n.setState({focusable:!0}))})):t.shown&&!this.state.shown&&this.setState({focusable:!1}),this.isShown(this.state)!==this.state.shown&&this.setState((function(e){return{shown:n.isShown(e)}}))}},{key:"shouldComponentUpdate",value:function(e){return this.props.duration>0&&!e.isSeeking&&!this.props.isPlaybackEnded}},{key:"render",value:function(e){var t=this;if(this._shouldRender(e)&&(this.isShown(this.state)&&(this.nextShown=e.playlist.next),e.playlist.next&&e.playlist.next.sources&&this.nextShown)){var n=this.props.player.playlist.countdown,r=this._getTimeToShow(),i=e.currentTime-r,o=Math.min(n.duration,e.duration-r),a="".concat(i>0?i/o*104:0,"%"),s=[Ya.a.playlistCountdown];return this.isHidden(this.state)?s.push(Ya.a.hidden):this.isCanceled()?s.push(Ya.a.canceled):s.push(Ya.a.slideIn),N("div",{role:"button","aria-labelledby":"playlistCountdownTextId",ref:function(e){return e?t.focusElement=e:void 0},tabIndex:this.state.focusable?0:-1,className:s.join(" "),onKeyDown:function(e){switch(e.keyCode){case Wn.ENTER:t.onClick();break;case Wn.ESC:t.cancelNext(e)}},onClick:function(){return t.onClick()}},N("div",{className:Ya.a.playlistCountdownPoster,style:"background-image: url(".concat(this.nextShown.sources.poster,");")}),N("div",{className:Ya.a.playlistCountdownContentPlaceholder},N("div",{className:Ya.a.playlistCountdownContentBackground},N("div",{className:Ya.a.playlistCountdownContent},N(Rn,null,N("div",{id:"playlistCountdownTextId",className:Ya.a.playlistCountdownText},N("div",{className:Ya.a.playlistCountdownTextTitle},N(On,{id:"playlist.up_next"})),N("div",{className:Ya.a.playlistCountdownTextName},"".concat(this.nextShown.sources.metadata?this.nextShown.sources.metadata.name:"")))),N("div",{className:[Ya.a.controlButtonContainer,Ya.a.playlistCountdownCancel].join(" ")},N(Rn,null,N(jc,{tabIndex:this.state.focusable?0:-1,"aria-label":N(On,{id:"playlist.cancel"}),className:[Ya.a.controlButton,Ya.a.playlistCountdownCancelButton].join(" "),onClick:function(e){return t.cancelNext(e)},onKeyDown:function(e){e.keyCode===Wn.ENTER&&t.cancelNext(e)}},N(oc,{type:rc.Close})))),N("div",{className:Ya.a.playlistCountdownIndicatorBar},N("div",{className:Ya.a.playlistCountdownIndicatorProgress,style:{width:a}}))))))}}}])&&cm(t.prototype,n),i}(B))||sm)||sm)||sm)||sm);function mm(e){return(mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function km(e,t){return(km=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Em(e,t){return!t||"object"!==mm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wm(e){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}gm.displayName="PlaylistCountdown";var Tm,Sm,Am,Om,Pm,Rm,Cm=(hm=on((function(e){return{playlist:e.engine.playlist,isPlaybackEnded:e.engine.isPlaybackEnded}})),ym=nr("PlaylistNextScreen"),hm(vm=sa(vm=ym(vm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&km(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wm(e);if(t){var i=wm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Em(this,n)}}(i);function i(){return bm(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidUpdate",value:function(e){!this._shouldRender(e)&&this._shouldRender(this.props)&&this.focusElement&&this.focusElement.focus()}},{key:"_shouldRender",value:function(e){return!!(e.playlist&&e.playlist.next&&e.playlist.next.sources&&e.isPlaybackEnded)}},{key:"onPosterClick",value:function(){this.props.player.playlist.playNext()}},{key:"_getPosterUrl",value:function(){var e=this.props.playlist.next;return e.sources.poster?e.sources.poster.indexOf("entry_id/".concat(e.sources.id))>-1&&-1===e.sources.poster.indexOf("/width/")?"".concat(e.sources.poster,"/width/").concat(384):e.sources.poster:""}},{key:"render",value:function(e){var t=this;if(this._shouldRender(e)){var n=e.playlist.next;return N("div",{className:Ya.a.playlistNextScreenOverlay},N("div",{className:Ya.a.playlistNextScreenContent},N("div",{id:"playlistNextScreenTextId",className:Ya.a.playlistNextScreenText},N(Rn,null,N("div",{className:Ya.a.playlistNextScreenTextTitle},N(On,{id:"playlist.next"}))),N("div",{className:Ya.a.playlistNextScreenTextName},"".concat(n.sources.metadata?n.sources.metadata.name:""))),N("div",{className:Ya.a.playlistNextScreenPosterPlaceholder},N("div",{className:Ya.a.playlistNextScreenPosterAspectRatio},N("div",{role:"button","aria-labelledby":"playlistNextScreenTextId",ref:function(e){return e?t.focusElement=e:void 0},tabIndex:"0",className:Ya.a.playlistNextScreenPoster,onClick:function(){return t.onPosterClick()},onKeyDown:function(e){e.keyCode===Wn.ENTER&&t.onPosterClick()}},N("div",{className:Ya.a.playlistNextScreenPosterImg,style:"background-image: url(".concat(this._getPosterUrl(),");")}),N(oc,{type:rc.Play}))))))}}}])&&_m(t.prototype,n),i}(B))||vm)||vm)||vm);function xm(e){return(xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Im(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lm(e,t){return(Lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mm(e,t){return!t||"object"!==xm(t)&&"function"!=typeof t?Nm(e):t}function Nm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jm(e){return(jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Um(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Cm.displayName="PlaylistNextScreen";var Fm,Bm,Vm,Gm=(Tm=on((function(e){return{isPictureInPictureSupported:e.engine.isPictureInPictureSupported,isInPictureInPicture:e.engine.isInPictureInPicture,playerSize:e.shell.playerSize}})),Sm=hp("PictureInPicture"),Am=nr("PictureInPicture"),Om=yu("PictureInPicture"),Pm=Dn({pictureInPictureText:"controls.pictureInPicture",pictureInPictureExitText:"controls.pictureInPictureExit"}),Tm(Rm=sa(Rm=Sm(Rm=Am(Rm=Om(Rm=Pm(Rm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lm(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jm(e);if(t){var i=jm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mm(this,n)}}(i);function i(){var e;Dm(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Um(Nm(e=r.call.apply(r,[this].concat(n))),"_keyboardEventHandlers",[{key:{code:Wn.P},action:function(){e.togglePip()}}]),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.registerKeyboardEvents(this._keyboardEventHandlers)}},{key:"togglePip",value:function(){var e=this.props.player;e.isInPictureInPicture()?(this.props.logger.debug("Exit Picture In Picture"),this.props.notifyClick(),e.exitPictureInPicture()):(this.props.logger.debug("Enter Picture In Picture"),this.props.notifyClick(),e.enterPictureInPicture())}},{key:"render",value:function(){var e=this;if(this.props.isPictureInPictureSupported&&this.props.playerSize!==Gu.EXTRA_SMALL)return N("div",{className:[Ya.a.controlButtonContainer,Ya.a.pictureInPicture].join(" ")},N(Cc,{label:this.props.isInPictureInPicture?this.props.pictureInPictureExitText:this.props.pictureInPictureText},N(jc,{tabIndex:"0","aria-label":this.props.isInPictureInPicture?this.props.pictureInPictureExitText:this.props.pictureInPictureText,className:this.props.isInPictureInPicture?[Ya.a.controlButton,Ya.a.isInPictureInPicture].join(" "):Ya.a.controlButton,onClick:function(){return e.togglePip()}},N(oc,{type:rc.PictureInPictureStart}),N(oc,{type:rc.PictureInPictureStop}))))}}])&&Im(t.prototype,n),i}(B))||Rm)||Rm)||Rm)||Rm)||Rm)||Rm);function Km(e){return(Km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wm(e,t){return(Wm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ym(e,t){return!t||"object"!==Km(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qm(e){return(qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Gm.displayName="PictureInPicture";var Xm=(Fm=on((function(e){return{poster:e.engine.poster,isInPictureInPicture:e.engine.isInPictureInPicture,isChangingSource:e.engine.isChangingSource}})),Bm=nr("PictureInPictureOverlay"),Fm(Vm=sa(Vm=Bm(Vm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wm(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qm(e);if(t){var i=qm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ym(this,n)}}(i);function i(){return Hm(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"_handleClick",value:function(){this.props.player.exitPictureInPicture()}},{key:"render",value:function(){if(this.props.isInPictureInPicture){var e={},t=[Ya.a.pictureInPicturePoster];return this.props.poster&&(e={backgroundImage:this.props.isChangingSource?"":"url(".concat(this.props.poster,")"),backgroundSize:"contain"},t.push(Ya.a.hasPoster)),N("div",null,N("div",{className:Ya.a.pictureInPictureOverlay},N("div",{className:t.join(" "),style:e,onMouseOver:function(e){return e.stopPropagation()}},N("div",{className:Ya.a.darkLayer})),N("div",{className:Ya.a.pictureInPictureControl},N(Rn,null,N("span",{className:Ya.a.pictureInPictureText},N(On,{id:"pictureInPicture.overlay_text"}))))))}}}])&&zm(t.prototype,n),i}(B))||Vm)||Vm)||Vm);function $m(e){return($m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qm(e,t){return(Qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zm(e,t){return!t||"object"!==$m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eb(e){return(eb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Xm.displayName="PictureInPictureOverlay";var tb,nb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qm(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eb(e);if(t){var i=eb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zm(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).setState({copySuccess:!1}),t}return t=i,(n=[{key:"copy",value:function(){var e=this;try{this.props.copy(),this.setState({copySuccess:!0}),setTimeout((function(){e.setState({copySuccess:!1})}),2e3)}catch(e){this.setState({copySuccess:!1})}}},{key:"render",value:function(e){var t=this,n=[Ya.a.btnCopyUrl].join(" ");return N(Rn,null,N("a",{role:"button",tabIndex:"0",ref:function(t){e.addAccessibleChild&&e.addAccessibleChild(t)},className:n+=this.state.copySuccess?" "+Ya.a.copied:"",onClick:function(){return t.copy()},onKeyDown:function(e){e.keyCode===Wn.ENTER&&t.copy()},title:N(On,{id:"copy.button"})},N(ic,{type:rc.Copy}),N(ic,{type:rc.Check})))}}])&&Jm(t.prototype,n),i}(B);function rb(e){return(rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ib(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ob(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ab(e,t){return(ab=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sb(e,t){return!t||"object"!==rb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ub(e){return(ub=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nb,"defaultProps",{icon:rc.Copy}),nb.displayName="CopyButton";var lb="main",cb="embed-options",fb=function(e){return N(jc,{ref:function(t){e.addAccessibleChild(t)},title:e.config.title,role:"link","aria-label":e.config.ariaLabel,className:[Ya.a.btnRounded,Ya.a[e.config.iconType],e.config.iconType].join(" "),onClick:function(){return r=t=e.config.shareUrl,(n=e.config.templateUrl)&&(r=n.replace("{shareUrl}",t)),void window.open(r,"_blank","width=580,height=580");var t,n,r}},N(oc,{style:"svg"===e.config.iconType?"background-image: url(".concat(e.config.svg,")"):"",type:e.config.iconType}))},pb=function(e){var t;return N("div",{className:e.copy?Ya.a.copyUrlRow:""},N("div",{className:[Ya.a.formGroup,Ya.a.hasIcon,Ya.a.inputCopyUrl].join(" "),style:"width: 350px;"},N("input",{tabIndex:"-1",type:"text",ref:function(e){return e?t=e:void 0},className:Ya.a.formControl,value:e.shareUrl,readOnly:!0}),N(oc,{type:rc.Link})),e.copy&&N(nb,{addAccessibleChild:e.addAccessibleChild,copy:function(){return n=t,e.isIos?n.setSelectionRange(0,9999):n.select(),document.execCommand("copy"),void n.blur();var n}}))},db=function(e){return N("div",{className:Ya.a.videoStartOptionsRow},N("div",{role:"checkbox","aria-checked":e.startFrom?"true":"false",ref:function(t){e.addAccessibleChild(t)},tabIndex:"0",onClick:function(t){t.preventDefault(),e.toggleStartFrom()},onKeyDown:function(t){t.keyCode===Wn.ENTER&&(t.preventDefault(),e.toggleStartFrom())},className:[Ya.a.checkbox,Ya.a.dInlineBlock].join(" ")},N("input",{type:"checkbox",id:"start-from",checked:e.startFrom}),N("label",{id:"start-from-label",htmlFor:"start-from"},N(On,{id:"share.start_video_at"}))),N("div",{className:[Ya.a.formGroup,Ya.a.dInlineBlock].join(" ")},N("input",{"aria-labelledby":"start-from-label",ref:function(t){e.addAccessibleChild(t)},type:"text",className:Ya.a.formControl,onChange:function(t){return e.handleStartFromChange(t)},value:Cf(e.startFromValue),style:"width: 72px;"})))},hb=on((function(e){return{open:e.share.overlayOpen}}),jr(uo))(tb=nr("ShareOverlay")(tb=gd(tb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ab(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ub(e);if(t){var i=ub(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return sb(this,n)}}(i);function i(){return ib(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentWillMount",value:function(){this.isIos="iOS"===this.props.player.env.os.name,this.setState({view:lb,startFrom:!1,startFromValue:Math.floor(this.props.player.currentTime)})}},{key:"componentDidUpdate",value:function(e,t){t.view!=this.state.view&&this.props.focusOnDefault()}},{key:"componentDidMount",value:function(){this.props.setIsModal(!0)}},{key:"_transitionToState",value:function(e){this.setState({view:e})}},{key:"getShareUrl",value:function(){var e=this.props.shareUrl;return this.state.startFrom&&(e+="?start=".concat(this.state.startFromValue)),e}},{key:"getEmbedCode",value:function(){var e=this.props.embedUrl;return this.state.startFrom&&(e+="?start=".concat(this.state.startFromValue)),'<iframe src="'.concat(e,'" style="width: 560px;height: 395px" allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0" allow="accelerometer *; autoplay *; encrypted-media *; gyroscope *; picture-in-picture *"/>')}},{key:"_getEmailTemplate",value:function(){var e="this video",t=this.props.player;t.config.sources&&t.config.sources.metadata&&t.config.sources.metadata.name&&(e=t.config.sources.metadata.name);var n=encodeURIComponent("Check out ".concat(e)),r=encodeURIComponent("Check out ".concat(e,": ").concat(this.getShareUrl()));return"mailto:?subject=".concat(n,"&body=").concat(r)}},{key:"_toggleStartFrom",value:function(){this.setState((function(e){return{startFrom:!e.startFrom}}))}},{key:"_handleStartFromChange",value:function(e){var t=function(e){var t=e.split(":"),n=0;if(2===t.length){if(parseInt(t[0])>59||parseInt(t[1])>59)return 0;n+=60*parseInt(t[0]),n+=parseInt(t[1])}return n}(e.target.value);t>=this.props.player.duration&&this.setState({startFromValue:1}),this.setState({startFromValue:t})}},{key:"_createSocialNetworks",value:function(e){var t=this;return e.map((function(e){return"default"===e.iconType&&(e.iconType=e.name,e.shareUrl=t.props.shareUrl),N(fb,{key:e.name,config:e,addAccessibleChild:t.props.addAccessibleChild})}))}},{key:"renderMainState",value:function(){var e=this;return N("div",{className:this.state.view===lb?"overlay-screen active":"overlay-screen"},N("div",{className:Ya.a.title},N(On,{id:"share.title"})),N("div",{className:Ya.a.shareMainContainer},N("div",{className:Ya.a.shareIcons},this._createSocialNetworks(this.props.socialNetworks),N(Rn,null,N("a",{role:"button",tabIndex:"0",ref:function(t){e.props.addAccessibleChild(t)},className:[Ya.a.btnRounded,Ya.a.emailShareBtn].join(" "),href:this._getEmailTemplate(),title:N(On,{id:"share.email"})},N(oc,{type:rc.Email}))),N(Rn,null,N(jc,{"aria-haspopup":"true",ref:function(t){e.props.addAccessibleChild(t)},className:[Ya.a.btnRounded,Ya.a.embedShareBtn].join(" "),onClick:function(){return e._transitionToState(cb)},title:N(On,{id:"share.embed"})},N(oc,{type:rc.Embed})))),N("div",{className:Ya.a.linkOptionsContainer},N(pb,{addAccessibleChild:this.props.addAccessibleChild,shareUrl:this.getShareUrl(),copy:!0,isIos:this.isIos}),this.props.enableTimeOffset?N(db,{addAccessibleChild:this.props.addAccessibleChild,startFrom:this.state.startFrom,startFromValue:this.state.startFromValue,handleStartFromChange:function(t){return e._handleStartFromChange(t)},toggleStartFrom:function(){return e._toggleStartFrom()}}):void 0)))}},{key:"renderOptionsState",value:function(e){var t=this;return N("div",{className:this.state.view===cb?"overlay-screen active":"overlay-screen"},N("div",{className:Ya.a.title},e.title),N("div",{className:Ya.a.linkOptionsContainer},N(pb,{addAccessibleChild:this.props.addAccessibleChild,shareUrl:e.shareUrl,copy:!0,isIos:this.isIos}),this.props.enableTimeOffset?N(db,{addAccessibleChild:this.props.addAccessibleChild,startFrom:this.state.startFrom,startFromValue:this.state.startFromValue,handleStartFromChange:function(e){return t._handleStartFromChange(e)},toggleStartFrom:function(){return t._toggleStartFrom()}}):void 0))}},{key:"renderStateContent",value:function(){switch(this.props.clearAccessibleChildren(),this.state.view){case cb:return this.renderOptionsState({title:N(On,{id:"share.embed_options"}),shareUrl:this.getEmbedCode()});case lb:default:return this.renderMainState()}}},{key:"render",value:function(e){var t=this;return N(ad,{addAccessibleChild:this.props.addAccessibleChild,handleKeyDown:function(e){return t.props.handleKeyDown(e)},open:!0,onClose:function(){return e.onClose()},type:"share"},this.renderStateContent())}}])&&ob(t.prototype,n),i}(B))||tb)||tb)||tb;hb.displayName="ShareOverlay";var yb,vb,gb,mb,bb=[{name:"facebook",templateUrl:"https://www.facebook.com/sharer/sharer.php?u={shareUrl}",title:"Share on Facebook",ariaLabel:"Share on Facebook",iconType:"default",svg:""},{name:"linkedin",templateUrl:"https://www.linkedin.com/shareArticle?mini=true&url={shareUrl}",title:"Share on Linkedin",ariaLabel:"Share on Linkedin",iconType:"default",svg:""},{name:"twitter",templateUrl:"https://twitter.com/share?url={shareUrl}",title:"Share on Twitter",ariaLabel:"Share on Twitter",iconType:"default",svg:""}];function _b(e){return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wb(e,t){return(wb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tb(e,t){return!t||"object"!==_b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sb(e){return(Sb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ab,Ob=(yb=on((function(e){return{open:e.share.overlayOpen,isPlaying:e.engine.isPlaying,config:e.config.components.share}}),jr(uo)),vb=nr("Share"),gb=Dn({shareTxt:"controls.share"}),yb(mb=sa(mb=vb(mb=gb(mb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wb(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sb(e);if(t){var i=Sb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tb(this,n)}}(i);function i(){return kb(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"toggleOverlay",value:function(){var e=this;this.setState((function(t){return{overlay:!t.overlay,previousIsPlaying:e.props.isPlaying||t.previousIsPlaying}}),(function(){e.props.toggleShareOverlay(e.state.overlay),e.state.overlay?e.props.player.pause():e.state.previousIsPlaying&&(e.props.player.play(),e.setState({previousIsPlaying:!1}))}))}},{key:"_getMergedShareConfig",value:function(){var e=this.props.config.socialNetworks||[];return e.concat(bb.filter((function(t){return!e.find((function(e){return e.name===t.name}))})))}},{key:"render",value:function(){var e=this,t=this.props.config,n=t.embedUrl,r=t.enable,i=t.shareUrl,o=t.enableTimeOffset;if(r&&i&&n){var a=this._getMergedShareConfig(),s="#".concat(this.props.player.config.targetId," .overlay-portal");return this.state.overlay?Xe(N(hb,{shareUrl:i,embedUrl:n,enableTimeOffset:o,socialNetworks:a,player:this.props.player,onClose:function(){return e.toggleOverlay()}}),document.querySelector(s)):N("div",{className:Ya.a.controlButtonContainer},N(Cc,{label:this.props.shareTxt,type:Rc.BottomLeft},N(jc,{"aria-haspopup":"true",className:Ya.a.controlButton,onClick:function(){return e.toggleOverlay()},"aria-label":this.props.shareTxt},N(oc,{type:rc.Share}))))}}}])&&Eb(t.prototype,n),i}(B))||mb)||mb)||mb)||mb);function Pb(e){return(Pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xb(e,t){return(xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Db(e,t){return!t||"object"!==Pb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ib(e){return(Ib=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Ob.displayName="Share";var Lb,Mb,Nb,jb=on((function(e){return{isCasting:e.engine.isCasting,isPlaybackEnded:e.engine.isPlaybackEnded}}))(Ab=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xb(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ib(e);if(t){var i=Ib(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Db(this,n)}}(i);function i(){return Rb(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){var t=e.disabled,n=e.isPlaybackEnded,r=e.isCasting,i=e.leftControls,o=e.rightControls,a=[Ya.a.topBar];return t&&a.push(Ya.a.disabled),r&&n&&a.push(Ya.a.hide),N("div",{className:a.join(" ")},N(mr,{name:"TopBar"},e.children,N("div",{className:Ya.a.leftControls},N(mr,{name:"TopBarLeftControls"},i)),N("div",{className:Ya.a.rightControls},N(mr,{name:"TopBarRightControls"},o))))}}])&&Cb(t.prototype,n),i}(B))||Ab;function Ub(e){return(Ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vb(e,t){return(Vb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gb(e,t){return!t||"object"!==Ub(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kb(e){return(Kb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}jb.displayName="TopBar";var Hb,zb=(Lb=on((function(e){return{isMobile:e.shell.isMobile,playerSize:e.shell.playerSize,config:e.config.components.logo}})),Mb=nr("Logo"),Lb(Nb=sa(Nb=Mb(Nb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vb(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kb(e);if(t){var i=Kb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gb(this,n)}}(i);function i(){return Fb(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"_shouldRender",value:function(){return!(0===Object.keys(this.props.config).length&&this.props.config.constructor===Object)}},{key:"render",value:function(e){if(this._shouldRender()){var t=[Gu.TINY,Gu.EXTRA_SMALL,Gu.SMALL].includes(this.props.playerSize);return e.config.img&&!t?N("div",{className:[Ya.a.controlButtonContainer,Ya.a.controlLogo].join(" "),"aria-label":N(On,{id:"controls.logo"}),title:e.config.text},N("a",{className:Ya.a.controlButton,href:e.config.url,target:"_blank",rel:"noopener noreferrer"},N("img",{className:Ya.a.icon,src:e.config.img}))):void 0}}}])&&Bb(t.prototype,n),i}(B))||Nb)||Nb)||Nb);function Wb(e){return(Wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xb(e,t){return(Xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $b(e,t){return!t||"object"!==Wb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jb(e){return(Jb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}zb.displayName="Logo";var Qb,Zb=sa(Hb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xb(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jb(e);if(t){var i=Jb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $b(this,n)}}(i);function i(){return Yb(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this.props.children;return N("div",{className:Ya.a.interactiveArea},N("div",{style:{pointerEvents:"auto"}},N(mr,{name:"InteractiveArea"},e)))}}])&&qb(t.prototype,n),i}(B))||Hb;function e_(e){return(e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r_(e,t){return(r_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i_(e,t){return!t||"object"!==e_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o_(e){return(o_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a_,s_=on((function(e){return{videoStyles:e.shell.layoutStyles.video}}))(Qb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r_(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o_(e);if(t){var i=o_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return i_(this,n)}}(i);function i(){return t_(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"shouldComponentUpdate",value:function(e){return e.videoStyles!==this.props.videoStyles}},{key:"render",value:function(){var e=this.props,t=e.videoStyles,n=e.children;return N("div",{style:t,className:Ya.a.videoArea},N("div",{style:{pointerEvents:"auto"}},N(mr,{name:"VideoArea"},n)))}}])&&n_(t.prototype,n),i}(B))||Qb;function u_(e){return(u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f_(e,t){return(f_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p_(e,t){return!t||"object"!==u_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d_(e){return(d_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h_,y_=mi({allowSidePanels:!0,allowPlayerArea:!0})(a_=hp("Playback")(a_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f_(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d_(e);if(t){var i=d_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p_(this,n)}}(i);function i(){return l_(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.updateIsKeyboardEnabled(!0)}},{key:"render",value:function(){return N("div",{className:Ya.a.playbackGuiWrapper},N(mr,{name:"PresetArea"},N("div",{className:Ya.a.playerGui,id:"player-gui"},N(_c,null),N(s_,null,N(Jv,null)),N(Hl,null,(function(e){var t=e.containerRef;return N(F,null,N(Ml,null),N(xv,null),N(Vv,null),N(Xm,null),N(um,{className:Ya.a.centerPlaybackControls}),N(Cm,null),N(Zb,null),N(jb,{rightControls:N(Ob,null)}),N(kv,{leftControls:N(F,null,N(um,null),N(mf,{step:10}),N(Rf,{step:10}),N(hv,{format:"current / total"})),rightControls:N(F,null,N(Jy,null),N(Zp,null),N(Oy,null),N(gh,null),N(lg,null),N(Gm,null),N(Vy,null),N(zb,null))},N(Vp,{showFramePreview:!0,showTimeBubble:!0,playerContainer:t})),N(gm,null),N(Hc,null),N(gg,null),N(Og,null))})))))}}])&&c_(t.prototype,n),i}(B))||a_)||a_;function v_(e){return N(y_,e)}function g_(e){return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m_(){return(m_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function __(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k_(e,t){return(k_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E_(e,t){return!t||"object"!==g_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w_(e){return(w_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}y_.displayName="Playback";var T_,S_,A_,O_=on((function(e){return{adProgress:e.engine.adProgress}}))(h_=nr("TimeDisplayAdsContainer")(h_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k_(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w_(e);if(t){var i=w_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E_(this,n)}}(i);function i(){return b_(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){return N(ov,m_({currentTime:Math.round(e.adProgress.currentTime),duration:Math.round(e.adProgress.duration)},e))}}])&&__(t.prototype,n),i}(B))||h_)||h_;function P_(e){return(P_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x_(e,t){return(x_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D_(e,t){return!t||"object"!==P_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I_(e){return(I_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}O_.displayName="TimeDisplayAdsContainer";var L_,M_=(T_=on((function(e){return{currentTime:e.engine.adProgress.currentTime,duration:e.engine.adProgress.duration,adSkipTimeOffset:e.engine.adSkipTimeOffset,adSkippableState:e.engine.adSkippableState}})),S_=nr("AdSkip"),T_(A_=sa(A_=S_(A_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x_(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I_(e);if(t){var i=I_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D_(this,n)}}(i);function i(){return R_(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"getSkipTimeOffset",value:function(){return Math.ceil(this.props.adSkipTimeOffset-this.props.currentTime)}},{key:"render",value:function(){var e=this;return this.props.adSkippableState?this.getSkipTimeOffset()<=0?N(Rn,null,N("a",{className:[Ya.a.btn,Ya.a.btnBranded,Ya.a.btnSkipAd].join(" "),onClick:function(){return e.props.player.ads.skipAd()}},N(On,{id:"ads.skip_ad"}))):N(Rn,null,N("span",{className:Ya.a.skipAd},N(On,{id:"ads.skip_in"})," "+this.getSkipTimeOffset())):void 0}}])&&C_(t.prototype,n),i}(B))||A_)||A_)||A_);function N_(e){return(N_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F_(e,t){return(F_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B_(e,t){return!t||"object"!==N_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V_(e){return(V_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}M_.displayName="AdSkip";var G_=on((function(e){return{url:e.engine.adUrl}}))(L_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F_(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V_(e);if(t){var i=V_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return B_(this,n)}}(i);function i(){return j_(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(e){return N("a",{href:e.url,target:"_blank",rel:"noreferrer",className:[Ya.a.btn,Ya.a.btnDarkTransparent,Ya.a.learnMore].join(" ")},N(On,{id:"ads.learn_more"}))}}])&&U_(t.prototype,n),i}(B))||L_;function K_(e){return(K_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W_(e,t){return(W_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y_(e,t){return!t||"object"!==K_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q_(e){return(q_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}G_.displayName="AdLearnMore";var X_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W_(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q_(e);if(t){var i=q_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Y_(this,n)}}(i);function i(){return H_(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return N("span",{className:Ya.a.adNotice},N(On,{id:"ads.ad_notice"}))}}])&&z_(t.prototype,n),i}(B);X_.displayName="AdNotice";var $_,J_,Q_,Z_=hp("Ads")((function(e,t){if(e.updateIsKeyboardEnabled(!0),function(e,t){var n=e.state.shell.isMobile&&!t.player.env.isIPadOS,r=!1;try{var i=t.player.config.plugins.ima.adsRenderingSettings;r=i&&i.useStyledLinearAds}catch(e){}return n||r}(e,t))return N("div",{className:Ya.a.adGuiWrapper},N(mr,{name:"PresetArea"},N("div",{className:Ya.a.playerGui,id:"player-gui"},N(Hl,null,N(Ml,null),N(Vv,{hasTopBar:!0}),N(jb,{disabled:!0,leftControls:tk(0,t)?void 0:N(X_,null)})))));var n=!1,r=!1;return N("div",{className:Ya.a.adGuiWrapper},N(mr,{name:"PresetArea"},N("div",{className:Ya.a.playerGui,id:"player-gui"},N(Hl,null,N(Ml,null),N(Vv,{hasTopBar:!0}),N(jb,{disabled:!0,leftControls:tk(0,t)?void 0:N(X_,null),rightControls:n?N(G_,null):void 0}),r?N(M_,null):void 0,N(um,{className:Ya.a.centerPlaybackControls}),N(kv,{leftControls:N(F,null,N(um,null),N(O_,null)),rightControls:N(F,null,N(Zp,null),N(Vy,null))})))))}));function ek(e){return N(Z_,e)}function tk(e,t){var n=t.player.ads.getAd();return n&&n.bumper}function nk(e){return(nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ik(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ok(e,t){return(ok=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ak(e,t){return!t||"object"!==nk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sk(e){return(sk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Z_.displayName="Ads";var uk,lk,ck,fk,pk=($_=on((function(e){return{hasError:e.engine.hasError}}),jr(Li)),J_=nr("ErrorOverlay"),$_(Q_=sa(Q_=J_(Q_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ok(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sk(e);if(t){var i=sk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ak(this,n)}}(i);function i(){return rk(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"copyError",value:function(){var e=window.getSelection(),t=document.createRange();t.selectNode(this.sessionEl),e.removeAllRanges(),e.addRange(t),document.execCommand("copy")}},{key:"handleClick",value:function(){var e=this.props.player.getMediaInfo();this.props.player.loadMedia(e)}},{key:"renderSessionID",value:function(){var e=this,t=this.props.player,n=t&&t.config&&t.config.session&&t.config.session.id;return n?N("div",{className:Ya.a.linkOptionsContainer},N("div",{className:Ya.a.copyUrlRow},N("div",{ref:function(t){return t?e.sessionEl=t:void 0},className:Ya.a.errorSession},N(On,{id:"error.default_session_text"})," "," "+n),N(nb,{copy:function(){return e.copyError()}}))):void 0}},{key:"renderRetryButton",value:function(){var e=this;if(this.props.player.getMediaInfo())return N("div",{className:Ya.a.controlButtonContainer,onClick:function(){return e.handleClick()}},N(jc,{className:[Ya.a.controlButton,Ya.a.retryBtn].join(" ")},N(On,{id:"error.retry"})))}},{key:"render",value:function(){return this.props&&this.props.hasError?N("div",{className:"overlay-portal"},N(ad,{open:!0,permanent:!0,type:"error"},N("div",{className:Ya.a.errorOverlay},N("p",{className:Ya.a.errorText}),N("div",{className:Ya.a.svgContainer},N("svg",{width:"124",height:"110",viewBox:"0 0 124 110",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},N("defs",null,N("polygon",{id:"path-1",points:"58.0906294 70 50.7492774 88.8201923 60.1881585 88.8201923 54.22331 107 73.8876457 84.2307692 64.0554779 84.2307692 70.6102564 70"})),N("g",{id:"Player-v3",fill:"none",fillRule:"evenodd"},N("g",{id:"Desktop---Default---Error",transform:"translate(-365 -103)"},N("g",{id:"Cloud",transform:"translate(366 104)"},N("path",{d:"M63.5662942,30.179068 C61.0506558,29.4162424 58.3339083,29 55.5,29 C42.5213084,29 32,37.7304474 32,48.5 C32,48.6497107 32.0020332,48.7990274 32.0060779,48.947932 L32.0060779,48.947932 C20.975194,51.4855427 13,58.8323573 13,67.5 C13,71.2164926 14.4662425,74.6901504 17.0109182,77.6459815 C17.3714483,67.0552274 26.624181,58.1393462 39.3259742,55.0194402 L39.3259742,55.0194402 C39.3212229,54.8326784 39.3188345,54.6453999 39.3188345,54.4576271 C39.3188345,41.956968 49.9040267,31.6467441 63.5662942,30.179068 Z",id:"Combined-Shape",fillOpacity:".08",fill:"#2E2E2E"}),N("path",{d:"M31.0032591,48.1614253 C31.2192187,36.9518144 42.1402046,28 55.5,28 C64.749856,28 73.0886419,32.3249294 77.2653132,39.0733535 C84.8537029,39.7078593 90.7909537,44.3809769 90.9945979,50.1913309 C102.911627,51.5069936 112,59.4322556 112,69 C112,79.5603607 100.981582,88 87.5,88 C84.4639246,88 81.503099,87.5724513 78.7283559,86.7489741 C74.6488476,88.1943213 69.4726739,89 64,89 C58.7323857,89 53.737093,88.2538247 49.7263698,86.9058736 C46.7827225,87.6274324 43.6763865,88 40.5,88 C24.8190401,88 12,78.9101352 12,67.5 C12,58.659353 19.7679337,51.004786 31.0032591,48.1614253 Z",id:"Combined-Shape",stroke:"#666",strokeWidth:"2"}),N("g",{id:"Path-8",strokeLinecap:"round",strokeLinejoin:"round"},N("use",{fill:"#666",xlinkHref:"#path-1"}),N("path",{stroke:"#1D1D1D",strokeWidth:"2",d:"M65.6170644,83.2307692 L76.0725949,83.2307692 L51.7165365,111.432521 L58.8076053,89.8201923 L49.2858112,89.8201923 L57.4073201,69 L72.1718429,69 L65.6170644,83.2307692 Z"})),N("path",{d:"M59.9991166,0 L59.9991166,7.04768642 C59.9991166,7.59997117 60.4468318,8.04768642 60.9991166,8.04768642 C61.5514013,8.04768642 61.9991166,7.59997117 61.9991166,7.04768642 L61.9991166,0 C61.9991166,-0.55228475 61.5514013,-1 60.9991166,-1 C60.4468318,-1 59.9991166,-0.55228475 59.9991166,0 Z M95.3084192,8.85153517 L90.7782537,14.2503762 C90.4232519,14.6734508 90.4784359,15.3042064 90.9015106,15.6592082 C91.3245852,16.01421 91.9553408,15.9590261 92.3103426,15.5359514 L96.8405081,10.1371104 C97.1955099,9.71403572 97.140326,9.08328013 96.7172513,8.72827833 C96.2941766,8.37327654 95.663421,8.4284605 95.3084192,8.85153517 Z M121.628196,36.6783398 L114.687579,37.9021577 C114.143685,37.9980609 113.780517,38.5167193 113.87642,39.0606136 C113.972323,39.6045079 114.490981,39.9676764 115.034876,39.8717732 L121.975492,38.6479553 C122.519386,38.552052 122.882555,38.0333936 122.786652,37.4894993 C122.690748,36.945605 122.17209,36.5824365 121.628196,36.6783398 Z M0.0227411046,38.6479553 L6.96335733,39.8717732 C7.50725163,39.9676764 8.02591002,39.6045079 8.12181326,39.0606136 C8.2177165,38.5167193 7.85454799,37.9980609 7.31065368,37.9021577 L0.37003746,36.6783398 C-0.173856844,36.5824365 -0.69251523,36.945605 -0.788418471,37.4894993 C-0.884321711,38.0333936 -0.521153199,38.552052 0.0227411046,38.6479553 Z M25.157725,10.1371104 L29.6878905,15.5359514 C30.0428923,15.9590261 30.6736479,16.01421 31.0967226,15.6592082 C31.5197972,15.3042064 31.5749812,14.6734508 31.2199794,14.2503762 L26.6898139,8.85153517 C26.3348121,8.4284605 25.7040565,8.37327654 25.2809818,8.72827833 C24.8579072,9.08328013 24.8027232,9.71403572 25.157725,10.1371104 Z",id:"Path-9",fill:"#666",fillRule:"nonzero"})))))),N("div",{className:Ya.a.headline},this.props.errorHead?this.props.errorHead:N(On,{id:"error.default_error"})),this.renderSessionID(),this.renderRetryButton()))):void 0}}])&&ik(t.prototype,n),i}(B))||Q_)||Q_)||Q_);function dk(){return N("div",{className:Ya.a.playbackGuiWrapper},N(mr,{name:"PresetArea"},N(Hl,null,N(pk,null))))}function hk(e){return N(dk,e)}function yk(e){return(yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mk(e,t){return(mk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bk(e,t){return!t||"object"!==yk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _k(e){return(_k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}pk.displayName="ErrorOverlay",dk.displayName="Error";var kk,Ek,wk,Tk,Sk=(uk=on((function(e){return{currentTime:e.seekbar.currentTime,duration:e.engine.duration,isDraggingActive:e.seekbar.draggingActive,isMobile:e.shell.isMobile,poster:e.engine.poster,isDvr:e.engine.isDvr}}),jr(Vi)),lk=yu("SeekBarLivePlaybackContainer"),ck=nr("SeekBarLivePlaybackContainer"),uk(fk=sa(fk=Ma(fk=lk(fk=ck(fk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mk(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_k(e);if(t){var i=_k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}(i);function i(){return vk(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.eventManager.listen(this.props.player,this.props.player.Event.TIME_UPDATE,(function(){e.props.isDraggingActive||e.props.updateCurrentTime(e.props.player.currentTime)}))}},{key:"render",value:function(e){var t=this;if(e.isDvr)return N(Pp,{playerElement:this.props.playerContainer,showTimeBubble:this.props.showTimeBubble,changeCurrentTime:function(e){t.props.player.isOnLiveEdge()&&e===t.duration||(t.props.player.currentTime=e)},playerPoster:this.props.poster,updateSeekbarDraggingStatus:function(e){return t.props.updateSeekbarDraggingStatus(e)},updateSeekbarHoverActive:function(e){return t.props.updateSeekbarHoverActive(e)},updateCurrentTime:function(e){return t.props.updateCurrentTime(e)},isDvr:this.props.isDvr,currentTime:this.props.currentTime,duration:this.duration,isDraggingActive:this.props.isDraggingActive,isMobile:this.props.isMobile,notifyChange:function(e){return t.props.notifyChange(e)}})}},{key:"duration",get:function(){return this.props.player.isOnLiveEdge()?this.props.currentTime:Math.max(this.props.duration,this.props.currentTime)}}])&&gk(t.prototype,n),i}(B))||fk)||fk)||fk)||fk)||fk);function Ak(e){return(Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ok(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rk(e,t){return(Rk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ck(e,t){return!t||"object"!==Ak(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xk(e){return(xk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Sk.displayName="SeekBarLivePlaybackContainer";var Dk,Ik=(kk=on((function(e){return{isLive:e.engine.isLive,isDvr:e.engine.isDvr,currentTime:e.engine.currentTime,duration:e.engine.duration}})),Ek=nr("LiveTag"),wk=yu("LiveTag"),kk(Tk=sa(Tk=Ek(Tk=wk(Tk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rk(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ck(this,n)}}(i);function i(){return Ok(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"isOnLiveEdge",value:function(){return this.props.player.isOnLiveEdge()}},{key:"onClick",value:function(){this.isOnLiveEdge()||(this.props.player.seekToLiveEdge(),this.props.player.paused&&this.props.player.play()),this.props.notifyClick()}},{key:"render",value:function(e){var t=this,n=[Ya.a.liveTag];return e.isDvr&&!this.isOnLiveEdge()&&n.push(Ya.a.nonLivePlayhead),N("div",{tabIndex:"0",className:n.join(" "),onClick:function(){return t.onClick()},onKeyDown:function(e){e.keyCode===Wn.ENTER&&t.onClick()}},N(On,{id:"controls.live"}))}}])&&Pk(t.prototype,n),i}(B))||Tk)||Tk)||Tk)||Tk);function Lk(e){return(Lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jk(e,t){return(jk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uk(e,t){return!t||"object"!==Lk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fk(e){return(Fk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Ik.displayName="LiveTag";var Bk=mi({allowSidePanels:!0,allowPlayerArea:!0})(Dk=hp("Live")(Dk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jk(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fk(e);if(t){var i=Fk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Uk(this,n)}}(i);function i(){return Mk(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.updateIsKeyboardEnabled(!0)}},{key:"render",value:function(){return N("div",{className:Ya.a.playbackGuiWrapper},N(mr,{name:"PresetArea"},N("div",{className:Ya.a.playerGui,id:"player-gui"},N(_c,null),N(s_,null,N(Jv,null)),N(Hl,null,(function(e){var t=e.containerRef;return N(F,null,N(Ml,null),N(xv,null),N(Vv,null),N(Xm,null),N(um,{className:Ya.a.centerPlaybackControls}),N(Zb,null),N(jb,{rightControls:N(Ob,null)}),N(kv,{leftControls:N(F,null,N(um,null),N(Ik,null)),rightControls:N(F,null,N(Jy,null),N(Zp,null),N(Oy,null),N(gh,null),N(lg,null),N(Gm,null),N(Vy,null),N(zb,null))},N(Sk,{showFramePreview:!0,showTimeBubble:!0,playerContainer:t})),N(Hc,null),N(gg,null),N(Og,null))})))))}}])&&Nk(t.prototype,n),i}(B))||Dk)||Dk;function Vk(e){return N(Bk,e)}function Gk(e){return(Gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kk(e,t){return(Kk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hk(e,t){return!t||"object"!==Gk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zk(e){return(zk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Bk.displayName="Live";var Wk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kk(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zk(e);if(t){var i=zk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hk(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.PLAYER_RESIZE)).payload={playerSize:e},r}return n}(ha);function Yk(e){return(Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qk(e,t){return(qk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xk(e,t){return!t||"object"!==Yk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $k(e){return($k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qk(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$k(e);if(t){var i=$k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xk(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.GUI_RESIZE)).payload={guiSize:e},r}return n}(ha);function Qk(e){return(Qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zk(e,t){return(Zk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eE(e,t){return!t||"object"!==Qk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tE(e){return(tE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nE,rE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zk(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tE(e);if(t){var i=tE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return eE(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,ha.Type.VIDEO_RESIZE)).payload={videoSize:e},r}return n}(ha);function iE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oE={COMPONENT_CLICKED:"".concat("event-dispatcher-middleware","/COMPONENT_CLICKED"),COMPONENT_CHANGED:"".concat("event-dispatcher-middleware","/COMPONENT_CHANGED")};function aE(e,t,n){var r=e.getState().engine;r.adBreak?r.adIsPlaying?n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PAUSE)):n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PLAY)):r.isPlaying?n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PAUSE)):n.dispatchEvent(new ha(ha.Type.USER_CLICKED_PLAY))}function sE(e,t,n){e.getState().engine.muted?n.dispatchEvent(new ha(ha.Type.USER_CLICKED_MUTE)):n.dispatchEvent(new ha(ha.Type.USER_CLICKED_UNMUTE))}function uE(e,t,n){n.isFullscreen()?n.dispatchEvent(new ha(ha.Type.USER_EXITED_FULL_SCREEN)):n.dispatchEvent(new ha(ha.Type.USER_ENTERED_FULL_SCREEN))}var lE=(iE(nE={},Wn.SPACE,(function(e,t,n){aE(e,0,n)})),iE(nE,Wn.UP,(function(e,t,n){n.dispatchEvent(new Hs(t.payload.volume))})),iE(nE,Wn.DOWN,(function(e,t,n){n.dispatchEvent(new Hs(t.payload.volume))})),iE(nE,Wn.F,(function(e,t,n){uE(0,0,n)})),iE(nE,Wn.P,(function(e,t,n){!function(e,t,n){n.isInPictureInPicture()?n.dispatchEvent(new ha(ha.Type.USER_EXITED_PICTURE_IN_PICTURE)):n.dispatchEvent(new ha(ha.Type.USER_ENTERED_PICTURE_IN_PICTURE))}(0,0,n)})),iE(nE,Wn.ESC,(function(e,t,n){uE(0,0,n)})),iE(nE,Wn.LEFT,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),iE(nE,Wn.RIGHT,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),iE(nE,Wn.HOME,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),iE(nE,Wn.END,(function(e,t,n){n.dispatchEvent(new ms(t.payload.from,t.payload.to))})),iE(nE,Wn.M,(function(e,t,n){sE(e,0,n)})),iE(nE,Wn.SEMI_COLON,(function(e,t,n){n.dispatchEvent(new ws(t.payload.speed))})),iE(nE,Wn.PERIOD,(function(e,t,n){n.dispatchEvent(new ws(t.payload.speed))})),iE(nE,Wn.COMMA,(function(e,t,n){n.dispatchEvent(new ws(t.payload.speed))})),iE(nE,Wn.C,(function(e,t,n){n.dispatchEvent(new rs(t.payload.track))})),nE),cE=Kn("UILoggerMiddleware"),fE=function(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return Bt({},n,{dispatch:r=Vt.apply(void 0,o)(n.dispatch)})}}}(function(e){return function(t){return function(t){return function(n){e.debugActions&&cE.debug("Action fired",n),t(n)}}}}(t),function(e){return function(t){return function(n){return function(r){switch(r.type){case oE.COMPONENT_CLICKED:!function(e,t,n){switch(t.name){case"Keyboard":lE[t.payload.key](e,t,n);break;case"OverlayAction":!function(e,t,n){"PlayPause"===t.payload.type?aE(e,0,n):"Fullscreen"===t.payload.type&&uE(0,0,n)}(e,t,n);break;case"Settings":!function(e,t,n){t.payload.type===n.Track.VIDEO?n.dispatchEvent(new ds(t.payload.track)):n.dispatchEvent(new ws(t.payload.speed))}(0,t,n);break;case"CVAAOverlay":n.dispatchEvent(new us(t.payload.textStyle));break;case"Fullscreen":uE(0,0,n);break;case"Language":!function(e,t,n){t.payload.type===n.Track.AUDIO?n.dispatchEvent(new Qa(t.payload.track)):t.payload.type===n.Track.TEXT&&n.dispatchEvent(new rs(t.payload.track))}(0,t,n);break;case"Shell":n.dispatchEvent(new ha(ha.Type.UI_CLICKED));break;case"Rewind":n.dispatchEvent(new Is(t.payload.from,t.payload.to));break;case"Forward":n.dispatchEvent(new Us(t.payload.from,t.payload.to));break;case"LiveTag":n.dispatchEvent(new ha(ha.Type.USER_CLICKED_LIVE_TAG));break;case"PrePlaybackPlayOverlay":case"PlayPause":aE(e,0,n);break;case"Volume":sE(e,0,n)}}(t,r,e);break;case oE.COMPONENT_CHANGED:!function(e,t,n){switch(t.name){case"Volume":n.dispatchEvent(new Hs(t.payload.volume));break;case"SeekBarPlaybackContainer":n.dispatchEvent(new ms(t.payload.from,t.payload.to));break;case"ActivePreset":n.dispatchEvent(new ha(ha.Type.UI_PRESET_CHANGE,t.payload))}}(0,r,e);break;case Ar.UPDATE_PLAYER_HOVER_STATE:!function(e,t,n){var r=e.getState().engine,i=e.getState().shell;!r.adBreak&&r.isPlaying&&i.playerHover!==t.hover&&n.dispatchEvent(new Ps(t.hover))}(t,r,e)}switch(n(r),r.type){case Ar.UPDATE_GUI_CLIENT_RECT:!function(e,t,n){var r=e.getState().shell.guiClientRect;n.dispatchEvent(new Jk(r))}(t,0,e);break;case Ar.UPDATE_PLAYER_CLIENT_RECT:!function(e,t,n){var r=e.getState().shell.playerClientRect;n.dispatchEvent(new Wk(r))}(t,0,e);break;case Ar.UPDATE_VIDEO_CLIENT_RECT:!function(e,t,n){var r=e.getState().shell.videoClientRect;n.dispatchEvent(new rE(r))}(t,0,e)}}}}}(e))};function pE(e,t){if(e){if("string"==typeof e)return dE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dE(e,t):void 0}}function dE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vE=function(){function e(t,n){var r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yE(this,"_translations",{en:Wo.en}),yE(this,"_locale","en"),n.log&&n.log.level&&this.LogLevel[n.log.level]&&Gn(this.LogLevel[n.log.level]),n.log&&"function"==typeof n.log.handler&&(r=n.log.handler,Fn.setHandler((function(e,t){return r(e,t)}))),this._uiComponents=function(e){return function(e){if(Array.isArray(e))return dE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||pE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.uiComponents||[]),this.player=t,this.targetId=n.targetId,this._createStore(n),this.setConfig(n),this._setLocaleTranslations(n),i=this.player.env,Wn.SEMI_COLON="firefox"===i.browser.name.toLowerCase()?59:186}var t,n;return t=e,(n=[{key:"setConfig",value:function(e,t){t?this.store.dispatch(Si.updateComponentConfig(t,e)):this.store.dispatch(Si.updateConfig(e))}},{key:"buildDefaultUI",value:function(){var e=[{template:function(e){return Wl(e)},condition:function(e){return e.engine.isIdle}},{template:function(e){return hk(e)},condition:function(e){return e.engine.hasError}},{template:function(e){return ek(e)},condition:function(e){return e.engine.adBreak}},{template:function(e){return Vk(e)},condition:function(e){return e.engine.isLive}},{template:function(e){return v_(e)}}];this._buildUI(e)}},{key:"buildCustomUI",value:function(e){if(e.length>0)this._buildUI(e);else{var t=[{template:function(e){return v_(e)}}];this._buildUI(t)}}},{key:"_setLocaleTranslations",value:function(e){var t=this;e.translations&&Object.entries(e.translations).forEach((function(e){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||pE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],i=n[1];i=Un({},t._translations.en,i),t._translations[r]=i})),e.locale&&this._translations[e.locale]&&(this._locale=e.locale)}},{key:"_createStore",value:function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Vt;this.store=It(zo,t(fE(this.player,e)))}},{key:"_buildUI",value:function(e){this.player&&(this.container=document.getElementById(this.targetId),this.container&&ne(N(pt,{store:this.store},N(ci,{uiComponents:this._uiComponents},N(bn,{definition:this._translations[this._locale]},N(Zo,{player:this.player},N(Zs,{player:this.player,store:this.store},N(ep,{playerContainer:this.container},N(Ku,null,N(za,null),N(Zu,null),N(Ol,{uis:e,playerContainer:this.container})))))))),this.container))}},{key:"destroy",value:function(){this.container&&(this.container.prepend(this.player.getView()),ne("",this.container))}},{key:"getLogLevel",value:function(e){return function(e){return Vn(e).getLevel()}(e)}},{key:"setLogLevel",value:function(e,t){Gn(e,t)}},{key:"config",get:function(){return function e(t){var n;return Array.isArray(t)?(n=t.length>0?t.slice(0):[]).forEach((function(t,r){("object"===Ln(t)&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[r]=e(t))})):"object"===Ln(t)?(n=Object.assign({},t),Object.keys(n).forEach((function(t){("object"===Ln(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))}))):n=t,n}(this.store.getState().config)}},{key:"LogLevel",get:function(){return Bn}},{key:"Event",get:function(){return zn}}])&&hE(t.prototype,n),e}();function gE(e){return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _E(e,t){return(_E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kE(e,t){return!t||"object"!==gE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EE(e){return(EE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wE,TE,SE,AE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_E(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=EE(e);if(t){var i=EE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kE(this,n)}}(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{config:{}};return mE(this,i),(e=r.call(this)).name=t.name,e.config=t.config,e.player=t.player,e.eventManager=new ka,e.logger=Kn("UI ".concat(e.name)),e.logger.debug("Initialized"),e}return t=i,(n=[{key:"notifyClick",value:function(e){this.context.store.dispatch({type:oE.COMPONENT_CLICKED,name:this.name,payload:e})}},{key:"notifyChange",value:function(e){this.context.store.dispatch({type:oE.COMPONENT_CHANGED,name:this.name,payload:e})}},{key:"componentWillUnmount",value:function(){this.eventManager.removeAll()}}])&&bE(t.prototype,n),i}(B);function OE(e){return(OE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CE(e,t){return(CE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xE(e,t){return!t||"object"!==OE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DE(e){return(DE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(AE,"defaultProps",{});var IE,LE,ME,NE,jE,UE=on((function(e){return{poster:e.engine.poster,castSession:e.engine.castSession,isIdle:e.engine.isIdle,isPlaying:e.engine.isPlaying,isPlaybackEnded:e.engine.isPlaybackEnded,isPaused:e.engine.isPaused,isChangingSource:e.engine.isChangingSource}}))(wE=nr("CastOverlay")((SE=TE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CE(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=DE(e);if(t){var i=DE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xE(this,n)}}(i);function i(){return PE(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"getStatus",value:function(){return this.props.isPlaying||this.props.isPaused?N(On,{id:"cast.status.playing_on"}):this.props.isPlaybackEnded||this.props.isChangingSource||this.props.castSession.resuming?N(On,{id:"cast.status.connected_to"}):N(On,{id:"cast.status.connecting_to"})}},{key:"getIcon",value:function(){return this.props.isPlaying||this.props.isPaused||this.props.isPlaybackEnded||this.props.isChangingSource||this.props.castSession.resuming?N(ic,{type:this.props.icon}):N("div",{className:Ya.a.castConnectingSpinner})}},{key:"render",value:function(e){if(e.castSession){var t={},n=[Ya.a.castPoster];e.poster&&(t={backgroundImage:e.isChangingSource?"":"url(".concat(e.poster,")"),backgroundSize:"contain"},n.push(Ya.a.hasPoster));var r=this.getStatus(),i=this.getIcon();return N("div",null,N("div",{className:Ya.a.castOverlay},N("div",{className:n.join(" "),style:t,onMouseOver:function(e){return e.stopPropagation()}}),N("div",{className:Ya.a.castBlackCover})),N("div",{className:Ya.a.castBox},N("div",{className:Ya.a.castIcon},i),N("div",{className:Ya.a.castText},N(Rn,null,N("span",{className:Ya.a.castStatus},r)),N("br",null),N("span",{className:Ya.a.castDevice},e.castSession.deviceFriendlyName))))}}}])&&RE(t.prototype,n),i}(B),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(TE,"defaultProps",{icon:rc.Cast}),wE=SE))||wE)||wE;function FE(e){return(FE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GE(e,t){return(GE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KE(e,t){return!t||"object"!==FE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HE(e){return(HE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}UE.displayName="CastOverlay";var zE=(IE=on((function(e){return{isPlaybackEnded:e.engine.isPlaybackEnded,isCasting:e.engine.isCasting}}),null),LE=nr("CastAfterPlay"),IE(ME=sa(ME=LE((jE=NE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GE(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=HE(e);if(t){var i=HE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return KE(this,n)}}(i);function i(){return BE(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"onClick",value:function(e){e.stopPropagation(),this.props.player.stopCasting()}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({show:!0})}),700)}},{key:"render",value:function(e){var t=this;if(e.isCasting&&e.isPlaybackEnded){var n=[Ya.a.castOnTvButtonContainer];return this.state.show&&n.push(Ya.a.showCastOnTv),N("div",null,N("div",{className:n.join(" "),onClick:function(e){return t.onClick(e)}},N("a",{className:[Ya.a.btn,Ya.a.btnDarkTransparent,Ya.a.castOnTvButton].join(" ")},N("div",{className:Ya.a.castOnTvIconContainer},N(ic,{type:e.icon})),N(Rn,null,N("span",null,N(On,{id:"cast.disconnect_from_tv"}))))))}}}])&&VE(t.prototype,n),i}(B),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(NE,"defaultProps",{icon:rc.CastBrand}),ME=jE))||ME)||ME)||ME);zE.displayName="CastAfterPlay";var WE="0.57.1-canary.c2b66d2",YE="@playkit-js/playkit-js-ui"}])},function(e,t,n){var r,i;
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */!function(o){"use strict";var a,s={};s.VERSION="1.6.0";var u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};s.TRACE=f(1,"TRACE"),s.DEBUG=f(2,"DEBUG"),s.INFO=f(3,"INFO"),s.TIME=f(4,"TIME"),s.WARN=f(5,"WARN"),s.ERROR=f(8,"ERROR"),s.OFF=f(99,"OFF");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,c({level:e},this.context))}};var d,h=new p({filterLevel:s.OFF});(d=s).enabledFor=l(h,h.enabledFor),d.trace=l(h,h.trace),d.debug=l(h,h.debug),d.time=l(h,h.time),d.timeEnd=l(h,h.timeEnd),d.info=l(h,h.info),d.warn=l(h,h.warn),d.error=l(h,h.error),d.log=d.info,s.setHandler=function(e){a=e},s.setLevel=function(e){for(var t in h.setLevel(e),u)u.hasOwnProperty(t)&&u[t].setLevel(e)},s.getLevel=function(){return h.getLevel()},s.get=function(e){return u[e]||(u[e]=new p(c({name:e},h.context)))},s.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var o,a=console.log;i.level===s.TIME?(o=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(o):t[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):n(a,[o+": "+((new Date).getTime()-t[o])+"ms"])):(i.level===s.WARN&&console.warn?a=console.warn:i.level===s.ERROR&&console.error?a=console.error:i.level===s.INFO&&console.info?a=console.info:i.level===s.DEBUG&&console.debug?a=console.debug:i.level===s.TRACE&&console.trace&&(a=console.trace),e.formatter(r,i),n(a,r))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(22);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(50),i=n(32),o=n(17),a=n(30),s=n(15),u=n(96),l=Object.getOwnPropertyDescriptor;t.f=n(10)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(1),i=n(9),o=n(4);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(21),i=n(49),o=n(12),a=n(8),s=n(112);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,f=6==e,p=5==e||f,d=t||s;return function(t,s,h){for(var y,v,g=o(t),m=i(g),b=r(s,h,3),_=a(m.length),k=0,E=n?d(t,_):u?d(t,0):void 0;_>k;k++)if((p||k in m)&&(v=b(y=m[k],k,g),e))if(n)E[k]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return k;case 2:E.push(y)}else if(c)return!1;return f?-1:l||c?c:E}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(10)){var r=n(34),i=n(3),o=n(4),a=n(1),s=n(64),u=n(90),l=n(21),c=n(46),f=n(32),p=n(16),d=n(47),h=n(23),y=n(8),v=n(123),g=n(36),m=n(30),b=n(15),_=n(51),k=n(6),E=n(12),w=n(82),T=n(37),S=n(39),A=n(38).f,O=n(84),P=n(33),R=n(7),C=n(26),x=n(54),D=n(52),I=n(86),L=n(44),M=n(57),N=n(45),j=n(85),U=n(114),F=n(11),B=n(24),V=F.f,G=B.f,K=i.RangeError,H=i.TypeError,z=i.Uint8Array,W=Array.prototype,Y=u.ArrayBuffer,q=u.DataView,X=C(0),$=C(2),J=C(3),Q=C(4),Z=C(5),ee=C(6),te=x(!0),ne=x(!1),re=I.values,ie=I.keys,oe=I.entries,ae=W.lastIndexOf,se=W.reduce,ue=W.reduceRight,le=W.join,ce=W.sort,fe=W.slice,pe=W.toString,de=W.toLocaleString,he=R("iterator"),ye=R("toStringTag"),ve=P("typed_constructor"),ge=P("def_constructor"),me=s.CONSTR,be=s.TYPED,_e=s.VIEW,ke=C(1,(function(e,t){return Ae(D(e,e[ge]),t)})),Ee=o((function(){return 1===new z(new Uint16Array([1]).buffer)[0]})),we=!!z&&!!z.prototype.set&&o((function(){new z(1).set({})})),Te=function(e,t){var n=h(e);if(n<0||n%t)throw K("Wrong offset!");return n},Se=function(e){if(k(e)&&be in e)return e;throw H(e+" is not a typed array!")},Ae=function(e,t){if(!k(e)||!(ve in e))throw H("It is not a typed array constructor!");return new e(t)},Oe=function(e,t){return Pe(D(e,e[ge]),t)},Pe=function(e,t){for(var n=0,r=t.length,i=Ae(e,r);r>n;)i[n]=t[n++];return i},Re=function(e,t,n){V(e,t,{get:function(){return this._d[n]}})},Ce=function(e){var t,n,r,i,o,a,s=E(e),u=arguments.length,c=u>1?arguments[1]:void 0,f=void 0!==c,p=O(s);if(null!=p&&!w(p)){for(a=p.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(f&&u>2&&(c=l(c,arguments[2],2)),t=0,n=y(s.length),i=Ae(this,n);n>t;t++)i[t]=f?c(s[t],t):s[t];return i},xe=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},De=!!z&&o((function(){de.call(new z(1))})),Ie=function(){return de.apply(De?fe.call(Se(this)):Se(this),arguments)},Le={copyWithin:function(e,t){return U.call(Se(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Se(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return j.apply(Se(this),arguments)},filter:function(e){return Oe(this,$(Se(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Se(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Se(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(Se(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Se(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Se(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Se(this),arguments)},lastIndexOf:function(e){return ae.apply(Se(this),arguments)},map:function(e){return ke(Se(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Se(this),arguments)},reduceRight:function(e){return ue.apply(Se(this),arguments)},reverse:function(){for(var e,t=Se(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return J(Se(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(Se(this),e)},subarray:function(e,t){var n=Se(this),r=n.length,i=g(e,r);return new(D(n,n[ge]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,y((void 0===t?r:g(t,r))-i))}},Me=function(e,t){return Oe(this,fe.call(Se(this),e,t))},Ne=function(e){Se(this);var t=Te(arguments[1],1),n=this.length,r=E(e),i=y(r.length),o=0;if(i+t>n)throw K("Wrong length!");for(;o<i;)this[t+o]=r[o++]},je={entries:function(){return oe.call(Se(this))},keys:function(){return ie.call(Se(this))},values:function(){return re.call(Se(this))}},Ue=function(e,t){return k(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return Ue(e,t=m(t,!0))?f(2,e[t]):G(e,t)},Be=function(e,t,n){return!(Ue(e,t=m(t,!0))&&k(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?V(e,t,n):(e[t]=n.value,e)};me||(B.f=Fe,F.f=Be),a(a.S+a.F*!me,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:Be}),o((function(){pe.call({})}))&&(pe=de=function(){return le.call(this)});var Ve=d({},Le);d(Ve,je),p(Ve,he,je.values),d(Ve,{slice:Me,set:Ne,constructor:function(){},toString:pe,toLocaleString:Ie}),Re(Ve,"buffer","b"),Re(Ve,"byteOffset","o"),Re(Ve,"byteLength","l"),Re(Ve,"length","e"),V(Ve,ye,{get:function(){return this[be]}}),e.exports=function(e,t,n,u){var l=e+((u=!!u)?"Clamped":"")+"Array",f="get"+e,d="set"+e,h=i[l],g=h||{},m=h&&S(h),b=!h||!s.ABV,E={},w=h&&h.prototype,O=function(e,n){V(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[f](n*t+r.o,Ee)}(this,n)},set:function(e){return function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*t+i.o,r,Ee)}(this,n,e)},enumerable:!0})};b?(h=n((function(e,n,r,i){c(e,h,l,"_d");var o,a,s,u,f=0,d=0;if(k(n)){if(!(n instanceof Y||"ArrayBuffer"==(u=_(n))||"SharedArrayBuffer"==u))return be in n?Pe(h,n):Ce.call(h,n);o=n,d=Te(r,t);var g=n.byteLength;if(void 0===i){if(g%t)throw K("Wrong length!");if((a=g-d)<0)throw K("Wrong length!")}else if((a=y(i)*t)+d>g)throw K("Wrong length!");s=a/t}else s=v(n),o=new Y(a=s*t);for(p(e,"_d",{b:o,o:d,l:a,e:s,v:new q(o)});f<s;)O(e,f++)})),w=h.prototype=T(Ve),p(w,"constructor",h)):o((function(){h(1)}))&&o((function(){new h(-1)}))&&M((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||(h=n((function(e,n,r,i){var o;return c(e,h,l),k(n)?n instanceof Y||"ArrayBuffer"==(o=_(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,Te(r,t),i):void 0!==r?new g(n,Te(r,t)):new g(n):be in n?Pe(h,n):Ce.call(h,n):new g(v(n))})),X(m!==Function.prototype?A(g).concat(A(m)):A(g),(function(e){e in h||p(h,e,g[e])})),h.prototype=w,r||(w.constructor=h));var P=w[he],R=!!P&&("values"==P.name||null==P.name),C=je.values;p(h,ve,!0),p(w,be,l),p(w,_e,!0),p(w,ge,h),(u?new h(1)[ye]==l:ye in w)||V(w,ye,{get:function(){return l}}),E[l]=h,a(a.G+a.W+a.F*(h!=g),E),a(a.S,l,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o((function(){g.of.call(h,1)})),l,{from:Ce,of:xe}),"BYTES_PER_ELEMENT"in w||p(w,"BYTES_PER_ELEMENT",t),a(a.P,l,Le),N(l),a(a.P+a.F*we,l,{set:Ne}),a(a.P+a.F*!R,l,je),r||w.toString==pe||(w.toString=pe),a(a.P+a.F*o((function(){new h(1).slice()})),l,{slice:Me}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!o((function(){w.toLocaleString.call([1,2])}))),l,{toLocaleString:Ie}),L[l]=R?P:C,r||R||p(w,he,C)}}else e.exports=function(){}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(33)("meta"),i=n(6),o=n(15),a=n(11).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(4)((function(){return u(Object.preventExtensions({}))})),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return l&&f.NEED&&u(e)&&!o(e,r)&&c(e),e}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(98),i=n(69);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(23),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(5),i=n(99),o=n(69),a=n(68)("IE_PROTO"),s=function(){},u=function(){var e,t=n(66)("iframe"),r=o.length;for(t.style.display="none",n(70).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(98),i=n(69).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(15),i=n(12),o=n(68)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(7)("unscopables"),i=Array.prototype;null==i[r]&&n(16)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var r=n(11).f,i=n(15),o=n(7)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(1),i=n(28),o=n(4),a=n(72),s="["+a+"]",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),c=function(e,t,n){var i={},s=o((function(){return!!a[e]()||"âÂ"!="âÂ"[e]()})),u=i[e]=s?t(f):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=c.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=c},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(3),i=n(11),o=n(10),a=n(7)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(13);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window._babelPolyfill||n(129);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"register",value:function(t){e._logger.debug("Register <"+t.id+"> polyfill"),e._polyfills.push(t)}},{key:"installAll",value:function(){e._logger.debug("Installing all polyfills");for(var t=0;t<e._polyfills.length;t++)e._polyfills[t].install()}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();o(a,"_polyfills",[]),o(a,"_logger",Object(r.b)("PolyfillManager"))},function(e,t,n){var r=n(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(27),i=n(7)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(5),i=n(22),o=n(7)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r=n(9),i=n(3),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(34)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(17),i=n(8),o=n(36);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=i(u.length),c=o(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(27);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(7)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(51),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(116);var r=n(13),i=n(16),o=n(4),a=n(28),s=n(7),u=n(87),l=s("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=s(e),d=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),h=d?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[p](""),!t})):void 0;if(!d||!h||"replace"===e&&!c||"split"===e&&!f){var y=/./[p],v=n(a,p,""[e],(function(e,t,n,r,i){return t.exec===u?d&&!i?{done:!0,value:y.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=v[0],m=v[1];r(String.prototype,e,g),i(RegExp.prototype,p,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},function(e,t,n){var r=n(21),i=n(111),o=n(82),a=n(5),s=n(8),u=n(84),l={},c={};(t=e.exports=function(e,t,n,f,p){var d,h,y,v,g=p?function(){return e}:u(e),m=r(n,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=s(e.length);d>b;b++)if((v=t?m(a(h=e[b])[0],h[1]):m(e[b]))===l||v===c)return v}else for(y=g.call(e);!(h=y.next()).done;)if((v=i(y,m,h.value,t))===l||v===c)return v}).BREAK=l,t.RETURN=c},function(e,t,n){var r=n(3).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(3),i=n(1),o=n(13),a=n(47),s=n(31),u=n(61),l=n(46),c=n(6),f=n(4),p=n(57),d=n(42),h=n(73);e.exports=function(e,t,n,y,v,g){var m=r[e],b=m,_=v?"set":"add",k=b&&b.prototype,E={},w=function(e){var t=k[e];o(k,e,"delete"==e||"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||k.forEach&&!f((function(){(new b).entries().next()})))){var T=new b,S=T[_](g?{}:-0,1)!=T,A=f((function(){T.has(1)})),O=p((function(e){new b(e)})),P=!g&&f((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));O||((b=t((function(t,n){l(t,b,e);var r=h(new m,t,b);return null!=n&&u(n,v,r[_],r),r}))).prototype=k,k.constructor=b),(A||P)&&(w("delete"),w("has"),v&&w("get")),(P||S)&&w(_),g&&k.clear&&delete k.clear}else b=y.getConstructor(t,e,v,_),a(b.prototype,n),s.NEED=!0;return d(b,e),E[e]=b,i(i.G+i.W+i.F*(b!=m),E),g||y.setStrong(b,e,v),b}},function(e,t,n){for(var r,i=n(3),o=n(16),a=n(33),s=a("typed_array"),u=a("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,f=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[p[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):c=!1;e.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function e(t,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i(this,e),this.severity=t,this.category=n,this.code=o,this.data=a,Object(r.c)("Error")!==r.a.OFF&&e._logger.error("Category:".concat(n," | Code:").concat(o," |"),a)};o(a,"Severity",{RECOVERABLE:1,CRITICAL:2}),o(a,"Category",{NETWORK:1,SERVICE:2,PROVIDER:3}),o(a,"Code",{UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,BAD_SERVER_RESPONSE:1005,MULTIREQUEST_API_ERROR:1006,API_RESPONSE_MISMATCH:1007,ERROR:2e3,BLOCK_ACTION:2001,MEDIA_STATUS_NOT_READY:2002,MISSING_MANDATORY_PARAMS:3e3,MISSING_PLAY_SOURCE:3001,METHOD_NOT_IMPLEMENTED:3002}),o(a,"_logger",Object(r.b)("Error"))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return o}));var r=n(4),i={DEBUG:r.DEBUG,INFO:r.INFO,TIME:r.TIME,WARN:r.WARN,ERROR:r.ERROR,OFF:r.OFF};function o(e){r.setHandler((function(t,n){return e(t,n)}))}function a(e){return e?r.get(e):r}function s(e){return a(e).getLevel()}function u(e,t){a(t).setLevel(e)}r.useDefaults({defaultLevel:r.ERROR}),t.b=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(8);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,a,s,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=new Map,this.sources=new r.a,this.type=e.Type.UNKNOWN}var t,n;return t=e,(n=[{key:"toJSON",value:function(){return{id:this.id,name:this.name,sources:this.sources.toJSON(),duration:this.duration,dvrStatus:this.dvrStatus,status:this.status,metadata:this.metadata,type:this.type,poster:this.poster,assetReferenceType:this.assetReferenceType}}}])&&i(t.prototype,n),e}();s={VOD:"Vod",LIVE:"Live",IMAGE:"Image",AUDIO:"Audio",UNKNOWN:"Unknown"},(a="Type")in(o=u)?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;i(this,e),a(this,"retryConfig",{async:!0,timeout:0,maxAttempts:4}),a(this,"_attemptCounter",1),this.headers=t}var t,n;return t=e,(n=[{key:"getUrl",value:function(e){return e+"/service/"+this.service+(this.action?"/action/"+this.action:"")}},{key:"doHttpRequest",value:function(){var e=this,t=new Promise((function(t,n){e._requestPromise={resolve:t,reject:n}}));return this.url||this._requestPromise.reject(new r.a(r.a.Severity.CRITICAL,r.a.Category.NETWORK,r.a.Code.MALFORMED_DATA_URI,{url:this.url})),this._createXHR(),t}},{key:"_createXHR",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status)try{var n=JSON.parse(t.responseText);return e.responseHeaders=e._getResponseHeaders(t),e._requestPromise.resolve(n)}catch(n){e._requestPromise.reject(e._createError(t,r.a.Code.BAD_SERVER_RESPONSE,{text:t.responseText}))}},t.open(this.method,this.url,this.retryConfig.async),this.retryConfig.async&&this.retryConfig.timeout&&(t.timeout=this.retryConfig.timeout);var n=performance.now();t.ontimeout=function(){e._handleError(t,r.a.Code.TIMEOUT,{timeout:(performance.now()-n)/1e3,statusText:t.statusText})},t.onerror=t.onabort=function(){e._handleError(t,r.a.Code.HTTP_ERROR,{text:t.responseText,statusText:t.statusText})},this.headers.forEach((function(e,n){t.setRequestHeader(n,e)})),t.send(this.params)}},{key:"_getResponseHeaders",value:function(e){return e.getAllResponseHeaders().split("\n").filter((function(e){return 0===e.toLowerCase().indexOf("x-")}))}},{key:"_handleError",value:function(e,t,n){var r=this._createError(e,t,n);if(e.onreadystatechange=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onabort=function(){},!(this.retryConfig.maxAttempts&&this._attemptCounter<this.retryConfig.maxAttempts))return this._requestPromise.reject(r);this._attemptCounter++,this._createXHR()}},{key:"_createError",value:function(e,t,n){return Object.assign(n,{url:this.url,headers:this._getResponseHeaders(e),attempt:this._attemptCounter}),new r.a(r.a.Severity.CRITICAL,r.a.Category.NETWORK,t,n)}}])&&o(t.prototype,n),e}()},function(e,t,n){var r,i;
/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */!function(o){"use strict";var a,s={VERSION:"1.6.0"},u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};s.TRACE=f(1,"TRACE"),s.DEBUG=f(2,"DEBUG"),s.INFO=f(3,"INFO"),s.TIME=f(4,"TIME"),s.WARN=f(5,"WARN"),s.ERROR=f(8,"ERROR"),s.OFF=f(99,"OFF");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(s.TRACE,arguments)},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(s.TIME,[e,"end"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,c({level:e},this.context))}};var d,h=new p({filterLevel:s.OFF});(d=s).enabledFor=l(h,h.enabledFor),d.trace=l(h,h.trace),d.debug=l(h,h.debug),d.time=l(h,h.time),d.timeEnd=l(h,h.timeEnd),d.info=l(h,h.info),d.warn=l(h,h.warn),d.error=l(h,h.error),d.log=d.info,s.setHandler=function(e){a=e},s.setLevel=function(e){for(var t in h.setLevel(e),u)u.hasOwnProperty(t)&&u[t].setLevel(e)},s.getLevel=function(){return h.getLevel()},s.get=function(e){return u[e]||(u[e]=new p(c({name:e},h.context)))},s.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var o,a=console.log;i.level===s.TIME?(o=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(o):t[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):n(a,[o+": "+((new Date).getTime()-t[o])+"ms"])):(i.level===s.WARN&&console.warn?a=console.warn:i.level===s.ERROR&&console.error?a=console.error:i.level===s.INFO&&console.info?a=console.info:i.level===s.DEBUG&&console.debug?a=console.debug:i.level===s.TRACE&&console.trace&&(a=console.trace),e.formatter(r,i),n(a,r))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r={DASH:{name:"dash",mimeType:"application/dash+xml",pathExt:"mpd"},HLS:{name:"hls",mimeType:"application/x-mpegURL",pathExt:"m3u8"},WVM:{name:"wvm",mimeType:"video/wvm",pathExt:"wvm"},MP4:{name:"mp4",mimeType:"video/mp4",pathExt:"mp4"},MP3:{name:"mp3",mimeType:"audio/mpeg",pathExt:"mp3"}},i=new Map([["mpegdash",r.DASH],["applehttp",r.HLS],["url",r.MP4]]);function o(e){var t=i.get(e);return!!t&&t.name===r.MP4.name}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return i}));var i=function e(t){var n;r(this,e),(n="hasError")in this?Object.defineProperty(this,n,{value:!1,enumerable:!0,configurable:!0,writable:!0}):this[n]=!1,"KalturaAPIException"===t.objectType?(this.hasError=!0,this.error=new o(t.code,t.message)):t.error&&"KalturaAPIException"===t.error.objectType?(this.hasError=!0,this.error=new o(t.error.code,t.error.message)):this.data=t},o=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,i,o,a=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scheme=t.scheme,this.licenseURL=t.licenseURL,this.certificate=t.certificate};o={"drm.PLAYREADY_CENC":"com.microsoft.playready","drm.WIDEVINE_CENC":"com.widevine.alpha","fairplay.FAIRPLAY":"com.apple.fairplay",WIDEVINE_CENC:"com.widevine.alpha",PLAYREADY_CENC:"com.microsoft.playready",FAIRPLAY:"com.apple.fairplay"},(i="Scheme")in(r=a)?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n(9);var r=n(5);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.progressive=[],this.dash=[],this.hls=[]}var t,n;return t=e,(n=[{key:"map",value:function(e,t){if(t)switch(t.name){case r.a.MP4.name:this.progressive.push(e);break;case r.a.DASH.name:this.dash.push(e);break;case r.a.HLS.name:this.hls.push(e)}}},{key:"toJSON",value:function(){var e={progressive:[],dash:[],hls:[]};return this.progressive.forEach((function(t){return e.progressive.push(t.toJSON())})),this.hls.forEach((function(t){return e.hls.push(t.toJSON())})),this.dash.forEach((function(t){return e.dash.push(t.toJSON())})),e}}])&&i(t.prototype,n),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i})),n(13);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"toJSON",value:function(){var e={id:this.id,url:this.url,mimetype:this.mimetype};return this.bandwidth&&(e.bandwidth=this.bandwidth),this.width&&(e.width=this.width),this.height&&(e.height=this.height),this.label&&(e.label=this.label),this.drmData&&this.drmData.length>0&&(e.drmData=[],this.drmData.forEach((function(t){Array.isArray(e.drmData)&&e.drmData.push(t.toJSON())}))),e}}])&&r(t.prototype,n),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n(11);var r=n(0);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_loadersResponseMap",new Map),o(this,"_loaders",new Map),this._networkRetryConfig=t}var t,n;return t=e,(n=[{key:"add",value:function(e,t){var n=this,r=new e(t);if(r.isValid()){this._loaders.set(e.id,r);var i=this._multiRequest.requests.length,o=r.requests;this._multiRequest.retryConfig=this._networkRetryConfig,o.forEach((function(e){n._multiRequest.add(e)}));var a=Array.from(new Array(o.length),(function(e,t){return t+i}));this._loadersResponseMap.set(e.id,a)}}},{key:"fetchData",value:function(){var e=this;return new Promise((function(t,n){e._multiRequest.execute().then((function(i){e._multiResponse=i.response,e.prepareData(i.response).success?t(e._loaders):n(new r.a(r.a.Severity.CRITICAL,r.a.Category.NETWORK,r.a.Code.API_RESPONSE_MISMATCH,{headers:i.headers}))}),(function(e){n(e)}))}))}},{key:"prepareData",value:function(e){var t=this;return this._loaders.forEach((function(n,r){var i=t._loadersResponseMap.get(r);try{i&&i.length>0&&(n.response=e.results.slice(i[0],i[i.length-1]+1))}catch(e){return{success:!1,error:e}}})),{success:!0,data:this._loaders}}}])&&i(t.prototype,n),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(3),i=n(1),o=n(6),a=n(0);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}(i);function i(){var e;u(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return h(p(e=r.call.apply(r,[this].concat(n))),"requests",[]),e}return t=i,(n=[{key:"add",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,h({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:"execute",value:function(){var e=this;return new Promise((function(t,n){try{e.params=JSON.stringify(e.params)}catch(t){i._logger.error("".concat(t.message)),n(new a.a(a.a.Severity.CRITICAL,a.a.Category.PROVIDER,a.a.Code.FAILED_PARSING_REQUEST,{error:t,params:e.params}))}e.doHttpRequest().then((function(r){var i=new v(r);i.success?t({headers:e.responseHeaders,response:i}):n(new a.a(a.a.Severity.CRITICAL,a.a.Category.NETWORK,a.a.Code.MULTIREQUEST_API_ERROR,{url:e.url,headers:e.responseHeaders,results:i.results}))}),(function(e){n(e)}))}))}}])&&l(t.prototype,n),i}(r.a);h(y,"_logger",Object(i.b)("MultiRequestBuilder"));var v=function e(t){var n=this;u(this,e),h(this,"results",[]),this.success=!0,(t.result?t.result:t).forEach((function(t){var r=new o.a(t);if(n.results.push(r),r.hasError)return e._logger.error("Service returned an error with error code: ".concat(r.error.code," and message: ").concat(r.error.message,".")),void(n.success=!1)}))};h(v,"_logger",Object(i.b)("MultiRequestResult"))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.message=t.message,this.code=t.code}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i}));var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.licenseUrl=t,this.scheme=n,r&&(this.certificate=r)}var t,n;return t=e,(n=[{key:"toJSON",value:function(){var e={licenseUrl:this.licenseUrl,scheme:this.scheme};return this.certificate&&(e.certificate=this.certificate),e}}])&&r(t.prototype,n),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),i=(n(10),n(0));function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s=function(){function e(t,n){var i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={async:!0,timeout:0,maxAttempts:4},(i="_networkRetryConfig")in this?Object.defineProperty(this,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[i]=o,this._partnerId=t.partnerId,this._widgetId=t.widgetId,this._uiConfId=t.uiConfId,this._isAnonymous=!t.ks,this._ks=t.ks||"",this._playerVersion=n,t.log&&t.log.level&&this.LogLevel[t.log.level]&&Object(r.e)(this.LogLevel[t.log.level]),t.log&&"function"==typeof t.log.handler&&Object(r.d)(t.log.handler)}return a(e,[{key:"partnerId",get:function(){return this._partnerId}},{key:"widgetId",get:function(){return this._widgetId||this.defaultWidgetId}},{key:"defaultWidgetId",get:function(){return"_"+this._partnerId}},{key:"uiConfId",get:function(){return this._uiConfId}},{key:"ks",get:function(){return this._ks},set:function(e){this._ks=e}},{key:"playerVersion",get:function(){return this._playerVersion}},{key:"isAnonymous",get:function(){return this._isAnonymous}}]),a(e,[{key:"getMediaConfig",value:function(e){return Promise.reject(new i.a(i.a.Severity.CRITICAL,i.a.Category.PROVIDER,i.a.Code.METHOD_NOT_IMPLEMENTED,{message:"getMediaConfig method must be implement by the derived class"}))}},{key:"getPlaylistConfig",value:function(e){return Promise.reject(new i.a(i.a.Severity.CRITICAL,i.a.Category.PROVIDER,i.a.Code.METHOD_NOT_IMPLEMENTED,{message:"The provider does not support loading playlist by id"}))}},{key:"getEntryListConfig",value:function(e){return Promise.reject(new i.a(i.a.Severity.CRITICAL,i.a.Category.PROVIDER,i.a.Code.METHOD_NOT_IMPLEMENTED,{message:"The provider does not support loading entry list"}))}},{key:"_verifyHasSources",value:function(e){if(0===e.hls.concat(e.dash,e.progressive).length)throw new i.a(i.a.Severity.CRITICAL,i.a.Category.SERVICE,i.a.Code.MISSING_PLAY_SOURCE,{action:"",messages:"No play source for entry id: ".concat(e.id)})}},{key:"getLogLevel",value:function(e){return Object(r.c)(e)}},{key:"setLogLevel",value:function(e,t){Object(r.e)(e,t)}},{key:"LogLevel",get:function(){return r.a}}]),e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return i}));var i=function e(t){var n;return Array.isArray(t)?(n=t.length>0?t.slice(0):[]).forEach((function(t,i){("object"===r(t)&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[i]=e(t))})):"object"===r(t)?(n=Object.assign({},t),Object.keys(n).forEach((function(t){("object"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))}))):n=t,n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n(2);var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[]}},function(e,t,n){"use strict";n.r(t),n.d(t,"Provider",(function(){return kt})),n.d(t,"NAME",(function(){return Et})),n.d(t,"VERSION",(function(){return wt}));var r=n(1),i=n(15);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a={serviceUrl:"https://cdnapisec.kaltura.com/api_v3",cdnUrl:"https://cdnapisec.kaltura.com",serviceParams:{apiVersion:"3.3.0",format:1},useApiCaptions:!0},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"set",value:function(e){e&&Object.assign(a,e)}},{key:"get",value:function(){return Object(i.a)(a)}}])&&o(t,n),e}(),u=n(6),l=n(12),c=n(7);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p,d,h,y=function(){function e(t){var n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],"drm"in this?Object.defineProperty(this,"drm",{value:n,enumerable:!0,configurable:!0,writable:!0}):this.drm=n,this.format=t.format,this.deliveryProfileId=t.deliveryProfileId,this.url=t.url,this.protocols=t.protocols,this.flavorIds=t.flavorIds,t.drm&&t.drm.map((function(e){return r.drm.push(new c.a(e))}))}var t,n;return t=e,(n=[{key:"hasDrmData",value:function(){return this.drm&&this.drm.length>0}},{key:"hasFlavorIds",value:function(){return!!this.flavorIds&&this.flavorIds.length>0}},{key:"getProtocol",value:function(e){var t="";if(this.protocols&&this.protocols.length>0)this.protocols.split(",").forEach((function(n){n===e&&(t=n)}));else if("http"===e)return e;return t}}])&&f(t.prototype,n),e}(),v=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t.type};function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}h={DRM_POLICY:"drm.DRM_POLICY",BLOCK:1,PREVIEW:2,LIMIT_FLAVORS:3,ADD_TO_STORAGE:4,LIMIT_DELIVERY_PROFILES:5,SERVE_FROM_REMOTE_SERVER:6,REQUEST_HOST_REGEX:7,LIMIT_THUMBNAIL_CAPTURE:8},(d="Type")in(p=v)?Object.defineProperty(p,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[d]=h;var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).pattern=e.pattern,r.replacement=e.replacement,r.replacmenServerNodeId=e.replacmenServerNodeId,r}return n}(v),E=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.flavorParamsId=t.flavorParamsId,this.fileExt=t.fileExt,this.bitrate=t.bitrate,this.width=t.width,this.height=t.height,this.id=t.id,this.frameRate=t.frameRate,this.isOriginal=t.isOriginal,this.isWeb=t.isWeb,this.containerFormat=t.containerFormat,this.videoCodecId=t.videoCodecId,this.status=t.status,this.language=t.language,this.label=t.label};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(E,"Status",{ERROR:-1,QUEUED:0,CONVERTING:1,READY:2,DELETED:3,NOT_APPLICABLE:4,TEMP:5,WAIT_FOR_CONVERT:6,IMPORTING:7,VALIDATING:8,EXPORTING:9});var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),R(O(t=r.call(this,e)),"sources",[]),R(O(t),"actions",[]),R(O(t),"messages",[]),R(O(t),"flavorAssets",[]),!t.hasError){var n=e.messages;n&&n.map((function(e){return t.messages.push(new l.a(e))}));var o=e.actions;o&&o.map((function(e){e.type===v.Type.REQUEST_HOST_REGEX?t.actions.push(new k(e)):t.actions.push(new v(e))}));var a=e.sources;a&&a.map((function(e){return t.sources.push(new y(e))}));var s=e.flavorAssets;s&&s.map((function(e){return t.flavorAssets.push(new E(e))}))}return t}return t=i,(n=[{key:"hasBlockAction",value:function(){return void 0!==this.getBlockAction()}},{key:"getBlockAction",value:function(){return this.actions.find((function(e){return e.type===v.Type.BLOCK}))}},{key:"getErrorMessages",value:function(){return this.messages}},{key:"getRequestHostRegexAction",value:function(){var e=this.actions.find((function(e){return e.type===v.Type.REQUEST_HOST_REGEX}));if(e instanceof k)return e}}])&&T(t.prototype,n),i}(u.a);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.metadataProfileId=t.metadataProfileId,this.metadataProfileVersion=t.metadataProfileVersion,this.metadataProfileId=t.metadataProfileId,this.metadataObjectType=t.metadataObjectType,this.objectId=t.objectId,this.version=t.version,this.created=new Date(0),this.created.setUTCSeconds(t.createdAt),this.updated=new Date(0),this.updated.setUTCSeconds(t.updatedAt),this.status=t.status,this.xml=t.xml};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}x(D,"ObjectType",{AD_CUE_POINT:"adCuePointMetadata.AdCuePoint",ANNOTATION:"annotationMetadata.Annotation",CODE_CUE_POINT:"codeCuePointMetadata.CodeCuePoint",THUMB_CUE_POINT:"thumbCuePointMetadata.thumbCuePoint",ENTRY:1,CATEGORY:2,USER:3,PARTNER:4,DYNAMIC_OBJECT:5}),x(D,"Status",{VALID:1,INVALID:2,DELETED:3});var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var i=N(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).hasError||(r.totalCount=e.totalCount,r.totalCount>0&&(r.metas=[],e.objects.map((function(e){return r.metas.push(new D(e))})))),r}return n}(u.a);function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.referenceId=t.referenceId,this.externalSourceType=t.externalSourceType,this.name=t.name,this.description=t.description,this.dataUrl=t.dataUrl,this.type=t.type,this.entryType=t.mediaType,this.flavorParamsIds=t.flavorParamsIds,this.duration=t.duration,this.poster=t.thumbnailUrl,this.status=t.status,this.dvrStatus=t.dvrStatus,this.tags=t.tags};function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}U(F,"EntryType",{AUTOMATIC:{value:-1},EXTERNAL_MEDIA:{value:"externalMedia.externalMedia"},MEDIA_CLIP:{value:1},MIX:{value:2},PLAYLIST:{value:5},DATA:{value:6},LIVE_STREAM:{value:7},LIVE_CHANNEL:{value:8},DOCUMENT:{value:10}}),U(F,"MediaType",{VIDEO:{value:1},IMAGE:{value:2},AUDIO:{value:5},LIVE_STREAM_FLASH:{value:201},LIVE_STREAM_WINDOWS_MEDIA:{value:202},LIVE_STREAM_REAL_MEDIA:{value:203},LIVE_STREAM_QUICK_TIME:{value:204}}),U(F,"EntryStatus",{ERROR_IMPORTING:-2,ERROR_CONVERTING:-1,SCAN_FAILURE:"virusScan.ScanFailure",IMPORT:0,INFECTED:"virusScan.Infected",PRECONVERT:1,READY:2,DELETED:3,PENDING:4,MODERATE:5,BLOCKED:6,NO_CONTENT:7}),U(F,"EntryModerationStatus",{PENDING_MODERATION:1,APPROVED:2,REJECTED:3,FLAGGED_FOR_REVIEW:4,MODERATE:5,AUTO_APPROVED:6});var V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"build",value:function(e){var t=s.get(),n=t.serviceUrl.substr(0,t.serviceUrl.lastIndexOf("/")),r=e.partnerId,i=e.entryId,o=e.ks,a=e.uiConfId,u=e.format,l=e.protocol,c=e.extension,f=e.flavorIds;if(!(n&&r&&i&&u&&l))return"";var p=n;return n.endsWith("/")||(p+="/"),p+="p/"+r+"/sp/"+r+"00/playManifest/entryId/"+i+"/protocol/"+l+"/format/"+u,f?p+="/flavorIds/"+f:a&&(p+="/uiConfId/"+a),""!==o&&(p+="/ks/"+o),""!==c&&(p+="/a."+c),a&&""!==f&&(p+="?uiConfId="+a),p}}])&&B(t,n),e}();function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"xmlToJson",value:function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i),a=o.nodeName;if(void 0===t[a])t[a]=this.xmlToJson(o);else{if(void 0===t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(this.xmlToJson(o))}}return t}}])&&G(t,n),e}(),H=n(2),z=n(13),W=n(9),Y=n(8),q=n(5),X=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[]},$=n(16);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q={SRT:"1",DFXP:"2",WEBVTT:"3",CAP:"4"},Z={3:"vtt",1:"srt"},ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"createConfig",value:function(e){return e.map((function(e){var t=e.url,n=Z[e.format];return[Q.DFXP,Q.CAP].includes(e.format)&&(t=e.webVttUrl,n=Z[Q.WEBVTT]),{default:!!e.isDefault,type:n,language:e.languageCode,label:e.label,url:t}}))}}])&&J(t,n),e}();function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"getMediaEntry",value:function(t,n,r,i){var o=new H.a,a=i.entry,u=i.playBackContextResult,l=i.metadataListResult,c=u.sources;return o.sources=e._getParsedSources(c,t,n,r,a,u),s.get().useApiCaptions&&u.data.playbackCaptions&&(o.sources.captions=ee.createConfig(u.data.playbackCaptions)),e._fillBaseData(o,a,l),o}},{key:"getPlaylist",value:function(t){var n=new X,r=t.playlistData,i=t.playlistItems.entries;return n.id=r.id,n.name=r.name,n.description=r.description,n.poster=r.poster,i.forEach((function(t){var r=new H.a;e._fillBaseData(r,t),n.items.push(r)})),n}},{key:"getEntryList",value:function(t){var n=new $.a;return t.playlistItems.entries.forEach((function(t){var r=new H.a;e._fillBaseData(r,t),n.items.push(r)})),n}},{key:"_fillBaseData",value:function(t,n,r){return t.poster=n.poster,t.id=n.id,t.duration=n.duration,t.metadata=e._parseMetadata(r),t.metadata.description=n.description||"",t.metadata.name=n.name||"",t.metadata.tags=n.tags||"",t.status=n.status,t.type=e._getEntryType(n.entryType,n.type),t.type===H.a.Type.LIVE&&(t.dvrStatus=n.dvrStatus),t}},{key:"_getEntryType",value:function(e,t){var n=H.a.Type.UNKNOWN;switch(e){case F.MediaType.IMAGE.value:n=H.a.Type.IMAGE;break;case F.MediaType.AUDIO.value:n=H.a.Type.AUDIO;break;default:switch(t){case F.EntryType.MEDIA_CLIP.value:n=H.a.Type.VOD;break;case F.EntryType.LIVE_STREAM.value:case F.EntryType.LIVE_CHANNEL.value:n=H.a.Type.LIVE;break;default:n=H.a.Type.UNKNOWN}}return n}},{key:"_getParsedSources",value:function(t,n,r,i,o,a){var s,u,l=new Y.a;return o.type===F.EntryType.EXTERNAL_MEDIA.value?((u=new W.a).mimetype="video/youtube",u.url=o.referenceId,u.id=o.id+"_youtube",l.progressive.push(u)):t&&t.length>0&&(t.filter((function(e){return!Object(q.c)(e.format)})).forEach((function(t){var s=e._parseAdaptiveSource(t,a,n,r,i,o.id);if(s){var u=q.b.get(t.format);l.map(s,u)}})),s=t.find((function(t){return Object(q.c)(t.format)&&""!==t.getProtocol(e._getBaseProtocol())})),l.progressive=e._parseProgressiveSources(s,a,n,r,i,o.id)),l}},{key:"_parseAdaptiveSource",value:function(t,n,r,i,o,a){var s=new W.a;if(t){var u="",l=q.b.get(t.format),f=t.getProtocol(e._getBaseProtocol()),p=t.deliveryProfileId,d=t.format,h="";if(l&&(h=l.pathExt,s.mimetype=l.mimeType),t.hasFlavorIds()?(!h&&n.flavorAssets&&n.flavorAssets.length>0&&(h=n.flavorAssets[0].fileExt),u=V.build({entryId:a,flavorIds:t.flavorIds,format:d,ks:r,partnerId:i,uiConfId:o,extension:h,protocol:f})):u=t.url,!u){var y="failed to create play url from source, discarding source: (".concat(a,"_").concat(p,"), ").concat(d);return e._logger.warn(y),null}if(s.url=e._applyRegexAction(n,u),s.id=a+"_"+p+","+d,t.hasDrmData()){var v=[];t.drm.forEach((function(e){v.push(new z.a(e.licenseURL,c.a.Scheme[e.scheme],e.certificate))})),s.drmData=v}}return s}},{key:"_parseProgressiveSources",value:function(t,n,r,i,o,a){var s=[],u=[];if(t){var l=t.getProtocol(e._getBaseProtocol()),c=t.format,f=t.deliveryProfileId,p=f+","+c;n.flavorAssets.map((function(t){var d=new W.a;d.id=t.id+p,d.mimetype="mp3"===t.fileExt?"audio/mp3":"video/mp4",d.height=t.height,d.width=t.width,d.bandwidth=1024*t.bitrate,d.label=t.label||t.language;var h=V.build({entryId:a,flavorIds:t.id,format:c,ks:r,partnerId:i,uiConfId:o,extension:t.fileExt,protocol:l});if(""===h)return e._logger.warn("failed to create play url from source, discarding source: (".concat(a,"_").concat(f,"), ").concat(c,".")),null;d.url=e._applyRegexAction(n,h),t.height&&t.width?s.push(d):u.push(d)}))}return u.length&&!s.length?u:s}},{key:"_parseMetadata",value:function(e){var t={};return e&&e.metas&&e.metas.length>0&&e.metas.forEach((function(e){var n,r=new DOMParser;e.xml=e.xml.replace(/\r?\n|\r/g,""),e.xml=e.xml.replace(/>\s*/g,">"),e.xml=e.xml.replace(/>\s*/g,">"),n=r.parseFromString(e.xml,"text/xml");var i=K.xmlToJson(n);Object.keys(i.metadata).forEach((function(e){t[e]=i.metadata[e]["#text"]}))})),t}},{key:"_getBaseProtocol",value:function(){var e=s.get(),t=/^https?:/.exec(e.cdnUrl),n=t?t[0]:document.location.protocol;return"string"==typeof n?n.slice(0,-1):"https"}},{key:"hasBlockAction",value:function(e){return e.playBackContextResult.hasBlockAction()}},{key:"getBlockAction",value:function(e){return e.playBackContextResult.getBlockAction()}},{key:"getErrorMessages",value:function(e){return e.playBackContextResult.getErrorMessages()}},{key:"_applyRegexAction",value:function(e,t){var n=e.getRequestHostRegexAction();if(n){var r=new RegExp(n.pattern,"i");if(t.match(r))return t.replace(r,n.replacement+"/")}return t}}])&&te(t,n),e}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ne,"_logger",Object(r.b)("OVPProviderParser"));var re=n(3),ie=n(11);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"getMultiRequest",value:function(e,t,n){var r=s.get(),i=r.serviceParams;Object.assign(i,{ks:t,clientTag:"html5:v"+e}),n&&Object.assign(i,{partnerId:n});var o=new Map;o.set("Content-Type","application/json");var a=new ie.a(o);return a.method="POST",a.service="multirequest",a.url=a.getUrl(r.serviceUrl),a.params=i,a}}])&&oe(t,n),e}();function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ue="id,referenceId,name,description,thumbnailUrl,dataUrl,duration,msDuration,flavorParamsIds,mediaType,type,tags,dvrStatus,externalSourceType,status",le=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};se(this,e),this.type=t.type||e.Type.INCLUDE_FIELDS,this.fields=t.fields||ue};function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(le,"Type",{INCLUDE_FIELDS:1,EXCLUDE_FIELDS:2});var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var i=ye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return he(this,n)}}(i);function i(){return fe(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"getPlaybackContext",value:function(e,t){var n=new Map,r="{1:result:ks}"===t?"{2:result:objects:0:id}":"{1:result:objects:0:id}";n.set("Content-Type","application/json");var i=new re.a(n);return i.service="baseEntry",i.action="getPlaybackContext",i.method="POST",i.url=i.getUrl(e),i.tag="baseEntry-getPlaybackContext",i.params={entryId:r,ks:t,contextDataParams:{objectType:"KalturaContextDataParams",flavorTags:"all"}},i}},{key:"list",value:function(e,t,n,r){var o=new Map;o.set("Content-Type","application/json");var a=new re.a(o);return a.service="baseEntry",a.action="list",a.method="POST",a.url=a.getUrl(e),a.tag="list",a.params=i.getEntryListReqParams(n,t,r),a}},{key:"getEntryListReqParams",value:function(e,t,n){return{ks:t,filter:n?{redirectFromEntryId:e}:{idEqual:e},responseProfile:new le}}}])&&pe(t,n),i}(ae);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee(e);if(t){var i=Ee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ke(this,n)}}(i);function i(){return me(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"list",value:function(e,t,n){var r=new Map;r.set("Content-Type","application/json");var i=new re.a(r);i.service="metadata_metadata",i.action="list",i.method="POST",i.url=i.getUrl(e),i.tag="metadata_metadata-list";var o={objectType:"KalturaMetadataFilter",objectIdEqual:n,metadataObjectTypeEqual:"1"};return i.params={filter:o,ks:t},i}}])&&be(t,n),i}(ae);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var i=Oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ae(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).hasError||(r.totalCount=e.totalCount,r.totalCount>0&&(r.entries=[],e.objects.map((function(e){return r.entries.push(new F(e))})))),r}return n}(u.a);function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t,n){return t&&Re(e.prototype,t),n&&Re(e,n),e}var xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_response",{}),this.requests=this.buildRequests(t),this._entryId=t.entryId}return Ce(e,null,[{key:"id",get:function(){return"media"}}]),Ce(e,[{key:"buildRequests",value:function(e){var t=s.get(),n=[];return n.push(ve.list(t.serviceUrl,e.ks,e.entryId,e.redirectFromEntryId)),n.push(ve.getPlaybackContext(t.serviceUrl,e.ks)),n.push(we.list(t.serviceUrl,e.ks,e.entryId)),n}},{key:"isValid",value:function(){return!!this._entryId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){var t=new Pe(e[0].data);this._response.entry=t.entries[0],this._response.playBackContextResult=new C(e[1].data),this._response.metadataListResult=new j(e[2].data)},get:function(){return this._response}}]),e}();function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=je(e);if(t){var i=je(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ne(this,n)}}(i);function i(){return Ie(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"anonymousSession",value:function(e,t){var n=new Map;n.set("Content-Type","application/json");var r=new re.a(n);return r.service="session",r.action="startWidgetSession",r.method="POST",r.url=r.getUrl(e),r.tag="session-startWidget",r.params={widgetId:t},r}}])&&Le(t,n),i}(ae);function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t,n){return t&&Fe(e.prototype,t),n&&Fe(e,n),e}var Ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_response",{}),this.requests=this.buildRequests(t),this._widgetId=t.widgetId}return Be(e,[{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){this._response.ks=e[0].data.ks},get:function(){return this._response.ks}}],[{key:"id",get:function(){return"session"}}]),Be(e,[{key:"buildRequests",value:function(e){var t=s.get(),n=[];return n.push(Ue.anonymousSession(t.serviceUrl,e.widgetId)),n}},{key:"isValid",value:function(){return!!this._widgetId}}]),e}();function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var i=We(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ze(this,n)}}(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0;return Ke(this,n),(i=t.call(this,a))._multiRequest=ae.getMultiRequest(e,o,r),i}return n}(n(10).a);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var i=Ze(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qe(this,n)}}(i);function i(){return Xe(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"execute",value:function(e,t,n){var r=new Map;r.set("Content-Type","application/json");var i=new re.a(r);return i.service="playlist",i.action="execute",i.method="POST",i.url=i.getUrl(e),i.tag="".concat("playlist","-execute"),i.params={ks:t,id:n,responseProfile:new le},i}},{key:"get",value:function(e,t,n){var r=new Map;r.set("Content-Type","application/json");var i=new re.a(r);return i.service="playlist",i.action="get",i.method="POST",i.url=i.getUrl(e),i.tag="".concat("playlist","-get"),i.params={ks:t,id:n,responseProfile:{fields:"id,name,description,thumbnailUrl",type:1}},i}}])&&$e(t,n),i}(ae),tt=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.name=t.name,this.description=t.description,this.poster=t.thumbnailUrl};function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ot(e);if(t){var i=ot(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return it(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).hasError||(r.entries=[],e.map((function(e){return r.entries.push(new F(e))}))),r}return n}(u.a);function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t,n){return t&&st(e.prototype,t),n&&st(e,n),e}var lt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_response",{}),this.requests=this.buildRequests(t),this._playlistId=t.playlistId}return ut(e,null,[{key:"id",get:function(){return"playlist"}}]),ut(e,[{key:"buildRequests",value:function(e){var t=s.get(),n=[];return n.push(et.get(t.serviceUrl,e.ks,e.playlistId)),n.push(et.execute(t.serviceUrl,e.ks,e.playlistId)),n}},{key:"isValid",value:function(){return!!this._playlistId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){this._response.playlistData=new tt(e[0].data),this._response.playlistItems=new at(e[1].data)},get:function(){return this._response}}]),e}(),ct=n(14);function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),e}var dt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_response",{playlistItems:{entries:[]}}),this.requests=this.buildRequests(t),this._entries=t.entries}return pt(e,null,[{key:"id",get:function(){return"entry_list"}}]),pt(e,[{key:"buildRequests",value:function(e){var t=s.get(),n=[];return e.entries.forEach((function(r){n.push(ve.list(t.serviceUrl,e.ks,r.entryId||r,e.redirectFromEntryId))})),n}},{key:"isValid",value:function(){return!(!this._entries||!this._entries.length)}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){var t,n=this;e.forEach((function(e){t=new Pe(e.data),n._response.playlistItems.entries.push(t.entries[0])}))},get:function(){return this._response}}]),e}(),ht=n(0);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(o,e);var t,n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var i=_t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mt(this,n)}}(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bt(n=i.call(this,e,t)),"_filterOptionsConfig",{redirectFromEntryId:!0}),n._logger=Object(r.b)("OVPProvider"),s.set(e.env),n._setFilterOptionsConfig(e.filterOptions),n._networkRetryConfig=Object.assign(n._networkRetryConfig,e.networkRetryParameters),n}return t=o,(n=[{key:"getMediaConfig",value:function(e){var t=this;return e.ks&&(this.ks=e.ks,this._isAnonymous=!1),this.widgetId!==this.defaultWidgetId&&(this._isAnonymous=!1),this._dataLoader=new Ye(this.playerVersion,this.partnerId,this.ks,this._networkRetryConfig),new Promise((function(n,r){var i=e.entryId;if(i){var o=t.ks;o||(o="{1:result:ks}",t._dataLoader.add(Ve,{widgetId:t.widgetId}));var a=t._getEntryRedirectFilter(e);return t._dataLoader.add(xe,{entryId:i,ks:o,redirectFromEntryId:a}),t._dataLoader.fetchData().then((function(e){try{n(t._parseDataFromResponse(e))}catch(e){r(e)}}),(function(e){r(e)}))}r(new ht.a(ht.a.Severity.CRITICAL,ht.a.Category.PROVIDER,ht.a.Code.MISSING_MANDATORY_PARAMS,{message:"missing entry id"}))}))}},{key:"_getEntryRedirectFilter",value:function(e){return"boolean"==typeof e.redirectFromEntryId?e.redirectFromEntryId:"boolean"!=typeof this._filterOptionsConfig.redirectFromEntryId||this._filterOptionsConfig.redirectFromEntryId}},{key:"_setFilterOptionsConfig",value:function(e){e&&"boolean"==typeof e.redirectFromEntryId&&(this._filterOptionsConfig.redirectFromEntryId=e.redirectFromEntryId)}},{key:"_parseDataFromResponse",value:function(e){this._logger.debug("Data parsing started");var t={session:{isAnonymous:this._isAnonymous,partnerId:this.partnerId},sources:this._getDefaultSourcesObject(),plugins:{}};if(this.uiConfId&&(t.session.uiConfId=this.uiConfId),e){if(e.has(Ve.id)){var n=e.get(Ve.id);n&&n.response&&(t.session.ks=n.response,this.widgetId!==this.defaultWidgetId&&(this.ks=t.session.ks))}else t.session.ks=this.ks;if(e.has(xe.id)){var r=e.get(xe.id);if(r&&r.response){var i=r.response;if(ne.hasBlockAction(i))throw new ht.a(ht.a.Severity.CRITICAL,ht.a.Category.SERVICE,ht.a.Code.BLOCK_ACTION,{action:ne.getBlockAction(i),messages:ne.getErrorMessages(i)});var o=ne.getMediaEntry(this.isAnonymous?"":this.ks,this.partnerId,this.uiConfId,i);Object.assign(t.sources,this._getSourcesObject(o)),this._verifyMediaStatus(o),this._verifyHasSources(t.sources)}}}return this._logger.debug("Data parsing finished",t),t}},{key:"_verifyMediaStatus",value:function(e){if([F.EntryStatus.IMPORT,F.EntryStatus.PRECONVERT].includes(e.status))throw new ht.a(ht.a.Severity.CRITICAL,ht.a.Category.SERVICE,ht.a.Code.MEDIA_STATUS_NOT_READY,{messages:"Status of entry id ".concat(e.id," is ").concat(e.status," and is still being imported or converted"),data:{status:status}})}},{key:"getPlaylistConfig",value:function(e){var t=this;return e.ks&&(this.ks=e.ks,this._isAnonymous=!1),this.widgetId!==this.defaultWidgetId&&(this._isAnonymous=!1),this._dataLoader=new Ye(this.playerVersion,this.partnerId,this.ks,this._networkRetryConfig),new Promise((function(n,r){var i=e.playlistId;if(i){var o=t.ks;o||(o="{1:result:ks}",t._dataLoader.add(Ve,{widgetId:t.widgetId})),t._dataLoader.add(lt,{playlistId:i,ks:o}),t._dataLoader.fetchData().then((function(e){n(t._parsePlaylistDataFromResponse(e))}),(function(e){r(e)}))}else r({success:!1,data:"Missing mandatory parameter"})}))}},{key:"_parsePlaylistDataFromResponse",value:function(e){var t=this;this._logger.debug("Data parsing started");var n=this._getPlaylistObject();if(e&&e.has(lt.id)){var r=e.get(lt.id);if(r&&r.response){var i=ne.getPlaylist(r.response);n.id=i.id,n.poster=i.poster,n.metadata.name=i.name,n.metadata.description=i.description,i.items.forEach((function(e){return n.items.push({sources:t._getSourcesObject(e)})}))}}return this._logger.debug("Data parsing finished",n),n}},{key:"getEntryListConfig",value:function(e){var t=this;return e.ks&&(this.ks=e.ks,this._isAnonymous=!1),this.widgetId!==this.defaultWidgetId&&(this._isAnonymous=!1),this._dataLoader=new Ye(this.playerVersion,this.partnerId,this.ks,this._networkRetryConfig),new Promise((function(n,r){var i=e.entries;if(i&&i.length){var o=t.ks;o||(o="{1:result:ks}",t._dataLoader.add(Ve,{widgetId:t.widgetId}));var a=t._getEntryRedirectFilter(e);t._dataLoader.add(dt,{entries:i,ks:o,redirectFromEntryId:a}),t._dataLoader.fetchData().then((function(e){n(t._parseEntryListDataFromResponse(e))}),(function(e){r(e)}))}else r({success:!1,data:"Missing mandatory parameter"})}))}},{key:"_parseEntryListDataFromResponse",value:function(e){var t=this;this._logger.debug("Data parsing started");var n=this._getPlaylistObject();if(e&&e.has(dt.id)){var r=e.get(dt.id);r&&r.response&&ne.getEntryList(r.response).items.forEach((function(e){return n.items.push({sources:t._getSourcesObject(e)})}))}return this._logger.debug("Data parsing finished",n),n}},{key:"_getPlaylistObject",value:function(){return{id:"",metadata:{name:"",description:""},poster:"",items:[]}}},{key:"_getDefaultSourcesObject",value:function(){return{hls:[],dash:[],progressive:[],id:"",duration:0,type:H.a.Type.UNKNOWN,poster:"",dvr:!1,vr:null,metadata:{name:"",description:"",tags:""}}}},{key:"_getSourcesObject",value:function(e){var t=this._getDefaultSourcesObject(),n=e.sources.toJSON();return t.hls=n.hls,t.dash=n.dash,t.progressive=n.progressive,t.id=e.id,t.duration=e.duration,t.type=e.type,t.dvr=!!e.dvrStatus,t.poster=e.poster,e.sources.captions&&(t.captions=e.sources.captions),e.metadata&&"string"==typeof e.metadata.tags&&e.metadata.tags.indexOf("360")>-1&&(t.vr={}),Object.assign(t.metadata,e.metadata),t}}])&&vt(t.prototype,n),o}(ct.a),Et="playkit-js-providers-ovp",wt="2.21.1"}])},function(e,t,n){var r=n(6),i=n(3).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){t.f=n(7)},function(e,t,n){var r=n(53)("keys"),i=n(33);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(6),i=n(5),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(21)(Function.call,n(24).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff"},function(e,t,n){var r=n(6),i=n(71).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(23),i=n(28);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(23),i=n(28);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(34),i=n(1),o=n(13),a=n(16),s=n(44),u=n(110),l=n(42),c=n(39),f=n(7)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,h,y,v,g){u(n,t,h);var m,b,_,k=function(e){if(!p&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",w="values"==y,T=!1,S=e.prototype,A=S[f]||S["@@iterator"]||y&&S[y],O=A||k(y),P=y?w?k("entries"):O:void 0,R="Array"==t&&S.entries||A;if(R&&(_=c(R.call(new e)))!==Object.prototype&&_.next&&(l(_,E,!0),r||"function"==typeof _[f]||a(_,f,d)),w&&A&&"values"!==A.name&&(T=!0,O=function(){return A.call(this)}),r&&!g||!p&&!T&&S[f]||a(S,f,O),s[t]=O,s[E]=d,y)if(m={values:w?O:k("values"),keys:v?O:k("keys"),entries:P},g)for(b in m)b in S||o(S,b,m[b]);else i(i.P+i.F*(p||T),t,m);return m}},function(e,t,n){var r=n(80),i=n(28);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(6),i=n(27),o=n(7)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(7)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(44),i=n(7)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(32);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(51),i=n(7)("iterator"),o=n(44);e.exports=n(9).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(12),i=n(36),o=n(8);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(40),i=n(115),o=n(44),a=n(17);e.exports=n(78)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,i,o=n(58),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,l=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(l||c)&&(u=function(e){var t,n,r,i,u=this;return c&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),l&&(t=u.lastIndex),r=a.call(u,e),l&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),c&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=u},function(e,t,n){"use strict";var r=n(77)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(21),s=n(104),u=n(70),l=n(66),c=n(3),f=c.process,p=c.setImmediate,d=c.clearImmediate,h=c.MessageChannel,y=c.Dispatch,v=0,g={},m=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){m.call(e.data)};p&&d||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},d=function(e){delete g[e]},"process"==n(27)(f)?r=function(e){f.nextTick(a(m,e,1))}:y&&y.now?r=function(e){y.now(a(m,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:p,clear:d}},function(e,t,n){"use strict";var r=n(3),i=n(10),o=n(34),a=n(64),s=n(16),u=n(47),l=n(4),c=n(46),f=n(23),p=n(8),d=n(123),h=n(38).f,y=n(11).f,v=n(85),g=n(42),m=r.ArrayBuffer,b=r.DataView,_=r.Math,k=r.RangeError,E=r.Infinity,w=m,T=_.abs,S=_.pow,A=_.floor,O=_.log,P=_.LN2,R=i?"_b":"buffer",C=i?"_l":"byteLength",x=i?"_o":"byteOffset";function D(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,l=u>>1,c=23===t?S(2,-24)-S(2,-77):0,f=0,p=e<0||0===e&&1/e<0?1:0;for((e=T(e))!=e||e===E?(i=e!=e?1:0,r=u):(r=A(O(e)/P),e*(o=S(2,-r))<1&&(r--,o*=2),(e+=r+l>=1?c/o:c*S(2,1-l))*o>=2&&(r++,o/=2),r+l>=u?(i=0,r=u):r+l>=1?(i=(e*o-1)*S(2,t),r+=l):(i=e*S(2,l-1)*S(2,t),r=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*p,a}function I(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,l=e[u--],c=127&l;for(l>>=7;s>0;c=256*c+e[u],u--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:l?-E:E;r+=S(2,t),c-=a}return(l?-1:1)*r*S(2,c-t)}function L(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function M(e){return[255&e]}function N(e){return[255&e,e>>8&255]}function j(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function U(e){return D(e,52,8)}function F(e){return D(e,23,4)}function B(e,t,n){y(e.prototype,t,{get:function(){return this[n]}})}function V(e,t,n,r){var i=d(+n);if(i+t>e[C])throw k("Wrong index!");var o=e[R]._b,a=i+e[x],s=o.slice(a,a+t);return r?s:s.reverse()}function G(e,t,n,r,i,o){var a=d(+n);if(a+t>e[C])throw k("Wrong index!");for(var s=e[R]._b,u=a+e[x],l=r(+i),c=0;c<t;c++)s[u+c]=l[o?c:t-c-1]}if(a.ABV){if(!l((function(){m(1)}))||!l((function(){new m(-1)}))||l((function(){return new m,new m(1.5),new m(NaN),"ArrayBuffer"!=m.name}))){for(var K,H=(m=function(e){return c(this,m),new w(d(e))}).prototype=w.prototype,z=h(w),W=0;z.length>W;)(K=z[W++])in m||s(m,K,w[K]);o||(H.constructor=m)}var Y=new b(new m(2)),q=b.prototype.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||u(b.prototype,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},!0)}else m=function(e){c(this,m,"ArrayBuffer");var t=d(e);this._b=v.call(new Array(t),0),this[C]=t},b=function(e,t,n){c(this,b,"DataView"),c(e,m,"DataView");var r=e[C],i=f(t);if(i<0||i>r)throw k("Wrong offset!");if(i+(n=void 0===n?r-i:p(n))>r)throw k("Wrong length!");this[R]=e,this[x]=i,this[C]=n},i&&(B(m,"byteLength","_l"),B(b,"buffer","_b"),B(b,"byteLength","_l"),B(b,"byteOffset","_o")),u(b.prototype,{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return L(V(this,4,e,arguments[1]))},getUint32:function(e){return L(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return I(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return I(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){G(this,1,e,M,t)},setUint8:function(e,t){G(this,1,e,M,t)},setInt16:function(e,t){G(this,2,e,N,t,arguments[2])},setUint16:function(e,t){G(this,2,e,N,t,arguments[2])},setInt32:function(e,t){G(this,4,e,j,t,arguments[2])},setUint32:function(e,t){G(this,4,e,j,t,arguments[2])},setFloat32:function(e,t){G(this,4,e,F,t,arguments[2])},setFloat64:function(e,t){G(this,8,e,U,t,arguments[2])}});g(m,"ArrayBuffer"),g(b,"DataView"),s(b.prototype,a.VIEW,!0),t.ArrayBuffer=m,t.DataView=b},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(128)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e){
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
!function(){var n="undefined"!=typeof window?window:e,r={};for(var i in function(e,t,n){var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o=void 0!==e&&e===this?this:void 0!==t&&null!=t?t:this;function a(){a=function(){},o.Symbol||(o.Symbol=u)}var s,u=(s=0,function(e){return"jscomp_symbol_"+(e||"")+s++});function l(){a();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&i(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return c(this)}}),l=function(){}}function c(e){var t=0;return f((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function f(e){return l(),(e={next:e})[o.Symbol.iterator]=function(){return this},e}function p(e){l();var t=e[Symbol.iterator];return t?t.call(e):c(e)}function d(e,t){if(t){for(var n=o,r=e.split("."),a=0;a<r.length-1;a++){var s=r[a];s in n||(n[s]={}),n=n[s]}(s=t(a=n[r=r[r.length-1]]))!=a&&null!=s&&i(n,r,{configurable:!0,writable:!0,value:s})}}function h(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(o){o.done?r(o.value):Promise.resolve(o.value).then(t,n).then(e,i)}(e.next())}))}(e())}d("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c((function(){e.h()}))};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},n.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.u),reject:e(this.f)}},t.prototype.u=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.o(e):this.h(e)}},t.prototype.o=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.F(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.v=function(e){var t=this.c();e.kc(t.resolve,t.reject)},t.prototype.F=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.kc(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.kc=function(e,t){function n(){switch(r.b){case 1:e(r.g);break;case 2:t(r.g);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=p(e),o=i.next();!o.done;o=i.next())r(o.value).kc(t,n)}))},t.all=function(e){var n=p(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).kc(o(a.length-1),t),i=n.next()}while(!i.done)}))},t})),d("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var y,v="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)y=Object.setPrototypeOf;else{var g;e:{var m={};try{m.__proto__={Ne:!0},g=m.Ne;break e}catch(s){}g=!1}y=g?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var b=y;function _(e,t){if(e.prototype=v(t.prototype),e.prototype.constructor=e,b)b(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Dg=t.prototype}function k(){this.g=!1,this.c=null,this.s=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function E(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function w(e,t){e.a={Yd:t,ie:!0},e.j=e.f||e.b}function T(e,t,n){return e.j=n,{value:t}}function S(e){e.j=0}function A(e,t,n){e.f=t,null!=n&&(e.b=n)}function O(e,t){e.f=0,e.b=t||0}function P(e,t){e.j=t,e.f=0}function R(e){e.f=0;var t=e.a.Yd;return e.a=null,t}function C(e){e.i=[e.a],e.f=0,e.b=0}function x(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.ie?e.j=e.f||e.b:null!=n.C&&e.b<n.C?(e.j=n.C,e.a=null):e.j=e.b:e.j=t}function D(e){this.a=new k,this.b=e}function I(e,t,n,r){try{var i=t.call(e.a.c,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.g=!1,i;var o=i.value}catch(t){return e.a.c=null,w(e.a,t),L(e)}return e.a.c=null,r.call(e.a,o),L(e)}function L(e){for(;e.a.j;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.s=void 0,w(e.a,t)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.ie)throw t.Yd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function M(e){this.next=function(t){return E(e.a),e.a.c?t=I(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=L(e)),t},this.throw=function(t){return E(e.a),e.a.c?t=I(e,e.a.c.throw,t,e.a.h):(w(e.a,t),t=L(e)),t},this.return=function(t){return function(e,t){E(e.a);var n=e.a.c;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),L(e))}(e,t)},l(),this[Symbol.iterator]=function(){return this}}function N(e,t){return M.prototype=e.prototype,new M(new D(t))}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{fe:i,Ie:o}}return{fe:-1,Ie:void 0}}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}k.prototype.h=function(e){this.s=e},k.prototype.return=function(e){this.a={return:e},this.j=this.b},k.prototype.C=function(e){this.j=e},d("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){a(),l(),e=p(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){j(e,o)||i(e,o,{value:{}})}function r(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();r("freeze"),r("preventExtensions"),r("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!j(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.a]=t,this},t.prototype.get=function(e){return j(e,o)?e[o][this.a]:void 0},t.prototype.has=function(e){return j(e,o)&&j(e[o],this.a)},t.prototype.delete=function(e){return!(!j(e,o)||!j(e[o],this.a))&&delete e[o][this.a]},t})),d("Map",(function(e){function t(){var e={};return e.Ja=e.next=e.head=e}function n(e,t){var n=e.a;return f((function(){if(n){for(;n.head!=e.a;)n=n.Ja;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var r=e.b[n];if(r&&j(e.b,n))for(var i=0;i<r.length;i++){var a=r[i];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:r,index:i,ba:a}}return{id:n,list:r,index:-1,ba:void 0}}function i(e){if(this.b={},this.a=t(),this.size=0,e){e=p(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(e){return!1}}())return e;a(),l();var o=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e);return n.list||(n.list=this.b[n.id]=[]),n.ba?n.ba.value=t:(n.ba={next:this.a,Ja:this.a.Ja,head:this.a,key:e,value:t},n.list.push(n.ba),this.a.Ja.next=n.ba,this.a.Ja=n.ba,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).ba||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.ba.Ja.next=e.ba.next,e.ba.next.Ja=e.ba.Ja,e.ba.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.Ja=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).ba},i.prototype.get=function(e){return(e=r(this,e).ba)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i})),d("Set",(function(e){function t(e){if(this.a=new Map,e){e=p(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(a(),l(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(r){return e.call(t,r,r,n)}))},t)})),d("Array.prototype.findIndex",(function(e){return e||function(e,t){return U(this,e,t).fe}})),d("Array.prototype.keys",(function(e){return e||function(){return function(e,t){l(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}})),d("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),d("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var o=n[i];if(o===e||Object.is(o,e))return!0}return!1}})),d("String.prototype.includes",(function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}})),d("Array.from",(function(e){return e||function(e,t,n){l(),t=null!=t?t:function(e){return e};var r=[],i=e[Symbol.iterator];if("function"==typeof i)for(e=i.call(e);!(i=e.next()).done;)r.push(t.call(n,i.value));else{i=e.length;for(var o=0;o<i;o++)r.push(t.call(n,e[o]))}return r}})),d("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=F(this,e,"startsWith"),r=n.length,i=e.length,o=Math.max(0,Math.min(0|t,n.length)),a=0;a<i&&o<r;)if(n[o++]!=e[a++])return!1;return a>=i}})),d("Array.prototype.find",(function(e){return e||function(e,t){return U(this,e,t).Ie}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)j(r,i)&&(e[i]=r[i])}return e};d("Object.assign",(function(e){return e||B}));var V=this;function G(e,t){var n,r=e.split("."),i=V;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]?i[n]:i[n]={}:i[n]=t}function K(e,t){function n(){}n.prototype=t.prototype,e.Dg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Og=function(e,n,r){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function H(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function z(e,t,n){var r=Math.pow(e.c,t);n=n*(1-r)+r*e.a,isNaN(n)||(e.a=n,e.b+=t)}function W(e){return e.a/(1-Math.pow(e.c,e.b))}function Y(){this.b=new H(2),this.c=new H(5),this.a=0}V.a=!0,Y.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(W(this.b),W(this.c))};var q={mb:0,jc:function(){},Z:function(){},error:function(){},m:function(){},info:function(){},debug:function(){},D:function(){},J:function(){}};e.console&&e.console.log.bind&&(q.Z=console.warn.bind(console),q.jc=console.error.bind(console),1<=q.mb&&(q.error=console.error.bind(console)),2<=q.mb&&(q.m=console.warn.bind(console)),3<=q.mb&&(q.info=console.info.bind(console)),4<=q.mb&&(q.debug=console.log.bind(console)),5<=q.mb&&(q.D=console.debug.bind(console)),6<=q.mb&&(q.J=console.debug.bind(console)));
/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var X=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function $(e){var t;e instanceof $?(J(this,e.xa),this.jb=e.jb,this.wa=e.wa,Q(this,e.Jb),this.la=e.la,Z(this,e.a.clone()),this.Xa=e.Xa):e&&(t=String(e).match(X))?(J(this,t[1]||"",!0),this.jb=ee(t[2]||""),this.wa=ee(t[3]||"",!0),Q(this,t[4]),this.la=ee(t[5]||"",!0),Z(this,t[6]||"",!0),this.Xa=ee(t[7]||"")):this.a=new ue(null)}function J(e,t,n){e.xa=n?ee(t,!0):t,e.xa&&(e.xa=e.xa.replace(/:$/,""))}function Q(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Jb=t}else e.Jb=null}function Z(e,t,n){t instanceof ue?e.a=t:(n||(t=te(t,ae)),e.a=new ue(t))}function ee(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function te(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ne),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ne(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(r=$.prototype).xa="",r.jb="",r.wa="",r.Jb=null,r.la="",r.Xa="",r.toString=function(){var e=[],t=this.xa;if(t&&e.push(te(t,re,!0),":"),t=this.wa){e.push("//");var n=this.jb;n&&e.push(te(n,re,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Jb)&&e.push(":",String(t))}return(t=this.la)&&(this.wa&&"/"!=t.charAt(0)&&e.push("/"),e.push(te(t,"/"==t.charAt(0)?oe:ie,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Xa)&&e.push("#",te(t,se)),e.join("")},r.resolve=function(e){var t=this.clone();"data"===t.xa&&(t=new $);var n=!!e.xa;n?J(t,e.xa):n=!!e.jb,n?t.jb=e.jb:n=!!e.wa,n?t.wa=e.wa:n=null!=e.Jb;var r=e.la;if(n)Q(t,e.Jb);else if(n=!!e.la){if("/"!=r.charAt(0))if(this.wa&&!this.la)r="/"+r;else{var i=t.la.lastIndexOf("/");-1!=i&&(r=t.la.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?t.la=r:n=""!==e.a.toString(),n?Z(t,e.a.clone()):n=!!e.Xa,n&&(t.Xa=e.Xa),t},r.clone=function(){return new $(this)};var re=/[#\/\?@]/g,ie=/[#\?:]/g,oe=/[#\?]/g,ae=/[#\?@]/g,se=/#/g;function ue(e){this.a=e||null}function le(e){this.b=e,this.a=null}function ce(e){this.b=e,this.a=null}function fe(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function pe(e){return h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:if(e.a>=e.i){if(!e.c)return t.return(Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t.return():(r=e.b*(1+(2*Math.random()-1)*e.h),T(t,new Promise((function(e){new ce(e).T(r/1e3)})),2));case 2:e.b*=e.g,S(t)}}))}))}function de(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}function he(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function ye(e,t){this.promise=e,this.me=t,this.a=!1}function ve(e){return new ye(Promise.reject(e),(function(){return Promise.resolve()}))}function ge(){var e=Promise.reject(new de(2,7,7001));return e.catch((function(){})),new ye(e,(function(){return Promise.resolve()}))}function me(e){return new ye(Promise.resolve(e),(function(){return Promise.resolve()}))}function be(e){return new ye(e,(function(){return e.catch((function(){}))}))}function _e(e){return new ye(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function ke(t,n){for(var r in n=void 0===n?{}:n)this[r]=n[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Ee(){this.a={}}function we(){this.Sc=new Ee,this.gc=this}function Te(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,o=r?[]:{};for(i in n)o[i]=e(n[i]);return r&&(o.length=n.length),o}}(e)}function Se(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ae(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Oe(e,t,n){if(n||(n=Se),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=p(e)).next();!i.done;r={item:r.item},i=e.next()){if(r.item=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.item,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function Pe(){this.a=[]}function Re(e,t){e.a.push(t.finally((function(){Ae(e.a,t)})))}function Ce(e){we.call(this),this.f=!1,this.g=new Pe,this.a=new Set,this.b=new Set,this.c=e||null}(r=ue.prototype).ja=null,r.nc=null,r.add=function(e,t){if(!this.ja&&(this.ja={},this.nc=0,this.a))for(var n=this.a.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),o=null;if(0<=i){var a=n[r].substring(0,i);o=n[r].substring(i+1)}else a=n[r];a=decodeURIComponent(a.replace(/\+/g," ")),o=o||"",this.add(a,decodeURIComponent(o.replace(/\+/g," ")))}return this.a=null,(n=this.ja.hasOwnProperty(e)&&this.ja[e])||(this.ja[e]=n=[]),n.push(t),this.nc++,this},r.toString=function(){if(this.a)return this.a;if(!this.ja)return"";var e,t=[];for(e in this.ja)for(var n=encodeURIComponent(e),r=this.ja[e],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),t.push(o)}return this.a=t.join("&")},r.clone=function(){var e=new ue;if(e.a=this.a,this.ja){var t,n={};for(t in this.ja)n[t]=this.ja[t].concat();e.ja=n,e.nc=this.nc}return e},le.prototype.T=function(t){var n=this;this.stop();var r=!0,i=null;return this.a=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.b()}),1e3*t),this},le.prototype.stop=function(){this.a&&(this.a(),this.a=null)},G("shaka.util.Timer",ce),ce.prototype.Gc=function(){return this.stop(),this.b(),this},ce.prototype.tickNow=ce.prototype.Gc,ce.prototype.T=function(e){var t=this;return this.stop(),this.a=new le((function(){t.b()})).T(e),this},ce.prototype.tickAfter=ce.prototype.T,ce.prototype.Ra=function(e){var t=this;return this.stop(),this.a=new le((function(){t.a.T(e),t.b()})).T(e),this},ce.prototype.tickEvery=ce.prototype.Ra,ce.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},ce.prototype.stop=ce.prototype.stop,G("shaka.util.Error",de),de.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},de.Severity={RECOVERABLE:1,CRITICAL:2},de.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},de.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},he.prototype.resolve=function(){},he.prototype.reject=function(){},G("shaka.util.AbortableOperation",ye),ye.failed=ve,ye.aborted=ge,ye.completed=me,ye.notAbortable=be,ye.prototype.abort=function(){return this.a=!0,this.me()},ye.prototype.abort=ye.prototype.abort,ye.all=_e,ye.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ye.prototype.finally=ye.prototype.finally,ye.prototype.Y=function(e,t){function n(n){return function(s){if(i.a&&n)o.reject(a);else{var u=n?e:t;u?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(u,s,o):(n?o.resolve:o.reject)(s)}}}function r(){return o.reject(a),i.abort()}var i=this,o=new he,a=new de(2,7,7001);return this.promise.then(n(!0),n(!1)),new ye(o,(function(){return r()}))},ye.prototype.chain=ye.prototype.Y,ke.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ke.prototype.stopImmediatePropagation=function(){this.a=!0},ke.prototype.stopPropagation=function(){},(r=Ee.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},r.get=function(e){return(e=this.a[e])?e.slice():null},r.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},r.remove=function(e,t){var n=this.a[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)},r.forEach=function(e){for(var t in this.a)e(t,this.a[t])},we.prototype.addEventListener=function(e,t){this.Sc.push(e,t)},we.prototype.removeEventListener=function(e,t){this.Sc.remove(e,t)},we.prototype.dispatchEvent=function(e){for(var t=this.Sc.get(e.type)||[],n=0;n<t.length;++n){e.target=this.gc,e.currentTarget=this.gc;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){q.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.a)break}return e.defaultPrevented},Pe.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise.catch((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},K(Ce,we),G("shaka.net.NetworkingEngine",Ce),Ce.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},Ce.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var xe={};function De(e,t,n){n=n||3;var r=xe[e];(!r||n>=r.priority)&&(xe[e]={priority:n,cg:t})}function Ie(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Le(){this.a=0}function Me(e,t,n){ye.call(this,e,t),this.b=n}function Ne(){}function je(){this.a=new Ee}function Ue(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Fe;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}Fe=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.a)}Ce.registerScheme=De,Ce.unregisterScheme=function(e){delete xe[e]},Ce.prototype.eg=function(e){this.a.add(e)},Ce.prototype.registerRequestFilter=Ce.prototype.eg,Ce.prototype.Fg=function(e){this.a.delete(e)},Ce.prototype.unregisterRequestFilter=Ce.prototype.Fg,Ce.prototype.Ve=function(){this.a.clear()},Ce.prototype.clearAllRequestFilters=Ce.prototype.Ve,Ce.prototype.fg=function(e){this.b.add(e)},Ce.prototype.registerResponseFilter=Ce.prototype.fg,Ce.prototype.Gg=function(e){this.b.delete(e)},Ce.prototype.unregisterResponseFilter=Ce.prototype.Gg,Ce.prototype.We=function(){this.b.clear()},Ce.prototype.clearAllResponseFilters=Ce.prototype.We,Ce.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},Ce.makeRequest=Ie,Ce.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},Ce.prototype.destroy=Ce.prototype.destroy,Ce.prototype.request=function(e,t){var n=this,r=new Le;if(this.f){var i=Promise.reject(new de(2,7,7001));return i.catch((function(){})),new Me(i,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Te(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=Te(t.uris);var o=(i=function(e,t,n){for(var r=me(void 0),i={},o=(e=p(e.a)).next();!o.done;i={Ad:i.Ad},o=e.next())i.Ad=o.value,r=r.Y(function(e){return function(){return e.Ad(t,n)}}(i));return r.Y(void 0,(function(e){if(e&&7001==e.code)throw e;throw new de(2,1,1006,e)}))}(this,e,t)).Y((function(){return function e(t,n,r,i,o,a,s){var u=new $(r.uris[o]),l=u.xa,c=!1;l||(l=(l=location.protocol).slice(0,-1),J(u,l),r.uris[o]=u.toString()),l=l.toLowerCase();var f,p=(l=xe[l])?l.cg:null;return p?be(pe(i)).Y((function(){return t.f?ge():(f=Date.now(),p(r.uris[o],r,n,(function(e,r,i){t.c&&1==n&&(t.c(e,r),c=!0,s.a=i)})))})).Y((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-f),{response:e,Df:c}}),(function(u){if(u&&7001==u.code)throw u;if(t.f)return ge();if(u&&1==u.severity)return t.dispatchEvent(new ke("retry",{error:u instanceof de?u:null})),o=(o+1)%r.uris.length,e(t,n,r,i,o,u,s);throw u||a})):ve(new de(2,1,1e3,u))}(n,e,t,new fe(t.retryParameters,!1),0,null,r)})),a=o.Y((function(t){return function(e,t,n){for(var r=me(void 0),i=(e=p(e.b)).next();!i.done;i=e.next())r=r.Y(i.value.bind(null,t,n.response));return r.Y((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof de&&(t=e.severity),new de(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;i.promise.then((function(){u=Date.now()-s}),(function(){}));var l=0;return o.promise.then((function(){l=Date.now()}),(function(){})),i=new Me((i=a.Y((function(t){var r=Date.now()-l,i=t.response;return i.timeMs+=u,i.timeMs+=r,t.Df||!n.c||i.fromCache||1!=e||n.c(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=2),e}))).promise,i.me,r),Re(this.g,i),i},Ce.prototype.request=Ce.prototype.request,Ce.NumBytesRemainingClass=Le,_(Me,ye),Ce.PendingRequest=Me,Me.all=_e,Me.notAbortable=be,Me.completed=me,Me.aborted=ge,Me.failed=ve,G("shaka.util.IReleasable",Ne),Ne.prototype.release=function(){},G("shaka.util.EventManager",je),je.prototype.release=function(){this.hb(),this.a=null},je.prototype.release=je.prototype.release,je.prototype.B=function(e,t,n,r){this.a&&(e=new Ue(e,t,n,r),this.a.push(t,e))},je.prototype.listen=je.prototype.B,je.prototype.ua=function(e,t,n,r){var i=this;this.B(e,t,(function r(o){i.pa(e,t,r),n(o)}),r)},je.prototype.listenOnce=je.prototype.ua,je.prototype.pa=function(e,t,n){if(this.a)for(var r=this.a.get(t)||[],i=(r=p(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.pa(),this.a.remove(t,i))},je.prototype.unlisten=je.prototype.pa,je.prototype.hb=function(){if(this.a){for(var e=this.a.getAll(),t=(e=p(e)).next();!t.done;t=e.next())t.value.pa();this.a.a={}}},je.prototype.removeAll=je.prototype.hb,Ue.prototype.pa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},Ue.prototype.unlisten=Ue.prototype.pa;var Fe=void 0;function Be(e){return new $(e=ot(e)).wa}function Ve(e,t,n){function r(e){new DataView(i.buffer).setUint32(o,e.byteLength,!0),o+=4,i.set(e,o),o+=e.byteLength}if(!n||!n.byteLength)throw new de(2,6,6015);t="string"==typeof t?new Uint8Array(st(t,!0)):new Uint8Array(t),e=st(e=ot(e),!0);var i=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),o=0;return r(new Uint8Array(e)),r(t),r(new Uint8Array(n)),i}function Ge(e,t){for(var n=[],r=p(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}function Ke(e,t){for(var n=p(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}function He(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function ze(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function We(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Ye(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}G("shaka.util.FairPlayUtils.defaultGetContentId",Be),G("shaka.util.FairPlayUtils.initDataTransform",Ve);var qe=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Xe(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function $e(e){return""!=et().canPlayType(e)}function Je(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ze("Tizen")}function Qe(){if(!Je())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Ze(e){return(navigator.userAgent||"").includes(e)}function et(){return nt||(tt||(tt=new ce((function(){nt=null}))),(nt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(nt=document.createElement("video")),tt.T(1),nt)}var tt=null,nt=null;function rt(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=ut(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new de(2,2,2004)}}function it(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw q.error("Data has an incorrect length, must be even."),new de(2,2,2004);if(e instanceof ArrayBuffer)var r=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),r=new DataView(r);for(var i=0;i<e;i++)n[i]=r.getUint16(2*i,t);return ut(n)}function ot(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return rt(t);if(254==t[0]&&255==t[1])return it(t.subarray(2),!1);if(255==t[0]&&254==t[1])return it(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(q.debug("Unable to find byte-order-mark, making an educated guess."),0==t[0]&&0==t[2])return it(e,!1);if(0==t[1]&&0==t[3])return it(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return rt(e);throw new de(2,2,2003)}function at(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function st(e,t){for(var n=new Uint8Array(2*e.length),r=new DataView(n.buffer),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n.buffer}function ut(e){if(!lt)for(var t=function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){lt=function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.size)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.size));return n}}(n);break}return lt(e)}G("shaka.util.StringUtils.fromUTF8",rt),G("shaka.util.StringUtils.fromUTF16",it),G("shaka.util.StringUtils.fromBytesAutoDetect",ot),G("shaka.util.StringUtils.toUTF8",at),G("shaka.util.StringUtils.toUTF16",st);var lt=null;G("shaka.util.StringUtils.resetFromCharCode",(function(){lt=null}));var ct={Hc:function(t,n){var r=ut(t);return n=null==n||n,r=e.btoa(r).replace(/\+/g,"-").replace(/\//g,"_"),n?r:r.replace(/=*$/,"")}};function ft(e,t){var n=this;t=void 0===t?1:t,this.F=e,this.v=new Set,this.h=this.l=null,this.V=!1,this.K=0,this.a=null,this.i=new je,this.b=new Map,this.u=[],this.o=new he,this.f=null,this.g=function(t){n.o.reject(t),e.onError(t)},this.sa=new Map,this.$=new Map,this.S=new ce((function(){return function(e){var t=e.sa,n=e.$;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new de(2,6,6014)),e.F.yc(ze(n))}(n)})),this.c=!1,this.qa=new he,this.G=!1,this.H=[],this.ra=!1,this.ea=new ce((function(){!function(e){e.b.forEach((function(t,n){var r=t.rd,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.F.onExpirationUpdated(n.sessionId,i),t.rd=i)}))}(n)})).Ra(t),this.o.catch((function(){}))}function pt(e,t,n){return e.u=n,e.G=0<n.length,dt(e,t)}function dt(t,n){var r=function(t){if(0==(t=He(t.f.clearKeys)).size)return null;var n=[],r=[];t.forEach((function(e,t){var i=ct.Yc(t),o=ct.Yc(e);i={kty:"oct",kid:ct.Hc(i,!1),k:ct.Hc(o,!1)},n.push(i),r.push(i.kid)})),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:new Uint8Array(at(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}(t);if(r)for(var i=p(n),o=i.next();!o.done;o=i.next())o.value.drmInfos=[r];for((r=n.some((function(e){return 0<e.drmInfos.length})))||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var r=p(e),i=r.next();!i.done;i=r.next())i.value.drmInfos=n}(n,o=He(t.f.servers)),o=(i=p(n)).next();!o.done;o=i.next())for(var a=(o=p(o.value.drmInfos)).next();!a.done;a=o.next())Ct(a.value,He(t.f.servers),He(t.f.advanced||{}));return(o=function(e,t){for(var n=new Set,r=p(t),i=r.next();!i.done;i=r.next()){var o=p(i.value.drmInfos);for(i=o.next();!i.done;i=o.next())n.add(i.value)}for(r=p(n),i=r.next();!i.done;i=r.next())Ct(i.value,He(e.f.servers),He(e.f.advanced||{}));o=e.G?"required":"optional";var a=e.G?["persistent-license"]:["temporary"];for(r=new Map,n=p(n),i=n.next();!i.done;i=n.next())i=i.value,r.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:o,sessionTypes:a,label:i.keySystem,drmInfos:[]});for(n=p(t),i=n.next();!i.done;i=n.next()){i=i.value,o=i.audio,a=i.video;var s=o?We(o.mimeType,o.codecs):"",u=a?We(a.mimeType,a.codecs):"",l=p(i.drmInfos);for(i=l.next();!i.done;i=l.next()){i=i.value;var c=r.get(i.keySystem);c.drmInfos.push(i),i.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),i.persistentStateRequired&&(c.persistentState="required"),o&&c.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:s}),a&&c.videoCapabilities.push({robustness:i.videoRobustness||"",contentType:u})}}return r}(t,n)).size?(o=_t(t,o),r?o:o.catch((function(){}))):(t.V=!0,Promise.resolve())}function ht(e){return h((function t(){var n;return N(t,(function(t){switch(t.j){case 1:if(!(e.l&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.C(0);break}return A(t,3),T(t,e.l.setServerCertificate(e.a.serverCertificate),5);case 5:t.s||q.m("Server certificates are not supported by the key system.  The server certificate has been ignored."),P(t,0);break;case 3:return n=R(t),t.return(Promise.reject(new de(2,6,6004,n.message)))}}))}))}function yt(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return Et(e,t.initDataType,t.initData)})),e.u.forEach((function(t){return kt(e,t)})),t.length||e.u.length||e.o.resolve(),e.o}function vt(e,t,n){for(var r=e.b.values(),i=(r=p(r)).next();!i.done;i=r.next())if(ct.Da(n,i.value.initData)&&!Ze("Tizen 2"))return void q.debug("Ignoring duplicate init data.");Et(e,t,n)}function gt(e){return e?e.keySystem:""}function mt(e,t){return!!Ze("Edge/")||e.v.has(t)}function bt(e){return e=Ge(e=e.b.keys(),(function(e){return e.sessionId})),Array.from(e)}function _t(e,t){if(1==t.size&&t.has(""))return Promise.reject(new de(2,6,6e3));for(var n=p(t.values()),r=n.next();!r.done;r=n.next())0==(r=r.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;var i=n=new he;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,r){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(i=i.catch(function(){if(!this.c)return navigator.requestMediaKeySystemAccess(r,[t])}.bind(n)))}))}.bind(e)),i=(i=i.catch((function(){return Promise.reject(new de(2,6,6001))}))).then(function(e){if(this.c)return Promise.reject();this.v.clear();var n=e.getConfiguration(),r=n.videoCapabilities||[],i=p(n.audioCapabilities||[]);for(n=i.next();!n.done;n=i.next())this.v.add(n.value.contentType);for(n=(r=p(r)).next();!n.done;n=r.next())this.v.add(n.value.contentType);r=e.keySystem,i=[];var o=[],a=[],s=[];return function(e,t,n,r,i){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return ct.Da(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){r.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&ct.Da(t.initData,e.initData)}))||r.push(e)})),e.keyIds)for(var o=0;o<e.keyIds.length;++o)i.includes(e.keyIds[o])||i.push(e.keyIds[o])}))}((n=t.get(e.keySystem)).drmInfos,i,o,a,s),1<o.length&&q.m("Multiple unique server certificates found! Only the first will be used."),1<i.length&&q.m("Multiple unique license server URIs found! Only the first will be used."),this.a={keySystem:r,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:(n.audioCapabilities?n.audioCapabilities[0].robustness:"")||"",videoRobustness:(n.videoCapabilities?n.videoCapabilities[0].robustness:"")||"",serverCertificate:o[0],initData:a,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new de(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.c)return Promise.reject();q.info("Created MediaKeys object for key system",this.a.keySystem),this.l=e,this.V=!0}.bind(e)).catch(function(e){if(!this.c)return this.a=null,this.v.clear(),e instanceof de?Promise.reject(e):Promise.reject(new de(2,6,6002,e.message))}.bind(e)),n.reject(),i}function kt(e,t){try{q.D("Attempting to load an offline session",t);var n=e.l.createSession("persistent-license")}catch(t){var r=new de(2,6,6005,t.message);return e.g(r),Promise.reject(r)}e.i.B(n,"message",e.se.bind(e)),e.i.B(n,"keystatuseschange",e.qe.bind(e));var i={initData:null,loaded:!1,rd:1/0,Ca:null};return e.b.set(n,i),n.load(t).then(function(e){return this.c?Promise.reject():(q.J("Loaded offline session",t,e),e?(i.loaded=!0,Rt(this)&&this.o.resolve(),n):(this.b.delete(n),void this.g(new de(2,6,6013))))}.bind(e),function(e){this.c||(this.b.delete(n),this.g(new de(2,6,6005,e.message)))}.bind(e))}function Et(e,t,n){try{if(e.G){q.D("Creating new persistent session");var r=e.l.createSession("persistent-license")}else q.D("Creating new temporary session"),r=e.l.createSession()}catch(t){return void e.g(new de(2,6,6005,t.message))}e.i.B(r,"message",e.se.bind(e)),e.i.B(r,"keystatuseschange",e.qe.bind(e)),e.b.set(r,{initData:n,loaded:!1,rd:1/0,Ca:null});try{n=e.f.initDataTransform(n,e.a)}catch(n){return t=n,n instanceof de||(t=new de(2,6,6016,n)),void e.g(t)}r.generateRequest(t,n.buffer).catch((function(t){if(!e.c){if(e.b.delete(r),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new de(2,6,6006,t.message,t,n))}}))}function wt(e,t){if(gt(t).startsWith("com.apple.fps")){var n=t.serverCertificate;e=Ve(e,Be(e),n)}return e}function Tt(e,t){var n=t.target;q.D("Sending license request for session",n.sessionId,"of type",t.messageType);var r=e.b.get(n),i=e.a.licenseServerUri,o=e.f.advanced[e.a.keySystem];"individualization-request"==t.messageType&&o&&o.individualizationServer&&(i=o.individualizationServer),(i=Ie([i],e.f.retryParameters)).body=t.message,i.method="POST",i.licenseRequestType=t.messageType,i.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=it(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){q.debug("Unwrapping PlayReady request.");for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)e.headers[n[r].getElementsByTagName("name")[0].textContent]=n[r].getElementsByTagName("value")[0].textContent;e.body=ct.Fa(t.getElementsByTagName("Challenge")[0].textContent).buffer}else q.debug("PlayReady request is already unwrapped."),e.headers["Content-Type"]="text/xml; charset=utf-8"}(i),e.a.keySystem.startsWith("com.apple.fps")&&e.f.fairPlayTransform&&function(e){var t=new Uint8Array(e.body);t="spc="+ct.Hc(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=at(t)}(i);var a=Date.now();e.F.Db.request(2,i).promise.then(function(e){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&function(e){try{var t=rt(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=ct.Fa(t).buffer}(e),this.K+=(Date.now()-a)/1e3,q.D("Updating session",n.sessionId),n.update(e.data).then(function(){var e=this;this.F.onEvent(new ke("drmsessionupdate")),r&&(r.Ca&&r.Ca.resolve(),new ce((function(){r.loaded=!0,Rt(e)&&e.o.resolve()})).T(xt))}.bind(this)))}.bind(e),function(e){this.c||(e=new de(2,6,6007,e),this.g(e),r&&r.Ca&&r.Ca.reject(e))}.bind(e)).catch(function(e){this.c||(e=new de(2,6,6008,e.message),this.g(e),r&&r.Ca&&r.Ca.reject(e))}.bind(e))}function St(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map;return e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(e){return function(e){return h((function r(){var i,o,a;return N(r,(function(r){switch(r.j){case 1:return A(r,2),T(r,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return i=r.s,a=!!(o=i.getConfiguration().sessionTypes)&&o.includes("persistent-license"),Ze("Tizen 3")&&(a=!1),n.set(e,{persistentState:a}),T(r,i.createMediaKeys(),5);case 5:P(r,0);break;case 2:R(r),n.set(e,null),S(r)}}))}))}(e)})),Promise.all(e).then((function(){return ze(n)}))}function At(e,t){var n=t.audio,r=t.video;if(n&&n.encrypted&&!mt(e,We(n.mimeType,n.codecs))||r&&r.encrypted&&!mt(e,We(r.mimeType,r.codecs)))return!1;var i=gt(e.a);return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==i}))}function Ot(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].keySystem==t[i].keySystem){var o=e[r];i=t[i];var a=[];a=(a=a.concat(o.initData||[])).concat(i.initData||[]);var s=[];s=(s=s.concat(o.keyIds)).concat(i.keyIds),n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||i.persistentStateRequired,videoRobustness:o.videoRobustness||i.videoRobustness,audioRobustness:o.audioRobustness||i.audioRobustness,serverCertificate:o.serverCertificate||i.serverCertificate,initData:a,keyIds:s});break}return n}function Pt(e){return h((function t(){var n;return N(t,(function(t){switch(t.j){case 1:return n=Array.from(e.b.keys()),e.b.clear(),T(t,Promise.all(n.map((function(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:return q.D("Closing session",e.sessionId),A(t,2),T(t,Promise.all([e.close(),e.closed]),4);case 4:P(t,0);break;case 2:R(t),S(t)}}))}))}))),0)}}))}))}function Rt(e){return Ke(e=e.b.values(),(function(e){return e.loaded}))}function Ct(t,n,r){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(r=r.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}G("shaka.util.Uint8ArrayUtils.toBase64",ct.Hc),ct.Fa=function(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n},G("shaka.util.Uint8ArrayUtils.fromBase64",ct.Fa),ct.Yc=function(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=e.parseInt(t.substr(r,2),16);return n},G("shaka.util.Uint8ArrayUtils.fromHex",ct.Yc),ct.Ic=function(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t},G("shaka.util.Uint8ArrayUtils.toHex",ct.Ic),ct.Da=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0},G("shaka.util.Uint8ArrayUtils.equal",ct.Da),ct.concat=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var r=n=0;r<t.length;++r)n+=t[r].length;n=new Uint8Array(n);for(var i=r=0;i<t.length;++i)n.set(t[i],r),r+=t[i].length;return n},G("shaka.util.Uint8ArrayUtils.concat",ct.concat),(r=ft.prototype).destroy=function(){var e=this;return h((function t(){return N(t,(function(t){switch(t.j){case 1:return e.c?T(t,e.qa,0):(e.c=!0,T(t,function(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:return e.i.release(),e.i=null,e.o.reject(),e.ea.stop(),e.ea=null,e.S.stop(),e.S=null,T(t,Pt(e),2);case 2:if(!e.h){t.C(3);break}return A(t,4),T(t,e.h.setMediaKeys(null),6);case 6:P(t,5);break;case 4:R(t);case 5:e.h=null;case 3:e.a=null,e.v.clear(),e.l=null,e.u=[],e.f=null,e.g=null,e.F=null,S(t)}}))}))}(e),4));case 4:e.qa.resolve(),t.C(0)}}))}))},r.configure=function(e){this.f=e},r.Qb=function(e){var t=this;if(!this.l)return this.i.ua(e,"encrypted",(function(){t.g(new de(2,6,6010))})),Promise.resolve();this.h=e,this.i.ua(this.h,"play",(function(){for(var e=0;e<t.H.length;e++)Tt(t,t.H[e]);t.ra=!0,t.H=[]})),"webkitCurrentPlaybackTargetIsWireless"in this.h&&this.i.B(this.h,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Pt(t)})),e=(e=this.h.setMediaKeys(this.l)).catch((function(e){return Promise.reject(new de(2,6,6003,e.message))}));var n=ht(this);return Promise.all([e,n]).then((function(){if(t.c)return Promise.reject();yt(t),t.a.initData.length||t.u.length||t.i.B(t.h,"encrypted",(function(e){return vt(t,e.initDataType,new Uint8Array(e.initData))}))})).catch((function(e){if(!t.c)return Promise.reject(e)}))},r.Tb=function(){for(var e=1/0,t=this.b.keys(),n=(t=p(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},r.se=function(e){this.h&&this.f.delayLicenseRequestUntilPlayed&&this.h.paused&&!this.ra?this.H.push(e):Tt(this,e)},r.qe=function(e){e=e.target,q.J("Key status changed for session",e.sessionId);var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if(!("com.microsoft.playready"!=this.a.keySystem||16!=r.byteLength||Ze("Tizen")||Ze("VITIS")||Ze("Web0S")||Ze("TiVo"))){var o=(i=new DataView(r)).getUint32(0,!0),a=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,o,!1),i.setUint16(4,a,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),i=ct.Ic(new Uint8Array(r)),this.sa.set(i,e)}.bind(this));var r=e.expiration-Date.now();(0>r||n&&1e3>r)&&t&&!t.Ca&&(q.debug("Session has expired",e.sessionId),this.b.delete(e),e.close().catch((function(){}))),Rt(this)&&(this.o.resolve(),this.S.T(Dt))};var xt=5,Dt=.5;function It(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Lt(){}function Mt(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Nt(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function jt(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=e.length-1;0<=r&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}function Ut(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}It.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},It.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},It.prototype.c=function(){this.a.resetCaptionStream()},Lt.prototype.init=function(){},Lt.prototype.b=function(){},Lt.prototype.c=function(){};var Ft={Xe:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},Oc:function(e,t){return e.concat(t)},wc:function(){},Ma:function(e){return null!=e}};function Bt(e,t){if(0==t.length)return e;var n=t.map((function(e){return new $(e)}));return e.map((function(e){return new $(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(Ft.Oc,[]).map((function(e){return e.toString()}))}function Vt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var Gt={Ua:"video",Nb:"audio",va:"text",Mg:"image",Kg:"application"};function Kt(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function Ht(t,n){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(zt(n,t)):MediaSource.isTypeSupported(zt("audio",t))||MediaSource.isTypeSupported(zt("video",t)))}function zt(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",o=r[1],a=Number(r[2]);i=("66"==o?i+"4200":"77"==o?i+"4d00":i+"6400")+(a>>4).toString(16),i+=(15&a).toString(16),n=n.replace(r[0],i)}return n}function Wt(e,t,n){this.startTime=e,this.direction=Qt,this.endTime=t,this.payload=n,this.region=new sn,this.position=null,this.positionAlign=Yt,this.size=0,this.textAlign=qt,this.writingMode=Zt,this.lineInterpretation=en,this.line=null,this.lineHeight="",this.lineAlign=tn,this.displayAlign=$t,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=rn,this.fontStyle=on,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}Kt.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Kt.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},Kt.prototype.h=function(){var e={data:ct.concat.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},G("shaka.text.Cue",Wt);var Yt="auto";Wt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Yt};var qt="center",Xt={LEFT:"left",RIGHT:"right",CENTER:qt,START:"start",END:"end"};Wt.textAlign=Xt;var $t="after",Jt={BEFORE:"before",CENTER:"center",AFTER:$t};Wt.displayAlign=Jt;var Qt="ltr";Wt.direction={HORIZONTAL_LEFT_TO_RIGHT:Qt,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Zt="horizontal-tb";Wt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Zt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var en=0;Wt.lineInterpretation={LINE_NUMBER:en,PERCENTAGE:1};var tn="start",nn={CENTER:"center",START:tn,END:"end"};Wt.lineAlign=nn;var rn=400;Wt.fontWeight={NORMAL:rn,BOLD:700};var on="normal",an={NORMAL:on,ITALIC:"italic",OBLIQUE:"oblique"};function sn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=un,this.scroll=ln}Wt.fontStyle=an,Wt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},G("shaka.text.CueRegion",sn);var un=1;sn.units={PX:0,PERCENTAGE:un,LINES:2};var ln="";function cn(e){this.g=null,this.c=e,this.f=this.o=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}sn.scrollMode={NONE:ln,UP:"up"};var fn={};function pn(t){return!!(fn[t]||e.muxjs&&"application/cea-608"==t)}function dn(e,t){"application/cea-608"!=t&&(e.g=new fn[t])}function hn(e,t,n,r,i){for(var o=n+" "+r,a=new Map,s=(t=p(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,a.has(s)||a.set(s,new Map),a.get(s).has(o)||a.get(s).set(o,[]),u.startTime+=i,u.endTime+=i,u.startTime>=e.f&&u.startTime<e.h&&(u=new Wt(u.startTime,u.endTime,u.text),a.get(s).get(o).push(u),s==e.l&&e.c.append([u]))}for(o=(i=p(a.keys())).next();!o.done;o=i.next())for(o=o.value,e.i.has(o)||e.i.set(o,new Map),s=(t=p(a.get(o).keys())).next();!s.done;s=t.next())s=s.value,u=a.get(o).get(s),e.i.get(o).set(s,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(r,e.h))}function yn(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.i=new je,this.v=!1,this.l={},this.o=t,e=this.u=new he,t=new MediaSource,this.i.ua(t,"sourceopen",e.resolve),this.f.src=vn(t),this.h=t}G("shaka.text.TextEngine.registerParser",(function(e,t){fn[e]=t})),G("shaka.text.TextEngine.unregisterParser",(function(e){delete fn[e]})),cn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},cn.prototype.sc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new de(2,2,2009,e)}},cn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))};var vn=e.URL.createObjectURL;function gn(e){var t=We(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return qe.forEach((function(n,r){var i=e[r];i&&t.push(n+'="'+i+'"')})),t.join(";")}(e);return pn(t)||MediaSource.isTypeSupported(n)||Ht(t,e.type)}function mn(e,t){e.a||(e.a=new cn(e.g)),dn(e.a,t)}function bn(e){return!e.h||"ended"==e.h.readyState}function _n(e,t){if("text"==t)var n=e.a.a;else n=!(n=En(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function kn(e,t){return"text"==t?e.a.b:Mt(En(e,t))}function En(e,t){try{return e.b[t].buffered}catch(n){return t in e.b&&q.error("failed to get buffered range for "+t,n),null}}function wn(t,n,r,i,o,a){return"text"==n?function(e,t,n,r){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==r)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.o,segmentStart:n,segmentEnd:r};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(r,this.h)}}.bind(e))}(t.a,r,i,o):t.l[n]?function(e,t){e.f=!0,e.b=new he,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new de(2,3,3018)),e.b}(t.l[n],r).then(function(e){return this.a||mn(this,"text/vtt"),e.captions&&e.captions.length&&hn(this.a,e.captions,i,o,this.b.video.timestampOffset),An(this,n,this.Ee.bind(this,n,e.data.buffer))}.bind(t)):(a&&e.muxjs&&(t.a||mn(t,"text/vtt"),null==i&&null==o?t.o.init(r):t.o.b(r,(function(e){e.length&&hn(t.a,e,i,o,t.b.video.timestampOffset)}))),An(t,n,t.Ee.bind(t,n,r)))}function Tn(e,t){var n=kn(e,"video")||0;!function(e,t,n){if(e.l=t,t=e.i.get(t))for(var r=p(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter((function(e){return e.endTime<=n})))&&e.c.append(i)}(e.a,t,n)}function Sn(e,t){return"text"==t?e.a?(e.o.c(),e.a.remove(0,1/0)):Promise.resolve():An(e,t,e.Fe.bind(e,t,0,e.h.duration))}function An(e,t,n){if(e.v)return Promise.reject();if(n={start:n,p:new he},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new de(2,3,3017,t)):n.p.reject(new de(2,3,3015,r)),Pn(e,t)}return n.p}function On(e,t){if(e.v)return Promise.reject();var n,r=[];for(n in e.b){var i=new he,o={start:function(e){e.resolve()}.bind(null,i),p:i};e.c[n].push(o),r.push(i),1==e.c[n].length&&o.start()}return Promise.all(r).then(function(){try{t()}catch(t){var e=Promise.reject(new de(2,3,3015,t))}for(var n in this.b)Pn(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function Pn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(r){n.p.reject(new de(2,3,3015,r)),Pn(e,t)}}function Rn(e,t){return e=xn(e),t=xn(t),e.split("-")[0]==t.split("-")[0]}function Cn(e,t){e=xn(e),t=xn(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function xn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Ln.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Dn(e){return e.language?xn(e.language):e.audio&&e.audio.language?xn(e.audio.language):e.video&&e.video.language?xn(e.video.language):"und"}function In(e,t){for(var n=xn(e),r=new Set,i=p(t),o=i.next();!o.done;o=i.next())r.add(xn(o.value));for(o=(i=p(r)).next();!o.done;o=i.next())if((o=o.value)==n)return o;for(o=(i=p(r)).next();!o.done;o=i.next())if(Cn(o=o.value,n))return o;for(o=(i=p(r)).next();!o.done;o=i.next()){var a=o=o.value,s=n;if(a=xn(a),s=xn(s),a=a.split("-"),s=s.split("-"),2==a.length&&2==s.length&&a[0]==s[0])return o}for(o=(r=p(r)).next();!o.done;o=r.next())if(Cn(n,i=o.value))return i;return null}(r=yn.prototype).destroy=function(){var e=this;this.v=!0;var t,n=[];for(t in this.c){var r=this.c[t],i=r[0];for(this.c[t]=r.slice(0,1),i&&n.push(i.p.catch(Ft.wc)),i=1;i<r.length;++i)r[i].p.reject()}for(var o in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[o].destroy());return Promise.all(n).then((function(){e.i&&(e.i.release(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.h=null,e.a=null,e.g=null,e.b={},e.l={},e.o=null,e.c={}}))},r.init=function(e,t){var n=this;return h((function r(){var i;return N(r,(function(r){switch(r.j){case 1:return i=Gt,T(r,n.u,2);case 2:e.forEach((function(e,r){var o=We(e.mimeType,e.codecs);r==i.va?mn(n,o):(!t&&MediaSource.isTypeSupported(o)||!Ht(o,r)||(n.l[r]=new Kt,o=zt(r,o)),o=n.h.addSourceBuffer(o),n.i.B(o,"error",n.vg.bind(n,r)),n.i.B(o,"updateend",n.Gb.bind(n,r)),n.b[r]=o,n.c[r]=[])})),S(r)}}))}))},r.$c=function(e){if(e.total=Ut(this.f.buffered),e.audio=Ut(En(this,"audio")),e.video=Ut(En(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},r.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):An(this,e,this.Fe.bind(this,e,t,n))},r.flush=function(e){return"text"==e?Promise.resolve():An(this,e,this.bf.bind(this,e))},r.endOfStream=function(e){return On(this,function(){bn(this)||(e?this.h.endOfStream(e):this.h.endOfStream())}.bind(this))},r.Ba=function(e){return On(this,function(){this.h.duration=e}.bind(this))},r.ca=function(){return this.h.duration},r.Ee=function(e,t){this.b[e].appendBuffer(t)},r.Fe=function(e,t,n){n<=t?this.Gb(e):this.b[e].remove(t,n)},r.Oe=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.Gb(e)},r.bf=function(e){this.f.currentTime-=.001,this.Gb(e)},r.ug=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.Gb(e)},r.rg=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.Gb(e)},r.vg=function(e){this.c[e][0].p.reject(new de(2,3,3014,this.f.error?this.f.error.code:0))},r.Gb=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Pn(this,e))};var Ln=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),Mn={Vd:function(e,t){function n(e){var t="";e.video&&(t=Ye(e.video.codecs)[0]);var n="";return e.audio&&(n=Ye(e.audio.codecs)[0]),t+"-"+n}var r=e.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);r=Mn.$d(r,t);for(var i=new Ee,o=(r=p(r)).next();!o.done;o=r.next()){var a=n(o=o.value);i.push(a,o)}var s=null,u=1/0;for(i.forEach((function(e,t){for(var n=0,r=0,i=p(t),o=i.next();!o.done;o=i.next())n+=o.value.bandwidth||0,++r;n/=r,q.debug("codecs",e,"avg bandwidth",n),n<u&&(s=e,u=n)})),r=(i=p(e.periods)).next();!r.done;r=i.next())(r=r.value).variants=r.variants.filter((function(e){return n(e)==s||(q.debug("Dropping Variant (better codec available)",e),!1)}))},ld:function(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))},Sd:function(e,t,n){var r=!1;return e.forEach((function(e){var i=e.allowedByApplication;e.allowedByApplication=Mn.ld(e,t,n),i!=e.allowedByApplication&&(r=!0)})),r},filterNewPeriod:function(e,t,n,r){r.variants=r.variants.filter((function(r){if(e&&e.V&&!At(e,r))return q.debug("Dropping variant - not compatible with key system",r),!1;var i=r.audio;return r=r.video,i&&!gn(i)?(q.debug("Dropping variant - audio not compatible with platform",Mn.yb(i)),!1):r&&!gn(r)?(q.debug("Dropping variant - video not compatible with platform",Mn.yb(r)),!1):i&&t&&!Mn.Td(i,t)?(q.debug("Droping variant - not compatible with active audio","active audio",Mn.yb(t),"variant.audio",Mn.yb(i)),!1):!(r&&n&&!Mn.Td(r,n))||(q.debug("Droping variant - not compatible with active video","active video",Mn.yb(n),"variant.video",Mn.yb(r)),!1)})),r.textStreams=r.textStreams.filter((function(e){var t=pn(We(e.mimeType,e.codecs));return t||q.debug("Dropping text stream. Is not supported by the platform.",e),t}))},Td:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]},Qd:function(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,o=[];i&&o.push(i),r&&o.push(r);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach((function(e){return u.add(e)})),n&&n.roles.forEach((function(e){return u.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:a,codecs:o.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e},Fc:function(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}},ed:function(e){return e.__shaka_id||(e.__shaka_id=Mn.Kf++),e.__shaka_id},Kf:0,Ef:function(e){var t=Mn.ee(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t},de:function(e){var t=Mn.ee(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t},ee:function(e){return{id:Mn.ed(e),active:!1,type:"",bandwidth:0,language:xn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}},Bb:function(e){return e.allowedByApplication&&e.allowedByKeySystem},sf:function(e){return e.filter((function(e){return Mn.Bb(e)}))},$d:function(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),r=new Map,i=(n=p(n)).next();!i.done;i=n.next()){var o=(i=i.value).audio.channelsCount;r.has(o)||r.set(o,[]),r.get(o).push(i)}return 0==(n=Array.from(r.keys())).length?e:(i=n.filter((function(e){return e<=t}))).length?r.get(Math.max.apply(null,i)):r.get(Math.min.apply(null,n))},Sb:function(e,t,n){var r=e,i=e.filter((function(e){return e.primary}));i.length&&(r=i);var o=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==o})),t){var a=In(xn(t),e.map((function(e){return e.language})));a&&(r=e.filter((function(e){return xn(e.language)==a})))}if(n){if((e=Mn.Zd(r,n)).length)return e;q.m("No exact match for the text role could be found.")}else if((e=r.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=r.map((function(e){return e.roles})).reduce(Ft.Oc,[])).length?Mn.Zd(r,e[0]):r},Zd:function(e,t){return e.filter((function(e){return e.roles.includes(t)}))},ce:function(e,t,n){for(var r=0;r<n.length;r++)if(n[r].audio==e&&n[r].video==t)return n[r];return null},Ff:function(e){return"audio"==e.type},If:function(e){return"video"==e.type},Bf:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t},yb:function(e){return Mn.Ff(e)?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:Mn.If(e)?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}};function Nn(){this.h=null,this.c=!1,this.b=new Y,this.g=[],this.i=!1,this.a=this.f=null}function jn(e,t){return e&&(t=t.filter((function(t){return Mn.ld(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Un(e,t){this.a=e,this.b=t}function Fn(e,t){var n=new Un(2,6),r=Gn,i=r.a,o=n.b-i.b;(0<(n.a-i.a||o)?r.c:r.b)(r.a,n,e,t)}function Bn(e,t,n,r){q.Z([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Vn(e,t,n,r){q.jc([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}G("shaka.abr.SimpleAbrManager",Nn),Nn.prototype.stop=function(){this.h=null,this.c=!1,this.g=[],this.f=null},Nn.prototype.stop=Nn.prototype.stop,Nn.prototype.init=function(e){this.h=e},Nn.prototype.init=Nn.prototype.init,Nn.prototype.chooseVariant=function(){var e=jn(this.a.restrictions,this.g),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.g.length&&!e.length&&(q.m("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),e=[(e=jn(null,this.g))[0]]);for(var n=e[0]||null,r=0;r<e.length;++r){var i=e[r],o=i.bandwidth/this.a.bandwidthDowngradeTarget,a=(e[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;q.J("Bandwidth ranges:",(i.bandwidth/1e6).toFixed(3),(o/1e6).toFixed(3),(a/1e6).toFixed(3)),t>=o&&t<=a&&(n=i)}return this.f=Date.now(),n},Nn.prototype.chooseVariant=Nn.prototype.chooseVariant,Nn.prototype.enable=function(){this.c=!0},Nn.prototype.enable=Nn.prototype.enable,Nn.prototype.disable=function(){this.c=!1},Nn.prototype.disable=Nn.prototype.disable,Nn.prototype.segmentDownloaded=function(e,t){q.J("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.f,"enabled="+this.c);var n=this.b;if(!(16e3>t)){var r=8e3*t/e,i=e/1e3;n.a+=t,z(n.b,i,r),z(n.c,i,r)}if(null!=this.f&&this.c)e:{if(q.J("Suggesting Streams..."),this.i){if(Date.now()-this.f<1e3*this.a.switchInterval){q.J("Still within switch interval...");break e}}else{if(!(128e3<=this.b.a)){q.J("Still waiting for a good estimate...");break e}this.i=!0}n=this.chooseVariant(),r=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),q.debug("Calling switch_(), bandwidth="+Math.round(r/1e3)+" kbps"),this.h(n)}},Nn.prototype.segmentDownloaded=Nn.prototype.segmentDownloaded,Nn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Nn.prototype.getBandwidthEstimate=Nn.prototype.getBandwidthEstimate,Nn.prototype.setVariants=function(e){this.g=e},Nn.prototype.setVariants=Nn.prototype.setVariants,Nn.prototype.configure=function(e){this.a=e},Nn.prototype.configure=Nn.prototype.configure,Un.prototype.toString=function(){return"v"+this.a+"."+this.b};var Gn=null,Kn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Hn="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),zn=["loop","playbackRate"],Wn=["pause","play"],Yn="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),qn={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Xn={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},$n=[["getConfiguration","configure"]],Jn=[["isTextTrackVisible","setTextTrackVisibility"]],Qn="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),Zn=["attach","detach","load","unload"];function er(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof ke){var n={};for(i in t){var r=t[i];r&&"object"==typeof r?"detail"==i&&(n[i]=r):i in Event||(n[i]=r)}return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=(r=p(Object.getOwnPropertyNames(t))).next();!n.done;n=r.next())i.add(n.value);for(r={},n=(i=p(i)).next();!n.done;n=i.next())r[n=n.value]=t[n];i={__type__:"Error",contents:r}}else if(t instanceof TimeRanges)for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)i.start.push(t.start(n)),i.end.push(t.end(n));else i=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return i}}))}function tr(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var r,i=Error(n.message);for(r in n)i[r]=n[r];n=i}else n=t;return n}))}function nr(e,t,n,r,i,o){this.S=e,this.f=new ce(t),this.V=n,this.l=!1,this.v=r,this.K=i,this.G=o,this.b=this.h=!1,this.H="",this.i=null,this.o=this.sd.bind(this),this.u=this.Rf.bind(this),this.a={video:{},player:{}},this.F=0,this.c={},this.g=null,fr.add(this)}var rr=!1,ir=null;function or(e){for(var t=p(fr),n=t.next();!n.done;n=t.next())ar(n.value,e)}function ar(e,t){q.debug("CastSender: onExistingSessionJoined");var n=e.G();e.g=new he,e.l=!0,e.ud(n,t)}function sr(e){for(var t=p(fr),n=t.next();!n.done;n=t.next()){n=n.value;var r=e;q.debug("CastSender: receiver status",r),rr="available"==r,n.f.Gc()}}function ur(e){var t=ir;t.removeUpdateListener(e.o),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.u)}function lr(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new de(1,7,7e3))}}function cr(e,t){var n=er(t),r=ir;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),q.error)}catch(t){throw q.error("Cast session sendMessage threw",t),n=new de(2,8,8005,t),e.v("player",new ke("error",{detail:n})),e.vb(),n}}(r=nr.prototype).destroy=function(){return fr.delete(this),lr(this),ir&&ur(this),this.f&&(this.f.stop(),this.f=null),this.K=this.v=null,this.b=this.h=!1,this.u=this.o=this.g=this.c=this.a=this.i=null,Promise.resolve()},r.ha=function(){return this.b},r.xd=function(){return this.H},r.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.S.length){this.h=!0,this.f.Gc();var t=new chrome.cast.SessionRequest(this.S);t=new chrome.cast.ApiConfig(t,or.bind(this),sr.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){q.debug("CastSender: init")}),(function(e){q.error("CastSender: init error",e)})),rr&&this.f.T(.02),(t=ir)&&t.status!=chrome.cast.SessionStatus.STOPPED?(q.debug("CastSender: re-using existing connection"),ar(this,t)):ir=null}},r.Gd=function(e){this.i=e,this.b&&cr(this,{type:"appData",appData:this.i})},r.cast=function(e){return this.h?rr?this.b?Promise.reject(new de(1,8,8002)):(this.g=new he,chrome.cast.requestSession(this.ud.bind(this,e),this.pe.bind(this)),this.g):Promise.reject(new de(1,8,8001)):Promise.reject(new de(1,8,8e3))},r.vb=function(){if(this.b){if(lr(this),ir){ur(this);try{ir.stop((function(){}),(function(){}))}catch(e){}ir=null}this.sd()}},r.get=function(e,t){if("video"==e){if(Wn.includes(t))return this.ye.bind(this,e,t)}else if("player"==e){if(Xn[t]&&!this.get("player","isLive")())return function(){};if(Qn.includes(t))return this.ye.bind(this,e,t);if(Zn.includes(t))return this.hg.bind(this,e,t);if(qn[t])return this.ve.bind(this,e,t)}return this.ve(e,t)},r.set=function(e,t,n){this.a[e][t]=n,cr(this,{type:"set",targetName:e,property:t,value:n})},r.ud=function(e,t){q.debug("CastSender: onSessionInitiated"),ir=t,t.addUpdateListener(this.o),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.u),this.sd(),cr(this,{type:"init",initState:e,appData:this.i}),this.g.resolve()},r.pe=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new de(2,8,t,e))},r.ve=function(e,t){return this.a[e][t]},r.ye=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];cr(this,{type:"call",targetName:e,methodName:t,args:r})},r.hg=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new he;var o=this.F.toString();this.F++,this.c[o]=i;try{cr(this,{type:"asyncCall",targetName:e,methodName:t,args:r,id:o})}catch(e){i.reject(e)}return i},r.sd=function(){var e=!!ir&&"connected"==ir.status;if(q.debug("CastSender: connection status",e),this.b&&!e){for(var t in this.K(),this.a)this.a[t]={};lr(this)}this.H=(this.b=e)?ir.receiver.friendlyName:"",this.f.Gc()},r.Rf=function(e,t){var n=tr(t);switch(q.J("CastSender: message",n),n.type){case"event":var r=n.event;this.v(n.targetName,new ke(r.type,r));break;case"update":for(var i in r=n.update)for(var o in n=this.a[i]||{},r[i])n[o]=r[i][o];this.l&&(this.V(),this.l=!1);break;case"asyncComplete":if(i=n.id,n=n.error,o=this.c[i],delete this.c[i],o)if(n){for(r in i=new de(n.severity,n.category,n.code),n)i[r]=n[r];o.reject(i)}else o.resolve()}};var fr=new Set;function pr(e,t,n){var r=this;we.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.l=this.h=null,this.u=n,this.o=new Map,this.a=new nr(n,(function(){return yr(r)}),(function(){return vr(r)}),(function(e,t){return mr(r,e,t)}),(function(){return gr(r)}),(function(){return hr(r)})),function(e){for(var t in e.a.init(),e.i=new je,Kn.forEach(function(e){this.i.B(this.c,e,this.G.bind(this))}.bind(e)),Yn.forEach(function(e){this.i.B(this.b,e,this.v.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.F.bind(e,t),set:e.H.bind(e,t)});e.l={},dr(e,(function(t){Object.defineProperty(e.l,t,{configurable:!1,enumerable:!0,get:function(){return function e(t,n){if(t.o.has(n)&&(n=t.o.get(n)),"addEventListener"==n)return t.g.addEventListener.bind(t.g);if("removeEventListener"==n)return t.g.removeEventListener.bind(t.g);if("getMediaElement"==n)return function(){return this.h}.bind(t);if("getSharedConfiguration"==n)return q.m("Can't share configuration across a network. Returning copy."),t.a.get("player","getConfiguration");if("getNetworkingEngine"==n)return t.a.ha()&&q.m("NOTE: getNetworkingEngine() is always local!"),t.b.Ub.bind(t.b);if(t.a.ha()){if("getManifest"==n||"drmInfo"==n)return function(){return q.Z(n+"() does not work while casting!"),null};if("getManifestUri"==n)return Fn("getManifestUri",'Please use "getAssetUri" instead.'),e(t,"getAssetUri");if("attach"==n||"detach"==n)return function(){return q.Z(n+"() does not work while casting!"),Promise.resolve()}}return t.a.ha()&&0==Object.keys(t.a.a.video).length&&qn[n]||!t.a.ha()?t.b[n].bind(t.b):t.a.get("player",n)}(e,t)}})})),function(e){var t=new Map;dr(e,(function(n,r){if(t.has(r)){var i=t.get(r);n.length<i.length?e.o.set(n,i):e.o.set(i,n)}else t.set(r,n)}))}(e),e.f=new we,e.f.gc=e.h,e.g=new we,e.g.gc=e.l}(this)}function dr(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!i.has(e)}var r=e.b,i=new Set;for(o in r)n(o)&&(i.add(o),t(o,r[o]));for(var o=Object.getPrototypeOf(r),a=Object.getPrototypeOf({});o&&o!=a;){for(var s=p(Object.getOwnPropertyNames(o)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(i.add(u),t(u,r[u]));o=Object.getPrototypeOf(o)}}function hr(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.pc(),startTime:null};return e.c.pause(),zn.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),$n.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.player[n]=e}.bind(e)),Jn.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function yr(e){e.dispatchEvent(new ke("caststatuschanged"))}function vr(e){e.f.dispatchEvent(new ke(e.h.paused?"pause":"play"))}function gr(e){$n.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),n=e.a.get("video","ended"),r=Promise.resolve(),i=e.c.autoplay,o=null;n||(o=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,r=e.b.load(t,o));var a={};zn.forEach(function(e){a[e]=this.a.get("video",e)}.bind(e)),r.then((function(){e.c&&(zn.forEach(function(e){this.c[e]=a[e]}.bind(e)),Jn.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=i,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new ke("error",{detail:t}))}))}function mr(e,t,n){e.a.ha()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function br(e,t,n,r){var i=this;we.call(this),this.a=e,this.b=t,this.c=new je,this.G={video:e,player:t},this.u=n||function(){},this.H=r||function(e){return e},this.v=!1,this.h=!0,this.g=0,this.o=!1,this.l=!0,this.i=this.f=null,this.F=new ce((function(){kr(i)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.re.bind(e),t.onSenderDisconnected=e.re.bind(e),t.onSystemVolumeChanged=e.af.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.Mf.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.Wf.bind(e),t.start(),Kn.forEach(function(e){this.c.B(this.a,e,this.we.bind(this,"video"))}.bind(e)),Yn.forEach(function(e){this.c.B(this.b,e,this.we.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.Hd(3840,2160):e.b.Hd(1920,1080),e.c.B(e.a,"loadeddata",function(){this.o=!0}.bind(e)),e.c.B(e.b,"loading",function(){this.h=!1,_r(this)}.bind(e)),e.c.B(e.a,"playing",function(){this.h=!1,_r(this)}.bind(e)),e.c.B(e.a,"pause",function(){_r(this)}.bind(e)),e.c.B(e.b,"unloading",function(){this.h=!0,_r(this)}.bind(e)),e.c.B(e.a,"ended",function(){var e=this;new ce((function(){e.a&&e.a.ended&&(e.h=!0,_r(e))})).T(5)}.bind(e))}(this)}function _r(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new ke("caststatuschanged")),Er(this)||Sr(this))}.bind(e))}function kr(e){e.F.T(.5);var t={video:{},player:{}};if(Hn.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.X())for(var n in Xn)0==e.g%Xn[n]&&(t.player[n]=e.b[n]());for(var r in qn)0==e.g%qn[r]&&(t.player[r]=e.b[r]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.o&&(e.g+=1),Tr(e,{type:"update",update:t},e.f),Er(e)}function Er(e){return!(!e.l||!e.a.duration&&!e.b.X())&&(wr(e),e.l=!1,!0)}function wr(e,t){t=void 0===t?0:t;var n={contentId:e.b.pc(),streamType:e.b.X()?"LIVE":"BUFFERED",contentType:""};e.b.X()||(n.duration=e.a.duration),Sr(e,t,n)}function Tr(e,t,n,r){e.v&&(e=er(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Sr(e,t,n){t=void 0===t?0:t,n=void 0===n?null:n;var r=e.a.playbackRate,i=Ar;r={mediaSessionId:0,playbackRate:r,playerState:i=e.h?i.IDLE:e.b.fd()?i.Je:e.a.paused?i.Le:i.Me,currentTime:e.a.currentTime,supportedMediaCommands:63,volume:{level:e.a.volume,muted:e.a.muted}},n&&(r.media=n),Tr(e,{requestId:t,type:"MEDIA_STATUS",status:[r]},e.i)}e.__onGCastApiAvailable=function(e){if(e)for(var t=(e=p(fr)).next();!t.done;t=e.next())t.value.init()},K(pr,we),G("shaka.cast.CastProxy",pr),pr.prototype.destroy=function(e){return e&&this.a.vb(),this.i&&(this.i.release(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(e)},pr.prototype.destroy=pr.prototype.destroy,pr.prototype.Cf=function(){return this.h},pr.prototype.getVideo=pr.prototype.Cf,pr.prototype.uf=function(){return this.l},pr.prototype.getPlayer=pr.prototype.uf,pr.prototype.Re=function(){return this.a.h&&rr},pr.prototype.canCast=pr.prototype.Re,pr.prototype.ha=function(){return this.a.ha()},pr.prototype.isCasting=pr.prototype.ha,pr.prototype.xd=function(){return this.a.xd()},pr.prototype.receiverName=pr.prototype.xd,pr.prototype.cast=function(){var e=hr(this);return this.a.cast(e).then(function(){if(this.b)return this.b.Od()}.bind(this))},pr.prototype.cast=pr.prototype.cast,pr.prototype.Gd=function(e){this.a.Gd(e)},pr.prototype.setAppData=pr.prototype.Gd,pr.prototype.Cg=function(){var e=this.a;if(e.b){var t=e.G();chrome.cast.requestSession(e.ud.bind(e,t),e.pe.bind(e))}},pr.prototype.suggestDisconnect=pr.prototype.Cg,pr.prototype.Ue=function(e){var t=this;return h((function n(){return N(n,(function(n){switch(n.j){case 1:return e==t.u?n.return():(t.u=e,t.a.vb(),T(n,t.a.destroy(),2));case 2:t.a=null,t.a=new nr(e,(function(){return yr(t)}),(function(){return vr(t)}),(function(e,n){return mr(t,e,n)}),(function(){return gr(t)}),(function(){return hr(t)})),t.a.init(),S(n)}}))}))},pr.prototype.changeReceiverId=pr.prototype.Ue,pr.prototype.vb=function(){this.a.vb()},pr.prototype.forceDisconnect=pr.prototype.vb,pr.prototype.F=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.ha()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.ha()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},pr.prototype.H=function(e,t){this.a.ha()?this.a.set("video",e,t):this.c[e]=t},pr.prototype.G=function(e){this.a.ha()||this.f.dispatchEvent(new ke(e.type,e))},pr.prototype.v=function(e){this.a.ha()||this.g.dispatchEvent(e)},K(br,we),G("shaka.cast.CastReceiver",br),br.prototype.isConnected=function(){return this.v},br.prototype.isConnected=br.prototype.isConnected,br.prototype.Hf=function(){return this.h},br.prototype.isIdle=br.prototype.Hf,br.prototype.destroy=function(){var e=this;return h((function t(){var n;return N(t,(function(t){switch(t.j){case 1:return e.c&&(e.c.release(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.F&&(e.F.stop(),e.F=null),e.a=null,e.G=null,e.u=null,e.v=!1,e.h=!0,e.f=null,e.i=null,T(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),S(t)}}))}))},br.prototype.destroy=br.prototype.destroy,(r=br.prototype).re=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,_r(this)},r.we=function(e,t){this.b&&(kr(this),Tr(this,{type:"event",targetName:e,event:t},this.f))},r.af=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Tr(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Tr(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},r.Wf=function(e){var t=tr(e.data);switch(q.debug("CastReceiver: message",t),t.type){case"init":this.g=0,this.o=!1,this.l=!0,function(e,t,n){for(var r in t.player)e.b[r](t.player[r]);e.u(n),n=Promise.resolve();var i=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then((function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var r in t.playerAfterLoad)e.b[r](t.playerAfterLoad[r]);e.a.autoplay=i,t.manifest&&(e.a.play(),Sr(e))}}),(function(t){e.b.dispatchEvent(new ke("error",{detail:t}))}))}(this,t.initState,t.appData),kr(this);break;case"appData":this.u(t.appData);break;case"set":var n=t.targetName,r=t.property;if(t=t.value,"video"==n){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){i.setSystemVolumeLevel(t);break}if("muted"==r){i.setSystemVolumeMuted(t);break}}this.G[n][r]=t;break;case"call":(n=this.G[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,r=t.methodName,"player"==n&&"load"==r&&(this.g=0,this.o=!1),i=t.id,e=e.senderId;var o=this.G[n];t=o[r].apply(o,t.args),"player"==n&&"load"==r&&(t=t.then(function(){this.l=!0}.bind(this))),t.then(this.Be.bind(this,e,i,null),this.Be.bind(this,e,i))}},r.Mf=function(e){var t=tr(e.data);switch(q.debug("CastReceiver: message",t),t.type){case"PLAY":this.a.play(),Sr(this);break;case"PAUSE":this.a.pause(),Sr(this);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Sr(this)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Sr(this));break;case"STOP":this.b.Od().then(function(){this.b&&Sr(this)}.bind(this));break;case"GET_STATUS":wr(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var r=this.a.volume,i=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),r==this.a.volume&&i==this.a.muted||Sr(this);break;case"LOAD":this.g=0,this.l=this.o=!1,e=t.media,n=t.currentTime,r=this.H(e.contentId),i=t.autoplay||!0,this.u(e.customData),i&&(this.a.autoplay=!0),this.b.load(r,n).then(function(){this.b&&wr(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Tr(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:q.m("Unrecognized message type from the generic Chromecast controller!",t.type),Tr(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},r.Be=function(e,t,n){this.b&&Tr(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var Ar={IDLE:"IDLE",Me:"PLAYING",Je:"BUFFERING",Le:"PAUSED"};function Or(e,t){this.N=e,this.b=t==Pr,this.a=0}G("shaka.util.DataViewReader",Or);var Pr=1;function Rr(){throw new de(2,3,3e3)}function Cr(){this.c=[],this.b=[],this.a=!1}function xr(e){for(var t=null!=e.flags?12:8;e.reader.ya()&&!e.parser.a;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Dr(e){for(var t=null!=e.flags?12:8,n=e.reader.I();0<n&&!e.parser.a;--n)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Ir(e){return function(t){e(t.reader.gb(t.reader.N.byteLength-t.reader.ga()))}}function Lr(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Mr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Nr(e){var t=this;this.a=[],this.b=[],this.data=[],(new Cr).L("moov",xr).ia("pssh",(function(e){if(1<e.version)q.m("Unrecognized PSSH version found!");else{var n=e.reader.N;if(n=new Uint8Array(n.buffer,n.byteOffset-12,e.size),t.data.push(n),t.a.push(ct.Ic(e.reader.gb(16))),0<e.version){n=e.reader.I();for(var r=0;r<n;++r){var i=ct.Ic(e.reader.gb(16));t.b.push(i)}}}})).parse(e),0==this.data.length&&q.m("No pssh box found!")}Or.Endianness={Lg:0,Ng:Pr},Or.prototype.ya=function(){return this.a<this.N.byteLength},Or.prototype.hasMoreData=Or.prototype.ya,Or.prototype.ga=function(){return this.a},Or.prototype.getPosition=Or.prototype.ga,Or.prototype.hf=function(){return this.N.byteLength},Or.prototype.getLength=Or.prototype.hf,Or.prototype.na=function(){try{var e=this.N.getUint8(this.a);return this.a+=1,e}catch(e){Rr()}},Or.prototype.readUint8=Or.prototype.na,Or.prototype.$b=function(){try{var e=this.N.getUint16(this.a,this.b);return this.a+=2,e}catch(e){Rr()}},Or.prototype.readUint16=Or.prototype.$b,Or.prototype.I=function(){try{var e=this.N.getUint32(this.a,this.b);return this.a+=4,e}catch(e){Rr()}},Or.prototype.readUint32=Or.prototype.I,Or.prototype.xe=function(){try{var e=this.N.getInt32(this.a,this.b);return this.a+=4,e}catch(e){Rr()}},Or.prototype.readInt32=Or.prototype.xe,Or.prototype.Kb=function(){try{if(this.b)var e=this.N.getUint32(this.a,!0),t=this.N.getUint32(this.a+4,!0);else t=this.N.getUint32(this.a,!1),e=this.N.getUint32(this.a+4,!1)}catch(e){Rr()}if(2097151<t)throw new de(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Or.prototype.readUint64=Or.prototype.Kb,Or.prototype.gb=function(e){this.a+e>this.N.byteLength&&Rr();var t=new Uint8Array(this.N.buffer,this.N.byteOffset+this.a,e);return this.a+=e,t},Or.prototype.readBytes=Or.prototype.gb,Or.prototype.P=function(e){this.a+e>this.N.byteLength&&Rr(),this.a+=e},Or.prototype.skip=Or.prototype.P,Or.prototype.ze=function(e){this.a<e&&Rr(),this.a-=e},Or.prototype.rewind=Or.prototype.ze,Or.prototype.seek=function(e){(0>e||e>this.N.byteLength)&&Rr(),this.a=e},Or.prototype.seek=Or.prototype.seek,Or.prototype.wd=function(){for(var e=this.a;this.ya()&&0!=this.N.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.N.buffer,this.N.byteOffset+e,this.a-e),this.a+=1,rt(e)},Or.prototype.readTerminatedString=Or.prototype.wd,G("shaka.util.Mp4Parser",Cr),Cr.prototype.L=function(e,t){var n=Lr(e);return this.c[n]=0,this.b[n]=t,this},Cr.prototype.box=Cr.prototype.L,Cr.prototype.ia=function(e,t){var n=Lr(e);return this.c[n]=1,this.b[n]=t,this},Cr.prototype.fullBox=Cr.prototype.ia,Cr.prototype.stop=function(){this.a=!0},Cr.prototype.stop=Cr.prototype.stop,Cr.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Or(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.ya()&&!this.a;)this.Ac(0,n,t)},Cr.prototype.parse=Cr.prototype.parse,Cr.prototype.Ac=function(e,t,n){var r=t.ga(),i=t.I(),o=t.I();switch(q.J("Parsing MP4 box",Mr(o)),i){case 0:i=t.N.byteLength-r;break;case 1:i=t.Kb()}var a=this.b[o];if(a){var s=null,u=null;1==this.c[o]&&(s=(u=t.I())>>>24,u&=16777215),o=r+i,n&&o>t.N.byteLength&&(o=t.N.byteLength),o-=t.ga(),t=0<o?t.gb(o):new Uint8Array(0),a({parser:this,partialOkay:n||!1,version:s,flags:u,reader:t=new Or(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:i,start:r+e})}else t.P(Math.min(r+i-t.ga(),t.N.byteLength-t.ga()))},Cr.prototype.parseNext=Cr.prototype.Ac,Cr.children=xr,Cr.sampleDescription=Dr,Cr.allData=Ir,Cr.typeToString=Mr;var jr={oc:function(e,t){var n=jr.U(e,t);return 1!=n.length?null:n[0]},Wc:function(e,t,n){return 1!=(e=jr.ae(e,t,n)).length?null:e[0]},U:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},ae:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},qc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},M:function(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i},$f:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Ia:function(e){if(!e)return null;var t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(q.m("Invalid duration string:",e),null)},Cc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},Bc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},Hb:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Ze:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},ue:function(e,t){var n=new DOMParser;try{var r=n.parseFromString(e,"text/xml")}catch(e){}if(r&&r.documentElement.tagName==t)var i=r.documentElement;return i&&0<i.getElementsByTagName("parsererror").length?null:i},te:function(e,t){try{var n=rt(e);return jr.ue(n,t)}catch(e){}}},Ur=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Fr(e,t,n){var r=function(e){for(var t=[],n=(e=p(e)).next();!n.done;n=e.next())(n=Gr(n.value))&&t.push(n);return t}(e),i=null;e=[];var o=[],a=new Set(r.map((function(e){return e.keyId})));if(a.delete(null),1<a.size)throw new de(2,4,4010);if(n||(o=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Ae||(i=e.init||i,!1)}))).length&&(0==(e=function(e,t,n){for(var r=[],i=(n=p(n)).next();!i.done;i=n.next()){i=i.value;var o=Ur.get(i.Ae);if(o){var a;if(a=jr.Wc(i.node,"urn:microsoft:playready","pro")){a=ct.Fa(a.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=a.length,l=s.length+16+u,c=new ArrayBuffer(l),f=new Uint8Array(c);c=new DataView(c);var d=0;c.setUint32(d,l),d+=4,c.setUint32(d,1886614376),d+=4,c.setUint32(d,0),d+=4,f.set(s,d),d+=s.length,c.setUint32(d,u),d+=4,f.set(a,d),a=[{initData:f,initDataType:"cenc",keyId:i.keyId}]}else a=null;a=Vt(o,i.init||e||a),(o=Vr.get(o))&&(a.licenseServerUri=o(i)),r.push(a)}else for(i=p(i=t(i.node)||[]),o=i.next();!o.done;o=i.next())r.push(o.value)}return r}(i,t,o)).length&&(e=[Vt("",i)])),r.length&&(n||!o.length))for(e=[],n=(t=p(Ur.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Vt(n,i));if(a=Array.from(a)[0]||null)for(n=(t=p(e)).next();!n.done;n=t.next())for(r=(n=p(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=a;return{Xd:a,Pg:i,drmInfos:e,be:!0}}var Br,Vr=(new Map).set("com.widevine.alpha",(function(e){return(e=jr.Wc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=jr.Wc(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(t+=4,n!==e.byteLength)return q.m("PlayReady Object with invalid length encountered."),[];t+=2,n=[];for(var r=new DataView(e);t<e.byteLength-1;){var i=r.getUint16(t,!0);t+=2;var o=r.getUint16(t,!0);t+=2;var a=new Uint8Array(e,t,o);n.push({type:i,value:a}),t+=o}return n}((e=ct.Fa(e.textContent)).buffer).filter((function(e){return 1===e.type}))[0])?(e=it(e.value,!0),(e=jr.ue(e,"WRMHEADER"))?function(e){for(var t=(e=p(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=p(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}));function Gr(e){var t=e.getAttribute("schemeIdUri"),n=jr.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),r=jr.ae(e,"urn:mpeg:cenc:2013","pssh").map(jr.qc);if(!t)return q.error("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new de(2,4,4009);var i=[];try{i=r.map((function(e){return{initDataType:"cenc",initData:ct.Fa(e),keyId:null}}))}catch(e){throw new de(2,4,4007)}return{node:e,Ae:t,keyId:n,init:0<i.length?i:null}}function Kr(t,n,r,i,o){var a={RepresentationID:n,Number:r,Bandwidth:i,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(n,r,i,o){if("$$"==n)return"$";var s=a[r];if(null==s)return q.m("URL template does not have an available substitution for identifier",'"'+r+'":',t),n;switch("RepresentationID"==r&&i&&(q.m("URL template should not contain a width specifier for identifier",'"RepresentationID":',t),i=void 0),"Time"==r&&(s=Math.round(s)),o){case void 0:case"d":case"i":case"u":n=s.toString();break;case"o":n=s.toString(8);break;case"x":n=s.toString(16);break;case"X":n=s.toString(16).toUpperCase();break;default:n=s.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-n.length)+1).join("0")+n}))}function Hr(e,t){var n=zr(e,t,"timescale"),r=1;n&&(r=jr.Bc(n)||1),n=zr(e,t,"duration"),(n=jr.Bc(n||""))&&(n/=r);var i=zr(e,t,"startNumber"),o=Number(zr(e,t,"presentationTimeOffset"))||0,a=jr.Hb(i||"");null!=i&&null!=a||(a=1);var s=Wr(e,t,"SegmentTimeline");if(i=null,s){i=r;var u=e.W.duration||1/0;s=jr.U(s,"S");for(var l=[],c=-o,f=0;f<s.length;++f){var p=s[f],d=jr.M(p,"t",jr.Hb),h=jr.M(p,"d",jr.Hb),y=jr.M(p,"r",jr.parseInt);if(null!=d&&(d-=o),!h){q.m('"S" element must have a duration:','ignoring the remaining "S" elements.',p);break}if(d=null!=d?d:c,0>(y=y||0))if(f+1<s.length){if(null==(y=jr.M(s[f+1],"t",jr.Hb))){q.m('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',p);break}if(d>=y){q.m('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',p);break}y=Math.ceil((y-d)/h)-1}else{if(1/0==u){q.m('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',p);break}if(d/i>=u){q.m('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',p);break}y=Math.ceil((u*i-d)/h)-1}for(0<l.length&&d!=c&&(Math.abs((d-c)/i)>=1/15&&q.m("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",p),l[l.length-1].end=d/i),p=0;p<=y;++p)c=d+h,l.push({start:d/i,end:c/i,Hg:d}),d=c}i=l}return{timescale:r,da:n,ib:a,oa:o/r||0,Pd:o,R:i}}function zr(e,t,n){return[t(e.A),t(e.aa),t(e.ma)].filter(Ft.Ma).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Wr(e,t,n){return[t(e.A),t(e.aa),t(e.ma)].filter(Ft.Ma).map((function(e){return jr.oc(e,n)})).reduce((function(e,t){return e||t}))}function Yr(e,t,n,r,i,o){if(o=void 0===o?0:o,jr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var a=function(e,t,n,r,i,o){for(var a=jr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=jr.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var l=e.attributes[u];"http://www.w3.org/1999/xlink"==l.namespaceURI&&(e.removeAttributeNS(l.namespaceURI,l.localName),--u)}if(5<=o)return ve(new de(2,4,4028));if("onLoad"!=s)return ve(new de(2,4,4027));var c=Bt([r],[a]);return i.request(0,Ie(c,t)).Y((function(r){if(!(r=jr.te(r.data,e.tagName)))return ve(new de(2,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=0;s<r.attributes.length;s++){var u=r.attributes[s].nodeName,l=r.getAttribute(u);e.setAttribute(u,l)}return Yr(e,t,n,c[0],i,o+1)}))}(e,t,n,r,i,o);return n&&(a=a.Y(void 0,(function(){return Yr(e,t,n,r,i,o)}))),a}a=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==jr.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&a.push(Yr(u,t,n,r,i,o)))}return _e(a).Y((function(){return e}))}function qr(e,t,n){this.c=e,this.b=t,this.a=n}function Xr(e,t,n,r,i,o){this.position=e,this.startTime=t,this.endTime=n,this.c=r,this.b=i,this.a=o}function $r(e,t,n,r){var i,o=(new Cr).ia("sidx",(function(e){i=function(e,t,n,r){var i=[];r.reader.P(4);var o=r.reader.I();if(0==o)throw q.error("Invalid timescale."),new de(2,3,3005);if(0==r.version)var a=r.reader.I(),s=r.reader.I();else a=r.reader.Kb(),s=r.reader.Kb();r.reader.P(2);var u=r.reader.$b();for(e=e+r.size+s,s=0;s<u;s++){var l=r.reader.I(),c=(2147483648&l)>>>31;l&=2147483647;var f=r.reader.I();if(r.reader.P(4),1==c)throw q.error("Heirarchical SIDXs are not supported."),new de(2,3,3006);i.push(new Xr(i.length,a/o-t,(a+f)/o-t,(function(){return n}),e,e+l-1)),a+=f,e+=l}return r.parser.stop(),i}(t,r,n,e)}));if(e&&o.parse(e),i)return i;throw q.error('Invalid box type, expected "sidx".'),new de(2,3,3004)}function Jr(e){this.a=e}function Qr(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&0>=e.a[0].endTime;)e.a.shift();if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new Xr(n.position,n.startTime,t,n.c,n.b,n.a)}}function Zr(e){this.b=e,this.a=new Or(e,0),Br||(Br=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function ei(e){var t=ti(e);if(7<t.length)throw new de(2,3,3002);for(var n=0,r=0;r<t.length;r++)n=256*n+t[r];t=n,n=ti(e);e:{r=ct.Da;for(var i=0;i<Br.length;i++)if(r(n,Br[i])){r=!0;break e}r=!1}if(r)n=e.b.byteLength-e.a.ga();else{if(8==n.length&&224&n[1])throw new de(2,3,3001);for(r=n[0]&(1<<8-n.length)-1,i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=e.a.ga()+n<=e.b.byteLength?n:e.b.byteLength-e.a.ga(),r=new DataView(e.b.buffer,e.b.byteOffset+e.a.ga(),n),e.a.P(n),new ni(t,r)}function ti(e){var t,n=e.a.na();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new de(2,3,3002);var r=new Uint8Array(t);for(r[0]=n,n=1;n<t;n++)r[n]=e.a.na();return r}function ni(e,t){this.id=e,this.a=t}function ri(e){if(8<e.a.byteLength)throw new de(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new de(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++){t=256*t+e.a.getUint8(n)}return t}function ii(){}function oi(e){var t=new Zr(e.a);if(179!=(e=ei(t)).id)throw q.m("Not a CueTime element."),new de(2,3,3013);if(e=ri(e),183!=(t=ei(t)).id)throw q.m("Not a CueTrackPositions element."),new de(2,3,3012);t=new Zr(t.a);for(var n=0;t.ya();){var r=ei(t);if(241==r.id){n=ri(r);break}}return{Ig:e,gg:n}}function ai(e,t){var n=Wr(e,t,"Initialization");if(!n)return null;var r=e.A.ta,i=n.getAttribute("sourceURL");i&&(r=Bt(e.A.ta,[i])),i=0;var o=null;return(n=jr.M(n,"range",jr.Cc))&&(i=n.start,o=n.end),new qr((function(){return r}),i,o)}function si(e,t,n,r,i,o,a,s){var u=e.presentationTimeline,l=!e.tb||!e.W.hd,c=e.W.start,f=e.W.duration,p=t,d=null;return{createSegmentIndex:function(){var e=[p(r,i,o),"webm"==a?p(n.c(),n.b,n.a):null];return p=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==a?$r(t,i,r,s):(new ii).parse(t,e,r,s),u.Eb(t,c),d=new Jr(t),l&&Qr(d,f)}))},findSegmentPosition:function(e){return d.find(e)},getSegmentReference:function(e){return d.get(e)}}}function ui(e){return e.ac}function li(e,t){var n=ai(e,ci),r=function(e){return[e.A.Pa,e.aa.Pa,e.ma.Pa].filter(Ft.Ma).map((function(e){return jr.U(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.he&&(e.he=!0,q.m("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate.")),{Jf:t.getAttribute("media"),start:(t=jr.M(t,"mediaRange",jr.Cc,{start:0,end:null})).start,end:t.end}}))}(e),i=Hr(e,ci),o=i.ib;0==o&&(q.m("SegmentList@startNumber must be > 0"),o=1);var a=0;if(i.da?a=i.da*(o-1):i.R&&0<i.R.length&&(a=i.R[0].start),!(r={da:i.da,startTime:a,ib:o,oa:i.oa,R:i.R,cb:r}).da&&!r.R&&1<r.cb.length)throw q.m("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.A),new de(2,4,4002);if(!r.da&&!e.W.duration&&!r.R&&1==r.cb.length)throw q.m("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.A),new de(2,4,4002);if(r.R&&0==r.R.length)throw q.m("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.A),new de(2,4,4002);return o=i=null,e.ma.id&&e.A.id&&(i=t[o=e.ma.id+","+e.A.id]),a=function(e,t,n,r){var i=r.cb.length;r.R&&r.R.length!=r.cb.length&&(i=Math.min(r.R.length,r.cb.length),q.m("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",r.cb.length,"to",i));for(var o=[],a=r.startTime,s=0;s<i;s++){var u,l=r.cb[s],c=Bt(n,[l.Jf]);u=null!=r.da?a+r.da:r.R?r.R[s].end:a+e,o.push(new Xr(s+t,a,u,function(e){return e}.bind(null,c),l.start,l.end)),a=u}return o}(e.W.duration,r.ib,e.A.ta,r),i?(i.md(a),o=e.presentationTimeline.Wb(),i.Tc(o-e.W.start)):(e.presentationTimeline.Eb(a,e.W.start),i=new Jr(a),o&&e.tb&&(t[o]=i)),e.tb&&e.W.hd||Qr(i,e.W.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,oa:r.oa}}function ci(e){return e.Pa}function fi(e,t,n,r){var i=function(e){var t=zr(e,pi,"initialization");if(!t)return null;var n=e.A.id,r=e.bandwidth||null,i=e.A.ta;return new qr((function(){var e=Kr(t,n,null,r,null);return Bt(i,[e])}),0,null)}(e),o=Hr(e,pi),a=zr(e,pi,"media"),s=zr(e,pi,"index");if(a=(o={da:o.da,timescale:o.timescale,ib:o.ib,oa:o.oa,Pd:o.Pd,R:o.R,kd:a,Yb:s}).Yb?1:0,a+=o.R?1:0,0==(a+=o.da?1:0))throw q.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.A),new de(2,4,4002);if(1!=a&&(q.m("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.A),o.Yb?(q.info("Using the index URL template by default."),o.R=null):q.info("Using the SegmentTimeline by default."),o.da=null),!o.Yb&&!o.kd)throw q.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.A),new de(2,4,4002);if(o.Yb){if("mp4"!=(n=e.A.mimeType.split("/")[1])&&"webm"!=n)throw q.error("SegmentTemplate specifies an unsupported container type.",e.A),new de(2,4,4006);if("webm"==n&&!i)throw q.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",e.A),new de(2,4,4005);r=Kr(o.Yb,e.A.id,null,e.bandwidth||null,null),e=si(e,t,i,r=Bt(e.A.ta,[r]),0,null,n,o.oa)}else o.da?(r||(e.presentationTimeline.od(o.da),e.presentationTimeline.pd(e.W.start)),e=function(e,t){var n=e.W.duration,r=t.da,i=t.ib,o=t.timescale,a=t.kd,s=e.bandwidth||null,u=e.A.id,l=e.A.ta;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r,c=t+r;return n&&(c=Math.min(c,n)),0>c||n&&t>=n?null:new Xr(e,t,c,(function(){var n=Kr(a,u,e+i,s,t*o);return Bt(l,[n])}),0,null)}}}(e,o)):(a=t=null,e.ma.id&&e.A.id&&(t=n[a=e.ma.id+","+e.A.id]),s=function(e,t){for(var n=[],r=0;r<t.R.length;r++){var i=r+t.ib;n.push(new Xr(i,t.R[r].start,t.R[r].end,function(e,t,n,r,i,o){return Bt(r,[e=Kr(e,t,i,n,o)]).map((function(e){return e.toString()}))}.bind(null,t.kd,e.A.id,e.bandwidth||null,e.A.ta,i,t.R[r].Hg+t.Pd),0,null))}return n}(e,o),r=!e.tb||!e.W.hd,t?(r&&Qr(new Jr(s),e.W.duration),t.md(s),n=e.presentationTimeline.Wb(),t.Tc(n-e.W.start)):(e.presentationTimeline.Eb(s,e.W.start),t=new Jr(s),a&&e.tb&&(n[a]=t)),r&&Qr(t,e.W.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,oa:o.oa}}function pi(e){return e.cc}G("shaka.media.InitSegmentReference",qr),qr.prototype.Qc=function(){return this.c()},qr.prototype.createUris=qr.prototype.Qc,qr.prototype.bd=function(){return this.b},qr.prototype.getStartByte=qr.prototype.bd,qr.prototype.ad=function(){return this.a},qr.prototype.getEndByte=qr.prototype.ad,G("shaka.media.SegmentReference",Xr),Xr.prototype.ga=function(){return this.position},Xr.prototype.getPosition=Xr.prototype.ga,Xr.prototype.sc=function(){return this.startTime},Xr.prototype.getStartTime=Xr.prototype.sc,Xr.prototype.ff=function(){return this.endTime},Xr.prototype.getEndTime=Xr.prototype.ff,Xr.prototype.Qc=function(){return this.c()},Xr.prototype.createUris=Xr.prototype.Qc,Xr.prototype.bd=function(){return this.b},Xr.prototype.getStartByte=Xr.prototype.bd,Xr.prototype.ad=function(){return this.a},Xr.prototype.getEndByte=Xr.prototype.ad,G("shaka.media.SegmentIndex",Jr),Jr.prototype.destroy=function(){return this.a=null,Promise.resolve()},Jr.prototype.destroy=Jr.prototype.destroy,Jr.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},Jr.prototype.find=Jr.prototype.find,Jr.prototype.get=function(e){return 0==this.a.length||0>(e-=this.a[0].position)||e>=this.a.length?null:this.a[e]},Jr.prototype.get=Jr.prototype.get,Jr.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},Jr.prototype.offset=Jr.prototype.offset,Jr.prototype.md=function(e){for(var t=[],n=0,r=0;n<this.a.length&&r<e.length;){var i=this.a[n],o=e[r];i.startTime<o.startTime?(t.push(i),n++):(i.startTime>o.startTime?0==n?t.push(o):q.m("Refusing to rewrite original references on update!"):(.1<Math.abs(i.endTime-o.endTime)?t.push(new Xr(i.position,o.startTime,o.endTime,o.c,o.b,o.a)):t.push(i),n++),r++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;r<e.length;)i=new Xr(n++,(i=e[r++]).startTime,i.endTime,i.c,i.b,i.a),t.push(i);else t=e;this.a=t},Jr.prototype.merge=Jr.prototype.md,Jr.prototype.Tc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},Jr.prototype.evict=Jr.prototype.Tc,Zr.prototype.ya=function(){return this.a.ya()},ii.prototype.parse=function(e,t,n,r){var i;if(440786851!=ei(t=new Zr(new DataView(t))).id)throw q.error("Not an EBML element."),new de(2,3,3008);var o=ei(t);if(408125543!=o.id)throw q.error("Not a Segment element."),new de(2,3,3009);for(t=o.a.byteOffset,o=new Zr(o.a),i=null;o.ya();){var a=ei(o);if(357149030==a.id){i=a;break}}if(!i)throw q.error("Not an Info element."),new de(2,3,3010);for(o=new Zr(i.a),i=1e6,a=null;o.ya();){var s=ei(o);if(2807729==s.id)i=ri(s);else if(17545==s.id)if(4==(a=s).a.byteLength)a=a.a.getFloat32(0);else{if(8!=a.a.byteLength)throw new de(2,3,3003);a=a.a.getFloat64(0)}}if(null==a)throw new de(2,3,3011);if(i=a*(o=i/1e9),475249515!=(e=ei(new Zr(new DataView(e)))).id)throw q.error("Not a Cues element."),new de(2,3,3007);return function(e,t,n,r,i,o){function a(){return i}var s=[];e=new Zr(e.a);for(var u=null,l=null;e.ya();){var c=ei(e);if(187==c.id){var f=oi(c);f&&(c=n*f.Ig,f=t+f.gg,null!=u&&s.push(new Xr(s.length,u-o,c-o,a,l,f-1)),u=c,l=f)}}return null!=u&&s.push(new Xr(s.length,u-o,r-o,a,l,null)),s}(e,t,o,i,n,r)};var di={Ib:{},Zb:{},zd:function(e,t){di.Zb[e]=t}};function hi(e,t,n){this.f=e,this.Dc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.o=!0,this.i=0,this.u=void 0===n||n}function yi(e,t,n,r){return e=Ie(e,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function vi(){var e=this;this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.h=1,this.o={},this.u=0,this.v=new H(5),this.i=new ce((function(){!function(e){h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:return q.info("Updating manifest..."),n=0,A(t,2),T(t,gi(e),4);case 4:n=t.s,P(t,3);break;case 2:r=R(t),e.b&&(r.severity=1,e.b.onError(r));case 3:if(!e.b)return t.return();ki(e,n),S(t)}}))}))}(e)})),this.g=new Pe}function gi(e){var t=Date.now(),n=e.b.networkingEngine.request(0,Ie(e.f,e.a.retryParameters));return Re(e.g,n),n.promise.then((function(t){if(e.b)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),function(e,t,n){if(!(t=jr.te(t,"MPD")))throw new de(2,4,4001,n);return t=Yr(t,e.a.retryParameters,e.a.dash.xlinkFailGracefully,n,e.b.networkingEngine),Re(e.g,t),t.promise.then((function(t){return function(e,t,n){return h((function r(){var i,o,a,s,u,l,c,f,p,d,h,y,v,g,m,b,_,k,E,w,A,O,P,R;return N(r,(function(r){switch(r.j){case 1:s=Ft,l=[n],0<(c=(u=jr).U(t,"Location").map(u.qc).filter(s.Ma)).length&&(f=Bt(l,c),l=e.f=f),p=u.U(t,"BaseURL").map(u.qc),d=Bt(l,p),h=e.a.dash.ignoreMinBufferTime,y=0,h||(y=u.M(t,"minBufferTime",u.Ia)),e.u=u.M(t,"minimumUpdatePeriod",u.Ia,-1),v=u.M(t,"availabilityStartTime",u.$f),g=u.M(t,"timeShiftBufferDepth",u.Ia),m=u.M(t,"maxSegmentDuration",u.Ia),b=t.getAttribute("type")||"static",_=e.a.dash.ignoreSuggestedPresentationDelay,k=null,_||(k=u.M(t,"suggestedPresentationDelay",u.Ia)),e.c?E=e.c.presentationTimeline:(w=Math.max(e.a.dash.defaultPresentationDelay,1.5*y),E=new hi(v,null!=k?k:w,e.a.dash.autoCorrectDrift));for(var C={tb:"static"!=b,presentationTimeline:E,ma:null,W:null,aa:null,A:null,bandwidth:0,he:!1},x=d,D=jr.M(t,"mediaPresentationDuration",jr.Ia),I=[],L=0,M=jr.U(t,"Period"),N=0;N<M.length;N++){var j=M[N];L=jr.M(j,"start",jr.Ia,L);var U=jr.M(j,"duration",jr.Ia),F=null;if(N!=M.length-1){var B=jr.M(M[N+1],"start",jr.Ia);null!=B&&(F=B-L)}else null!=D&&(F=D-L);if(B=1/15,F&&U&&Math.abs(F-U)>B&&q.m("There is a gap/overlap between Periods",j),null==F&&(F=U),j=mi(e,C,x,{start:L,duration:F,node:j,hd:null==F||N==M.length-1}),I.push(j),U=C.ma.id,e.l.includes(U)||(e.l.push(U),e.c&&(e.b.filterNewPeriod(j),e.c.periods.push(j))),null==F){N!=M.length-1&&q.m("Skipping Period",N+1,"and any subsequent Periods:","Period",N+1,"does not have a valid start time.",I[N+1]),L=null;break}L+=F}if(null==e.c&&e.b.filterAllPeriods(I),null!=D?(L!=D&&q.m("@mediaPresentationDuration does not match the total duration of all","Periods."),i=I,o=D,a=!1):(i=I,o=L,a=!0),A=o,O=i,E.dc("static"==b),"static"!=b&&a||E.Ba(A||1/0),E.X()&&!isNaN(e.a.availabilityWindowOverride)&&(g=e.a.availabilityWindowOverride),null==g&&(g=1/0),E.Jd(g),E.od(m||1),e.c){r.C(0);break}if(e.c={presentationTimeline:E,periods:O,offlineSessionIds:[],minBufferTime:y||0},!E.He()){r.C(0);break}return P=u.U(t,"UTCTiming"),T(r,function(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var r=e.a.dash.clockSyncUri;return!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),Ft.Xe(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return wi(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return wi(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return q.Z("NTP UTCTiming scheme is not supported"),Promise.reject();default:return q.Z("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch((function(){return q.Z("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(e,d,P),4);case 4:if(R=r.s,!e.b)return r.return();E.Ce(R),S(r)}}))}))}(e,t,n)}))}(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return z(e.v,1,n),n}))}function mi(e,t,n,r){if(t.ma=Ei(r.node,null,n),t.W=r,t.ma.id||(q.info("No Period ID given for Period with start time "+r.start+",  Assigning a default"),t.ma.id="__shaka_period_"+r.start),jr.U(r.node,"EventStream").forEach(e.ag.bind(e,r.start,r.duration)),n=jr.U(r.node,"AdaptationSet").map(e.Zf.bind(e,t)).filter(Ft.Ma),t.tb){t=[];for(var i=p(n),o=i.next();!o.done;o=i.next())for(var a=(o=p(o.value.jg)).next();!a.done;a=o.next())t.push(a.value);if(t.length!=new Set(t).size)throw new de(2,4,4018)}var s=n.filter((function(e){return!e.Nd}));if(n.filter((function(e){return e.Nd})).forEach((function(e){var t=e.streams[0],n=e.Nd;s.forEach((function(e){e.id==n&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=bi(s,"video"),i=bi(s,"audio"),!t.length&&!i.length)throw new de(2,4,4004);for(n=e.a.disableAudio,i.length&&!n||(i=[null]),n=e.a.disableVideo,t.length&&!n||(t=[null]),n=[],o=0;o<i.length;o++)for(a=0;a<t.length;a++)_i(e,i[o],t[a],n);if(t=[],!e.a.disableText)for(e=bi(s,"text"),i=0;i<e.length;i++)t.push.apply(t,e[i].streams);return{startTime:r.start,textStreams:t,variants:n}}function bi(e,t){return e.filter((function(e){return e.contentType==t}))}function _i(e,t,n,r){if(t||n)if(t&&n){var i=t.drmInfos,o=n.drmInfos;if(!i.length||!o.length||0<Ot(i,o).length){o=Ot(t.drmInfos,n.drmInfos);for(var a=0;a<t.streams.length;a++)for(var s=0;s<n.streams.length;s++)i=(n.streams[s].bandwidth||0)+(t.streams[a].bandwidth||0),i={id:e.h++,language:t.language,primary:t.jd||n.jd,audio:t.streams[a],video:n.streams[s],bandwidth:i,drmInfos:o,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}}else for(o=t||n,a=0;a<o.streams.length;a++)i=o.streams[a].bandwidth||0,i={id:e.h++,language:o.language||"und",primary:o.jd,audio:t?o.streams[a]:null,video:n?o.streams[a]:null,bandwidth:i,drmInfos:o.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}function ki(e,t){0>e.u||e.i.T(Math.max(3,e.u-t,W(e.v)))}function Ei(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,qd:null,audioSamplingRate:null},n=n||t.ta;var r=jr.Hb,i=jr.Ze,o=jr.U(e,"BaseURL").map(jr.qc),a=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs;i=jr.M(e,"frameRate",i)||t.frameRate;for(var l=e.getAttribute("sar")||t.pixelAspectRatio,c=jr.U(e,"InbandEventStream"),f=t.emsgSchemeIdUris.slice(),d=(c=p(c)).next();!d.done;d=c.next())d=d.value.getAttribute("schemeIdUri"),f.includes(d)||f.push(d);return c=function(e){for(var t=0;t<e.length;++t){var n=e[t],r=n.getAttribute("schemeIdUri");if(r&&(n=n.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var i=parseInt(n,10);if(!i){q.m("Channel parsing failure! Ignoring scheme and value",r,n);continue}return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(i=parseInt(n,16))){q.m("Channel parsing failure! Ignoring scheme and value",r,n);continue}for(e=0;i;)1&i&&++e,i>>=1;return e;default:q.m("Unrecognized audio channel scheme:",r,n)}}return null}(c=jr.U(e,"AudioChannelConfiguration"))||t.qd,d=jr.M(e,"audioSamplingRate",r)||t.audioSamplingRate,a||(a=Ti(s,u)),{ta:Bt(n,o),ac:jr.oc(e,"SegmentBase")||t.ac,Pa:jr.oc(e,"SegmentList")||t.Pa,cc:jr.oc(e,"SegmentTemplate")||t.cc,width:jr.M(e,"width",r)||t.width,height:jr.M(e,"height",r)||t.height,contentType:a,mimeType:s,codecs:u,frameRate:i,pixelAspectRatio:l,emsgSchemeIdUris:f,id:e.getAttribute("id"),qd:c,audioSamplingRate:d}}function wi(e,t,n,r){return(t=Ie(t=Bt(t,[n]),e.a.retryParameters)).method=r,t=e.b.networkingEngine.request(4,t),Re(e.g,t),t.promise.then((function(e){if("HEAD"==r){if(!e.headers||!e.headers.date)return q.m("UTC timing response is missing","expected date header"),0;e=e.headers.date}else e=rt(e.data);return e=Date.parse(e),isNaN(e)?(q.m("Unable to parse date from UTC timing response"),0):e-Date.now()}))}function Ti(e,t){return pn(We(e,t))?"text":e.split("/")[0]}function Si(e,t,n,r){this.b=e,this.type=t,this.a=n,this.segments=r||null}function Ai(e,t,n,r){this.id=e,this.name=t,this.a=n,this.value=void 0===r?null:r}function Oi(e,t){this.name=e,this.value=t}function Pi(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Ri(e,t){this.b=t,this.a=e}G("shaka.media.ManifestParser.registerParserByExtension",di.zd),di.Lb=function(e,t){di.Ib[e]=t},G("shaka.media.ManifestParser.registerParserByMime",di.Lb),di.dg=function(){var e={};if(Xe()){for(var t in di.Ib)e[t]=!0;for(var n in di.Zb)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var r=(n=p(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!r.done;r=n.next())e[r=r.value]=Xe()?!!di.Ib[r]:$e(r);for(var i in t)e[i]=Xe()?!!di.Zb[i]:$e(t[i]);return e},di.create=function(e,t,n,r){return h((function i(){var o,a;return N(i,(function(i){switch(i.j){case 1:return A(i,2),T(i,di.gf(e,t,n,r),4);case 4:return o=i.s,i.return(new o);case 2:throw(a=R(i)).severity=2,a}}))}))},di.gf=function(e,t,n,r){return h((function i(){var o,a,s,u,l;return N(i,(function(i){switch(i.j){case 1:if(o=di,r){if(a=o.Ib[r.toLowerCase()])return i.return(a);q.m("Could not determine manifest type using MIME type ",r)}if(s=o.getExtension(e)){if(u=o.Zb[s])return i.return(u);q.m("Could not determine manifest type for extension ",s)}else q.m("Could not find extension for ",e);if(r){i.C(2);break}return T(i,o.qf(e,t,n),3);case 3:if(r=i.s){if(l=di.Ib[r])return i.return(l);q.m("Could not determine manifest type using MIME type",r)}case 2:throw new de(2,4,4e3,e)}}))}))},di.qf=function(e,t,n){return h((function r(){var i,o,a;return N(r,(function(r){switch(r.j){case 1:return(i=Ie([e],n)).method="HEAD",T(r,t.request(0,i).promise,2);case 2:return o=r.s,a=o.headers["content-type"],r.return(a?a.toLowerCase().split(";").shift():"")}}))}))},di.getExtension=function(e){return 1==(e=new $(e).la.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},di.isSupported=function(e,t){return!!Xe()&&(t in di.Ib||di.getExtension(e)in di.Zb)},G("shaka.media.PresentationTimeline",hi),hi.prototype.ca=function(){return this.g},hi.prototype.getDuration=hi.prototype.ca,hi.prototype.nf=function(){return this.a},hi.prototype.getMaxSegmentDuration=hi.prototype.nf,hi.prototype.Ba=function(e){this.g=e},hi.prototype.setDuration=hi.prototype.Ba,hi.prototype.wf=function(){return this.f},hi.prototype.getPresentationStartTime=hi.prototype.wf,hi.prototype.Ce=function(e){this.l=e},hi.prototype.setClockOffset=hi.prototype.Ce,hi.prototype.dc=function(e){this.o=e},hi.prototype.setStatic=hi.prototype.dc,hi.prototype.Jd=function(e){this.h=e},hi.prototype.setSegmentAvailabilityDuration=hi.prototype.Jd,hi.prototype.sg=function(e){this.Dc=e},hi.prototype.setDelay=hi.prototype.sg,hi.prototype.ef=function(){return this.Dc},hi.prototype.getDelay=hi.prototype.ef,hi.prototype.Eb=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.pd(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.u&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a),q.D("notifySegments:","maxSegmentDuration="+this.a)}},hi.prototype.notifySegments=hi.prototype.Eb,hi.prototype.pd=function(e){this.c=null==this.c?e:Math.min(this.c,e)},hi.prototype.notifyMinSegmentStartTime=hi.prototype.pd,hi.prototype.od=function(e){this.a=Math.max(this.a,e),q.D("notifyNewSegmentDuration:","maxSegmentDuration="+this.a)},hi.prototype.notifyMaxSegmentDuration=hi.prototype.od,hi.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},hi.prototype.offset=hi.prototype.offset,hi.prototype.X=function(){return 1/0==this.g&&!this.o},hi.prototype.isLive=hi.prototype.X,hi.prototype.bb=function(){return 1/0!=this.g&&!this.o},hi.prototype.isInProgress=hi.prototype.bb,hi.prototype.Wb=function(){if(1/0==this.h)return this.i;var e=this.xb()-this.h;return Math.max(this.i,e)},hi.prototype.getSegmentAvailabilityStart=hi.prototype.Wb,hi.prototype.De=function(e){this.i=e},hi.prototype.setUserSeekStart=hi.prototype.De,hi.prototype.xb=function(){return this.X()||this.bb()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},hi.prototype.getSegmentAvailabilityEnd=hi.prototype.xb,hi.prototype.Vb=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var n=this.xb()-this.h;return e=Math.min(n+e,this.Ga()),Math.max(t,e)},hi.prototype.getSafeSeekRangeStart=hi.prototype.Vb,hi.prototype.wb=function(){return this.Vb(0)},hi.prototype.getSeekRangeStart=hi.prototype.wb,hi.prototype.Ga=function(){var e=this.X()||this.bb()?this.Dc:0;return Math.max(0,this.xb()-e)},hi.prototype.getSeekRangeEnd=hi.prototype.Ga,hi.prototype.He=function(){return!(null==this.f||null!=this.b&&this.u)},hi.prototype.usingPresentationStartTime=hi.prototype.He,G("shaka.dash.DashParser",vi),(r=vi.prototype).configure=function(e){this.a=e},r.start=function(e,t){var n=this;return h((function r(){var i;return N(r,(function(r){switch(r.j){case 1:return n.f=[e],n.b=t,T(r,gi(n),2);case 2:if(i=r.s,n.b&&ki(n,i),!n.b)throw new de(2,7,7001);return r.return(n.c)}}))}))},r.stop=function(){return this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.o={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},r.update=function(){gi(this).catch(function(e){this.b&&this.b.onError(e)}.bind(this))},r.onExpirationUpdated=function(){},r.Zf=function(e,t){if(e.aa=Ei(t,e.ma,null),"image"==e.aa.contentType)return q.m("Skipping Image AdaptationSet",e.aa),null;var n=!1,r=jr.U(t,"Role"),i=r.map((function(e){return e.getAttribute("value")})).filter(Ft.Ma),o=void 0,a="text"==e.aa.contentType;a&&(o="subtitle");for(var s=0;s<r.length;s++){var u=r[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=r[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":o=u}}var l=null,c=!1;jr.U(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?l=e.getAttribute("value"):c=!0})),s=jr.U(t,"Accessibility");var f=new Map;for(r={},u=(s=p(s)).next();!u.done;r={Rb:r.Rb},u=s.next()){var d=u.value;u=d.getAttribute("schemeIdUri"),d=d.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(r.Rb=1,null!=d?d.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Rb,e.Rb+=2;f.set(n,xn(t))}}(r)):f.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=d&&(i.push(d),"captions"==d&&(o="caption"))}if(c)return null;var h=Fr(r=jr.U(t,"ContentProtection"),this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);if(r=xn(t.getAttribute("lang")||"und"),s=t.getAttribute("label"),(u=jr.U(t,"Label"))&&u.length&&((u=u[0]).textContent&&(s=u.textContent)),0==(i=(u=jr.U(t,"Representation")).map(this.bg.bind(this,e,h,o,r,s,n,i,f)).filter((function(e){return!!e}))).length){if(this.a.dash.ignoreEmptyAdaptationSet||a)return null;throw new de(2,4,4003)}return e.aa.contentType&&"application"!=e.aa.contentType||(e.aa.contentType=Ti(i[0].mimeType,i[0].codecs),i.forEach((function(t){t.type=e.aa.contentType}))),i.forEach((function(e){h.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),a=u.map((function(e){return e.getAttribute("id")})).filter(Ft.Ma),{id:e.aa.id||"__fake__"+this.h++,contentType:e.aa.contentType,language:r,jd:n,streams:i,drmInfos:h.drmInfos,Nd:l,jg:a}},r.bg=function(e,t,n,r,i,o,a,s,u){if(e.A=Ei(u,e.aa,null),!function(e){var t=e.ac?1:0;if(t+=e.Pa?1:0,0==(t+=e.cc?1:0))return"text"==e.contentType||"application"==e.contentType||(q.m("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1);return 1!=t&&(q.m("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.ac?(q.info("Using SegmentBase by default."),e.Pa=null):q.info("Using SegmentList by default."),e.cc=null),!0}(e.A))return q.m("Skipping Representation",e.A),null;e.bandwidth=jr.M(u,"bandwidth",jr.Bc)||0;var l=e.A.contentType;l="text"==l||"application"==l;try{var c=this.kg.bind(this);if(e.A.ac)var f=function(e,t){var n=Number(zr(e,ui,"presentationTimeOffset"))||0,r=zr(e,ui,"timescale"),i=1;r&&(i=jr.Bc(r)||1),n=n/i||0,r=ai(e,ui);var o=e.A.contentType;if(i=e.A.mimeType.split("/")[1],"text"!=o&&"mp4"!=i&&"webm"!=i)throw q.error("SegmentBase specifies an unsupported container type.",e.A),new de(2,4,4006);if("webm"==i&&!r)throw q.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.A),new de(2,4,4005);o=Wr(e,ui,"RepresentationIndex");var a=zr(e,ui,"indexRange"),s=e.A.ta;if(a=jr.Cc(a||""),o){var u=o.getAttribute("sourceURL");u&&(s=Bt(e.A.ta,[u])),a=jr.M(o,"range",jr.Cc,a)}if(!a)throw q.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.A),new de(2,4,4002);return{createSegmentIndex:(i=si(e,t,r,s,a.start,a.end,i,n)).createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,oa:n}}(e,c);else if(e.A.Pa)f=li(e,this.o);else if(e.A.cc)f=fi(e,c,this.o,!!this.c);else{var p=e.A.ta,d=e.W.duration||0;f={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<d?1:null},getSegmentReference:function(e){return 1!=e?null:new Xr(1,0,d,(function(){return p}),0,null)},initSegmentReference:null,oa:0}}}catch(e){if(l&&4002==e.code)return null;throw e}return u=function(e,t,n,r){var i=Fr(e,t,r);if(n.be)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.be=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new de(2,4,4008);return i.Xd||n.Xd}(u=jr.U(u,"ContentProtection"),this.a.dash.customScheme,t,this.a.dash.ignoreDrmInfo),{id:this.h++,originalId:e.A.id,createSegmentIndex:f.createSegmentIndex,findSegmentPosition:f.findSegmentPosition,getSegmentReference:f.getSegmentReference,initSegmentReference:f.initSegmentReference,presentationTimeOffset:f.oa,mimeType:e.A.mimeType,codecs:e.A.codecs,frameRate:e.A.frameRate,pixelAspectRatio:e.A.pixelAspectRatio,bandwidth:e.bandwidth,width:e.A.width,height:e.A.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:r,label:i,type:e.aa.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:e.A.emsgSchemeIdUris,roles:a,channelsCount:e.A.qd,audioSamplingRate:e.A.audioSamplingRate,closedCaptions:s}},r.ag=function(e,t,n){var r=jr.Hb,i=n.getAttribute("schemeIdUri")||"",o=n.getAttribute("value")||"",a=jr.M(n,"timescale",r)||1;jr.U(n,"Event").forEach(function(n){var s=jr.M(n,"presentationTime",r)||0,u=jr.M(n,"duration",r)||0;u=(s=s/a+e)+u/a,null!=t&&(s=Math.min(s,e+t),u=Math.min(u,e+t)),n={schemeIdUri:i,value:o,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.b.onTimelineRegionAdded(n)}.bind(this))},r.kg=function(e,t,n){return e=yi(e,t,n,this.a.retryParameters),e=this.b.networkingEngine.request(1,e),Re(this.g,e),e.promise.then((function(e){return e.data}))},di.zd("mpd",vi),di.Lb("application/dash+xml",vi),di.Lb("video/vnd.mpeg.dash.mpd",vi),Ai.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Ai.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Ci={ub:function(e,t){return e.filter((function(e){return e.name==t}))},Ya:function(e,t){var n=Ci.ub(e,t);return n.length?n[0]:null},Xc:function(e,t,n){return e.filter((function(e){var r=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),r.value==t&&e.value==n}))},Pc:function(e,t){return Bt([e],[t])[0]},gd:function(e){return/^#(?!EXT)/m.test(e)}};function xi(e){this.b=e,this.a=0}function Di(e){Ii(e,/[ \t]+/gm)}function Ii(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,mg:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.mg)}function Li(e){return e.a==e.b.length?null:(e=Ii(e,/[^ \t\n]*/gm))?e[0]:null}function Mi(){this.a=0}function Ni(e,t,n){var r=(t=(t=rt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new de(2,4,4015);t=0;for(var i=1;i<r.length;i++)if(!Ci.gd(r[i])){var o=Ui(e,r[i]);if(--e.a,Fi.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(i+=1)}for(i=[],o=1;o<r.length;)if(Ci.gd(r[o]))o+=1;else{var a=Ui(e,r[o]);if(Bi.includes(a.name)){if(1!=t)throw new de(2,4,4017);return new Si(n,t,i,e=ji(e,n,r=r.splice(o,r.length-o),i))}i.push(a),o+=1,"EXT-X-STREAM-INF"==a.name&&(a.a.push(new Oi("URI",r[o])),o+=1)}return new Si(n,t,i)}function ji(e,t,n,r){var i=[],o=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=Ui(e,n),Fi.includes(n.name)?r.push(n):o.push(n);else{if(Ci.gd(n))return[];n=Ci.Pc(t,n.trim()),i.push(new Ri(n,o)),o=[]}})),i}function Ui(e,t){var n=e.a++,r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new de(2,4,4016,t);var i,o=r[1],a=r[2];if(r=[],a){var s;(s=Ii(a=new xi(a),/^([^,=]+)(?:,|$)/g))&&(i=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Ii(a,u);)r.push(new Oi(s[1],s[2]||s[3]))}return new Ai(n,o,r,i)}var Fi="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Bi="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Vi(e){try{var t=Vi.parse(e);return me({uri:e,vd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ve(e)}}function Gi(){var e=this;this.a=this.f=null,this.ea=1,this.G=new Map,this.V=new Set,this.b=new Map,this.c=null,this.v="",this.u=new Mi,this.S=0,this.h=new ce((function(){!function(e){h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:return q.info("Updating manifest..."),e.f?(A(t,2),T(t,e.update(),4)):t.return();case 4:n=e.S,e.h.T(n),P(t,0);break;case 2:if(r=R(t),!e.f)return t.return();r.severity=1,e.f.onError(r),e.h.T(.1),S(t)}}))}))}(e)})),this.g=uo,this.o=null,this.F=0,this.H=1/0,this.i=new Pe,this.K=[],this.l=new Map,this.$=!1}function Ki(e,t){return h((function n(){var r,i,o,a,s,u,l,c,f,p;return N(n,(function(n){switch(n.j){case 1:return r=Ci,i=lo,o=t.Pe,T(n,ao(e,Ie([o],e.a.retryParameters),0),2);case 2:if(a=n.s,1!=(s=Ni(e.u,a.data,a.uri)).type)throw new de(2,4,4017);return l=(u=r.Ya(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,c=t.stream,T(n,Ji(e,t.Jc,s,l,c.mimeType,c.codecs),3);case 3:f=n.s,t.bc.a=f,p=f[f.length-1],r.Ya(s.a,"EXT-X-ENDLIST")&&(oo(e,i.Va),e.c.Ba(p.endTime)),S(n)}}))}))}function Hi(e){e.forEach((function(e){if(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}}))}function zi(e,t,n,r,i){return{id:e.ea++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function Wi(e,t,n){return h((function r(){var i,o,a,s,u,l,c,f,p,d,h,y;return N(r,(function(r){switch(r.j){case 1:if(i=eo(t,"URI"),e.b.has(i))return r.return(e.b.get(i));if(o=eo(t,"TYPE").toLowerCase(),a=Gt,"subtitles"==o&&(o=a.va),s=xn(Pi(t,"LANGUAGE","und")),u=Pi(t,"NAME"),l=t.getAttribute("DEFAULT"),c=t.getAttribute("AUTOSELECT"),f=Pi(t,"CHANNELS"),"audio"==o)if(f){var v=f.split("/")[0];v=parseInt(v,10)}else v=null;else v=null;return p=v,d=!!l||!!c,h=Pi(t,"CHARACTERISTICS"),T(r,Yi(e,i,n,o,s,d,u,p,null,h),2);case 2:return y=r.s,e.b.has(i)?r.return(e.b.get(i)):null==y?r.return(null):(e.G.set(t.id,y),e.b.set(i,y),r.return(y))}}))}))}function Yi(e,t,n,r,i,o,a,s,u,l){return h((function c(){var f,d,y,v,g,m,b,_,k,E,w,S,O,C,x,D,I,L,M,j,U,F,B,V,G,K,H;return N(c,(function(c){switch(c.j){case 1:return d=(f=Ci).Pc(e.v,t),T(c,ao(e,Ie([d],e.a.retryParameters),0),2);case 2:if(y=c.s,d=y.uri,1!=(v=Ni(e.u,y.data,d)).type)throw new de(2,4,4017);g=[],v.segments.forEach((function(e){e=f.ub(e.b,"EXT-X-KEY"),g.push.apply(g,e)})),m=!1,b=[],_=null;for(var z=p(g),W=z.next();!W.done;W=z.next())if(k=W.value,"NONE"!=(E=eo(k,"METHOD"))){if(m=!0,"AES-128"==E)return q.m("Unsupported HLS Encryption",E),e.$=!0,c.return(null);w=eo(k,"KEYFORMAT"),(O=(S=so[w])?S(k):null)?(O.keyIds.length&&(_=O.keyIds[0]),b.push(O)):q.m("Unsupported HLS KEYFORMAT",w)}if(m&&!b.length)throw new de(2,4,4026);return function(e,t){var n=lo,r=Ci.Ya(t.a,"EXT-X-PLAYLIST-TYPE"),i=Ci.Ya(t.a,"EXT-X-ENDLIST");i=r&&"VOD"==r.value||i,r=r&&"EVENT"==r.value&&!i,r=!i&&!r,i?oo(e,n.Va):(oo(e,r?n.Rd:n.Ke),n=to(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.F=Math.max(n,e.F),e.H=Math.min(n,e.H))}(e,v),C=function(e,t){if(1==t.length)return t[0];var n=Zi(e,t);if(null!=n)return n;throw new de(2,4,4025,t)}(r,n),T(c,function(e,t,n,r){return h((function i(){var o,a,s,u,l,c,f,p,d;return N(i,(function(i){switch(i.j){case 1:return o=Gt,a=r.segments[0].a,s=new $(a),u=s.la.split(".").pop(),l=io[t],(c=l[u])?i.return(c):t==o.va?n&&"vtt"!=n?i.return("application/mp4"):i.return("text/vtt"):((f=Ie([a],e.a.retryParameters)).method="HEAD",T(i,ao(e,f,1),2));case 2:if(p=i.s,!(d=p.headers["content-type"]))throw new de(2,4,4021,u);return i.return(d.split(";")[0])}}))}))}(e,r,C,v),3);case 3:return x=c.s,ro.includes(x)&&(C=""),I=(D=f.Ya(v.a,"EXT-X-MEDIA-SEQUENCE"))?Number(D.value):0,A(c,4),T(c,Ji(e,t,v,I,x,C),6);case 6:L=c.s,P(c,5);break;case 4:if(4035==(M=R(c)).code)return q.Z("Skipping unsupported HLS stream",x,t),c.return(null);throw M;case 5:return j=L[0].startTime,U=L[L.length-1].endTime,F=U-j,B=new Jr(L),V=qi(v),G=void 0,"text"==r&&(G="subtitle"),K=[],l&&K.push(l),H={id:e.ea++,originalId:a,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:B.find.bind(B),getSegmentReference:B.get.bind(B),initSegmentReference:V,presentationTimeOffset:0,mimeType:x,codecs:C,kind:G,encrypted:m,keyId:_,language:i,label:a,type:r,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:K,channelsCount:s,audioSamplingRate:null,closedCaptions:u},c.return({stream:H,bc:B,drmInfos:b,Jc:t,Pe:d,nd:j,Qg:U,duration:F})}}))}))}function qi(e){var t=Ci.ub(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new de(2,4,4020);var n=eo(t=t[0],"URI"),r=Ci.Pc(e.b,n);return e=0,n=null,(t=Pi(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new qr((function(){return[r]}),e,n)}function Xi(e,t,n,r){var i=t.b,o=t.a;t=to(i,"EXTINF").value.split(","),t=r+Number(t[0]);var a=0,s=null;return(i=Ci.Ya(i,"EXT-X-BYTERANGE"))&&(a=i.value.split("@"),i=Number(a[0]),s=(a=a[1]?Number(a[1]):e.a+1)+i-1),new Xr(n,r,t,(function(){return[o]}),a,s)}function $i(e){e.c&&(e.K.forEach((function(t){e.c.Eb(t,0)})),e.K=[])}function Ji(e,t,n,r,i,o){return h((function a(){var s,u,l,c,f,p,d,y,v,g;return N(a,(function(a){switch(a.j){case 1:return s=n.segments,u=[],l=s[0].a,c=Xi(null,s[0],r,0),f=qi(n),T(a,function(e,t,n,r,i,o){return h((function a(){var s,u,l,c,f,p,d,h,y;return N(a,(function(a){switch(a.j){case 1:if(e.o){if(s=e.b.get(t),u=s.bc,l=u.get(r.position))return q.D("Found segment start time in previous manifest"),a.return(l.startTime);q.debug("Unable to find segment start time in previous manifest!")}if(q.D("Fetching segment to find start time"),i=i.toLowerCase(),ro.includes(i))throw q.Z("Raw formats are not yet supported.  Skipping "+i),new de(1,4,4035);if("video/webm"==i)throw q.Z("WebM in HLS is not yet supported.  Skipping."),new de(1,4,4035);if("video/mp4"!=i&&"audio/mp4"!=i){a.C(2);break}return c=[Qi(e,r)],n&&c.push(Qi(e,n)),T(a,Promise.all(c),3);case 3:return f=a.s,p=f[0],d=f[1]||f[0],a.return(function(e,t,n,r){var i=0;if((new Cr).L("moov",xr).L("trak",xr).L("mdia",xr).ia("mdhd",(function(e){e.reader.P(0==e.version?8:16),i=e.reader.I(),e.parser.stop()})).parse(r,!0),!i)throw q.error("Unable to find timescale in init segment!"),new de(2,4,4030,e,t);var o=0,a=!1;if((new Cr).L("moof",xr).L("traf",xr).ia("tfdt",(function(e){o=(0==e.version?e.reader.I():e.reader.Kb())/i,a=!0,e.parser.stop()})).parse(n,!0),!a)throw new de(2,4,4030,e,t);return o}(t,p.uri,p.data,d.data));case 2:if("video/mp2t"!=i){a.C(4);break}return T(a,Qi(e,r),5);case 5:return h=a.s,a.return(function(e,t,n){function r(){o.seek(a+188),71!=(s=o.na())&&(o.seek(a+192),s=o.na()),71!=s&&(o.seek(a+204),s=o.na()),71!=s&&i(),o.ze(1)}function i(){throw new de(2,4,4030,e,t)}for(var o=new Or(new DataView(n),0),a=0,s=0;;)if(a=o.ga(),71!=(s=o.na())&&i(),8191==(8191&(n=o.$b())))r();else if(16384&n){if(0!=(n=(48&o.na())>>4)&&2!=n||i(),3==n&&(n=o.na(),o.P(n)),1==o.I()>>8){o.P(3),0!=(n=o.na()>>6)&&1!=n||i(),0==o.na()&&i(),n=o.na();var u=o.$b(),l=o.$b();return(1073741824*((14&n)>>1)+((65534&u)<<14|(65534&l)>>1))/9e4}r()}else r()}(t,h.uri,h.data));case 4:if("application/mp4"!=i&&!i.startsWith("text/")){a.C(6);break}return T(a,Qi(e,r),7);case 7:return y=a.s,a.return(function(e,t,n){return pn(e=We(e,t))?(dn(t=new cn(null),e),t.sc(n)):0}(i,o,y.data));case 6:throw new de(2,4,4030,t)}}))}))}(e,t,f,c,i,o),2);case 2:p=a.s,q.debug("First segment",l.split("/").pop(),"starts at",p);for(var m=0;m<s.length;++m)d=s[m],y=u[u.length-1],v=0==m?p:y.endTime,g=Xi(y,d,r+m,v),u.push(g);return e.K.push(u),$i(e),a.return(u)}}))}))}function Qi(e,t){return h((function n(){var r,i,o,a,s,u;return N(n,(function(n){switch(n.j){case 1:return r=1,i=yi(t.c(),t.b,t.b+2048-1,e.a.retryParameters),o=yi(t.c(),t.b,t.a,e.a.retryParameters),e.a.hls.useFullSegmentsForStartTime?n.return(ao(e,o,r)):(A(n,2),T(n,ao(e,i,r),4));case 4:return a=n.s,n.return(a);case 2:if(7001==(s=R(n)).code)throw s;return q.Z("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),T(n,ao(e,o,r),5);case 5:return u=n.s,n.return(u)}}))}))}function Zi(e,t){for(var n=no[e],r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(n[r].test(t[i].trim()))return t[i].trim();return"text"==e?"":null}function eo(e,t){var n=e.getAttribute(t);if(!n)throw new de(2,4,4023,t);return n.value}function to(e,t){var n=Ci.Ya(e,t);if(!n)throw new de(2,4,4024,t);return n}G("shaka.net.DataUriPlugin",Vi),Vi.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw q.error("Bad data URI, failed to parse scheme"),new de(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw q.error("Bad data URI, failed to extract encoding and MIME type"),new de(2,1,1004,t);var r=n[0];n=e.decodeURIComponent(n.slice(1).join(","));var i=null;if(1<(r=r.split(";")).length&&(i=r[1]),"base64"==i)t=ct.Fa(n).buffer;else{if(i)throw q.error("Bad data URI, unknown encoding"),new de(2,1,1005,t);t=at(n)}return{data:t,contentType:r[0]}},De("data",Vi),G("shaka.hls.HlsParser",Gi),(r=Gi.prototype).configure=function(e){this.a=e},r.start=function(e,t){var n=this;return h((function r(){var i,o;return N(r,(function(r){switch(r.j){case 1:return n.f=t,T(r,ao(n,Ie([e],n.a.retryParameters),0),2);case 2:return i=r.s,n.v=i.uri,T(r,function(e,t){return h((function n(){var r,i,o,a,s,u,l,c,f,d,y;return N(n,(function(n){switch(n.j){case 1:if(0!=(r=Ni(e.u,t,e.v)).type)throw new de(2,4,4022);return T(n,function(e,t){return h((function n(){var r,i,o,a,s,u,l,c,f,d,y,v;return N(n,(function(n){switch(n.j){case 1:return r=Ci,i=Ft,o=t.a,a=r.ub(t.a,"EXT-X-MEDIA"),s=a.filter(function(e){return"SUBTITLES"==eo(e,"TYPE")}.bind(e)),u=s.map(function(e){var t=this;return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return t.a.disableText?n.return(null):(A(n,2),T(n,function(e,t){return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return eo(t,"TYPE"),T(n,Wi(e,t,[]),2);case 2:return r=n.s,n.return(r.stream)}}))}))}(t,e),4));case 4:return n.return(n.s);case 2:if(r=R(n),t.a.hls.ignoreTextStreamFailures)return n.return(null);throw r}}))}))}.bind(e)),l=a.filter((function(e){return"CLOSED-CAPTIONS"==eo(e,"TYPE")})),function(e,t){for(var n=p(t),r=n.next();!r.done;r=n.next()){eo(r=r.value,"TYPE");var i=Pi(r,"LANGUAGE")||"und";i=xn(i);var o=eo(r,"GROUP-ID");r=eo(r,"INSTREAM-ID"),e.l.get(o)||e.l.set(o,new Map),e.l.get(o).set(r,i)}}(e,l),T(n,Promise.all(u),2);case 2:return c=n.s,f=r.ub(o,"EXT-X-STREAM-INF"),d=f.map(function(e){return function(e,t,n){return h((function r(){var i,o,a,s,u,l,c,f,d,y,v,g,m,b,_,k,E,w,S,A,O,P,R,C,x,D,I;return N(r,(function(r){switch(r.j){case 1:return i=Gt,o=Ci,a=Pi(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(e){for(var t=new Set,n=[],r=(e=p(e)).next();!r.done;r=e.next()){var i=Ye(r=r.value)[0];t.has(i)?q.debug("Ignoring duplicate codec"):(n.push(r),t.add(i))}return n}(a.split(/\s*,\s*/)),u=t.getAttribute("RESOLUTION"),c=l=null,f=Pi(t,"FRAME-RATE"),d=Number(eo(t,"BANDWIDTH")),u&&(y=u.value.split("x"),l=y[0],c=y[1]),v=(v=(v=o.ub(n.a,"EXT-X-MEDIA")).filter((function(e){return"CLOSED-CAPTIONS"!=eo(e,"TYPE")}))).filter((function(e){var t=Pi(e,"URI")||"";return"SUBTITLES"==(Pi(e,"TYPE")||"")||""!=t})),g=Pi(t,"AUDIO"),m=Pi(t,"VIDEO"),g?v=o.Xc(v,"AUDIO",g):m&&(v=o.Xc(v,"VIDEO",m)),(b=Zi(i.va,s))&&((_=Pi(t,"SUBTITLES"))&&((k=o.Xc(v,"SUBTITLES",_)).length&&(E=e.G.get(k[0].id))&&(E.stream.codecs=b)),Ae(s,b)),w=v.map(function(e){return Wi(this,e,s)}.bind(e)),S=[],A=[],T(r,Promise.all(w),2);case 2:if(P=(P=r.s).filter((function(e){return null!=e})),g?S=P:m&&(A=P),q.debug("Guessing stream type for",t.toString()),C=!1,S.length||A.length?S.length?(D=eo(t,"URI"),I=S[0].Jc,D==I?(q.debug("Guessing audio-only."),R=i.Nb,C=!0):(q.debug("Guessing video."),R=i.Ua)):(q.debug("Guessing audio."),R=i.Nb):1==s.length?(x=Zi(i.Ua,s),u||f||x?(q.debug("Guessing video-only."),R=i.Ua):(q.debug("Guessing audio-only."),R=i.Nb)):(q.debug("Guessing multiplexed audio+video."),R=i.Ua,s=[s.join(",")]),C){r.C(3);break}return T(r,function(e,t,n,r){return h((function i(){var o,a,s,u,l;return N(i,(function(i){switch(i.j){case 1:return o=Gt,a=eo(t,"URI"),e.b.has(a)?i.return(e.b.get(a)):(s=Pi(t,"CLOSED-CAPTIONS"),u=null,r==o.Ua&&s&&"NONE"!=s&&(u=e.l.get(s)),T(i,Yi(e,a,n,r,"und",!1,null,null,u,null),2));case 2:return null==(l=i.s)?i.return(null):e.b.has(a)?i.return(e.b.get(a)):(e.b.set(a,l),i.return(l))}}))}))}(e,t,s,R),4);case 4:O=r.s;case 3:if(O)O.stream.type==i.Nb?S=[O]:A=[O];else if(null===O)return q.debug("streamInfo is null"),r.return([]);return A&&Hi(A),S&&Hi(S),r.return(function(e,t,n,r,i,o,a){n.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(o)||void 0,e.frameRate=Number(a)||void 0)}.bind(e));var s=!!e.a&&e.a.disableAudio;t.length&&!s||(t=[null]);s=!!e.a&&e.a.disableVideo,(!n.length||s)&&(n=[null]);s=[];for(var u=(t=p(t)).next();!u.done;u=t.next()){u=u.value;for(var l=p(n),c=l.next();!c.done;c=l.next()){var f=c.value;c=u?u.stream:null;var d=f?f.stream:null,h=u?u.drmInfos:null,y=f?f.drmInfos:null;f=(f?f.Jc:"")+" - "+(u?u.Jc:"");var v=void 0;if(c&&d){if(h.length&&y.length&&!(0<Ot(h,y).length)){q.m("Incompatible DRM info in HLS variant.  Skipping.");continue}v=Ot(h,y)}else c?v=h:d&&(v=y);e.V.has(f)?q.debug("Skipping variant which only differs in text streams."):(c=zi(e,c,d,r,v),s.push(c),e.V.add(f))}}return s}(e,S,A,d,l,c,f))}}))}))}(this,e,t)}.bind(e)),T(n,Promise.all(d),3);case 3:return y=n.s,v=(v=y.reduce(i.Oc,[])).filter((function(e){return null!=e})),n.return({startTime:0,variants:v,textStreams:c.filter((function(e){return null!=e}))})}}))}))}(e,r),2);case 2:if(i=n.s,!e.f)throw new de(2,7,7001);if(e.$&&0==i.variants.length)throw q.info("No stream is created, because we don't support AES-128","encryption yet"),new de(2,4,4034);e.f.filterAllPeriods([i]),o=1/0,a=0,s=1/0;for(var v=p(e.b.values()),g=v.next();!g.done;g=v.next())u=g.value,o=Math.min(o,u.nd),a=Math.max(a,u.nd),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(e.g!=lo.Va?(e.c=new hi(0,3*e.F),e.c.dc(!1)):(e.c=new hi(null,0),e.c.dc(!0)),$i(e),e.g!=lo.Va){for(e.S=e.H,l=lo,e.g==l.Rd&&(c=e.c.Dc,isNaN(e.a.availabilityWindowOverride)||(c=e.a.availabilityWindowOverride),e.c.Jd(c)),f=0;95443.7176888889<=a;)f+=95443.7176888889,a-=95443.7176888889;if(f)for(q.debug("Offsetting live streams by",f,"to compensate for rollover"),g=(v=p(e.b.values())).next();!g.done;g=v.next())95443.7176888889>(d=g.value).nd?(q.D("Offset applied to",d.stream.type),d.stream.presentationTimeOffset=-f,d.bc.offset(f)):q.D("Offset NOT applied to",d.stream.type)}else for(e.c.Ba(s),e.c.offset(-o),g=(v=p(e.b.values())).next();!g.done;g=v.next())(y=g.value).stream.presentationTimeOffset=o,y.bc.offset(-o),Qr(y.bc,s);e.o={presentationTimeline:e.c,periods:[i],offlineSessionIds:[],minBufferTime:0},S(n)}}))}))}(n,i.data),3);case 3:return 0<(o=n.S)&&n.h.T(o),r.return(n.o)}}))}))},r.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.a=this.f=null,this.G.clear(),this.V.clear(),this.b.clear(),this.o=null,Promise.all(e)},r.update=function(){if(this.g!=lo.Va){for(var e=[],t=p(this.b.values()),n=t.next();!n.done;n=t.next())e.push(Ki(this,n.value));return Promise.all(e)}},r.onExpirationUpdated=function(){};var no={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},ro=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],io={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function oo(e,t){e.g=t,e.c&&e.c.dc(e.g==lo.Va),e.g!=lo.Va||e.h.stop()}function ao(e,t,n){if(!e.i)throw new de(2,7,7001);return t=e.f.networkingEngine.request(n,t),Re(e.i,t),t.promise}var so={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=eo(e,"METHOD");Fn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var n=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return n.includes(t)?(t=eo(e,"URI"),t=Vi.parse(t),t=Vt("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Pi(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):(q.error("Widevine in HLS is only supported with [",n.join(", "),"], not",t),null)}},uo="VOD",lo={Va:uo,Ke:"EVENT",Rd:"LIVE"};function co(){this.a=new Map}function fo(e,t,n){po(e,t).text=n}function po(e,t){return e.a.has(t)||e.a.set(t,new ho),e.a.get(t)}function ho(){this.text=this.variant=null}function yo(e,t){this.a=e,this.b=new Set([e]);for(var n=p(t=t||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function vo(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!(n.channelsCount==r.channelsCount&&go(n,r)&&mo(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(go(n=e.video,r=t.video)&&mo(n.roles,r.roles))),!n}function go(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Ye(e)[0]})),r=t.codecs.split(",").map((function(e){return Ye(e)[0]}));if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=0;i<n.length;i++)if(n[i]!=r[i])return!1;return!0}function mo(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=p(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function bo(e){this.a=e,this.b=new _o(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function _o(e,t,n,r,i){this.f=e,this.c=t,this.a=n,this.b=void 0===r?"":r,this.g=void 0===i?"":i}function ko(){this.a=To,this.b=(new Map).set(To,2).set(wo,1)}function Eo(e,t,n){e.b.set(To,n).set(wo,t)}di.zd("m3u8",Gi),di.Lb("application/x-mpegurl",Gi),di.Lb("application/vnd.apple.mpegurl",Gi),yo.prototype.add=function(e){return vo(this.a,e)?(this.b.add(e),!0):(q.m("Rejecting variant - not compatible with root."),!1)},yo.prototype.values=function(){return this.b.values()},bo.prototype.create=function(e){var t=this,n=e.filter((function(e){return vo(t.a,e)}));return n.length?new yo(n[0],n):this.b.create(e)},_o.prototype.create=function(e){var t=[];t=function(e,t){var n=In(xn(t),e.map((function(e){return Dn(e)})));return n?e.filter((function(e){return n==Dn(e)})):[]}(e,this.f);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.c&&((e=function(e,t,n){return e.filter((function(e){if(n){var r=e[n];return r&&r.roles.includes(t)}return r=e.audio,e=e.video,r&&0<=r.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}(t,this.c,this.g)).length?t=e:q.m("No exact match for variant role could be found.")),this.a&&((e=Mn.$d(t,this.a)).length?t=e:q.m("No exact match for the channel count could be found.")),this.b&&((e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.b)).length?t=e:q.m("No exact match for variant label could be found.")),e=new yo(t[0]),n=(t=p(t)).next();!n.done;n=t.next())n=n.value,vo(e.a,n)&&e.add(n);return e};var wo=0,To=1;function So(e,t){this.g=e,this.h=Oo(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.i=t,this.c=function(){}}function Ao(e){this.a=e}function Oo(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var r=t.start(n),i=t.end(n);if(!(e<r||e>i-.5)){t=!0;break e}}t=!1}return t}function Po(e,t,n,r,i){var o=this;this.a=e,this.v=t,this.u=n,this.l=i,this.f=new je,this.i=!1,this.o=e.readyState,this.c=!1,this.b=r,this.h=!1,this.f.B(e,"waiting",(function(){return Ro(o)})),this.g=new ce((function(){Ro(o)})).Ra(.25)}function Ro(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.i)return}else e.i=!1;if(!e.a.paused){e.a.readyState!=e.o&&(e.c=!1,e.o=e.a.readyState);var t=e.u.smallGapLimit,n=e.a.currentTime,r=e.a.buffered;e:{if(r&&r.length&&!(1==r.length&&1e-6>r.end(0)-r.start(0)))for(var i=Ze("Edge/")||Ze("Trident/")||Ze("Tizen")||Ze("CrKey")?.5:.1,o=0;o<r.length;o++)if(r.start(o)>n&&(0==o||r.end(o-1)-n<=i)){i=o;break e}i=null}if(null==i)e.b&&(r=Oo(n=(e=e.b).g),i=n.a.currentTime,o=Date.now()/1e3,e.a==i&&e.h==r||(e.f=o,e.a=i,e.h=r,e.b=!1),(i=o-e.f)>=e.i&&r&&!e.b&&(e.c(e.a,i),e.b=!0,e.a=n.a.currentTime));else if(0!=i||e.h){o=r.start(i);var a=e.v.Ga();if(!(o>=a)){t=(a=o-n)<=t;var s=!1;if(!(.001>a)){if(!t&&!e.c){e.c=!0;var u=new ke("largegap",{currentTime:n,gapSize:a});u.cancelable=!0,e.l(u),e.u.jumpLargeGaps&&!u.defaultPrevented?s=!0:q.info("Ignoring large gap at",n,"size",a)}(t||s)&&(0==i?q.info("Jumping forward",a,"seconds because of gap before start time of",o):q.info("Jumping forward",a,"seconds because of gap starting at",r.end(i-1),"and ending at",o),e.a.currentTime=o)}}}}}}function Co(e){var t=this;this.c=e,this.a=new Set,this.b=new ce((function(){xo(t,!1)})).Ra(.25)}function xo(e,t){for(var n=p(e.a),r=n.next();!r.done;r=n.next())r.value.g(e.c.currentTime,t)}function Do(e){for(var t=[],n=(e=p(e)).next();!n.done;n=e.next())for(var r=(n=p(n.value.variants)).next();!r.done;r=n.next())t.push(r.value);return t}function Io(e,t){for(var n=null,r=p(e),i=r.next();!i.done;i=r.next())t>=(i=i.value).startTime&&(n=i);return n}function Lo(e){this.c=e,this.a=null,this.b=function(){}}function Mo(e){var t=this;this.a=e,this.f=!1,this.c=this.a.rc(),this.b=new ce((function(){t.a.le(.25*t.c)}))}function No(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.rc()!=t&&e.a.Id(t))}catch(e){}e.b.Ra(.25),0!=e.a.rc()&&e.a.Id(0)}function jo(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=Uo.get(t),n.ua(e,t,r))}So.prototype.release=function(){this.g=null,this.c=function(){}},Po.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},Po.prototype.td=function(){this.h=!0,Ro(this)},Co.prototype.release=function(){this.b.stop();for(var e=p(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Lo.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Lo.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=Io(n,e)||n[0])&&this.b(e),this.a=e},Mo.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Mo.prototype.set=function(e){this.c=e,No(this)};var Uo=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Fo(e,t,n){var r=this;this.a=e,this.g=t,this.f=n,this.h=!1,this.b=new je,this.c=new Ho(e),jo(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){Go(r,r.f)}))}function Bo(e){return e.h?e.a.currentTime:e.f}function Vo(e,t){0<e.a.readyState?zo(e.c,t):jo(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){Go(e,e.f)}))}function Go(e,t){.001>Math.abs(e.a.currentTime-t)?Ko(e):(e.b.ua(e.a,"seeking",(function(){Ko(e)})),zo(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Ko(e){e.h=!0,e.b.B(e.a,"seeking",(function(){return e.g()}))}function Ho(e){var t=this;this.b=e,this.h=10,this.g=this.c=this.f=0,this.a=new ce((function(){0>=t.f?(q.m(["Failed to move playhead from",t.c,"to",t.g].join(" ")),t.a.stop()):t.b.currentTime!=t.c?t.a.stop():(t.b.currentTime=t.g,t.f--)}))}function zo(e,t){e.c=e.b.currentTime,e.g=t,e.f=e.h,e.b.currentTime=t,e.a.Ra(.1)}function Wo(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new je,jo(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==t.c?t.f=!0:(t.b.ua(t.a,"seeking",(function(){t.f=!0})),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))}))}function Yo(e,t,n,r,i,o){var a=this;this.b=e,this.a=t.presentationTimeline,this.F=t.minBufferTime||0,this.h=n,this.v=i,this.l=null,this.f=new Po(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new So(new Ao(e),t.stallThreshold);return function(e,t){e.c=t}(r,(function(t,r){q.debug(["Stall detected at",t,"for",r,"seconds. Seeking forward",n,"seconds."].join(" ")),e.currentTime+=n})),r}(e,n),o),this.c=new Fo(e,(function(){e:{var e=a.f;e.i=!0,e.h=!1,e.c=!1,e=Bo(a.c);var t=Xo(a,e);if(.001<Math.abs(t-e)){var n=(new Date).getTime()/1e3;if(!a.l||a.l<n-1){a.l=n,Vo(a.c,t),e=void 0;break e}}q.D("Seek to "+e),a.v(),e=void 0}return e}),function(e,t){return null==t?t=1/0>e.a.ca()?e.a.wb():e.a.Ga():0>t&&(t=e.a.Ga()+t),qo(e,$o(e,t))}(this,r)),this.i=new ce((function(){if(0!=a.b.readyState&&!a.b.paused){var e=a.b.currentTime,t=a.a.wb(),n=a.a.Ga();3>n-t&&(t=n-3),e<t&&(t=Xo(a,e),q.info("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),a.b.currentTime=t)}})).Ra(.25)}function qo(e,t){var n=e.a.ca();return t>=n?n-e.h.durationBackoff:t}function Xo(e,t){var n=Nt.bind(null,e.b.buffered),r=Math.max(e.F,e.h.rebufferingGoal),i=e.h.safeSeekOffset,o=e.a.wb(),a=e.a.Ga(),s=e.a.ca();3>a-o&&(o=a-3);var u=e.a.Vb(r),l=e.a.Vb(i);return r=e.a.Vb(r+i),t>=s?(q.D("Playhead past duration."),qo(e,t)):t>a?(q.D("Playhead past end."),a):t<o?n(l)?(q.D("Playhead before start & start is buffered"),l):(q.D("Playhead before start & start is unbuffered"),r):t>=u||n(t)?(q.D("Playhead in safe region or in buffered region."),t):(q.D("Playhead outside safe region & in unbuffered region."),r)}function $o(e,t){var n=e.a.wb();return t<n||t>(n=e.a.Ga())?n:t}function Jo(){this.b=function(){},this.a=new Set}function Qo(e){var t=this;this.h=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{lb:null,kb:ea,ab:function(e,n){return t.a(e,n)}},{lb:Zo,kb:ea,ab:function(e,n){return t.a(e,n)}},{lb:ta,kb:ea,ab:function(e,n){return t.a(e,n)}},{lb:ea,kb:Zo,ab:function(e,n){return t.b(e,n)}},{lb:ea,kb:ta,ab:function(e,n){return t.b(e,n)}},{lb:Zo,kb:ta,ab:function(e,n){return t.c(e,n)}},{lb:ta,kb:Zo,ab:function(e,n){return t.c(e,n)}}]}Fo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},Ho.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},Wo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},Wo.prototype.o=function(e){this.c=this.f?this.c:e},Wo.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},Wo.prototype.u=function(){},Yo.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.h=null,this.v=function(){}},Yo.prototype.o=function(e){Vo(this.c,e)},Yo.prototype.g=function(){var e=Bo(this.c);return 0<this.b.readyState&&!this.b.paused?$o(this,e):e},Yo.prototype.u=function(){this.f.td()},Jo.prototype.release=function(){this.b=function(){},this.a.clear()},Qo.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},Qo.prototype.g=function(e,t){for(var n=p(this.h.a),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.f.get(r),o=e<r.startTime?Zo:e>r.endTime?ta:ea;this.f.set(r,o);for(var a=p(this.i),s=a.next();!s.done;s=a.next())(s=s.value).lb==i&&s.kb==o&&s.ab(r,t)}};var Zo=1,ea=2,ta=3;function na(e,t){this.a=t,this.c=e,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.u=!1,this.H=null,this.G=this.f=this.o=!1,this.F=0}function ra(e){return oa(e,"audio")}function ia(e){return oa(e,"video")}function oa(e,t){var n=e.b.get(t);return n?n.Oa||n.stream:null}function aa(e,t){return h((function n(){var r,i,o,a,s,u,l,c,f;return N(n,(function(n){switch(n.j){case 1:return r=Gt,T(n,Sn(e.a.O,r.va),2);case 2:return e.F++,e.G=!1,i=e.F,o=e.a.O,a=new Map,s=new Set,a.set(r.va,t),s.add(t),T(n,o.init(a,!1),3);case 3:return e.f?n.return():T(n,ha(e,s),4);case 4:if(e.f)return n.return();u=e.a.O.g.isTextVisible()||e.g.alwaysStreamText,e.F!=i||e.b.has(r.va)||e.G||!u||(l=e.a.Za(),c=Ea(e,l),f=pa(t,c,0),e.b.set(r.va,f),Aa(e,f,0)),S(n)}}))}))}function sa(e,t){var n=e.b.get("video");if(n){var r=n.stream;if(r)if(q.debug("setTrickPlay",t),t){var i=r.trickModeVideo;i&&!n.Oa&&(q.debug("Engaging trick mode stream",i),la(e,i,!1,0,!1),n.Oa=r)}else(r=n.Oa)&&(q.debug("Restoring non-trick-mode stream",r),n.Oa=null,la(e,r,!0,0,!1))}}function ua(e,t,n,r){var i=!1;if(t.video){var o=la(e,t.video,n,r,!1);i=i||o}return t.audio&&(e=la(e,t.audio,n,r,!1),i=i||e),i}function la(e,t,n,r,i){var o=e.b.get(t.type);if(!o&&"text"==t.type&&e.g.ignoreTextStreamFailures)return aa(e,t),!0;if(!o)return!1;var a=wa(e,t),s=Array.from(e.b.values()).every((function(e){return e.ka==o.ka}));return n&&a!=o.ka&&s?(q.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),e.b.forEach((function(t){ca(e,t)})),!0):(o.Oa&&(q.debug("switch during trick play mode",t),t.trickModeVideo?(o.Oa=t,t=t.trickModeVideo,q.debug("switch found trick play stream",t)):(o.Oa=null,q.debug("switch found no special trick play stream"))),!(!(s=e.h[a])||!s.Mb)&&(!(!(s=e.i.get(t.id))||!s.Mb)&&(o.stream!=t||i?("text"==t.type&&mn(e.a.O,We(t.mimeType,t.codecs)),o.stream=t,o.vc=!0,q.debug("switch: switching to Stream "+Ca(o)),function(e,t,n){if(!t.fb)return!1;var r=e.a.Za(),i=kn(e.a.O,t.type),o=ga(e,t,r,i,n);return n=o&&o.a?o.a-o.b:null,o&&!n&&(n=(o.endTime-o.sc())*t.stream.bandwidth/8),!isNaN(n)&&((o=t.stream.initSegmentReference)&&(n+=(o.a?o.a-o.b:null)||0),o=e.a.getBandwidthEstimate(),8*n/o<i-r-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.fb.b.a>n)}(e,o,a)&&(q.info("Aborting current segment request to switch."),o.fb.abort()),n&&(o.Wa?o.Kc=!0:o.Na?(o.Sa=!0,o.lc=r,o.Kc=!0):(Oa(o),Sa(e,o,!0,r).catch((function(t){e.a&&e.a.onError(t)})))),!0):(q.debug("switch: Stream "+Ca(o)+" already active"),!1))))}function ca(e,t){var n=Ca(t);t.Wa?q.debug(n,"clear: already clearing the buffer"):t.Sa?q.debug(n,"clear: already waiting"):t.Na?(q.debug(n,"clear: currently updating"),t.Sa=!0,t.lc=0):null==_n(e.a.O,t.type)?(q.debug(n,"clear: nothing buffered"),null==t.Ka&&Aa(e,t,0)):(q.debug(n,"clear: handling right now"),Oa(t),Sa(e,t,!1,0).catch((function(t){e.a&&e.a.onError(t)})))}function fa(e,t,n,r,i){return h((function o(){var a,s,u,l,c,f,p;return N(o,(function(o){switch(o.j){case 1:return a=e.a.Za(),s=Ea(e,a),u=Gt,l=new Map,c=new Set,t&&(l.set(u.Nb,t),c.add(t)),n&&(l.set(u.Ua,n),c.add(n)),r&&(l.set(u.va,r),c.add(r)),f=e.a.O,p=e.g.forceTransmuxTS,T(o,f.init(l,p),2);case 2:return e.f?o.return():(function(e){var t=e.c.presentationTimeline.ca();1/0>t?e.a.O.Ba(t):e.a.O.Ba(Math.pow(2,32))}(e),T(o,ha(e,c),3));case 3:if(e.f)return o.return();l.forEach((function(t,n){if(!e.b.has(n)){var r=pa(t,s,i);e.b.set(n,r),Aa(e,r,0)}})),S(o)}}))}))}function pa(e,t,n){return{stream:e,type:e.type,Cb:null,Ha:null,Oa:null,vc:!0,ka:t,endOfStream:!1,Na:!1,Ka:null,Sa:!1,lc:0,Kc:!1,Wa:!1,yd:!1,Xb:!1,Bd:n||0,fb:null}}function da(e,t){var n=e.h[t];if(n)return q.debug("(all) Period "+t+" is being or has been set up"),n.promise;q.debug("(all) setting up Period "+t),n={promise:new he,Mb:!1},e.h[t]=n;for(var r=new Set,i=p(e.c.periods[t].variants),o=i.next();!o.done;o=i.next())(o=o.value).video&&r.add(o.video),o.video&&o.video.trickModeVideo&&r.add(o.video.trickModeVideo),o.audio&&r.add(o.audio);for(o=(i=p(e.c.periods[t].textStreams)).next();!o.done;o=i.next())r.add(o.value);return e.v=e.v.then(function(){if(!this.f)return ha(this,r)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].Mb=!0,q.D("(all) setup Period "+t))}.bind(e)).catch(function(e){this.f||(this.h[t].promise.catch((function(){})),this.h[t].promise.reject(),delete this.h[t],q.m("(all) failed to setup Period "+t),this.a.onError(e))}.bind(e)),n.promise}function ha(e,t){return h((function n(){var r,i,o,a,s,u,l;return N(n,(function(n){switch(n.j){case 1:r=[];for(var c=p(t),f=c.next();!f.done;f=c.next())i=f.value,(o=e.i.get(i.id))?(q.debug("(all) Stream "+i.id+" is being or has been set up"),r.push(o.promise)):(q.D("(all) setting up Stream "+i.id),e.i.set(i.id,{promise:new he,Mb:!1}),r.push(i.createSegmentIndex()));return A(n,2),T(n,Promise.all(r),4);case 4:if(e.f)return n.return();P(n,3);break;case 2:if(a=R(n),e.f)return n.return();for(f=(n=p(t)).next();!f.done;f=n.next())s=f.value,e.i.get(s.id).promise.catch((function(){})),e.i.get(s.id).promise.reject(),e.i.delete(s.id);throw a;case 3:for(f=(c=p(t)).next();!f.done;f=c.next())u=f.value,(l=e.i.get(u.id)).Mb||(l.promise.resolve(),l.Mb=!0,q.D("(all) setup Stream "+u.id));S(n)}}))}))}function ya(e,t){if(!e.f){var n=Ca(t);if(!t.Na&&null!=t.Ka&&!t.Wa)if(t.Ka=null,t.Sa)q.debug(n,"skipping update and clearing the buffer"),Sa(e,t,t.Kc,t.lc);else{try{var r=function(e,t){if(_a(t))return Tn(e.a.O,t.stream.originalId||""),null;var n=Ca(t),r=e.a.Za(),i=va(e,t,r);q.J(n,"timeNeeded="+i);var o=wa(e,t.stream),a=Ea(e,i),s=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):jt(e=En(e,t),n)}(e.a.O,t.type,r);q.J(n,"update_:","presentationTime="+r,"bufferedAhead="+s);var u=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.l;if(i>=e.c.presentationTimeline.ca())return q.debug(n,"buffered to end of presentation"),t.endOfStream=!0,"video"==t.type&&(i=e.b.get("text"))&&"application/cea-608"==i.stream.mimeType&&(i.endOfStream=!0),null;if(t.endOfStream=!1,t.ka=a,a!=o)return q.debug(n,"need Period "+a,"presentationTime="+r,"timeNeeded="+i,"currentPeriodIndex="+o),null;if(s>=u)return q.J(n,"buffering goal met"),.5;if(n=kn(e.a.O,t.type),!(n=ga(e,t,r,n,o)))return 1;var l=1/0;return Array.from(e.b.values()).forEach((function(t){_a(t)||(t=va(e,t,r),l=Math.min(l,t))})),i>=l+e.c.presentationTimeline.a?1:(t.Bd=0,function(e,t,n,r,i){var o=Ca(t),a=e.c.periods[r];q.D(o,"fetchAndAppend_:","presentationTime="+n,"currentPeriod.startTime="+a.startTime,"reference.position="+i.position,"reference.startTime="+i.startTime,"reference.endTime="+i.endTime);var s=t.stream,u=e.c.presentationTimeline.ca(),l=e.c.periods[r+1];r=function(e,t,n,r,i){if(!t.vc)return Promise.resolve();var o=Ca(t);return n=e.c.periods[n].startTime-t.stream.presentationTimeOffset,q.D(o,"setting timestamp offset to "+n),q.D(o,"setting append window start to "+r),q.D(o,"setting append window end to "+i),r=function(e,t,n,r,i){return"text"==t?(e.a.o=n,(e=e.a).f=r,e.h=i,Promise.resolve()):Promise.all([An(e,t,e.Oe.bind(e,t)),An(e,t,e.ug.bind(e,t,n)),An(e,t,e.rg.bind(e,t,r,i))])}(e.a.O,t.type,n,r,i),t.stream.initSegmentReference?(q.D(o,"fetching init segment"),e=Ta(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return q.D(o,"appending init segment"),wn(this.a.O,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch((function(e){return t.vc=!0,Promise.reject(e)})),Promise.all([r,e])):r}(e,t,r,Math.max(0,a.startTime-.1),l?l.startTime+.01:u),t.Na=!0,t.vc=!1,q.J(o,"fetching segment"),u=Ta(e,t,i),Promise.all([r,u]).then(function(e){if(!this.f&&!this.o)return function(e,t,n,r,i,o,a){var s=Ca(t),u=i.closedCaptions&&0<i.closedCaptions.size;return null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Cr).ia("emsg",e.K.bind(e,r,o,i.emsgSchemeIdUris)).parse(a),function(e,t,n){var r=Ca(t);q.J(r,"checking buffer length");var i=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),o=_n(e.a.O,t.type);if(null==o)return q.J(r,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+i),Promise.resolve();var a=n-o,s=a-i;return 0>=s?(q.J(r,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"underflow="+-s),Promise.resolve()):(q.D(r,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+i,"overflow="+s),e.a.O.remove(t.type,o,o+s).then(function(){this.f||q.D(r,"evicted "+s+" seconds")}.bind(e)))}(e,t,n).then(function(){if(!this.f)return q.D(s,"appending media segment"),wn(this.a.O,t.type,a,o.startTime+r.startTime,o.endTime+r.startTime,u)}.bind(e)).then(function(){if(!this.f)return q.J(s,"appended media segment"),t.Cb=i,t.Ha=o,Promise.resolve()}.bind(e))}(this,t,n,a,s,i,e[1])}.bind(e)).then(function(){this.f||this.o||(t.Na=!1,t.yd=!1,t.Sa||this.a.td(),Aa(this,t,0),function(e,t,n){if(!e.u){var r=Ca(t);if(1==(t=Array.from(e.b.values())).length&&"text"==t[0].type||(e.u=t.every((function(e){return"text"==e.type||!e.Sa&&!e.Wa&&e.Ha}))),e.u){for(q.debug(r,"startup complete"),n=wa(e,n),e.h[n]||da(e,n).then(function(){this.f||(q.D(r,"calling onCanSwitch()..."),this.a.ne())}.bind(e)).catch(Ft.wc),n=0;n<e.c.periods.length;++n)da(e,n).catch(Ft.wc);e.a.Xf&&(q.D(r,"calling onStartupComplete()..."),e.a.Xf())}}}(this,t,s),q.D(o,"finished fetch and append"))}.bind(e)).catch(function(e){this.f||this.o||(t.Na=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?(1001==e.code?q.m(o,"Text stream failed to download. Proceeding without it."):q.m(o,"Text stream failed to parse. Proceeding without it."),this.b.delete("text")):7001==e.code?(t.Na=!1,t.Ka=null,Aa(this,t,0)):3017==e.code?function(e,t,n){var r=Ca(t);if(Array.from(e.b.values()).some((function(e){return e!=t&&e.yd})))q.debug(r,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var i=Math.round(100*e.l);if(20<i)e.l-=.2;else{if(!(4<i))return q.error(r,"MediaSource threw QuotaExceededError too many times"),t.Xb=!0,e.o=!0,void e.a.onError(n);e.l-=.04}q.m(r,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.l))+"%"),t.yd=!0}Aa(e,t,4)}(this,t,e):(q.error(o,"failed fetch and append: code="+e.code),t.Xb=!0,e.severity=2,Ra(this,e)))}.bind(e))}(e,t,r,o,n),null)}(e,t);null!=r&&(Aa(e,t,r),t.Xb=!1)}catch(t){return void Ra(e,t)}r=Array.from(e.b.values()),function(e,t){var n=Ca(t),r=wa(e,t.stream);if(t.ka!=r){var i=t.ka,o=Array.from(e.b.values());o.every((function(e){return e.ka==i||_a(e)}))?o.every(ka)?(q.debug(n,"all need Period "+i),da(e,i).then(function(){if(!this.f)if(o.every(function(e){var t=ka(e),n=wa(this,e.stream);return!!_a(e)||t&&e.ka==i&&n!=i}.bind(this))){var e=this.c.periods[i];q.D(n,"calling onChooseStreams()...");var t=this.a.oe(e),r=new Map;t.variant&&t.variant.video&&r.set("video",t.variant.video),t.variant&&t.variant.audio&&r.set("audio",t.variant.audio),t.text&&r.set("text",t.text);for(var a=(t=p(this.b.keys())).next();!a.done;a=t.next())if(a=a.value,!r.has(a)&&"text"!=a)return q.error(n,"invalid Streams chosen: missing "+a+" Stream"),void this.a.onError(new de(2,5,5005));for(a=(t=p(Array.from(r.keys()))).next();!a.done;a=t.next())if(a=a.value,!this.b.has(a)){if("text"!=a)return q.error(n,"invalid Streams chosen: unusable "+a+" Stream"),void this.a.onError(new de(2,5,5005));fa(this,null,null,r.get("text"),e.startTime),r.delete(a)}for(a=(t=p(Array.from(this.b.keys()))).next();!a.done;a=t.next()){a=a.value;var s=this.b.get(a),u=r.get(a);if(u){var l=_a(s);l&&(s.ka=i,s.Bd=e.startTime),la(this,u,!1,0,!1),l&&_a(s)||Aa(this,this.b.get(a),0)}else this.b.delete(a)}q.D(n,"calling onCanSwitch()..."),this.a.ne()}else q.debug(n,"ignoring transition to Period",i,"since another is happening")}.bind(e)).catch(Ft.wc)):q.debug(n,"all MediaStates need Period "+i+", but not all MediaStates are idle"):q.debug(n,"not all MediaStates need Period "+i)}}(e,t),e.u&&r.every((function(e){return e.endOfStream}))&&(q.D(n,"calling endOfStream()..."),e.a.O.endOfStream().then(function(){if(!this.f){var e=this.a.O.ca();0!=e&&e<this.c.presentationTimeline.ca()&&this.c.presentationTimeline.Ba(e)}}.bind(e)))}}}function va(e,t,n){return t.Cb&&t.Ha?(n=wa(e,t.Cb),e.c.periods[n].startTime+t.Ha.endTime):Math.max(n,t.Bd)}function ga(e,t,n,r,i){var o=Ca(t);return t.Ha&&t.stream==t.Cb?(r=t.Ha.position+1,q.J(o,"next position known:","position="+r),ba(e,t,i,r)):(t.Ha?(q.D(o,"next position unknown: another Stream buffered"),o=wa(e,t.Cb),o=ma(e,t,e.c.periods[o].startTime+t.Ha.endTime,i)):(q.D(o,"next position unknown: nothing buffered"),o=ma(e,t,r||n,i)),null==o?null:(n=null,null==r&&(n=ba(e,t,i,Math.max(0,o-1))),n||ba(e,t,i,o)))}function ma(e,t,n,r){var i=Ca(t);return e=e.c.periods[r],q.debug(i,"looking up segment:","presentationTime="+n,"currentPeriod.startTime="+e.startTime),n=Math.max(0,n-e.startTime),null==(t=t.stream.findSegmentPosition(n))&&q.m(i,"cannot find segment:","currentPeriod.startTime="+e.startTime,"lookupTime="+n),t}function ba(e,t,n,r){var i=Ca(t);return n=e.c.periods[n],(t=t.stream.getSegmentReference(r))?(e=(r=e.c.presentationTimeline).Wb(),r=r.xb(),n.startTime+t.endTime<e||n.startTime+t.startTime>r?(q.J(i,"segment is not available:","currentPeriod.startTime="+n.startTime,"reference.startTime="+t.startTime,"reference.endTime="+t.endTime,"availabilityStart="+e,"availabilityEnd="+r),null):t):(q.D(i,"segment does not exist:","currentPeriod.startTime="+n.startTime,"position="+r),null)}function _a(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function ka(e){return!e.Na&&null==e.Ka&&!e.Sa&&!e.Wa}function Ea(e,t){var n=Io(e.c.periods,t+1/15);return n?e.c.periods.indexOf(n):0}function wa(e,t){for(var n=e.c.periods,r=0;r<n.length;r++){for(var i=n[r],o=new Set,a=p(i.variants),s=a.next();!s.done;s=a.next())(s=s.value).audio&&o.add(s.audio),s.video&&o.add(s.video),s.video&&s.video.trickModeVideo&&o.add(s.video.trickModeVideo);for(a=(i=p(i.textStreams)).next();!a.done;a=i.next())o.add(a.value);if(o.has(t))return r}return-1}function Ta(e,t,n){var r=yi(n.c(),n.b,n.a,e.g.retryParameters);return q.J("fetching: reference=",n),e=e.a.Db.request(1,r),t.fb=e,e.promise.then((function(e){return t.fb=null,e.data}))}function Sa(e,t,n,r){return h((function i(){var o,a,s,u;return N(i,(function(i){switch(i.j){case 1:return o=Ca(t),t.Sa=!1,t.Kc=!1,t.lc=0,t.Wa=!0,q.debug(o,"clearing buffer"),r?(s=e.a.Za(),u=e.a.O.ca(),a=e.a.O.remove(t.type,s+r,u)):a=Sn(e.a.O,t.type).then(function(){if(!this.f&&n)return this.a.O.flush(t.type)}.bind(e)),T(i,a,2);case 2:if(e.f)return i.return();q.debug(o,"cleared buffer"),t.Cb=null,t.Ha=null,t.Wa=!1,t.endOfStream=!1,Aa(e,t,0),S(i)}}))}))}function Aa(e,t,n){q.J(Ca(t),"updating in "+n+" seconds"),t.Ka=new le((function(){return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return A(n,2),T(n,ya(e,t),4);case 4:P(n,0);break;case 2:r=R(n),e.a&&e.a.onError(r),S(n)}}))}))})).T(n)}function Oa(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Pa(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:if(e.fb)return T(t,e.fb.abort(),0);t.C(0)}}))}))}function Ra(e,t){pe(e.H).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Ca(e){return"("+e.type+":"+e.stream.id+")"}function xa(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,vd:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=ot(t)}catch(e){}throw q.debug("HTTP error text:",i),new de(401==n||403==n?2:1,1,1001,r,n,i,e,o)}function Da(e,t,n,r){var i=new Da.b;He(t.headers).forEach((function(e,t){i.append(t,e)}));var o=new Da.a,a={Ud:!1,Ge:!1};if(e=new ye(e=Da.l(e,n,{body:t.body||void 0,headers:i,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,r),(function(){return a.Ud=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new ce((function(){a.Ge=!0,o.abort()}));s.T(t/1e3),e.finally((function(){s.stop()}))}return e}function Ia(e,t,n,r){var i=new Ia.f,o=Date.now(),a=0;return new ye(new Promise((function(s,u){for(var l in i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){u(new de(1,1,7001,e,n))},i.onload=function(t){for(var r=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),i={},o=(r=p(r)).next();!o.done;o=r.next())i[(o=o.value.split(": "))[0].toLowerCase()]=o.slice(1).join(": ");try{var a=xa(i,t.response,t.status,e,t.responseURL,n);s(a)}catch(e){u(e)}},i.onerror=function(t){u(new de(1,1,1002,e,t,n))},i.ontimeout=function(){u(new de(1,1,1003,e,n))},i.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(r(t-o,e.loaded-a,e.total-e.loaded),a=e.loaded,o=t)},t.headers)i.setRequestHeader(l.toLowerCase(),t.headers[l]);i.send(t.body)})),(function(){return i.abort(),Promise.resolve()}))}function La(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Ma(e,t,n){this.h=e,this.b=new Map,this.c=!1,this.g=t,this.f=n,this.a=new La}function Na(e,t,n,r,i,o){var a=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.a,r);r=e.b.get(t)||Promise.resolve(),e.b.set(t,r.then((function(){return h((function t(){var r,s,u,l,c,f;return N(t,(function(t){switch(t.j){case 1:return T(t,function(e,t){return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return T(n,e.h.request(1,t).promise,2);case 2:return r=n.s,n.return(r.data)}}))}))}(e,n),2);case 2:if(r=t.s,e.c)throw new de(2,9,7001);if(i)for(var p in s=new Uint8Array(r),(u=new Nr(s)).data)l=Number(p),c=u.data[l],f=u.a[l],e.f(c,f);return e.a.close(a,r.byteLength),p=e.a,e.g(0==p.b?0:p.f/p.b,e.a.a),t.return(o(r))}}))}))})))}function ja(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new he,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Ua(e,t){return new Promise((function(n,r){var i=e.b.openCursor();i.onerror=r,i.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}}))}function Fa(e){this.b=e,this.a=[]}function Ba(e,t){return Va(e,t,"readwrite")}function Va(e,t,n){var r=new ja(n=e.b.transaction([t],n),t);return e.a.push(r),r.promise().then((function(){Ae(e.a,r)}),(function(){Ae(e.a,r)})),r}function Ga(e,t,n){this.b=new Fa(e),this.c=t,this.a=n}function Ka(e){return Promise.reject(new de(2,9,9011,"Cannot add new value to "+e))}function Ha(e,t,n,r){t=(e=Ba(e.b,t)).store();for(var i={},o=(n=p(n)).next();!o.done;i={key:i.key},o=n.next())i.key=o.value,t.delete(i.key).onsuccess=function(e){return function(){return r(e.key)}}(i);return e.promise()}function za(e,t,n){return h((function r(){var i,o,a,s,u,l,c;return N(r,(function(r){switch(r.j){case 1:for(i=Va(e.b,t,"readonly"),o=i.store(),a={},s=[],u={},l=p(n),c=l.next();!c.done;u={request:u.request,key:u.key},c=l.next())u.key=c.value,u.request=o.get(u.key),u.request.onsuccess=function(e){return function(){null==e.request.result&&s.push(e.key),a[e.key]=e.request.result}}(u);return T(r,i.promise(),2);case 2:if(s.length)throw new de(2,9,9012,"Could not find values for "+s);return r.return(n.map((function(e){return a[e]})))}}))}))}function Wa(e){this.a=new Fa(e)}function Ya(){this.a=new Map}function qa(e,t,n){if(!(e=e.a.get(t)))throw new de(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new de(2,9,9013,"Could not find cell with name "+n);return t}function Xa(e,t){$a.set(e,t)}na.prototype.destroy=function(){var e=this;return h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:n=[];for(var i=p(e.b.values()),o=i.next();!o.done;o=i.next())Oa(r=o.value),n.push(Pa(r));return T(t,Promise.all(n),2);case 2:e.b.clear(),e.i.clear(),e.a=null,e.c=null,e.v=null,e.h=null,e.g=null,e.f=!0,S(t)}}))}))},na.prototype.configure=function(e){this.g=e,this.H=new fe({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},na.prototype.start=function(){var e=this;return h((function t(){var n,r,i;return N(t,(function(t){switch(t.j){case 1:return n=e.a.Za(),r=Ea(e,n),(i=e.a.oe(e.c.periods[r])).variant||i.text?T(t,fa(e,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,n),2):(q.error("init: no Streams chosen"),t.return(new de(2,5,5005)));case 2:if(e.f)return t.return();q.debug("init: completed initial Stream setup"),e.a&&e.a.Of&&(q.D("init: calling onInitialStreamsSetup()..."),e.a.Of()),S(t)}}))}))},na.prototype.K=function(e,t,n,r){var i=r.reader.wd(),o=r.reader.wd(),a=r.reader.I(),s=r.reader.I(),u=r.reader.I(),l=r.reader.I();r=r.reader.gb(r.reader.N.byteLength-r.reader.ga()),e=e.startTime+t.startTime+s/a,n.includes(i)&&("urn:mpeg:dash:event:2012"==i?this.a.Pf():this.a.onEvent(new ke("emsg",{detail:{startTime:e,endTime:e+u/a,schemeIdUri:i,value:o,timescale:a,presentationTimeDelta:s,eventDuration:u,id:l,messageData:r}})))},G("shaka.net.HttpFetchPlugin",Da),Da.l=function(e,t,n,r,i){return h((function o(){var a,s,u,l,c,f,p,d,y,v,g,m;return N(o,(function(o){switch(o.j){case 1:return a=Da.g,s=Da.c,f=c=0,p=Date.now(),A(o,2),T(o,a(e,n),4);case 4:return u=o.s,d=u.clone().body.getReader(),v=(y=u.headers.get("Content-Length"))?parseInt(y,10):0,new s({start:function(e){!function t(){return h((function n(){var r,o,a;return N(n,(function(n){switch(n.j){case 1:return A(n,2),T(n,d.read(),4);case 4:r=n.s,P(n,3);break;case 2:return o=R(n),q.D("error reading from stream",o.message),n.return();case 3:r.done||(c+=r.value.byteLength),(100<(a=Date.now())-p||r.done)&&(i(a-p,c-f,v-c),f=c,p=a),r.done?e.close():(e.enqueue(r.value),t()),S(n)}}))}))}()}}),T(o,u.arrayBuffer(),5);case 5:l=o.s,P(o,3);break;case 2:if(g=R(o),r.Ud)throw new de(1,1,7001,e,t);if(r.Ge)throw new de(1,1,1003,e,t);throw new de(1,1,1002,e,g,t);case 3:return m={},u.headers.forEach((function(e,t){m[t.trim()]=e})),o.return(xa(m,l,u.status,e,u.url,t))}}))}))},Da.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)},Da.isSupported=Da.isSupported,Da.g=e.fetch,Da.a=e.AbortController,Da.c=e.ReadableStream,Da.b=e.Headers,Da.isSupported()&&(De("http",Da,2),De("https",Da,2)),G("shaka.net.HttpXHRPlugin",Ia),Ia.f=e.XMLHttpRequest,De("http",Ia,1),De("https",Ia,1),La.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Ma.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},ja.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch((function(){}))},ja.prototype.store=function(){return this.b},ja.prototype.promise=function(){return this.a},Fa.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},(r=Ga.prototype).destroy=function(){return this.b.destroy()},r.hasFixedKeySpace=function(){return!0},r.addSegments=function(){return Ka(this.c)},r.removeSegments=function(e,t){return Ha(this,this.c,e,t)},r.getSegments=function(e){var t=this;return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return T(n,za(t,t.c,e),2);case 2:return r=n.s,n.return(r.map((function(e){return t.Wd(e)})))}}))}))},r.addManifests=function(){return Ka(this.a)},r.updateManifestExpiration=function(e,t){var n=Ba(this.b,this.a),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},r.removeManifests=function(e,t){return Ha(this,this.a,e,t)},r.getManifests=function(e){var t=this;return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return T(n,za(t,t.a,e),2);case 2:return r=n.s,n.return(r.map((function(e){return t.mc(e)})))}}))}))},r.getAllManifests=function(){var e=this;return h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:return n=Va(e.b,e.a,"readonly"),r=new Map,T(t,Ua(n,(function(t,n){r.set(t,e.mc(n))})),2);case 2:return T(t,n.promise(),3);case 3:return t.return(r)}}))}))},r.Wd=function(e){return e},r.mc=function(e){return e},r.add=function(e,t){var n=this;return h((function r(){var i,o,a,s;return N(r,(function(r){switch(r.j){case 1:i=Ba(n.b,e),o=i.store(),a=[];for(var u=p(t),l=u.next();!l.done;l=u.next())s=l.value,o.add(s).onsuccess=function(e){a.push(e.target.result)};return T(r,i.promise(),2);case 2:return r.return(a)}}))}))},Wa.prototype.destroy=function(){return this.a.destroy()},Wa.prototype.getAll=function(){var e=this;return h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:return n=Va(e.a,"session-ids","readonly"),r=[],T(t,Ua(n,(function(e,t){r.push(t)})),2);case 2:return T(t,n.promise(),3);case 3:return t.return(r)}}))}))},Wa.prototype.add=function(e){for(var t=Ba(this.a,"session-ids"),n=t.store(),r=(e=p(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},Wa.prototype.remove=function(e){var t=this;return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return T(n,Ua(r=Ba(t.a,"session-ids"),(function(t,n,r){0<=e.indexOf(n.sessionId)&&r.delete()})),2);case 2:return T(n,r.promise(),0)}}))}))},Ya.prototype.destroy=function(){for(var e=[],t=p(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Ya.prototype.init=function(){var e=this;$a.forEach((function(t,n){var r=t();r?e.a.set(n,r):q.info("Skipping "+n+" as it is not supported on this platform")}));for(var t=[],n=p(this.a.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},Ya.prototype.erase=function(){var e=this;return h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:return n=Array.from(e.a.values()),(r=0<n.length)||$a.forEach((function(e){(e=e())&&n.push(e)})),T(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!r)return T(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.C(0)}}))}))},G("shaka.offline.StorageMuxer.register",Xa),G("shaka.offline.StorageMuxer.unregister",(function(e){$a.delete(e)}));var $a=new Map;function Ja(e){Ga.apply(this,arguments)}function Qa(e){return function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var r=0;if(n.length&&!t.length){q.debug("Found video-only content. Creating variants for video.");var i=r++;n.forEach((function(e){e.variantIds.push(i)}))}if(!n.length&&t.length){q.debug("Found audio-only content. Creating variants for audio.");var o=r++;t.forEach((function(e){e.variantIds.push(o)}))}n.length&&t.length&&(q.debug("Found audio-video content. Creating variants."),t.forEach((function(e){n.forEach((function(t){var n=r++;e.variantIds.push(n),t.variantIds.push(n)}))})))}}(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(Za)}}function Za(e){var t=e.initSegmentUri?ts(e.initSegmentUri):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(es),variantIds:e.variantIds}}function es(e){var t=ts(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function ts(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new de(2,9,9004,"Could not parse uri "+e)}function ns(e,t,n,r){Ga.call(this,e,t,n),this.f=r}function rs(){this.g=this.c=this.b=this.a=this.f=null}function is(e,t,n,r){this.a=e,this.g=t,this.f=n,this.c=r,this.b=["offline:",e,"/",t,"/",n,"/",r].join("")}function os(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new is(t,n,r,Number(e[4])):null}function as(e,t){this.b=e,this.a=t}function ss(e,t,n){var r=t.streams.filter((function(e){return"audio"==e.contentType})),i=t.streams.filter((function(e){return"video"==e.contentType}));return r=function(e,t,n){for(var r=new Set,i=p(t),o=i.next();!o.done;o=i.next()){var a=p(o.value.variantIds);for(o=a.next();!o.done;o=a.next())r.add(o.value)}for(i=p(n),o=i.next();!o.done;o=i.next())for(a=p(o.value.variantIds),o=a.next();!o.done;o=a.next())r.add(o.value);for(i=new Map,r=p(r),o=r.next();!o.done;o=r.next())o=o.value,i.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=p(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=us(e,r),a=p(r.variantIds),r=a.next();!r.done;r=a.next())(r=i.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=p(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=us(e,r),o=p(r.variantIds),r=o.next();!r.done;r=o.next())(r=i.get(r.value)).primary=r.primary||t.primary,r.video=t;return i}(e,r,i),i=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return us(e,t)})),t.streams.forEach((function(r){r=r.segments.map((function(t,n){return ls(e,n,t)})),n.Eb(r,t.startTime)})),{startTime:t.startTime,variants:Array.from(r.values()),textStreams:i}}function us(e,t){var n=t.segments.map((function(t,n){return ls(e,n,t)})),r=new Jr(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,pixelAspectRatio:t.pixelAspectRatio||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new is("segment",e.b,e.a,t);return new qr((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey)),n}function ls(e,t,n){var r=new is("segment",e.b,e.a,n.dataKey);return new Xr(t,n.startTime,n.endTime,(function(){return[r.toString()]}),0,null)}function cs(){this.a=null}function fs(e){var t=os(e);return t&&"manifest"==t.a?fs.h(e):t&&"segment"==t.a?fs.i(t.key(),t):ve(new de(2,1,9004,e))}function ps(e,t,n){return h((function r(){var i,o,a,s,u,l;return N(r,(function(r){switch(r.j){case 1:i=[];for(var c=[],f=p(n),d=f.next();!d.done;d=f.next()){d=d.value;for(var y=!1,v=p(c),g=v.next();!g.done;g=v.next())if(ds((g=g.value).info,d)){g.sessionIds.push(d.sessionId),y=!0;break}y||c.push({info:d,sessionIds:[d.sessionId]})}o=p(c),a=o.next();case 2:if(a.done){r.C(4);break}return s=a.value,u=function(e,t,n){return h((function r(){var i,o,a,s;return N(r,(function(r){switch(r.j){case 1:return i=new ft({Db:t,onError:function(){},yc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(r,2),i.configure(e),T(r,function(e,t,n,r,i,o){var a=new Map;return a.set(t,{audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),_t(e,a)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:P(r,3);break;case 2:return o=R(r),q.m("Error initializing EME",o),T(r,i.destroy(),5);case 5:return r.return([]);case 3:return A(r,6),T(r,ht(i),8);case 8:P(r,7);break;case 6:return a=R(r),q.m("Error setting server certificate",a),T(r,i.destroy(),9);case 9:return r.return([]);case 7:return s=[],T(r,Promise.all(n.sessionIds.map((function(e){return h((function t(){var n;return N(t,(function(t){switch(t.j){case 1:return A(t,2),T(t,function(e,t){return h((function n(){var r,i,o;return N(n,(function(n){switch(n.j){case 1:return T(n,kt(e,t),2);case 2:return(r=n.s)?(i=[],(o=e.b.get(r))&&(o.Ca=new he,i.push(o.Ca)),q.J("Attempting to remove session",t),i.push(r.remove()),T(n,Promise.all(i),0)):(q.J("Ignoring attempt to remove missing session",t),n.return())}}))}))}(i,e),4);case 4:s.push(e),P(t,0);break;case 2:n=R(t),q.m("Error deleting offline session",n),S(t)}}))}))}))),10);case 10:return T(r,i.destroy(),11);case 11:return r.return(s)}}))}))}(e,t,s),T(r,u,5);case 5:l=r.s,i=i.concat(l),a=o.next(),r.C(2);break;case 4:return r.return(i)}}))}))}function ds(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Oe(e.audioCapabilities,t.audioCapabilities,n)&&Oe(e.videoCapabilities,t.videoCapabilities,n)}function hs(e,t){var n={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},r=this;this.h=t,this.c=e,this.f=n,this.i=null,this.g=[],this.b=this.a=null,this.l=!0,this.o=Promise.resolve().then((function(){return function(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:if(e.l){if(0==e.g.length||e.a&&!e.a.$a)var n=!1;else{e.a&&(e.a.za.eb(),e.a=null);var r=(n=e.g.shift()).create(e.f);r?(n.za.Fb(),e.a={node:r.node,payload:r.payload,$a:r.$a,za:n.za}):n.za.zc(),n=!0}return n?n=Promise.resolve():e.a?n=function(e){return h((function t(){var n,r;return N(t,(function(t){switch(t.j){case 1:return e.c=e.h.rf(e.c,e.f,e.a.node,e.a.payload),A(t,2),e.b=e.h.Ye(e.c,e.f,e.a.payload),T(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.za.xc(),e.a=null),P(t,0);break;case 2:return 7001==(n=R(t)).code?e.a.za.eb():e.a.za.onError(n),e.a=null,e.b=null,r=e,T(t,e.h.handleError(e.f,n),5);case 5:r.c=t.s,S(t)}}))}))}(e):(e.h.Nf(e.c),e.i=new he,n=e.i),T(t,n,1)}t.C(0)}}))}))}(r)}))}function ys(e,t){var n={Fb:function(){},xc:function(){},eb:function(){},onError:function(){},zc:function(){},Sg:function(){}};return e.g.push({create:t,za:n}),e.b&&e.b.abort(),vs(e),n}function vs(e){e.i&&(e.i.resolve(),e.i=null)}function gs(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function ms(e){if(e.startTime>=e.endTime)return q.m("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function bs(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=e.cues,i=r.length-1;0<=i;i--){var o=r[i];o&&t(o)&&e.removeCue(o)}e.mode=n}function _s(e,t,n,r,i){var o,a=i in r,s=!0;for(o in t){var u=i+"."+o,l=a?r[i]:n[o];a||o in n?void 0===t[o]?void 0===l||a?delete e[o]:e[o]=Te(l):l.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=Te(l)),u=_s(e[o],t[o],l,r,u),s=s&&u):typeof t[o]!=typeof l||null==t[o]||"function"!=typeof t[o]&&t[o].constructor!=l.constructor?(q.jc("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[o]&&n[o].length!=t[o].length&&q.Z("Unexpected number of arguments for "+u),e[o]=t[o]):(q.jc("Invalid config, unrecognized key "+u),s=!1)}return s}function ks(e,t){for(var n={},r=n,i=0,o=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[o=e.substring(o,i).replace(/\\\./g,".")]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}function Es(){}function ws(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:wt,fairPlayTransform:!0,updateExpirationTime:1},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return q.error("Unhandled streaming error",e),[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};Ze("Web0S")&&(i.stallEnabled=!1);var o={trackSelectionCallback:function(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:return t.return(e)}}))}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},a={drm:n,manifest:r,streaming:i,offline:o,abrFactory:Nn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return o.trackSelectionCallback=function(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),r=[],i=In(t,n.map((function(e){return e.language})));i&&(r=n.filter((function(e){return xn(e.language)==i}))),0==r.length&&(r=n.filter((function(e){return e.primary}))),0==r.length&&(1<new Set(n.map((function(e){return e.language}))).size&&q.m("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),r=n);var o=r.filter((function(e){return e.height&&480>=e.height}));if(o.length&&(o.sort((function(e,t){return t.height-e.height})),r=o.filter((function(e){return e.height==o[0].height}))),n=[],r.length){var a=Math.floor(r.length/2);r.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(r[a])}for(r=p(e),a=r.next();!a.done;a=r.next())"text"==(a=a.value).type&&n.push(a);return n}(e,a.preferredAudioLanguage))}}))}))},a}function Ts(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return _s(e,t,n||ws(),r,"")}function Ss(){this.a=null,this.b=[]}function As(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Os(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var r=p(e.b),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==t?i.duration:0;return n}function Ps(){this.b=this.c=null,this.a=[]}function Rs(){this.f=this.u=this.h=this.b=this.i=this.l=this.o=this.g=this.v=NaN,this.a=new Ss,this.c=new Ps}function Cs(t,n){var r=this;we.call(this),this.i=bu,this.a=null,this.ob=!1,this.g=new je,this.Lc=this.l=this.Ob=this.c=this.u=this.f=this.ec=this.F=this.fc=this.H=this.qb=this.o=this.G=this.h=this.S=null,this.ke=1e9,this.hc=new Set,this.sb=!0,this.sa=null,this.je=!1,this.ge=0,this.ra=null,this.ea=new co,this.b=Gs(this),this.ic={width:1/0,height:1/0},this.v=null,this.Pb=new _o(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.qa=this.b.preferredTextLanguage,this.nb=this.b.preferredTextRole,this.Mc=[],n&&n(this),this.S=function(e){return new Ce((function(t,n){e.l&&e.l.segmentDownloaded(t,n)}))}(this),this.g.B(e,"online",(function(){r.Cd()})),this.K={name:"detach"},this.V={name:"attach"},this.La={name:"unload"},this.Zc={name:"manifest-parser"},this.Uc={name:"manifest"},this.pb={name:"media-source"},this.Nc={name:"drm-engine"},this.$={name:"load"},this.dd={name:"src-equals-drm-engine"},this.rb={name:"src-equals"};var i=new Map;i.set(this.V,(function(e,t){return be(function(e,t,n){return null==t.w&&(t.w=n.w,e.g.B(t.w,"error",(function(){var t=ou(e);t&&e.Qa(t)}))),e.a=t.w,Promise.resolve()}(r,e,t))})),i.set(this.K,(function(e){return e.w&&(r.g.pa(e.w,"error"),e.w=null),r.a=null,be(e=Promise.resolve())})),i.set(this.La,(function(e){return be(Ls(r,e))})),i.set(this.pb,(function(t){return be(t=function(t,n){return h((function r(){var i,o,a,s;return N(r,(function(r){switch(r.j){case 1:return i=e.muxjs?new It:new Lt,o=t.b.textDisplayFactory,a=new o,t.Rc=o,T(r,(s=new yn(n.w,i,a)).u,2);case 2:t.G=s,S(r)}}))}))}(r,t))})),i.set(this.Zc,(function(e,t){return be(function(e,t,n){return h((function r(){var i,o,a,s;return N(r,(function(r){switch(r.j){case 1:if(t.Ea=n.Ea,t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,o=e.S,e.Ob=i,t.Ea){e.u=t.Ea(),r.C(2);break}return a=e,T(r,di.create(i,o,e.b.manifest.retryParameters,t.mimeType),3);case 3:a.u=r.s;case 2:s=Te(e.b.manifest),n.w&&"AUDIO"===n.w.nodeName&&(s.disableVideo=!0),e.u.configure(s),S(r)}}))}))}(r,e,t))})),i.set(this.Uc,(function(e){return function(e,t){var n=t.uri,r=e.S;e.ec=new Jo,function(e,t){e.b=t}(e.ec,(function(t){iu(e,"timelineregionadded",t)}));var i={networkingEngine:r,filterNewPeriod:function(t){return e.Vc(t)},filterAllPeriods:function(t){return Ks(e,t)},onTimelineRegionAdded:function(t){var n=e.ec;e:{for(var r=p(n.a),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Qa(t)}};return new ye(Promise.resolve().then((function(){return h((function t(){var r;return N(t,(function(t){switch(t.j){case 1:return r=e,T(t,e.u.start(n,i),2);case 2:if(r.c=t.s,e.dispatchEvent(new ke("manifestparsed")),0==e.c.periods.length)throw new de(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&(q.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),e.forEach((function(e){e.variants=e.variants.filter(t)})))}(e.c.periods),S(t)}}))}))})),(function(){return q.info("Aborting parser step..."),e.u.stop()}))}(r,e)})),i.set(this.Nc,(function(){return be(function(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:return e.h=Ms(e,{Db:e.S,onError:function(t){e.Qa(t)},yc:function(t){au(e,t)},onExpirationUpdated:function(t,n){su(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.h.configure(e.b.drm),T(t,pt(e.h,Do(e.c.periods),e.c.offlineSessionIds),2);case 2:Ks(e,e.c.periods),S(t)}}))}))}(r))})),i.set(this.$,(function(e,t){return be(function(e,t,n){return h((function r(){var i,o,a,s,u,l,c,f,d,h;return N(r,(function(r){switch(r.j){case 1:return t.startTime=n.startTime,i=t.w,o=t.uri,e.Ob=o,e.H=new Mo({rc:function(){return t.w.playbackRate},Id:function(e){t.w.playbackRate=e},le:function(e){t.w.currentTime+=e}}),e.v=new Rs,a=function(){return qs(e)},s=function(){return Ys(e)},e.g.B(i,"playing",a),e.g.B(i,"pause",a),e.g.B(i,"ended",a),e.g.B(i,"ratechange",s),u=e.b.abrFactory,e.l&&e.Lc==u||(e.Lc=u,e.l=new u,e.l.configure(e.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var r=t[n],i=new Map,o=p(r.variants),a=o.next();!a.done;a=o.next())if((a=a.value).video&&a.video.closedCaptions)for(var s=p((a=a.video).closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!i.has(u)){var l={id:e.ke++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:a.closedCaptions.get(u),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};i.set(u,l)}for(i=p(i.values()),o=i.next();!o.done;o=i.next())r.textStreams.push(o.value)}}(e,e.c.periods),e.Pb=new _o(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.qa=e.b.preferredTextLanguage,function(e,t,n){0<t&&(e.X()?q.m("|playRangeStart| has been configured for live content. Ignoring the setting."):e.De(t)),n<e.ca()&&(e.X()?q.m("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.Ba(n))}(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),T(r,e.h.Qb(i),2);case 2:return e.l.init((function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,q.debug("switch_");e:{for(var i=p(e.c.periods),o=i.next();!o.done;o=i.next())if((o=o.value).variants.includes(t)){i=o;break e}i=null}Bs(e,i,t,!0),e.f&&ua(e.f,t,n,r)&&Qs(e)})),e.o=function(e,t){return new Yo(e.a,e.c,e.b.streaming,t,(function(){e.qb&&xo(e.qb,!0),e.f&&function(e){function t(t){var i=e.a.O;return"text"==t?t=null!=(t=i.a).a&&null!=t.b&&(n>=t.a&&n<t.b):t=Nt(t=En(i,t),n,r),t}var n=e.a.Za(),r=e.g.smallGapLimit,i=!1,o=Ea(e,n);if(Ke(e.b.values(),(function(e){return e.ka==o})))for(var a=p(e.b.keys()),s=a.next();!s.done;s=a.next())t(s=s.value)||(ca(e,e.b.get(s)),i=!0);else Ke(e.b.keys(),t)||(q.debug("(all): seeked: unbuffered seek: clearing all buffers"),e.b.forEach((function(t){ca(e,t)})),i=!0);i||q.debug("(all): seeked: buffered seek: presentationTime="+n)}(e.f),e.F&&js(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.qb=function(e){var t=new Lo(e.c);!function(e,t){e.b=t}(t,(function(){Zs(e)}));var n=new Qo(e.ec);!function(e,t,n,r){e.a=t,e.b=n,e.c=r}(n,(function(t){iu(e,"timelineregionenter",t)}),(function(t){iu(e,"timelineregionexit",t)}),(function(t,n){n||(iu(e,"timelineregionenter",t),iu(e,"timelineregionexit",t))}));var r=new Co(e.a);return r.a.add(t),r.a.add(n),r}(e),l=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),Ns(e,l),e.f=function(e){return new na(e.c,{Za:function(){return e.o.g()},getBandwidthEstimate:function(){return e.l.getBandwidthEstimate()},O:e.G,Db:e.S,oe:e.Lf.bind(e),ne:e.Se.bind(e),onError:e.Qa.bind(e),onEvent:function(t){return e.dispatchEvent(t)},Pf:e.Qf.bind(e),td:e.Vf.bind(e)})}(e),e.f.configure(e.b.streaming),Mn.Vd(e.c,e.b.preferredAudioChannelCount),e.i=_u,e.dispatchEvent(new ke("streaming")),T(r,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(c=e.o.g(),f=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-o.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+o.startTime:null}var r=ra(e.f),i=ia(e.f),o=du(e);return r=n(r,t),null!=(i=n(i,t))&&null!=r?Math.max(i,r):null!=i?i:null!=r?r:t}(e,c),e.o.o(f)),e.c.periods.forEach(e.Vc.bind(e)),Zs(e),Qs(e),d=du(e)||e.c.periods[0],h=d.variants.some((function(e){return e.primary})),e.b.preferredAudioLanguage||h||q.m("No preferred audio language set.  We will choose an arbitrary language initially"),Xs(e,d.variants),e.g.ua(i,"loadedmetadata",(function(){e.v.b=Date.now()/1e3-n.Ld})),S(r)}}))}))}(r,e,t))})),i.set(this.dd,(function(e){return be(e=function(e,t){return h((function n(){var r,i;return N(n,(function(n){switch(n.j){case 1:return r=Gt,e.h=Ms(e,{Db:e.S,onError:function(t){e.Qa(t)},yc:function(t){au(e,t)},onExpirationUpdated:function(t,n){su(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.h.configure(e.b.drm),i={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:r.Ua,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},T(n,pt(e.h,[i],[]),2);case 2:return T(n,e.h.Qb(t.w),0)}}))}))}(r,e))})),i.set(this.rb,(function(e,t){return function(e,t,n){function r(){return qs(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.Ob=t.uri,e.v=new Rs,e.o=new Wo(t.w),null!=t.startTime&&e.o.o(t.startTime),e.H=new Mo({rc:function(){return t.w.playbackRate},Id:function(e){t.w.playbackRate=e},le:function(e){t.w.currentTime+=e}}),Ns(e,e.b.streaming.rebufferingGoal),e.g.B(t.w,"playing",r),e.g.B(t.w,"pause",r),e.g.B(t.w,"ended",r),e.g.B(t.w,"ratechange",(function(){return Ys(e)})),"none"!=e.a.preload&&e.g.ua(t.w,"loadedmetadata",(function(){e.v.b=Date.now()/1e3-n.Ld})),e.a.audioTracks&&(e.g.B(e.a.audioTracks,"addtrack",(function(){return Zs(e)})),e.g.B(e.a.audioTracks,"removetrack",(function(){return Zs(e)})),e.g.B(e.a.audioTracks,"change",(function(){return Zs(e)}))),e.a.textTracks){var i=e.a.textTracks;e.g.B(i,"addtrack",(function(){return Zs(e)})),e.g.B(i,"removetrack",(function(){return Zs(e)})),e.g.B(i,"change",(function(){return Zs(e)}))}t.w.src=t.uri,e.i=ku,e.dispatchEvent(new ke("streaming"));var o=new he;jo(e.a,HTMLMediaElement.HAVE_METADATA,e.g,(function(){o.resolve()}));var a=!1;return e.Mc.push((function(){a=!0})),jo(e.a,HTMLMediaElement.HAVE_CURRENT_DATA,e.g,(function(){return h((function t(){return N(t,(function(t){switch(t.j){case 1:if(a)return t.return();if(function(e){var t=e.b.preferredAudioLanguage;if(""!=t){e.Dd(t);var n=e.b.preferredVariantRole;""!=n&&e.Dd(t,n)}}(e),Fs(e).find((function(e){return"disabled"!=e.mode}))){t.C(2);break}return T(t,new Promise((function(t){e.g.ua(e.a.textTracks,"change",t),new ce(t).T(1)})),2);case 2:if(a)return t.return();!function(e){var t=e.b.preferredTextLanguage;if(""!=t){e.Ed(t);var n=e.b.preferredTextRole;""!=n&&e.Ed(t,n)}}(e),S(t)}}))}))})),e.a.error?o.reject(ou(e)):"none"==e.a.preload&&(q.Z('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),o.resolve()),e.g.ua(e.a,"error",(function(){o.reject(ou(e))})),new ye(o,(function(){return o.reject(new de(2,7,7001)),Promise.resolve()}))}(r,e,t)})),this.Ta=new hs(this.K,{rf:function(e,t,n,i){var o=null;return e==r.K&&(o=n==r.K?r.K:r.V),e==r.V&&(o=n==r.K||t.w!=i.w?r.K:n==r.V?r.V:n==r.pb||n==r.$?r.pb:n==r.rb?r.dd:null),e==r.pb&&(o=n==r.$&&t.w==i.w?r.Zc:r.La),e==r.Zc&&(o=vu(r.$,r.Uc,r.La,n,t,i)),e==r.Uc&&(o=vu(r.$,r.Nc,r.La,n,t,i)),e==r.Nc&&(o=vu(r.$,r.$,r.La,n,t,i)),e==r.dd&&(o=n==r.rb&&t.w==i.w?r.rb:r.La),e!=r.$&&e!=r.rb||(o=r.La),e==r.La&&(o=i.w&&t.w==i.w?r.V:r.K),o},Ye:function(e,t,n){return r.dispatchEvent(new ke("onstatechange",{state:e.name})),i.get(e)(t,n)},handleError:function(e,t){return h((function n(){return N(n,(function(n){switch(n.j){case 1:return q.m("The walker saw an error:"),t instanceof de?q.m("Error Code:",t.code):(q.m("Error Message:",t.message),q.m("Error Stack:",t.stack)),T(n,Ls(r,e),2);case 2:return n.return(e.w?r.V:r.K)}}))}))},Nf:function(e){r.dispatchEvent(new ke("onstateidle",{state:e.name}))}}),t&&this.Qb(t,!0)}_(Ja,Ga),Ja.prototype.updateManifestExpiration=function(e,t){var n=Ba(this.b,this.a),r=n.store(),i=new he;return r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new de(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return i}))},Ja.prototype.mc=function(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(Qa),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}},Ja.prototype.Wd=function(e){return{data:e.data}},_(ns,Ga),ns.prototype.hasFixedKeySpace=function(){return this.f},ns.prototype.addSegments=function(e){return this.f?Ka(this.c):this.add(this.c,e)},ns.prototype.addManifests=function(e){return this.f?Ka(this.a):this.add(this.a,e)},ns.prototype.mc=function(e){return null==e.expiration&&(e.expiration=1/0),e},(r=rs.prototype).init=function(){var t=this,n=new he,r=e.indexedDB.open("shaka_offline_db",4);return r.onsuccess=function(e){e=e.target.result,t.f=e;var r=e.objectStoreNames;r.contains("manifest")&&r.contains("segment")?(q.debug("Mounting v1 idb storage cell"),r=new Ja(e,"segment","manifest")):r=null,t.a=r,(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?(q.debug("Mounting v2 idb storage cell"),r=new ns(e,"segment-v2","manifest-v2",!0)):r=null,t.b=r,(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?(q.debug("Mounting v3 idb storage cell"),r=new ns(e,"segment-v3","manifest-v3",!1)):r=null,t.c=r,e.objectStoreNames.contains("session-ids")?(q.debug("Mounting session ID idb storage cell"),e=new Wa(e)):e=null,t.g=e,n.resolve()},r.onupgradeneeded=function(e){e=e.target.result;for(var t=p(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){n.reject(new de(2,9,9001,r.error)),e.preventDefault()},n},r.destroy=function(){var e=this;return h((function t(){return N(t,(function(t){switch(t.j){case 1:if(!e.a){t.C(2);break}return T(t,e.a.destroy(),2);case 2:if(!e.b){t.C(4);break}return T(t,e.b.destroy(),4);case 4:if(!e.c){t.C(6);break}return T(t,e.c.destroy(),6);case 6:if(!e.g){t.C(8);break}return T(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),S(t)}}))}))},r.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},r.getEmeSessionCell=function(){return this.g},r.erase=function(){var t=this;return h((function n(){return N(n,(function(n){switch(n.j){case 1:if(!t.a){n.C(2);break}return T(n,t.a.destroy(),2);case 2:if(!t.b){n.C(4);break}return T(n,t.b.destroy(),4);case 4:if(!t.c){n.C(6);break}return T(n,t.c.destroy(),6);case 6:return t.f&&t.f.close(),T(n,function(){var t=new he,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){q.m("Deleting","shaka_offline_db","is being blocked")},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new de(2,9,9001,n.error)),e.preventDefault()},t}(),8);case 8:return t.f=null,t.a=null,t.b=null,t.c=null,T(n,t.init(),0)}}))}))},Xa("idb",(function(){return e.indexedDB?new rs:null})),is.prototype.Aa=function(){return this.g},is.prototype.fa=function(){return this.f},is.prototype.key=function(){return this.c},is.prototype.toString=function(){return this.b},(r=cs.prototype).configure=function(){},r.start=function(e){var t=this;return h((function n(){var r,i,o,a,s;return N(n,(function(n){switch(n.j){case 1:return r=os(e),t.a=r,null==r||"manifest"!=r.a?n.return(Promise.reject(new de(2,1,9004,r))):(i=new Ya,O(n,2),T(n,i.init(),4));case 4:return T(n,qa(i,r.Aa(),r.fa()),5);case 5:return T(n,n.s.getManifests([r.key()]),6);case 6:return o=n.s,a=o[0],s=new as(r.Aa(),r.fa()),n.return(function(e,t){var n=new hi(null,0);n.Ba(t.duration);var r=t.periods.map((function(t){return ss(e,t,n)})),i=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&r.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=i}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:r}}(s,a));case 2:return C(n),T(n,i.destroy(),7);case 7:x(n,0)}}))}))},r.stop=function(){return Promise.resolve()},r.update=function(){},r.onExpirationUpdated=function(e,t){var n=this;return h((function r(){var i,o,a,s,u,l,c,f;return N(r,(function(r){switch(r.j){case 1:return i=n.a,o=new Ya,A(r,2,3),T(r,o.init(),5);case 5:return T(r,qa(o,i.Aa(),i.fa()),6);case 6:return T(r,(a=r.s).getManifests([i.key()]),7);case 7:if(s=r.s,u=s[0],l=u.sessionIds.includes(e),c=null==u.expiration||u.expiration>t,!l||!c){r.C(3);break}return q.debug("Updating expiration for stored content"),T(r,a.updateManifestExpiration(i.key(),t),3);case 3:return C(r),T(r,o.destroy(),10);case 10:x(r,0);break;case 2:f=R(r),q.error("There was an error updating",i,f),r.C(3)}}))}))},di.Lb("application/x-offline-manifest",cs),G("shaka.offline.OfflineScheme",fs),fs.h=function(e){return me(e={uri:e,vd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},fs.i=function(e,t){var n=new Ya;return me(void 0).Y((function(){return n.init()})).Y((function(){return qa(n,t.Aa(),t.fa())})).Y((function(e){return e.getSegments([t.key()])})).Y((function(e){return{uri:t,vd:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))},De("offline",fs),hs.prototype.destroy=function(){var e=this;return h((function t(){return N(t,(function(t){switch(t.j){case 1:return e.l=!1,e.b&&e.b.abort(),vs(e),T(t,e.o,2);case 2:e.a&&e.a.za.eb();for(var n=p(e.g),r=n.next();!r.done;r=n.next())r.value.za.eb();e.a=null,e.g=[],e.h=null,S(t)}}))}))},G("shaka.text.SimpleTextDisplayer",gs),gs.prototype.remove=function(e,t){return!!this.a&&(bs(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},gs.prototype.remove=gs.prototype.remove,gs.prototype.append=function(e){for(var t=ms,n=[],r=(e=p(e)).next();!r.done;r=e.next())(r=r.value).nestedCues.length?n=n.concat(r.nestedCues):n.push(r);var i=[];e=this.a.cues?Array.from(this.a.cues):[],r={};for(var o=(n=p(n)).next();!o.done;r={Ab:r.Ab},o=n.next())r.Ab=o.value,e.some(function(e){return function(t){return t.startTime==e.Ab.startTime&&t.endTime==e.Ab.endTime&&t.text==e.Ab.payload}}(r))||(o=t(r.Ab))&&i.push(o);i.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:i.indexOf(t)-i.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},gs.prototype.append=gs.prototype.append,gs.prototype.destroy=function(){return this.a&&bs(this.a,(function(){return!0})),this.a=null,Promise.resolve()},gs.prototype.destroy=gs.prototype.destroy,gs.prototype.isTextVisible=function(){return"showing"==this.a.mode},gs.prototype.isTextVisible=gs.prototype.isTextVisible,gs.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},gs.prototype.setTextVisibility=gs.prototype.setTextVisibility,G("shaka.util.ConfigUtils.mergeConfigObjects",_s),G("shaka.util.ConfigUtils.convertToConfigObject",ks),G("shaka.util.PlayerConfiguration",Es),Es.mergeConfigObjects=Ts,K(Cs,we),G("shaka.Player",Cs),Cs.prototype.destroy=function(){var e=this;return h((function t(){var n;return N(t,(function(t){switch(t.j){case 1:return e.i==mu?t.return():(e.i=mu,n=ys(e.Ta,(function(){return{node:e.K,payload:{Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},$a:!1}})),T(t,new Promise((function(t){n.Fb=function(){q.info("Preparing to destroy walker...")},n.xc=function(){t(),e.dispatchEvent(new ke("loaded"))},n.eb=function(){t()},n.onError=function(){t()},n.zc=function(){t()}})),2));case 2:return T(t,e.Ta.destroy(),3);case 3:if(e.g&&(e.g.release(),e.g=null),e.Lc=null,e.l=null,e.b=null,!e.S){t.C(0);break}return T(t,e.S.destroy(),5);case 5:e.S=null,S(t)}}))}))},Cs.prototype.destroy=Cs.prototype.destroy,Cs.version="v2.5.13";var xs=["2","5"];Gn=new function(e){this.a=e,this.c=Bn,this.b=Vn}(new Un(Number(xs[0]),Number(xs[1])));var Ds=["output-restricted","internal-error"],Is={};function Ls(e,t){return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return e.i!=mu&&(e.i=bu),r=e.Mc.map((function(e){return e()})),e.Mc=[],T(n,Promise.all(r),2);case 2:if(e.dispatchEvent(new ke("unloading")),t.Ea=null,t.mimeType=null,t.startTime=null,t.uri=null,t.w&&(e.g.pa(t.w,"loadedmetadata"),e.g.pa(t.w,"playing"),e.g.pa(t.w,"pause"),e.g.pa(t.w,"ended"),e.g.pa(t.w,"ratechange")),e.qb&&(e.qb.release(),e.qb=null),e.fc&&(e.fc.stop(),e.fc=null),!e.u){n.C(3);break}return T(n,e.u.stop(),4);case 4:e.u=null;case 3:if(!e.l){n.C(5);break}return T(n,e.l.stop(),5);case 5:if(!e.f){n.C(7);break}return T(n,e.f.destroy(),8);case 8:e.f=null;case 7:if(e.H&&(e.H.release(),e.H=null),e.o&&(e.o.release(),e.o=null),!e.G){n.C(9);break}return T(n,e.G.destroy(),10);case 10:e.G=null;case 9:if(!t.w||!t.w.src){n.C(11);break}return T(n,new Promise((function(e){return new ce(e).T(.1)})),12);case 12:t.w.removeAttribute("src"),t.w.load();case 11:if(!e.h){n.C(13);break}return T(n,e.h.destroy(),14);case 14:e.h=null;case 13:e.ea.a.clear(),e.Ob=null,e.F=null,e.hc.clear(),e.c=null,e.v=null,e.Rc=null,e.sb=!0,Ws(e),S(n)}}))}))}function Ms(e,t){return new ft(t,e.b.drm.updateExpirationTime)}function Ns(e,t){e.F=new ko,e.F.a=wo,Eo(e.F,t,Math.min(.5,t/2)),Ws(e),e.fc=new ce((function(){js(e)})).Ra(.25)}function js(e){switch(e.i){case ku:var t=!!e.a.ended||Mt(e.a.buffered)>=e.a.duration-1;break;case _u:e:if(e.a.ended||bn(e.G))t=!0;else{if(e.c.presentationTimeline.X()){var n=e.c.presentationTimeline.xb();if(Mt(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var r=jt(e.a.buffered,e.a.currentTime),i=t,o=(n=e.F).b.get(n.a);t=n.a,r=i||r>=o?To:wo,n.a=r,t!=r&&Ws(e)}function Us(e){if(e.u){var t=Te(e.b.manifest);e.a&&"AUDIO"===e.a.nodeName&&(t.disableVideo=!0),e.u.configure(t)}if(e.h&&e.h.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.Vc.bind(e))}catch(t){e.Qa(t)}var n=ra(e.f),r=ia(e.f);t=du(e),n=Mn.ce(n,r,t.variants),e.l&&n&&n.allowedByApplication&&n.allowedByKeySystem?Xs(e,t.variants):(q.debug("Choosing new streams after changing configuration"),$s(e,t))}if(e.G&&(t=e.b.textDisplayFactory,e.Rc!=t)){n=new t;var i=(r=e.G).g;r.g=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.a&&(r.a.c=n),e.Rc=t,e.f&&((n=(t=e.f).b.get("text"))&&la(t,n.stream,!0,0,!0))}e.l&&(e.l.configure(e.b.abr),e.b.abr.enabled&&!e.sb?e.l.enable():e.l.disable(),ru(e)),e.F&&(t=e.b.streaming.rebufferingGoal,e.c&&(t=Math.max(t,e.c.minBufferTime)),Eo(e.F,t,Math.min(.5,t/2)))}function Fs(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Bs(e,t,n,r){po(e.ea,t).variant=n,(e=e.v.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:r,bandwidth:n.bandwidth}))}function Vs(e,t,n,r){fo(e.ea,t,n),(e=e.v.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:r,bandwidth:null}))}function Gs(e){var t=ws();return t.streaming.failureCallback=function(t){e.X()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,q.m("Live streaming error.  Retrying automatically..."),e.Cd())},t.textDisplayFactory=function(){return new gs(e.a)},t}function Ks(e,t){var n=e.f?ra(e.f):null,r=e.f?ia(e.f):null;if(t.forEach(Mn.filterNewPeriod.bind(null,e.h,n,r)),0==(n=function(e,t){var n=0;return e.forEach((function(e){n+=t(e)?1:0})),n}(t,(function(e){return e.variants.some(Mn.Bb)}))))throw new de(2,4,4032);if(n<t.length)throw new de(2,4,4011);t.forEach(function(e){Mn.Sd(e.variants,this.b.restrictions,this.ic)&&this.f&&du(this)==e&&Zs(this),uu(this,e.variants)}.bind(e))}function Hs(e,t,n,r){return n=void 0!==n&&n,r=void 0===r?0:r,e.sb?(e.sa=t,e.je=n,e.ge=r,!0):((t=ua(e.f,t,n,r))&&eu(e),t)}function zs(e,t){if(e.sb)return e.ra=t,!0;var n=la(e.f,t,!0,0,!1);return n&&tu(e),n}function Ws(e){var t=e.fd();if(e.v&&e.F&&e.o){var n=e.H;n.f=t,No(n),qs(e)}e.dispatchEvent(new ke("buffering",{buffering:t}))}function Ys(e){var t=e.a.playbackRate;0!=t&&e.H.set(t)}function qs(e){if(e.v&&e.F){var t=e.v.a;e.F.a==wo?As(t,"buffering"):e.a.paused?As(t,"paused"):e.a.ended?As(t,"ended"):As(t,"playing")}}function Xs(e,t){try{uu(e,t)}catch(t){return e.Qa(t),null}var n=t.filter((function(e){return Mn.Bb(e)}));return n=e.Pb.create(n),e.l.setVariants(Array.from(n.values())),e.l.chooseVariant()}function $s(e,t){var n=Js(e,t,!1),r=Mn.Sb(t.textStreams,e.qa,e.nb)[0]||null,i=!1;r&&(e.b.streaming.alwaysStreamText||e.uc())&&(Vs(e,t,r,!0),i=zs(e,r)),(n||i)&&Qs(e)}function Js(e,t,n){n=void 0===n||n;var r=Xs(e,t.variants),i=!1;return r&&(Bs(e,t,r,!0),i=Hs(e,r,!0)),n&&i&&Qs(e),i}function Qs(e){lu(e,new ke("adaptation"))}function Zs(e){lu(e,new ke("trackschanged"))}function eu(e){lu(e,new ke("variantchanged"))}function tu(e){lu(e,new ke("textchanged"))}function nu(e){lu(e,new ke("texttrackvisibility"))}function ru(e){lu(e,new ke("abrstatuschanged",{Rg:e.b.abr.enabled}))}function iu(e,t,n){e.dispatchEvent(new ke(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function ou(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new de(2,3,3016,t,n,e.a.error.message)}function au(e,t){if(e.f){var n=du(e),r=!1,i=Object.keys(t);0==i.length&&q.m("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var o=1==i.length&&"00"==i[0];o&&q.m("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),i.length&&e.c.periods.forEach((function(e){e.variants.forEach((function(e){Mn.Bf(e).forEach((function(n){var i=e.allowedByKeySystem;n.keyId&&(n=t[o?"00":n.keyId],e.allowedByKeySystem=!!n&&!Ds.includes(n)),i!=e.allowedByKeySystem&&(r=!0)}))}))})),i=ra(e.f);var a=ia(e.f);(i=Mn.ce(i,a,n.variants))&&!i.allowedByKeySystem&&(q.debug("Choosing new variants after key status changed"),Js(e,n)),r&&(Zs(e),Xs(e,n.variants))}}function su(e,t,n){e.u&&e.u.onExpirationUpdated&&e.u.onExpirationUpdated(t,n),e.dispatchEvent(new ke("expirationupdated"))}function uu(e,t){var n=e.h?ze(e.h.$):{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,o=!1,a=[],s=[],u=p(t),l=u.next();!l.done;l=u.next()){var c=[];(l=l.value).audio&&c.push(l.audio),l.video&&c.push(l.video);for(var f=(c=p(c)).next();!f.done;f=c.next())if((f=f.value).keyId){var d=n[r?"00":f.keyId];d?Ds.includes(d)&&(s.includes(d)||s.push(d)):a.includes(f.keyId)||a.push(f.keyId)}l.allowedByApplication?l.allowedByKeySystem&&(i=!0):o=!0}if(!i)throw new de(2,4,4012,{hasAppRestrictions:o,missingKeys:a,restrictedKeyStatuses:s})}function lu(e,t){h((function n(){return N(n,(function(n){switch(n.j){case 1:return T(n,Promise.resolve(),2);case 2:e.i!=mu&&e.dispatchEvent(t),S(n)}}))}))}function cu(e){for(var t=new Set,n=(e=p(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(xn(n.language)):t.add("und");return t}function fu(e){for(var t=new Map,n=(e=p(e)).next();!n.done;n=e.next()){var r=n.value;n="und";var i=[];for(r.language&&(n=xn(r.language)),(i="variant"==r.type?r.audioRoles:r.roles)&&i.length||(i=[""]),t.has(n)||t.set(n,new Set),i=(r=p(i)).next();!i.done;i=r.next())i=i.value,t.get(n).add(i)}var o=[];return t.forEach((function(e,t){for(var n=p(e),r=n.next();!r.done;r=n.next())o.push({language:t,role:r.value})})),o}function pu(e){return null==(e=du(e))?[]:e.variants.filter((function(e){return Mn.Bb(e)}))}function du(e){for(var t=e.o.g(),n=null,r=(e=p(e.c.periods)).next();!r.done;r=e.next())(r=r.value).startTime<=t&&(n=r);return n}function hu(e){var t=du(e);return po(e.ea,t).variant}function yu(){return new de(2,7,7e3)}function vu(e,t,n,r,i,o){return r==e&&i.w==o.w&&i.uri==o.uri&&i.mimeType==o.mimeType&&i.Ea==o.Ea?t:n}function gu(e){return new Promise((function(t,n){e.eb=function(){return n(yu())},e.xc=function(){return t()},e.onError=function(e){return n(e)},e.zc=function(){return n(yu())}}))}Cs.registerSupportPlugin=function(e,t){Is[e]=t},Cs.isBrowserSupported=function(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var t=Qe();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Xe()||$e("application/x-mpegurl"))},Cs.probeSupport=function(){return St().then((function(e){for(var t=di.dg(),n={},r=p('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),i=r.next();!i.done;i=r.next()){n[i=i.value]=Xe()?!!pn(i)||(MediaSource.isTypeSupported(i)||Ht(i)):$e(i);var o=i.split(";")[0];n[o]=n[o]||n[i]}for(var a in e={manifest:t,media:n,drm:e},Is)e[a]=Is[a]();return e}))},Cs.prototype.Qb=function(e,t){if(t=void 0===t||t,this.i==mu)return Promise.reject(yu());var n={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null};n.w=e,Xe()||(t=!1);var r=t?this.pb:this.V,i=ys(this.Ta,(function(){return{node:r,payload:n,$a:!1}}));return i.Fb=function(){return q.info("Starting attach...")},gu(i)},Cs.prototype.attach=Cs.prototype.Qb,Cs.prototype.detach=function(){var e=this;if(this.i==mu)return Promise.reject(yu());var t=ys(this.Ta,(function(){return{node:e.K,payload:{Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},$a:!1}}));return t.Fb=function(){return q.info("Starting detach...")},gu(t)},Cs.prototype.detach=Cs.prototype.detach,Cs.prototype.Od=function(e){var t=this;if(e=void 0===e||e,this.i==mu)return Promise.reject(yu());Xe()||(e=!1);var n={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},r=ys(this.Ta,(function(r){var i=r.w&&e?t.pb:r.w?t.V:t.K;return n.w=r.w,{node:i,payload:n,$a:!1}}));return r.Fb=function(){return q.info("Starting unload...")},gu(r)},Cs.prototype.unload=Cs.prototype.Od,Cs.prototype.load=function(e,t,n){if(this.i==mu)return Promise.reject(yu());this.dispatchEvent(new ke("loading"));var r={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null};r.uri=e,r.Ld=Date.now()/1e3,n&&"string"!=typeof n&&(Fn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),r.Ea=function(){return new n}),n&&"string"==typeof n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var i=function(e,t){if(t.Ea)return!1;if(!Xe())return!0;var n=t.mimeType,r=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[di.getExtension(r)]),!!n&&(""!=(t.w||et()).canPlayType(n)&&(!di.isSupported(r,n)||Je()&&e.b.streaming.useNativeHlsOnSafari))}(this,r)?this.rb:this.$,o=ys(this.Ta,(function(e){return null==e.w?null:(r.w=e.w,{node:i,payload:r,$a:!0})}));return o.Fb=function(){return q.info("Starting load of "+e+"...")},new Promise((function(e,t){o.zc=function(){return t(new de(2,7,7002))},o.xc=function(){return e()},o.eb=function(){return t(yu())},o.onError=function(e){return t(e)}}))},Cs.prototype.load=Cs.prototype.load,Cs.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ks(e,t));var n=Ts(this.b,e,Gs(this));return Us(this),n},Cs.prototype.configure=Cs.prototype.configure,Cs.prototype.getConfiguration=function(){var e=Gs(this);return Ts(e,this.b,Gs(this)),e},Cs.prototype.getConfiguration=Cs.prototype.getConfiguration,Cs.prototype.lg=function(){for(var e in this.b)delete this.b[e];Ts(this.b,Gs(this),Gs(this)),Us(this)},Cs.prototype.resetConfiguration=Cs.prototype.lg,Cs.prototype.jf=function(){return this.i},Cs.prototype.getLoadMode=Cs.prototype.jf,Cs.prototype.pf=function(){return this.a},Cs.prototype.getMediaElement=Cs.prototype.pf,Cs.prototype.Ub=function(){return this.S},Cs.prototype.getNetworkingEngine=Cs.prototype.Ub,Cs.prototype.pc=function(){return this.Ob},Cs.prototype.getAssetUri=Cs.prototype.pc,Cs.prototype.mf=function(){return Fn("getManifestUri",'Please use "getAssetUri" instead.'),this.pc()},Cs.prototype.getManifestUri=Cs.prototype.mf,Cs.prototype.X=function(){return this.c?this.c.presentationTimeline.X():!(!this.a||!this.a.src)&&1/0==this.a.duration},Cs.prototype.isLive=Cs.prototype.X,Cs.prototype.bb=function(){return!!this.c&&this.c.presentationTimeline.bb()},Cs.prototype.isInProgress=Cs.prototype.bb,Cs.prototype.Gf=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Cs.prototype.isAudioOnly=Cs.prototype.Gf,Cs.prototype.ng=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.wb(),end:e.Ga()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Cs.prototype.seekRange=Cs.prototype.ng,Cs.prototype.keySystem=function(){return gt(this.drmInfo())},Cs.prototype.keySystem=Cs.prototype.keySystem,Cs.prototype.drmInfo=function(){return this.h?this.h.a:null},Cs.prototype.drmInfo=Cs.prototype.drmInfo,Cs.prototype.Tb=function(){return this.h?this.h.Tb():1/0},Cs.prototype.getExpiration=Cs.prototype.Tb,Cs.prototype.fd=function(){return!!this.F&&this.F.a==wo},Cs.prototype.isBuffering=Cs.prototype.fd,Cs.prototype.tf=function(){if(this.H){var e=this.H;e=e.f?0:e.c}else e=0;return e},Cs.prototype.getPlaybackRate=Cs.prototype.tf,Cs.prototype.Eg=function(e){0==e?q.Z("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.H&&this.H.set(e),this.i==_u&&sa(this.f,1<Math.abs(e)))},Cs.prototype.trickPlay=Cs.prototype.Eg,Cs.prototype.Te=function(){this.i==ku&&this.H.set(1),this.i==_u&&(this.H.set(1),sa(this.f,!1))},Cs.prototype.cancelTrickPlay=Cs.prototype.Te,Cs.prototype.cd=function(){if(this.c&&this.o){for(var e=hu(this),t=[],n=p(pu(this)),r=n.next();!r.done;r=n.next()){r=r.value;var i=Mn.Qd(r);i.active=r==e,t.push(i)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return Mn.de(e)})):[]},Cs.prototype.getVariantTracks=Cs.prototype.cd,Cs.prototype.zb=function(){if(this.c&&this.o){for(var e=function(e){var t=du(e);if(null==t)return null;if(!po(e.ea,t).text){var n=Mn.Sb(t.textStreams,e.qa,e.nb);n.length&&fo(e.ea,t,n[0])}return po(e.ea,t).text}(this),t=[],n=p(function(e){var t=du(e);return null==t?[]:t.textStreams.filter((function(t){return!e.hc.has(t)}))}(this)),r=n.next();!r.done;r=n.next()){r=r.value;var i=Mn.Fc(r);i.active=r==e,t.push(i)}return t}return this.a&&this.a.src&&this.a.textTracks?Fs(this).map((function(e){return Mn.Ef(e)})):[]},Cs.prototype.getTextTracks=Cs.prototype.zb,Cs.prototype.Fd=function(e){if(this.c&&this.f){var t=du(this),n=t.textStreams.find((function(t){return t.id==e.id}));n?(Vs(this,t,n,!1),zs(this,n),this.qa=n.language):q.error("No stream with id",e.id)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(t=p(t=Fs(this))).next();!n.done;n=t.next())n=n.value,Mn.ed(n)==e.id?n.mode=this.ob?"showing":"hidden":n.mode="disabled";tu(this)}},Cs.prototype.selectTextTrack=Cs.prototype.Fd,Cs.prototype.og=function(){Fn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.zb().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length?this.Fd(e[0]):q.m("Unable to find the text track embedded in the video.")},Cs.prototype.selectEmbeddedTextTrack=Cs.prototype.og,Cs.prototype.Jg=function(){Fn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.zb().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},Cs.prototype.usingEmbeddedTextTrack=Cs.prototype.Jg,Cs.prototype.pg=function(e,t,n){if(n=void 0===n?0:n,this.c&&this.f){var r=du(this);this.b.abr.enabled&&q.Z("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=r.variants.find((function(t){return t.id==e.id}));i?Mn.Bb(i)?(Bs(this,r,i,!1),Hs(this,i,t,n),this.Pb=new bo(i),Xs(this,r.variants)):q.error("Unable to switch to restricted track",e.id):q.error("No variant with id",e.id)}else if(this.a&&this.a.audioTracks){for(n=(t=p(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())n=n.value,Mn.ed(n)==e.id&&(n.enabled=!0);eu(this)}},Cs.prototype.selectVariantTrack=Cs.prototype.pg,Cs.prototype.df=function(){return fu(this.cd())},Cs.prototype.getAudioLanguagesAndRoles=Cs.prototype.df,Cs.prototype.Af=function(){return fu(this.zb())},Cs.prototype.getTextLanguagesAndRoles=Cs.prototype.Af,Cs.prototype.cf=function(){return Array.from(cu(this.cd()))},Cs.prototype.getAudioLanguages=Cs.prototype.cf,Cs.prototype.zf=function(){return Array.from(cu(this.zb()))},Cs.prototype.getTextLanguages=Cs.prototype.zf,Cs.prototype.Dd=function(e,t){if(this.c&&this.o){var n=du(this);this.Pb=new _o(e,t||"",0,"","audio"),Js(this,n)}else if(this.a&&this.a.audioTracks){var r=Array.from(this.a.audioTracks);n=xn(e);for(var i=(r=p(r)).next();!i.done;i=r.next()){i=i.value;var o=Mn.de(i);xn(o.language)!=n||t&&!o.roles.includes(t)||(i.enabled=!0)}eu(this)}},Cs.prototype.selectAudioLanguage=Cs.prototype.Dd,Cs.prototype.Ed=function(e,t){if(this.c&&this.o){var n=du(this);this.qa=e,this.nb=t||"";var r=Mn.Sb(n.textStreams,this.qa,this.nb)[0]||null;r&&(Vs(this,n,r,!1),(this.b.streaming.alwaysStreamText||this.uc())&&zs(this,r))}else{var i=xn(e);(n=this.zb().filter((function(e){return xn(e.language)==i&&(!t||e.roles.includes(t))}))[0])&&this.Fd(n)}},Cs.prototype.selectTextLanguage=Cs.prototype.Ed,Cs.prototype.qg=function(e){if(this.c&&this.o){for(var t=du(this),n=null,r=p(pu(this)),i=r.next();!i.done;i=r.next())if((i=i.value).audio.label==e){n=i;break}null==n?q.m("No variants were found with label: "+e+". Ignoring the request to switch."):(this.Pb=new _o(n.language,"",0,e),Js(this,t))}},Cs.prototype.selectVariantsByLabel=Cs.prototype.qg,Cs.prototype.uc=function(){var e=this.ob;return this.G?this.G.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Fs(this).some((function(e){return"showing"==e.mode})):e},Cs.prototype.isTextTrackVisible=Cs.prototype.uc,Cs.prototype.tg=function(e){var t=this;return h((function n(){var r,i,o,a;return N(n,(function(n){switch(n.j){case 1:if(t.ob==(r=!!e))return n.return();if(t.ob=r,t.i!=_u){if(t.a&&t.a.src&&t.a.textTracks)for(var s=p(Fs(t)),u=s.next();!u.done;u=s.next())"disabled"!=(i=u.value).mode&&(i.mode=r?"showing":"hidden");n.C(2);break}if(t.G.g.setTextVisibility(r),t.b.streaming.alwaysStreamText){n.C(2);break}if(!r){!function(e){e.G=!0;var t=e.b.get("text");t&&(Oa(t),Pa(t).catch((function(){})),e.b.delete("text"))}(t.f),n.C(2);break}if(oa(t.f,"text")){n.C(2);break}if(o=du(t),!(0<(a=Mn.Sb(o.textStreams,t.qa,t.nb)).length)){n.C(2);break}return T(n,aa(t.f,a[0]),2);case 2:nu(t),S(n)}}))}))},Cs.prototype.setTextTrackVisibility=Cs.prototype.tg,Cs.prototype.vf=function(){if(!this.X())return q.m("getPlayheadTimeAsDate is for live streams!"),null;var e=this.Ta.f,t=0;if(this.o)t=this.o.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.c?new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?(q.m("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(e.getTime()+1e3*t)):(q.m("No way to get playhead time as Date!"),null)},Cs.prototype.getPlayheadTimeAsDate=Cs.prototype.vf,Cs.prototype.xf=function(){if(!this.X())return q.m("getPresentationStartTimeAsDate is for live streams!"),null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?(q.m("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e}return q.m("No way to get presentation start time as Date!"),null},Cs.prototype.getPresentationStartTimeAsDate=Cs.prototype.xf,Cs.prototype.$c=function(){var e={total:[],audio:[],video:[],text:[]};return this.i==ku&&(e.total=Ut(this.a.buffered)),this.i==_u&&this.G.$c(e),e},Cs.prototype.getBufferedInfo=Cs.prototype.$c,Cs.prototype.getStats=function(){if(this.i!=_u&&this.i!=ku)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};qs(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.v,n=Number(e.totalVideoFrames);t.o=Number(e.droppedVideoFrames),t.l=n,this.v.i=Number(e.corruptedVideoFrames)}this.h?e=(e=this.h).K?e.K:NaN:e=NaN,this.v.h=e,this.i==_u&&((e=hu(this))&&(this.v.u=e.bandwidth),e&&e.video&&(t=this.v,n=e.video.height||NaN,t.v=e.video.width||NaN,t.g=n),e=this.l.getBandwidthEstimate(),this.v.f=e);var r=this.v;e=r.v,t=r.g,n=r.u;for(var i=r.l,o=r.o,a=r.i,s=r.f,u=r.b,l=Os(r.a,"playing"),c=Os(r.a,"paused"),f=Os(r.a,"buffering"),d=r.h,h=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=p(e.b),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.a&&n.push(t(e.a)),n}(r.a),y=[],v=(r=p(r.c.a)).next();!v.done;v=r.next())v=v.value,y.push({timestamp:v.timestamp,id:v.id,type:v.type,fromAdaptation:v.fromAdaptation,bandwidth:v.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:i,droppedFrames:o,corruptedFrames:a,estimatedBandwidth:s,loadLatency:u,playTime:l,pauseTime:c,bufferingTime:f,licenseTime:d,stateHistory:h,switchHistory:y}},Cs.prototype.getStats=Cs.prototype.getStats,Cs.prototype.addTextTrack=function(e,t,n,r,i,o){var a=this;return h((function s(){var u,l,c,f,p,d,h,y,v;return N(s,(function(s){switch(s.j){case 1:if(a.i==ku)throw q.error("Cannot add text when loaded with src="),Error("State error!");if(a.i!=_u)throw q.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");if(u=du(a),l=Gt,c=a.c.periods.indexOf(u),p=(f=c+1)>=a.c.periods.length?a.c.presentationTimeline.ca():a.c.periods[f].startTime,1/0==(d=p-u.startTime))throw new de(1,4,4033);return h=new Xr(1,0,d,(function(){return[e]}),0,null),y={id:a.ke++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?h:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:t,label:o||null,type:l.va,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},a.hc.add(y),u.textStreams.push(y),T(s,aa(a.f,y),2);case 2:return(v=oa(a.f,"text"))&&fo(a.ea,u,v),a.hc.delete(y),q.debug("Choosing new streams after adding a text stream"),$s(a,u),Zs(a),s.return(Mn.Fc(y))}}))}))},Cs.prototype.addTextTrack=Cs.prototype.addTextTrack,Cs.prototype.Hd=function(e,t){this.ic.width=e,this.ic.height=t},Cs.prototype.setMaxHardwareResolution=Cs.prototype.Hd,Cs.prototype.Cd=function(){if(this.i==_u){var e=this.f;if(e.f)q.error("Unable to retry after StreamingEngine is destroyed!"),e=!1;else if(e.o)q.error("Unable to retry after StreamingEngine encountered a fatal error!"),e=!1;else{for(var t=p(e.b.values()),n=t.next();!n.done;n=t.next()){var r=Ca(n=n.value);n.Xb&&(q.info(r,"Retrying after failure..."),n.Xb=!1,Aa(e,n,.1))}e=!0}}else e=!1;return e},Cs.prototype.retryStreaming=Cs.prototype.Cd,Cs.prototype.kf=function(){return this.c},Cs.prototype.getManifest=Cs.prototype.kf,Cs.prototype.lf=function(){return this.u?this.u.constructor:null},Cs.prototype.getManifestParserFactory=Cs.prototype.lf,(r=Cs.prototype).Vc=function(e){var t=this.f?ra(this.f):null,n=this.f?ia(this.f):null;if(Mn.filterNewPeriod(this.h,t,n,e),!(t=e.variants).some(Mn.Bb))throw new de(2,4,4011);if(uu(this,e.variants),Mn.Sd(t,this.b.restrictions,this.ic)&&this.f&&du(this)==e&&Zs(this),e=this.h?this.h.a:null)for(n=(t=p(t)).next();!n.done;n=t.next())for(var r=(n=p(n.value.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==e.keySystem)for(var i=(r=p(r.initData||[])).next();!i.done;i=r.next())i=i.value,vt(this.h,i.initDataType,i.initData)},r.Lf=function(e){q.debug("onChooseStreams_",e);try{q.J("onChooseStreams_, choosing variant from ",e.variants),q.J("onChooseStreams_, choosing text from ",e.textStreams),this.sb=!0,this.l.disable(),ru(this),q.debug("Choosing new streams after period changed");var t=Xs(this,e.variants),n=Mn.Sb(e.textStreams,this.qa,this.nb)[0]||null;this.sa&&(e.variants.includes(this.sa)&&(t=this.sa),this.sa=null),this.ra&&(e.textStreams.includes(this.ra)&&(n=this.ra),this.ra=null),t&&Bs(this,e,t,!0),n&&Vs(this,e,n,!0);var r=this.f,i=r.b.get("video");if(i)var o=r.c.periods[i.ka];else{var a=r.b.get("audio");o=a?r.c.periods[a.ka]:null}var s=t?t.audio:null;if(!o&&n){var u;if(u=s){e=n;var l=xn(this.b.preferredTextLanguage),c=xn(s.language),f=xn(e.language);u=Rn(f,l)&&!Rn(c,f)}u&&(this.ob=!0),this.ob&&this.G.g.setTextVisibility(!0),nu(this)}var p=this.b.streaming.alwaysStreamText||this.uc()?{variant:t,text:n}:{variant:t,text:null};return q.J("onChooseStreams_, chose variant ",p.variant),q.J("onChooseStreams_, chose text ",p.text),p}catch(e){return this.Qa(e),{variant:null,text:null}}},r.Se=function(){q.debug("canSwitch_"),this.sb=!1,this.b.abr.enabled&&(this.l.enable(),ru(this)),this.sa&&(ua(this.f,this.sa,this.je,this.ge),eu(this),this.sa=null),this.ra&&(la(this.f,this.ra,!0,0,!1),tu(this),this.ra=null)},r.Qf=function(){this.u&&this.u.update&&this.u.update()},r.Vf=function(){this.o&&this.o.u()},r.Qa=function(e){if(this.i!=mu){var t=new ke("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var mu=0,bu=1,_u=2,ku=3;function Eu(e,t){var n=ss(new as(e.Aa(),e.fa()),t.periods[0],new hi(null,0)),r=t.appMetadata||{};return n=wu(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r}}function wu(e){for(var t=[],n=Mn.sf(e.variants),r=(n=p(n)).next();!r.done;r=n.next())t.push(Mn.Qd(r.value));for(n=(e=p(e.textStreams)).next();!n.done;n=e.next())t.push(Mn.Fc(n.value));return t}function Tu(){this.a={}}function Su(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.a[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.a[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,o=r.bandwidth||t.bandwidth-i;0>=o&&(q.m("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),o=t.bandwidth),e.a[n.id]=i,e.a[r.id]=o}}function Au(e,t){var n=e.a[t];return null==n&&(n=0,q.error("Asking for bitrate of stream not given to the estimator")),0==n&&q.m("Using bitrate of 0, this stream won't affect progress"),n}function Ou(e){this.a=!1,this.b=new he,this.c=e}function Pu(e){var t=new Cu;e.periods.forEach((function(e,n){var r=Du(e.variants);if(0==n)for(var i=(r=p(r.a)).next();!i.done;i=r.next())t.add(i.value);else!function(e,t){e.a=e.a.filter((function(e){return xu(t,e)}))}(t,r)}));for(var n=(e=p(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter((function(e){return xu(t,new Ru(e))}))}function Ru(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function Cu(){this.a=[]}function xu(e,t){return e.a.some((function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c}))}function Du(e){for(var t=new Cu,n=(e=p(e)).next();!n.done;n=e.next())t.add(new Ru(n.value));return t}function Iu(e){var t=this;if(e&&e.constructor!=Cs)throw new de(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.Ub()):(this.a=ws(),this.b=new Ce),this.f=!1,this.c=[],this.g=[];var n=!e;this.h=new Ou((function(){return h((function e(){var r;return N(e,(function(e){switch(e.j){case 1:return r=function(){},T(e,Promise.all(t.g.map((function(e){return e.then(r,r)}))),2);case 2:if(!n){e.C(3);break}return T(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,S(e)}}))}))}))}function Lu(){if(Xe())e:{for(var e=p($a.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Mu(e,t){for(var n=[],r=p(e.periods),i=r.next();!i.done;i=r.next())for(var o=(i=p(i.value.streams)).next();!o.done;o=i.next())o=o.value,t&&"video"==o.contentType?n.push({contentType:We(o.mimeType,o.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=o.contentType||n.push({contentType:We(o.mimeType,o.codecs),robustness:e.drmInfo.audioRobustness});return n}function Nu(e,t,n){return h((function r(){return N(r,(function(r){switch(r.j){case 1:return T(r,function(e,t,n,r){return h((function i(){var o,a,s;return N(i,(function(i){switch(i.j){case 1:return r.drmInfo?(o=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new de(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),a=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Mu(r,!1),videoCapabilities:Mu(r,!0)}})),T(i,ps(t,e,a),2)):i.return();case 2:return s=i.s,T(i,o.remove(s),3);case 3:return T(i,o.add(a.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}(e.b,e.a.drm,n,t),0)}}))}))}function ju(e,t,n,r){function i(){s+=1,e.a.offline.progressCallback(u,s/a)}var o=function(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}(r),a=o.length+1,s=0,u=Eu(n,r);return Promise.all([t.removeSegments(o,i),t.removeManifests([n.key()],i)])}function Uu(e,t,n,r,i,o){var a={id:o.id,originalId:o.originalId,primary:o.primary,presentationTimeOffset:o.presentationTimeOffset||0,contentType:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,kind:o.kind,language:o.language,label:o.label,width:o.width||null,height:o.height||null,initSegmentKey:null,encrypted:o.encrypted,keyId:o.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.Wb();var s=o.id,u=o.initSegmentReference;return u&&(u=yi(u.c(),u.b,u.a,e.a.streaming.retryParameters),Na(t,s,u,.5*Au(r,o.id),!0,(function(t){return h((function r(){var i;return N(r,(function(r){switch(r.j){case 1:return T(r,n.addSegments([{data:t}]),2);case 2:i=r.s,e.c.push(i[0]),a.initSegmentKey=i[0],S(r)}}))}))}))),function(e,t,n){for(var r=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);r;)n(r),r=e.getSegmentReference(++t)}(o,i,(function(i){var u=yi(i.c(),i.b,i.a,e.a.streaming.retryParameters);Na(t,s,u,function(e,t,n){return n=n.endTime-n.startTime,Au(e,t)*n}(r,o.id,i),!1,(function(t){return h((function r(){var o;return N(r,(function(r){switch(r.j){case 1:return T(r,n.addSegments([{data:t}]),2);case 2:o=r.s,e.c.push(o[0]),a.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:o[0]}),S(r)}}))}))}))})),a}function Fu(e){if(e.h.a)throw new de(2,9,7001)}function Bu(){if(!Lu())throw new de(2,9,9e3)}function Vu(e,t){return h((function n(){return N(n,(function(n){switch(n.j){case 1:return e.g.push(t),O(n,2),T(n,t,4);case 4:return n.return(n.s);case 2:C(n),Ae(e.g,t),x(n,0)}}))}))}function Gu(e){var t=new Set(e.variants.map((function(e){return e.video}))),n=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams,1<t.size&&q.m("Multiple video tracks selected to be stored");for(var r=(t=p(n)).next();!r.done;r=t.next()){r=r.value;for(var i=p(n),o=i.next();!o.done;o=i.next())r!=(o=o.value)&&r.language==o.language&&q.m("Similar audio tracks were selected to be stored",r.id,o.id)}for(t=(n=p(e)).next();!t.done;t=n.next())for(t=t.value,i=(r=p(e)).next();!i.done;i=r.next())t!=(i=i.value)&&t.language==i.language&&q.m("Similar text tracks were selected to be stored",t.id,i.id)}Cs.LoadMode={DESTROYED:mu,NOT_LOADED:bu,MEDIA_SOURCE:_u,SRC_EQUALS:ku},Ou.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},Cu.prototype.add=function(e){xu(this,e)||this.a.push(e)},G("shaka.offline.Storage",Iu),Iu.support=Lu,Iu.prototype.destroy=function(){return this.h.destroy()},Iu.prototype.destroy=Iu.prototype.destroy,Iu.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ks(e,t));var n=e,r=!1;return null!=n.trackSelectionCallback&&(r=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(r=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(r=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),r&&Fn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ts(this.a,e)},Iu.prototype.configure=Iu.prototype.configure,Iu.prototype.getConfiguration=function(){var e=ws();return Ts(e,this.a,ws()),e},Iu.prototype.getConfiguration=Iu.prototype.getConfiguration,Iu.prototype.Ub=function(){return this.b},Iu.prototype.getNetworkingEngine=Iu.prototype.Ub,Iu.prototype.store=function(e,t,n){var r=this;return Vu(this,function(e,t,n,r){return h((function i(){var o,a,s,u,l,c,f,d,y;return N(i,(function(i){switch(i.j){case 1:return Bu(),e.f?i.return(Promise.reject(new de(2,9,9006))):(e.f=!0,T(i,function(e,t,n){return h((function r(){var i,o,a,s,u,l;return N(r,(function(r){switch(r.j){case 1:return i=null,o=e.b,a={networkingEngine:o,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},T(r,n(),2);case 2:return(s=r.s).configure(e.a.manifest),Fu(e),O(r,3),T(r,s.start(t,a),5);case 5:return u=r.s,Fu(e),l=function(e){for(var t=new Set,n=(e=p(e.periods)).next();!n.done;n=e.next()){for(var r=p((n=n.value).textStreams),i=r.next();!i.done;i=r.next())t.add(i.value);for(n=p(n.variants),r=n.next();!r.done;r=n.next())(r=r.value).audio&&t.add(r.audio),r.video&&t.add(r.video)}return t}(u),T(r,Promise.all(Ge(l,(function(e){return e.createSegmentIndex()}))),6);case 6:if(Fu(e),i)throw i;return r.return(u);case 3:return C(r),T(r,s.stop(),7);case 7:x(r,0)}}))}))}(e,t,r),2));case 2:if(o=i.s,Fu(e),!(!o.presentationTimeline.X()&&!o.presentationTimeline.bb()))throw new de(2,9,9005,t);return a=null,s=new Ya,l=u=null,A(i,3,4),T(i,function(e,t,n){return h((function r(){var i,o,a;return N(r,(function(r){switch(r.j){case 1:return i=new ft({Db:e.b,onError:n,yc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o=Do(t.periods),a=e.a,i.configure(a.drm),T(r,function(e,t,n){return e.u=[],e.G=n,dt(e,t)}(i,o,a.offline.usePersistentLicense),2);case 2:return T(r,ht(i),3);case 3:return T(r,yt(i),4);case 4:return r.return(i)}}))}))}(e,o,(function(e){l=l||e})),6);case 6:if(a=i.s,Fu(e),l)throw l;return T(i,function(e,t,n){return h((function r(){var i,o;return N(r,(function(r){switch(r.j){case 1:return i={width:1/0,height:1/0},function(e,t,n){for(var r=(e=p(e.periods)).next();!r.done;r=e.next())(r=r.value).variants=r.variants.filter((function(e){return Mn.ld(e,t,n)}))}(t,e.a.restrictions,i),function(e){for(var t=(e=p(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&gn(e.audio)),e.video&&(t=t&&gn(e.video)),t}))}(t),function(e,t){for(var n=p(e.periods),r=n.next();!r.done;r=n.next())(r=r.value).variants=r.variants.filter((function(e){return At(t,e)}))}(t,n),Pu(t),o=e.a.preferredAudioChannelCount,Mn.Vd(t,o),T(r,function(e,t){return h((function n(){var r,i,o,a;return N(n,(function(n){switch(n.j){case 1:r=null,i=p(e.periods),o=i.next();case 2:if(o.done){n.C(0);break}return a=o.value,r&&(a.variants=a.variants.filter((function(e){return xu(r,new Ru(e))}))),T(n,t(a),5);case 5:r=Du(a.variants),o=i.next(),n.C(2)}}))}))}(t,(function(t){return h((function n(){var r,i,o,a,s,u,l,c;return N(n,(function(n){switch(n.j){case 1:r=Mn,i=[];for(var f=p(t.variants),d=f.next();!d.done;d=f.next())o=d.value,i.push(r.Qd(o));for(d=(f=p(t.textStreams)).next();!d.done;d=f.next())a=d.value,i.push(r.Fc(a));return T(n,e.a.offline.trackSelectionCallback(i),2);case 2:for(s=n.s,u=new Set,l=new Set,d=(f=p(s)).next();!d.done;d=f.next())"variant"==(c=d.value).type&&u.add(c.id),"text"==c.type&&l.add(c.id);t.variants=t.variants.filter((function(e){return u.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return l.has(e.id)})),S(n)}}))}))})),2);case 2:(function(e){if(0==e.periods.length)throw new de(2,4,4014);for(var t=(e=p(e.periods)).next();!t.done;t=e.next())Gu(t.value)})(t),S(r)}}))}))}(e,o,a),7);case 7:return T(i,s.init(),8);case 8:return Fu(e),T(i,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{Aa:n,fa:r},fa:e})}))})),t)return t;throw new de(2,9,9013,"Could not find a cell that supports add-operations")}(s),9);case 9:return u=i.s,Fu(e),T(i,function(e,t,n,r,i,o){return h((function a(){var s,u,l,c,f,d,y,v,g,m;return N(a,(function(a){switch(a.j){case 1:return s=function(e,t,n){var r=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.ca(),size:0,expiration:r,tracks:t=wu(t.periods[0]),appMetadata:n}}(i,r,o),u=r.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos&&e.drmInfos.length}))})),l=r.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos.some((function(e){return e.initData&&e.initData.length}))}))})),f=null,(c=u&&!l)&&(d=n.a,f=Ku.get(d.keySystem)),y=new Ma(e.b,(function(t,n){s.size=n,e.a.offline.progressCallback(s,t)}),(function(t,r){c&&e.a.offline.usePersistentLicense&&f==r&&vt(n,"cenc",t)})),O(a,2),g=v=function(e,t,n,r,i,o,a){var s=new Tu,u=i.periods.map((function(r){return function(e,t,n,r,i,o){for(var a=p(o.variants),s=a.next();!s.done;s=a.next())Su(r,s.value);for(a=p(o.textStreams),s=a.next();!s.done;s=a.next())r.a[s.value.id]=52;a=function(e){for(var t=new Set,n=p(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=p(e.variants),n=e.next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}(o);var u=new Map;for(a=p(a),s=a.next();!s.done;s=a.next()){s=s.value;var l=Uu(e,t,n,r,i,s);u.set(s.id,l)}return o.variants.forEach((function(e){e.audio&&u.get(e.audio.id).variantIds.push(e.id),e.video&&u.get(e.video.id).variantIds.push(e.id)})),{startTime:o.startTime,streams:Array.from(u.values())}}(e,t,n,s,i,r)})),l=r.a,c=e.a.offline.usePersistentLicense;return l&&c&&(l.initData=[]),{originalManifestUri:o,duration:i.presentationTimeline.ca(),size:0,expiration:r.Tb(),periods:u,sessionIds:c?bt(r):[],drmInfo:l,appMetadata:a}}(e,y,t,n,r,i,o),T(a,function(e){return h((function t(){return N(t,(function(t){switch(t.j){case 1:return T(t,Promise.all(e.b.values()),2);case 2:return t.return(e.a.a)}}))}))}(y),4);case 4:if(g.size=a.s,v.expiration=n.Tb(),m=bt(n),v.sessionIds=e.a.offline.usePersistentLicense?m:[],u&&e.a.offline.usePersistentLicense&&!m.length)throw new de(2,9,9007);return a.return(v);case 2:return C(a),T(a,y.destroy(),5);case 5:x(a,0)}}))}))}(e,u.fa,a,o,t,n),10);case 10:if(c=i.s,Fu(e),l)throw l;return T(i,u.fa.addManifests([c]),11);case 11:return f=i.s,Fu(e),d=new is("manifest",u.path.Aa,u.path.fa,f[0]),i.return(Eu(d,c));case 4:return C(i),e.f=!1,e.c=[],T(i,s.destroy(),12);case 12:if(!a){i.C(13);break}return T(i,a.destroy(),13);case 13:x(i,0);break;case 3:if(y=R(i),!u){i.C(15);break}return T(i,u.fa.removeSegments(e.c,(function(){})),15);case 15:throw l||y}}))}))}(this,e,t||{},(function(){return h((function t(){var i,o;return N(t,(function(t){switch(t.j){case 1:return n&&"string"!=typeof n?(Fn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),i=n,t.return(new i)):T(t,di.create(e,r.b,r.a.manifest.retryParameters,n),2);case 2:return o=t.s,t.return(o)}}))}))})))},Iu.prototype.store=Iu.prototype.store,Iu.prototype.yf=function(){return this.f},Iu.prototype.getStoreInProgress=Iu.prototype.yf,Iu.prototype.remove=function(e){return Vu(this,function(e,t){return h((function n(){var r,i,o,a,s,u;return N(n,(function(n){switch(n.j){case 1:return Bu(),null==(r=os(t))||"manifest"!=r.a?n.return(Promise.reject(new de(2,9,9004,t))):(i=r,o=new Ya,O(n,2),T(n,o.init(),4));case 4:return T(n,qa(o,i.Aa(),i.fa()),5);case 5:return T(n,(a=n.s).getManifests([i.key()]),6);case 6:return s=n.s,u=s[0],T(n,Promise.all([Nu(e,u,o),ju(e,a,i,u)]),2);case 2:return C(n),T(n,o.destroy(),8);case 8:x(n,0)}}))}))}(this,e))},Iu.prototype.remove=Iu.prototype.remove,Iu.prototype.ig=function(){return Vu(this,function(e){return h((function t(){var n,r,i,o,a,s,u,l,c;return N(t,(function(t){switch(t.j){case 1:return Bu(),n=e.b,r=e.a.drm,i=new Ya,o=!1,O(t,2),T(t,i.init(),4);case 4:for(a=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return a.push(e)})),s=Promise.resolve(),u={},l=p(a),c=l.next();!c.done;u={Ec:u.Ec},c=l.next())u.Ec=c.value,s=s.then(function(e){return function(){return h((function t(){var i,a;return N(t,(function(t){switch(t.j){case 1:return T(t,e.Ec.getAll(),2);case 2:return i=t.s,T(t,ps(r,n,i),3);case 3:return a=t.s,T(t,e.Ec.remove(a),4);case 4:a.length!=i.length&&(o=!0),S(t)}}))}))}}(u));return T(t,s,2);case 2:return C(t),T(t,i.destroy(),6);case 6:x(t,3);break;case 3:return t.return(!o)}}))}))}(this))},Iu.prototype.removeEmeSessions=Iu.prototype.ig,Iu.prototype.list=function(){return Vu(this,h((function e(){var t,n,r;return N(e,(function(e){switch(e.j){case 1:return Bu(),t=[],n=new Ya,O(e,2),T(e,n.init(),4);case 4:return r=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){t({Aa:n,fa:r},e)}))}))}(n,(function(e,n){r=r.then((function(){return h((function r(){return N(r,(function(r){switch(r.j){case 1:return T(r,n.getAllManifests(),2);case 2:r.s.forEach((function(n,r){var i=Eu(new is("manifest",e.Aa,e.fa,r),n);t.push(i)})),S(r)}}))}))}))})),T(e,r,2);case 2:return C(e),T(e,n.destroy(),6);case 6:x(e,3);break;case 3:return e.return(t)}}))})))},Iu.prototype.list=Iu.prototype.list,Iu.deleteAll=function(){return h((function e(){var t;return N(e,(function(e){switch(e.j){case 1:return t=new Ya,O(e,2),T(e,t.erase(),2);case 2:return C(e),T(e,t.destroy(),5);case 5:x(e,0)}}))}))};var Ku=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Is.offline=Lu,G("shaka.polyfill.installAll",(function(){for(var e=0;e<Wu.length;++e)try{Wu[e].Qe()}catch(e){q.Z("Error installing polyfill!",e)}}));var Hu,zu,Wu=[];function Yu(e,t){for(var n={priority:t=t||0,Qe:e},r=0;r<Wu.length;r++)if(Wu[r].priority<t)return void Wu.splice(r,0,n);Wu.push(n)}function qu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Xu(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function $u(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return(n=e.apply(this,n)).abort=function(){},n}}function Ju(e,t){q.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new Qu(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Qu(e,t){if(q.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=p(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var o=!1,a=!1;if(i.audioCapabilities)for(var s=p(i.audioCapabilities),u=s.next();!u.done;u=s.next())if((u=u.value).contentType){o=!0;var l=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(r.audioCapabilities.push(u),a=!0)}if(i.videoCapabilities)for(u=(i=p(i.videoCapabilities)).next();!u.done;u=i.next())(s=u.value).contentType&&(o=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(r.videoCapabilities.push(s),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=a?r:null}if(r)return void(this.a=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Zu(e){q.debug("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&tl(t,null),delete this.mediaKeys,(this.mediaKeys=e)?tl(e,this):Promise.resolve()}function el(e){q.debug("PatchedMediaKeysApple.MediaKeys"),this.b=new WebKitMediaKeys(e),this.a=new je}function tl(e,t){if(e.a.hb(),!t)return Promise.resolve();e.a.B(t,"webkitneedkey",rl);try{return jo(t,HTMLMediaElement.HAVE_METADATA,e.a,(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function nl(e){q.debug("PatchedMediaKeysApple.MediaKeySession"),we.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new je,this.sessionId="",this.expiration=NaN,this.closed=new he,this.keyStatuses=new ol}function rl(e){if(q.debug("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=new Uint8Array(e.initData),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=at(e=it(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=e,this.dispatchEvent(t)}function il(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new ke("keystatuseschange"))}function ol(){this.size=0,this.a=void 0}function al(e,t){q.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var n=new sl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function sl(e,t){q.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=e;for(var n=!1,r=0;r<t.length;++r){var i=t[r],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},a=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var u=i.audioCapabilities[s];if(u.contentType){a=!0;var l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(o.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)(u=i.videoCapabilities[s]).contentType&&(a=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(o.videoCapabilities.push(u),n=!0));if(a||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.a=o)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function ul(e){q.debug("PatchedMediaKeysMs.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&cl(t,null),delete this.mediaKeys,(this.mediaKeys=e)?cl(e,this):Promise.resolve()}function ll(e){q.debug("PatchedMediaKeysMs.MediaKeys"),this.b=new MSMediaKeys(e),this.a=new je}function cl(e,t){if(e.a.hb(),!t)return Promise.resolve();e.a.B(t,"msneedkey",pl);try{return jo(t,HTMLMediaElement.HAVE_METADATA,e.a,(function(){t.msSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function fl(e){q.debug("PatchedMediaKeysMs.MediaKeySession"),we.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new je,this.sessionId="",this.expiration=NaN,this.closed=new he,this.keyStatuses=new hl}function pl(e){if(q.debug("PatchedMediaKeysMs.onMsNeedKey_",e),e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Nr(e);if(1>=t.data.length)return e;e=[];for(var n={},r=(t=p(t.data)).next();!r.done;n={tc:n.tc},r=t.next())n.tc=r.value,e.some(function(e){return function(t){return ct.Da(t,e.tc)}}(n))||e.push(n.tc);return ct.concat.apply(ct,e instanceof Array?e:function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(p(e)))}(e.initData).buffer,this.dispatchEvent(t)}}function dl(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new ke("keystatuseschange"))}function hl(){this.size=0,this.a=void 0}function yl(){return q.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function vl(e){return q.debug("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function gl(){throw new TypeError("Illegal constructor.")}function ml(){throw new TypeError("Illegal constructor.")}G("shaka.polyfill.register",Yu),Yu((function(){Rc()}),-1),Yu((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",qu),document.addEventListener("webkitfullscreenerror",qu),document.addEventListener("mozfullscreenchange",qu),document.addEventListener("mozfullscreenerror",qu),document.addEventListener("MSFullscreenChange",qu),document.addEventListener("MSFullscreenError",qu)}})),Yu((function(){q.debug("IndexedDB.install");var t=!1;if(Ze("CrKey"))q.debug("Removing IndexedDB from ChromeCast"),t=!0;else try{e.indexedDB&&(t=!1)}catch(e){q.debug("Removing IndexedDB due to an exception when accessing it"),t=!0}t&&delete e.indexedDB})),Yu((function(){q.debug("InputEvent.install"),Ze("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(q.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Xu)})),Yu((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Yu((function(){q.debug("mathRound.install")})),Yu((function(){q.debug("MediaSource.install");var t=Qe();e.MediaSource?e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(q.info("Patching Chromecast MSE bugs."),function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var r=n.split(/ *; */),i=r[0],o={},a=1;a<r.length;++a){var s=r[a].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),o[u]=s}if(!(r=o.codecs))return e(n);var l=!1,c=!1;for(var f in n=r.split(",").filter((function(e){return t.test(e)&&(c=!0),/^(hev|hvc)1\.2/.test(e)&&(l=!0),!0})),c&&(l=!1),o.codecs=n.join(","),l&&(o.eotf="smpte2084"),o)i+="; "+f+'="'+o[f]+'"';return cast.__platform__.canDisplayType(i)}}()):t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(q.info("Patching Safari 11 & 12 MSE bugs."),$u(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):(q.info("Patching Safari 13 MSE bugs."),$u())):Ze("Tizen 2")||Ze("Tizen 3")||Ze("Tizen 4")?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Ye(t)[0]&&e(t)}}():q.info("Using native MSE as-is."):q.info("No MSE implementation available.")})),Qu.prototype.createMediaKeys=function(){q.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new el(this.keySystem);return Promise.resolve(e)},Qu.prototype.getConfiguration=function(){return q.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.a},el.prototype.createSession=function(e){if(q.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new nl(this.b,e)},el.prototype.setServerCertificate=function(e){return q.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),e&&new Uint8Array(e),Promise.resolve(!0)},K(nl,we),(r=nl.prototype).generateRequest=function(e,t){q.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.a=new he;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.B(this.b,"webkitkeymessage",this.yg.bind(this)),this.f.B(this.b,"webkitkeyadded",this.wg.bind(this)),this.f.B(this.b,"webkitkeyerror",this.xg.bind(this)),il(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},r.load=function(){return q.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){q.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.c=new he;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},r.close=function(){q.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.b.close(),this.closed.resolve(),this.f.hb()}catch(e){this.closed.reject(e)}return this.closed},r.remove=function(){return q.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},r.yg=function(e){q.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new ke("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},r.wg=function(e){q.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",e),this.c&&(il(this,"usable"),this.c.resolve(),this.c=null)},r.xg=function(e){if(q.debug("PatchedMediaKeysApple.onWebkitKeyError_",e),(e=Error("EME PatchedMediaKeysApple key error")).errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:il(this,"output-not-allowed");break;default:il(this,"internal-error")}},(r=ol.prototype).forEach=function(e){this.a&&e(this.a,Hu)},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=Hu;return!(!this.a||!ct.Da(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Yu((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(q.info("Using Apple-prefixed EME"),Hu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Zu,e.MediaKeys=el,e.MediaKeySystemAccess=Qu,navigator.requestMediaKeySystemAccess=Ju)})),sl.prototype.createMediaKeys=function(){q.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var e=new ll(this.keySystem);return Promise.resolve(e)},sl.prototype.getConfiguration=function(){return q.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.a},ll.prototype.createSession=function(e){if(q.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new fl(this.b,e)},ll.prototype.setServerCertificate=function(){return q.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)},K(fl,we),(r=fl.prototype).generateRequest=function(e,t){q.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.a=new he;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.B(this.c,"mskeymessage",this.Uf.bind(this)),this.f.B(this.c,"mskeyadded",this.Sf.bind(this)),this.f.B(this.c,"mskeyerror",this.Tf.bind(this)),dl(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},r.load=function(){return q.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){q.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.b=new he;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},r.close=function(){q.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.c.close(),this.closed.resolve(),this.f.hb()}catch(e){this.closed.reject(e)}return this.closed},r.remove=function(){return q.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},r.Uf=function(e){q.debug("PatchedMediaKeysMs.onMsKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new ke("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},r.Sf=function(e){q.debug("PatchedMediaKeysMs.onMsKeyAdded_",e),this.a?(q.debug("Simulating completion for a PR persistent license."),dl(this,"usable"),this.a.resolve(),this.a=null):this.b&&(dl(this,"usable"),this.b.resolve(),this.b=null)},r.Tf=function(e){if(q.debug("PatchedMediaKeysMs.onMsKeyError_",e),(e=Error("EME PatchedMediaKeysMs key error")).errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:dl(this,"output-not-allowed");break;default:dl(this,"internal-error")}},(r=hl.prototype).forEach=function(e){this.a&&e(this.a,zu)},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=zu;return!(!this.a||!ct.Da(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Yu((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(q.info("Using ms-prefixed EME v20140218"),zu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ul,e.MediaKeys=ll,e.MediaKeySystemAccess=sl,navigator.requestMediaKeySystemAccess=al)})),gl.prototype.createSession=function(){},gl.prototype.setServerCertificate=function(){},ml.prototype.getConfiguration=function(){},ml.prototype.createMediaKeys=function(){},Yu((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(q.info("EME not available."),navigator.requestMediaKeySystemAccess=yl,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=vl,e.MediaKeys=gl,e.MediaKeySystemAccess=ml)}),-10);var bl,_l="";function kl(e){return _l?_l+e.charAt(0).toUpperCase()+e.slice(1):e}function El(e,t){q.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new Tl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function wl(e){q.debug("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&Al(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Al(e,this),Promise.resolve()}function Tl(e,t){q.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var o=0;o<t.length;++o){var a=t[o],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},u=!1;if(a.audioCapabilities)for(var l=0;l<a.audioCapabilities.length;++l){var c=a.audioCapabilities[l];if(c.contentType){u=!0;var f=c.contentType.split(";")[0];i.canPlayType(f,this.a)&&(s.audioCapabilities.push(c),r=!0)}}if(a.videoCapabilities)for(l=0;l<a.videoCapabilities.length;++l)(c=a.videoCapabilities[l]).contentType&&(u=!0,i.canPlayType(c.contentType,this.a)&&(s.videoCapabilities.push(c),r=!0));if(u||(r=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Sl(e){q.debug("PatchedMediaKeysWebkit.MediaKeys"),this.g=e,this.b=null,this.a=new je,this.c=[],this.f={}}function Al(e,t){e.b=t,e.a.hb();var n=_l;t&&(e.a.B(t,n+"needkey",e.Yf.bind(e)),e.a.B(t,n+"keymessage",e.Bg.bind(e)),e.a.B(t,n+"keyadded",e.zg.bind(e)),e.a.B(t,n+"keyerror",e.Ag.bind(e)))}function Ol(e,t){var n=e.f[t];return n?(q.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.c.shift())?(n.sessionId=t,e.f[t]=n,q.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function Pl(e,t,n){q.debug("PatchedMediaKeysWebkit.MediaKeySession"),we.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new he,this.keyStatuses=new xl}function Rl(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var r=new Uint8Array(at("LOAD_SESSION|"+n));else{var i=at("PERSISTENT|"),o=new Uint8Array(i.byteLength+t.byteLength);o.set(new Uint8Array(i),0),o.set(new Uint8Array(t),i.byteLength),r=o}else r=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new he;var a=kl("generateKeyRequest");try{e.f[a](e.c,r)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new ce((function(){try{e.f[a](e.c,r)}catch(t){e.b.reject(t),e.b=null}})).T(.01)}return e.b}function Cl(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new ke("keystatuseschange"))}function xl(){this.size=0,this.a=void 0}function Dl(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Il(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Ll(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Ml(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Nl(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function jl(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Ul(t,n,r){return new e.TextTrackCue(t,n,r)}function Fl(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Bl(){}Tl.prototype.createMediaKeys=function(){q.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new Sl(this.a);return Promise.resolve(e)},Tl.prototype.getConfiguration=function(){return q.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.b},(r=Sl.prototype).createSession=function(e){if(q.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Pl(t,this.g,e),this.c.push(e),e},r.setServerCertificate=function(){return q.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},r.Yf=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",e);var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e.initData instanceof ArrayBuffer?t.initData=e.initData:t.initData=e.initData.buffer,this.b.dispatchEvent(t)},r.Bg=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",e);var t=Ol(this,e.sessionId);t?(e=new ke("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),q.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e)):q.error("Session not found",e.sessionId)},r.zg=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",e),(e=Ol(this,e.sessionId))&&(q.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),Cl(e,"usable"),e.a&&e.a.resolve(),e.a=null)},r.Ag=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",e);var t=Ol(this,e.sessionId);t&&t.handleError(e)},K(Pl,we),(r=Pl.prototype).handleError=function(e){q.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Cl(this,"output-restricted"):Cl(this,1==t?"expired":"internal-error"))},r.Kd=function(e,t){if(this.a)this.a.then(this.Kd.bind(this,e,t)).catch(this.Kd.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=rt(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=ct.Fa(r.keys[0].k),r=ct.Fa(r.keys[0].kid)}else n=new Uint8Array(t),r=null;var i=kl("addKey");try{this.f[i](this.c,n,r,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},r.generateRequest=function(e,t){return q.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),Rl(this,t,null)},r.load=function(e){return q.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.g?Rl(this,null,e):Promise.reject(Error("Not a persistent session."))},r.update=function(e){q.debug("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new he;return this.Kd(t,e),t},r.close=function(){if(q.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=kl("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},r.remove=function(){return q.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(r=xl.prototype).forEach=function(e){this.a&&e(this.a,bl)},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=bl;return!(!this.a||!ct.Da(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Yu((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)q.info("Using webkit-prefixed EME v0.1b"),_l="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;q.info("Using nonprefixed EME v0.1b")}bl=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=El,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=wl,e.MediaKeys=Sl,e.MediaKeySystemAccess=Tl}})),Yu((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(q.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Il,Object.defineProperty(t,"disablePictureInPicture",{get:Ml,set:Nl,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Ll,document.addEventListener("webkitpresentationmodechanged",Dl,!0))}})),Yu((function(){if(q.debug("VideoPlayPromise.install"),e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),Yu((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=jl)}})),Yu((function(){if(e.VTTCue)q.info("Using native VTTCue.");else if(e.TextTrackCue){var t=TextTrackCue.length;if(3==t)q.info("Using VTTCue polyfill from 3 argument TextTrackCue."),e.VTTCue=Ul;else if(6==t)q.info("Using VTTCue polyfill from 6 argument TextTrackCue."),e.VTTCue=Fl;else{try{var n=!!Ul(1,2,"")}catch(e){n=!1}n&&(q.info("Using VTTCue polyfill from 3 argument TextTrackCue."),e.VTTCue=Ul)}}else q.error("VTTCue not available.")})),G("shaka.text.TtmlTextParser",Bl),Bl.prototype.parseInit=function(){},Bl.prototype.parseInit=Bl.prototype.parseInit,Bl.prototype.parseMedia=function(e,t){var n=rt(e),r=[],i=new DOMParser,o=null;if(""==n)return r;try{o=i.parseFromString(n,"text/xml")}catch(e){throw new de(2,2,2005,"Failed to parse TTML.")}if(o){if(n=o.getElementsByTagName("parsererror")[0])throw new de(2,2,2005,n.textContent);if(!(i=o.getElementsByTagName("tt")[0]))throw new de(2,2,2005,"TTML does not contain <tt> tag.");var a=jr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=jr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=jr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),l=jr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","tickRate");if(o=i.getAttribute("xml:space")||"default",n=i.getAttribute("tts:extent"),"default"!=o&&"preserve"!=o)throw new de(2,2,2005,"Invalid xml:space value: "+o);o="default"==o,a=new lc(a,s,u,l),s=ec(i.getElementsByTagName("metadata")[0]),u=ec(i.getElementsByTagName("styling")[0]),l=ec(i.getElementsByTagName("layout")[0]);for(var c=[],f=0;f<l.length;f++){var d,h,y=l[f],v=u,g=n,m=new sn,b=y.getAttribute("xml:id");if(b)m.id=b,b=null,g&&(b=Kl.exec(g)||zl.exec(g)),g=b?Number(b[1]):null,b=b?Number(b[2]):null,(d=ic(y,v,"extent"))&&(null!=(d=(h=Kl.exec(d))||zl.exec(d))&&(m.width=null!=g?100*Number(d[1])/g:Number(d[1]),m.height=null!=b?100*Number(d[2])/b:Number(d[2]),m.widthUnits=h||null!=g?un:0,m.heightUnits=h||null!=b?un:0)),(y=ic(y,v,"origin"))&&(null!=(d=(h=Kl.exec(y))||zl.exec(y))&&(m.viewportAnchorX=null!=b?100*Number(d[1])/b:Number(d[1]),m.viewportAnchorY=null!=g?100*Number(d[2])/g:Number(d[2]),m.viewportAnchorUnits=h||null!=g?un:0));else q.m("TtmlTextParser parser encountered a region with no id. Region will be ignored."),m=null;m&&c.push(m)}for(n=function e(t){if(!t)return[];for(var n=[],r=(t=p(t.childNodes)).next();!r.done;r=t.next())(r=r.value)instanceof Element&&(r.hasAttribute("begin")?n.push(r):n=n.concat(e(r)));return n}(i.getElementsByTagName("body")[0]),i=(n=p(n)).next();!i.done;i=n.next())(i=tc(i.value,t.periodStart,a,s,u,l,c,o,!1))&&r.push(i)}return r},Bl.prototype.parseMedia=Bl.prototype.parseMedia;var Vl,Gl,Kl=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Hl=/^(\d+px|\d+em)$/,zl=/^(\d+)px (\d+)px$/,Wl=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Yl=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,ql=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Xl=/^(\d*(?:\.\d*)?)f$/,$l=/^(\d*(?:\.\d*)?)t$/,Jl=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Ql={left:tn,center:"center",right:"end",start:tn,end:"end"},Zl={left:"line-left",center:"center",right:"line-right"};function ec(e){var t=[];if(!e)return t;for(var n=p(e.childNodes),r=n.next();!r.done;r=n.next())(r=r.value).nodeType==Node.ELEMENT_NODE&&"br"!==r.nodeName&&(r=ec(r),t=t.concat(r));return t.length||t.push(e),t}function tc(e,t,n,r,i,o,a,s,u){if(u&&"br"==e.nodeName)return(e=new Wt(0,0,"")).spacer=!0,e;var l=/^[\s\n]*$/.test(e.textContent),c=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||c&&l||c&&!u)return null;l=sc(e.getAttribute("begin"),n),c=sc(e.getAttribute("end"),n);var f=sc(e.getAttribute("dur"),n);if(null==c&&null!=f&&(c=l+f),!u&&(null==l||null==c))throw new de(2,2,2001);if(l=u&&null==l?0:l+t,c=u&&null==c?0:c+t,f="",u=[],Array.from(e.childNodes).find((function(e){return e.nodeType===Node.TEXT_NODE&&/\S+/.test(e.textContent)})))f=function e(t,n){for(var r="",i=p(t.childNodes),o=i.next();!o.done;o=i.next())"br"==(o=o.value).nodeName&&t.childNodes[0]!==o?r+="\n":o.childNodes&&0<o.childNodes.length?r+=e(o,n):n?r+=o=(o=o.textContent.trim()).replace(/\s+/g," "):r+=o.textContent;return r}(e,s);else for(var d=p(e.childNodes),h=d.next();!h.done;h=d.next())(h=tc(h.value,t,n,r,i,o,a,s,!0))&&(h.startTime=h.startTime||l,h.endTime=h.endTime||c,u.push(h));if((t=new Wt(l,c,f)).nestedCues=u,(o=ac(e,"region",o,"")[0])&&o.getAttribute("xml:id")){var y=o.getAttribute("xml:id");t.region=a.filter((function(e){return e.id==y}))[0]}return function(e,t,n,r,i){"rtl"==rc(t,n,i,"direction")&&(e.direction="rtl");var o=rc(t,n,i,"writingMode");"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=Qt),(o=rc(t,n,i,"textAlign"))?(e.positionAlign=Zl[o],e.lineAlign=Ql[o],e.textAlign=Xt[o.toUpperCase()]):e.textAlign="start",(o=rc(t,n,i,"displayAlign"))&&(e.displayAlign=Jt[o.toUpperCase()]);(o=rc(t,n,i,"color"))&&(e.color=o);(o=rc(t,n,i,"backgroundColor"))&&(e.backgroundColor=o);(o=rc(t,n,i,"fontFamily"))&&(e.fontFamily=o);(o=rc(t,n,i,"fontWeight"))&&"bold"==o&&(e.fontWeight=700),(o=rc(t,n,i,"wrapOption"))&&"noWrap"==o&&(e.wrapLine=!1),(o=rc(t,n,i,"lineHeight"))&&o.match(Hl)&&(e.lineHeight=o),(o=rc(t,n,i,"fontSize"))&&o.match(Hl)&&(e.fontSize=o),(o=rc(t,n,i,"fontStyle"))&&(e.fontStyle=an[o.toUpperCase()]);if(r){o=r.getAttribute("imagetype");var a=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==o&&"Base64"==a&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(n=ic(n,i,"textDecoration"))&&nc(e,n),(t=oc(t,i,"textDecoration"))&&nc(e,t)}(t,e,o,r=ac(e,"smpte:backgroundImage",r,"#")[0],i),t}function nc(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ae(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ae(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ae(e.textDecoration,"overline")}}function rc(e,t,n,r){return(e=oc(e,n,r))?e:ic(t,n,r)}function ic(e,t,n){for(var r=ec(e),i=0;i<r.length;i++){var o=jr.getAttributeNS(r[i],"http://www.w3.org/ns/ttml#styling",n);if(o)return o}return(e=ac(e,"style",t,"")[0])?jr.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function oc(e,t,n){var r=jr.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n);if(r)return r;for(e=ac(e,"style",t,""),t=null,r=0;r<e.length;r++){var i=jr.getAttributeNS(e[r],"http://www.w3.org/ns/ttml#styling",n);i&&(t=i)}return t}function ac(e,t,n,r){var i=[];if(!e||1>n.length)return i;var o=e;for(e=null;o&&!(e=o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(e=(t=p(t=t.split(" "))).next();!e.done;e=t.next()){e=e.value;for(var a=(o=p(n)).next();!a.done;a=o.next())if(r+(a=a.value).getAttribute("xml:id")==e){i.push(a);break}}return i}function sc(e,t){var n=null;if(Wl.test(e)){n=Wl.exec(e);var r=Number(n[1]),i=Number(n[2]),o=Number(n[3]),a=Number(n[4]);n=(o+=(a+=(Number(n[5])||0)/t.b)/t.frameRate)+60*i+3600*r}else Yl.test(e)?n=uc(Yl,e):ql.test(e)?n=uc(ql,e):Xl.test(e)?(n=Xl.exec(e),n=Number(n[1])/t.frameRate):$l.test(e)?(n=$l.exec(e),n=Number(n[1])/t.a):Jl.test(e)&&(n=uc(Jl,e));return n}function uc(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function lc(e,t,n,r){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(r),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function cc(){this.a=new Bl}function fc(){}function pc(e,t,n){var r;if(r=/^align:(start|middle|center|end|left|right)$/.exec(t))t=r[1],e.textAlign="middle"==t?qt:Xt[t.toUpperCase()];else if(r=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl";else if(r=/^size:([\d.]+)%$/.exec(t))e.size=Number(r[1]);else if(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center");else{if(!(r=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=nn[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.lineInterpretation=en,e.line=Number(n[1]),n[2]&&(e.lineAlign=nn[n[2].toUpperCase()])}e=!0}return e}(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:(q.m("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}(n,r[1]))&&(e.region=t)}return!0}function dc(e){if(null==(e=Ii(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function hc(){this.a=null}function yc(e,t,n){var r,i,o;return(new Cr).L("payl",Ir((function(e){r=rt(e)}))).L("iden",Ir((function(e){i=rt(e)}))).L("sttg",Ir((function(e){o=rt(e)}))).parse(e),r?function(e,t,n,r,i){if(e=new Wt(r,i,e),t&&(e.id=t),n)for(t=new xi(n),n=Li(t);n;)pc(e,n,[])||q.m("VTT parser encountered an invalid VTT setting: ",n," The setting will be ignored."),Di(t),n=Li(t);return e}(r,i,o,t,n):null}
/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function vc(){}function gc(){Vl?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Vl=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=mc):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function mc(e,t){var n=this;return h((function r(){var i;return N(r,(function(r){switch(r.j){case 1:return console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),T(r,Vl.call(n,e,t),2);case 2:return Oc(i=r.s)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Vl,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=bc,r.return(bc.call(n,e,t)))}}))}))}function bc(e,t){var n=this;return h((function r(){var i,o,a,s,u,l,c,f;return N(r,(function(r){switch(r.j){case 1:console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=Ac(e),o=[];for(var d=p(t),h=d.next();!h.done;h=d.next())a=h.value,s=_c(a.videoCapabilities,i),u=_c(a.audioCapabilities,i),a.videoCapabilities&&a.videoCapabilities.length&&!s.length||a.audioCapabilities&&a.audioCapabilities.length&&!u.length||((l=Object.assign({},a)).videoCapabilities=s,l.audioCapabilities=u,o.push(l));if(!o.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return T(r,Vl.call(n,e,o),2);case 2:return f=r.s,r.return(new Sc(f,i))}}))}))}function _c(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function kc(){}function Ec(){navigator.mediaCapabilities?(Gl=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=wc):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function wc(e){var t=this;return h((function n(){var r;return N(n,(function(n){switch(n.j){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),T(n,Gl.call(t,e),2);case 2:return r=n.s,e.keySystemConfiguration?Oc(r.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Gl,n.return(r)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Tc,n.return(Tc.call(t,e))):n.return(r)}}))}))}function Tc(e){var t=this;return h((function n(){var r,i,o,a,s,u,l;return N(n,(function(n){switch(n.j){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,o=i.keySystem,a=i.audio&&i.audio.encryptionScheme,s=i.video&&i.video.encryptionScheme,r=Ac(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},a&&a!=r||s&&s!=r)?n.return(u):T(n,Gl.call(t,e),2);case 2:return(l=n.s).keySystemAccess&&(l.keySystemAccess=new Sc(l.keySystemAccess,r)),n.return(l)}}))}))}function Sc(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function Ac(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Oc(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Pc(){}function Rc(){gc(),Ec()}fn["application/ttml+xml"]=Bl,G("shaka.text.Mp4TtmlParser",cc),cc.prototype.parseInit=function(e){var t=!1;if((new Cr).L("moov",xr).L("trak",xr).L("mdia",xr).L("minf",xr).L("stbl",xr).ia("stsd",Dr).L("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new de(2,2,2007)},cc.prototype.parseInit=cc.prototype.parseInit,cc.prototype.parseMedia=function(e,t){var n=!1,r=[];if((new Cr).L("mdat",Ir(function(e){n=!0,r=r.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new de(2,2,2007);return r},cc.prototype.parseMedia=cc.prototype.parseMedia,fn['application/mp4; codecs="stpp"']=cc,fn['application/mp4; codecs="stpp.ttml.im1t"']=cc,fn['application/mp4; codecs="stpp.TTML.im1t"']=cc,G("shaka.text.VttTextParser",fc),fc.prototype.parseInit=function(){},fc.prototype.parseInit=fc.prototype.parseInit,fc.prototype.parseMedia=function(e,t){var n=rt(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new de(2,2,2e3);var r=t.segmentStart;if(null==r&&(r=0,n[0].includes("X-TIMESTAMP-MAP"))){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=n[0].match(/MPEGTS:(\d+)/m);if(i&&o){if(null==(r=dc(new xi(i[1]))))throw new de(2,2,2e3);r=t.periodStart+(Number(o[1])/9e4-r)}}o=[];var a=n[0].split("\n");for(i=1;i<a.length;i++)if(/^Region:/.test(a[i])){var s=new xi(a[i]),u=new sn;Li(s),Di(s);for(var l=Li(s);l;){var c;e:{var f=u,p=l;if(c=/^id=(.*)$/.exec(p))f.id=c[1];else if(c=/^width=(\d{1,2}|100)%$/.exec(p))f.width=Number(c[1]);else if(c=/^lines=(\d+)$/.exec(p))f.height=Number(c[1]),f.heightUnits=2;else if(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))f.regionAnchorX=Number(c[1]),f.regionAnchorY=Number(c[2]);else if(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))f.viewportAnchorX=Number(c[1]),f.viewportAnchorY=Number(c[2]);else{if(!/^scroll=up$/.exec(p)){c=!1;break e}f.scroll="up"}c=!0}c||q.m("VTT parser encountered an invalid VTTRegion setting: ",l," The setting will be ignored."),Di(s),l=Li(s)}o.push(u)}for(i=[],s=1;s<n.length;s++){if(c=a=n[s].split("\n"),f=r,a=o,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])a=null;else{u=null,c[0].includes("--\x3e")||(u=c[0],c.splice(0,1)),p=dc(l=new xi(c[0]));var d=Ii(l,/[ \t]+--\x3e[ \t]+/g),h=dc(l);if(null==p||null==d||null==h)throw new de(2,2,2001);for(c=new Wt(p+f,h+f,c.slice(1).join("\n").trim()),Di(l),f=Li(l);f;)pc(c,f,a)||q.m("VTT parser encountered an invalid VTT setting: ",f," The setting will be ignored."),Di(l),f=Li(l);null!=u&&(c.id=u),a=c}a&&i.push(a)}return i},fc.prototype.parseMedia=fc.prototype.parseMedia,fn["text/vtt"]=fc,fn['text/vtt; codecs="vtt"']=fc,G("shaka.text.Mp4VttParser",hc),hc.prototype.parseInit=function(e){var t=!1;if((new Cr).L("moov",xr).L("trak",xr).L("mdia",xr).ia("mdhd",function(e){0==e.version?(e.reader.P(4),e.reader.P(4),this.a=e.reader.I(),e.reader.P(4)):(e.reader.P(8),e.reader.P(8),this.a=e.reader.I(),e.reader.P(8)),e.reader.P(4)}.bind(this)).L("minf",xr).L("stbl",xr).ia("stsd",Dr).L("wvtt",(function(){t=!0})).parse(e),!this.a)throw new de(2,2,2008);if(!t)throw new de(2,2,2008)},hc.prototype.parseInit=hc.prototype.parseInit,hc.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw q.error("No init segment for MP4+VTT!"),new de(2,2,2008);var r,i=0,o=[],a=[],s=!1,u=!1,l=!1,c=null;if((new Cr).L("moof",xr).L("traf",xr).ia("tfdt",(function(e){s=!0,i=0==e.version?e.reader.I():e.reader.Kb()})).ia("tfhd",(function(e){var t=e.flags;(e=e.reader).P(4),1&t&&e.P(8),2&t&&e.P(4),c=8&t?e.I():null})).ia("trun",(function(e){u=!0;var t=e.version,n=e.flags,r=(e=e.reader).I();1&n&&e.P(4),4&n&&e.P(4);for(var i=[],a=0;a<r;a++){var s={duration:null,sampleSize:null,Md:null};256&n&&(s.duration=e.I()),512&n&&(s.sampleSize=e.I()),1024&n&&e.P(4),2048&n&&(s.Md=0==t?e.I():e.xe()),i.push(s)}o=i})).L("mdat",Ir((function(e){l=!0,r=e}))).parse(e),!l&&!s&&!u)throw new de(2,2,2008);var f=i,p=new Or(new DataView(r.buffer,r.byteOffset,r.byteLength),0);return o.forEach((function(e){var r=e.duration||c,o=e.Md?i+e.Md:f;f=o+(r||0);var s=0;do{var u=p.I();s+=u;var l=p.I(),d=null;"vttc"==(l=Mr(l))?8<u&&(d=p.gb(u-8)):("vtte"!=l&&q.error("Unknown box "+l+"! Skipping!"),p.P(u-8)),r?d&&a.push(yc(d,t.periodStart+o/n.a,t.periodStart+f/n.a)):q.error("WVTT sample duration unknown, and no default found!")}while(e.sampleSize&&s<e.sampleSize)})),a.filter(Ft.Ma)},hc.prototype.parseMedia=hc.prototype.parseMedia,fn['application/mp4; codecs="wvtt"']=hc,G("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),G("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),G("shaka.util.Dom.asHTMLElement",(function(e){return e})),G("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),G("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})),G("EmeEncryptionSchemePolyfill",vc),vc.install=gc,G("McEncryptionSchemePolyfill",kc),kc.install=Ec,Sc.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=p(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=p(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},Sc.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},G("EncryptionSchemePolyfills",Pc),Pc.install=Rc,void 0!==n&&n.$e&&(n.$e=Pc)}.call(r,n,n,void 0),r.shaka)t[i]=r.shaka[i]}()}).call(this,n(94))},function(e,t,n){e.exports=!n(10)&&!n(4)((function(){return 7!=Object.defineProperty(n(66)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(3),i=n(9),o=n(34),a=n(67),s=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(15),i=n(17),o=n(54)(!1),a=n(68)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var r=n(11),i=n(5),o=n(35);e.exports=n(10)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(17),i=n(38).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r=n(10),i=n(35),o=n(55),a=n(50),s=n(12),u=n(49),l=Object.assign;e.exports=!l||n(4)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=s(e),l=arguments.length,c=1,f=o.f,p=a.f;l>c;)for(var d,h=u(arguments[c++]),y=f?i(h).concat(f(h)):i(h),v=y.length,g=0;v>g;)d=y[g++],r&&!p.call(h,d)||(n[d]=h[d]);return n}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(22),i=n(6),o=n(104),a=[].slice,s={},u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(3).parseInt,i=n(43).trim,o=n(72),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(3).parseFloat,i=n(43).trim;e.exports=1/r(n(72)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(27);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(6),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(37),i=n(32),o=n(42),a={};n(16)(a,n(7)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(5);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(223);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(22),i=n(12),o=n(49),a=n(8);e.exports=function(e,t,n,s,u){r(t);var l=i(e),c=o(l),f=a(l.length),p=u?f-1:0,d=u?-1:1;if(n<2)for(;;){if(p in c){s=c[p],p+=d;break}if(p+=d,u?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;u?p>=0:f>p;p+=d)p in c&&(s=t(s,c[p],p,l));return s}},function(e,t,n){"use strict";var r=n(12),i=n(36),o=n(8);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:i(l,a))-u,a-s),f=1;for(u<s&&s<u+c&&(f=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(87);n(1)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(10)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(58)})},function(e,t,n){"use strict";var r,i,o,a,s=n(34),u=n(3),l=n(21),c=n(51),f=n(1),p=n(6),d=n(22),h=n(46),y=n(61),v=n(52),g=n(89).set,m=n(243)(),b=n(119),_=n(244),k=n(62),E=n(120),w=u.TypeError,T=u.process,S=T&&T.versions,A=S&&S.v8||"",O=u.Promise,P="process"==c(T),R=function(){},C=i=b.f,x=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(7)("species")]=function(e){e(R,R)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==A.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(e){}}(),D=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},I=function(e,t){if(!e._n){e._n=!0;var n=e._c;m((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(i||(2==e._h&&N(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?l(w("Promise-chain cycle")):(o=D(n))?o.call(n,u,l):u(n)):l(r)}catch(e){c&&!a&&c.exit(),l(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&L(e)}))}},L=function(e){g.call(u,(function(){var t,n,r,i=e._v,o=M(e);if(o&&(t=_((function(){P?T.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=P||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){g.call(u,(function(){var t;P?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},j=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),I(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=D(e))?m((function(){var r={_w:n,_d:!1};try{t.call(e,l(U,r,1),l(j,r,1))}catch(e){j.call(r,e)}})):(n._v=e,n._s=1,I(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};x||(O=function(e){h(this,O,"Promise","_h"),d(e),r.call(this);try{e(l(U,this,1),l(j,this,1))}catch(e){j.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(47)(O.prototype,{then:function(e,t){var n=C(v(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(U,e,1),this.reject=l(j,e,1)},b.f=C=function(e){return e===O||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!x,{Promise:O}),n(42)(O,"Promise"),n(45)("Promise"),a=n(9).Promise,f(f.S+f.F*!x,"Promise",{reject:function(e){var t=C(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!x),"Promise",{resolve:function(e){return E(s&&this===a?O:this,e)}}),f(f.S+f.F*!(x&&n(57)((function(e){O.all(e).catch(R)}))),"Promise",{all:function(e){var t=this,n=C(t),r=n.resolve,i=n.reject,o=_((function(){var n=[],o=0,a=1;y(e,!1,(function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=C(t),r=n.reject,i=_((function(){y(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(22);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){var r=n(5),i=n(6),o=n(119);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(11).f,i=n(37),o=n(47),a=n(21),s=n(46),u=n(61),l=n(78),c=n(115),f=n(45),p=n(10),d=n(31).fastKey,h=n(41),y=p?"_s":"size",v=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var c=e((function(e,r){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[y]=0,null!=r&&u(r,n,e[l],e)}));return o(c.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[y]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[y]--}return!!r},forEach:function(e){h(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),p&&r(c.prototype,"size",{get:function(){return h(this,t)[y]}}),c},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[y]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){l(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))}),n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(47),i=n(31).getWeak,o=n(5),a=n(6),s=n(46),u=n(61),l=n(26),c=n(15),f=n(41),p=l(5),d=l(6),h=0,y=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return p(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=r&&u(r,n,e[o],e)}));return r(l.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?y(f(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?y(f(this,t)).has(e):n&&c(n,this._i)}}),l},def:function(e,t,n){var r=i(o(t),!0);return!0===r?y(e).set(t,n):r[e._i]=n,e},ufstore:y}},function(e,t,n){var r=n(23),i=n(8);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(38),i=n(55),o=n(5),a=n(3).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(8),i=n(74),o=n(28);e.exports=function(e,t,n,a){var s=String(o(e)),u=s.length,l=void 0===n?" ":String(n),c=r(t);if(c<=u||""==l)return s;var f=c-u,p=i.call(l,Math.ceil(f/l.length));return p.length>f&&(p=p.slice(0,f)),a?p+s:s+p}},function(e,t,n){var r=n(10),i=n(35),o=n(17),a=n(50).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),l=u.length,c=0,f=[];l>c;)n=u[c++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";n(130);var r,i=(r=n(302))&&r.__esModule?r:{default:r};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(e,t,n){"use strict";n(131),n(274),n(276),n(279),n(281),n(283),n(285),n(287),n(289),n(291),n(293),n(295),n(297),n(301)},function(e,t,n){n(132),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(213),n(214),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(86),n(237),n(116),n(238),n(117),n(239),n(240),n(241),n(242),n(118),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),e.exports=n(9)},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(10),a=n(1),s=n(13),u=n(31).KEY,l=n(4),c=n(53),f=n(42),p=n(33),d=n(7),h=n(67),y=n(97),v=n(134),g=n(56),m=n(5),b=n(6),_=n(12),k=n(17),E=n(30),w=n(32),T=n(37),S=n(100),A=n(24),O=n(55),P=n(11),R=n(35),C=A.f,x=P.f,D=S.f,I=r.Symbol,L=r.JSON,M=L&&L.stringify,N=d("_hidden"),j=d("toPrimitive"),U={}.propertyIsEnumerable,F=c("symbol-registry"),B=c("symbols"),V=c("op-symbols"),G=Object.prototype,K="function"==typeof I&&!!O.f,H=r.QObject,z=!H||!H.prototype||!H.prototype.findChild,W=o&&l((function(){return 7!=T(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=C(G,t);r&&delete G[t],x(e,t,n),r&&e!==G&&x(G,t,r)}:x,Y=function(e){var t=B[e]=T(I.prototype);return t._k=e,t},q=K&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},X=function(e,t,n){return e===G&&X(V,t,n),m(e),t=E(t,!0),m(n),i(B,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=T(n,{enumerable:w(0,!1)})):(i(e,N)||x(e,N,w(1,{})),e[N][t]=!0),W(e,t,n)):x(e,t,n)},$=function(e,t){m(e);for(var n,r=v(t=k(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},J=function(e){var t=U.call(this,e=E(e,!0));return!(this===G&&i(B,e)&&!i(V,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,N)&&this[N][e])||t)},Q=function(e,t){if(e=k(e),t=E(t,!0),e!==G||!i(B,t)||i(V,t)){var n=C(e,t);return!n||!i(B,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(k(e)),r=[],o=0;n.length>o;)i(B,t=n[o++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===G,r=D(n?V:k(e)),o=[],a=0;r.length>a;)!i(B,t=r[a++])||n&&!i(G,t)||o.push(B[t]);return o};K||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(V,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),W(this,e,w(1,n))};return o&&z&&W(G,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function(){return this._k})),A.f=Q,P.f=X,n(38).f=S.f=Z,n(50).f=J,O.f=ee,o&&!n(34)&&s(G,"propertyIsEnumerable",J,!0),h.f=function(e){return Y(d(e))}),a(a.G+a.W+a.F*!K,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var re=R(d.store),ie=0;re.length>ie;)y(re[ie++]);a(a.S+a.F*!K,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=I(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!K,"Object",{create:function(e,t){return void 0===t?T(e):$(T(e),t)},defineProperty:X,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=l((function(){O.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return O.f(_(e))}}),L&&a(a.S+a.F*(!K||l((function(){var e=I();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),r[1]=t,M.apply(L,r)}}),I.prototype[j]||n(16)(I.prototype,j,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(53)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(35),i=n(55),o=n(50);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var r=n(1);r(r.S,"Object",{create:n(37)})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(10),"Object",{defineProperty:n(11).f})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(10),"Object",{defineProperties:n(99)})},function(e,t,n){var r=n(17),i=n(24).f;n(25)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(12),i=n(39);n(25)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(12),i=n(35);n(25)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(25)("getOwnPropertyNames",(function(){return n(100).f}))},function(e,t,n){var r=n(6),i=n(31).onFreeze;n(25)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(6),i=n(31).onFreeze;n(25)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(6),i=n(31).onFreeze;n(25)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(6);n(25)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(6);n(25)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(6);n(25)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(101)})},function(e,t,n){var r=n(1);r(r.S,"Object",{is:n(102)})},function(e,t,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(71).set})},function(e,t,n){"use strict";var r=n(51),i={};i[n(7)("toStringTag")]="z",i+""!="[object z]"&&n(13)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(1);r(r.P,"Function",{bind:n(103)})},function(e,t,n){var r=n(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(10)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(6),i=n(39),o=n(7)("hasInstance"),a=Function.prototype;o in a||n(11).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(1),i=n(105);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(1),i=n(106);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(27),a=n(73),s=n(30),u=n(4),l=n(38).f,c=n(24).f,f=n(11).f,p=n(43).trim,d=r.Number,h=d,y=d.prototype,v="Number"==o(n(37)(y)),g="trim"in String.prototype,m=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=g?t.trim():p(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,u=t.slice(2),l=0,c=u.length;l<c;l++)if((a=u.charCodeAt(l))<48||a>i)return NaN;return parseInt(u,r)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof d&&(v?u((function(){y.valueOf.call(n)})):"Number"!=o(n))?a(new h(m(t)),n,d):m(t)};for(var b,_=n(10)?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;_.length>k;k++)i(h,b=_[k])&&!i(d,b)&&f(d,b,c(h,b));d.prototype=y,y.constructor=d,n(13)(r,"Number",d)}},function(e,t,n){"use strict";var r=n(1),i=n(23),o=n(107),a=n(74),s=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*l[n],l[n]=r%1e7,r=u(r/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=u(n/e),n=n%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},h=function(e,t,n){return 0===t?n:t%2==1?h(e,t-1,n*e):h(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,u=o(this,c),l=i(e),y="",v="0";if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(u*h(2,69,1))-69)<0?u*h(2,-t,1):u/h(2,t,1),n*=4503599627370496,(t=52-t)>0){for(f(0,n),r=l;r>=7;)f(1e7,0),r-=7;for(f(h(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),f(1,1),p(2),v=d()}else f(0,n),f(1<<-t,0),v=d()+a.call("0",l);return v=l>0?y+((s=v.length)<=l?"0."+a.call("0",l-s)+v:v.slice(0,s-l)+"."+v.slice(s-l)):y+v}})},function(e,t,n){"use strict";var r=n(1),i=n(4),o=n(107),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(1),i=n(3).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(1);r(r.S,"Number",{isInteger:n(108)})},function(e,t,n){var r=n(1);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(1),i=n(108),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(1),i=n(106);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(1),i=n(105);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(1),i=n(109),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var r=n(1),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(1),i=n(75);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(1),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(1),i=n(76);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(1);r(r.S,"Math",{fround:n(177)})},function(e,t,n){var r=n(75),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),l=r(e);return i<u?l*(i/u/a+1/o-1/o)*u*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?l*(1/0):l*n}},function(e,t,n){var r=n(1),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(e,t,n){var r=n(1),i=Math.imul;r(r.S+r.F*n(4)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log1p:n(109)})},function(e,t,n){var r=n(1);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(1);r(r.S,"Math",{sign:n(75)})},function(e,t,n){var r=n(1),i=n(76),o=Math.exp;r(r.S+r.F*n(4)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(1),i=n(76),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(1),i=n(36),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(1),i=n(17),o=n(8);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(43)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(77)(!0);n(78)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(1),i=n(77)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(1),i=n(8),o=n(79),a="".endsWith;r(r.P+r.F*n(81)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),u=String(e);return a?a.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){"use strict";var r=n(1),i=n(79);r(r.P+r.F*n(81)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(1);r(r.P,"String",{repeat:n(74)})},function(e,t,n){"use strict";var r=n(1),i=n(8),o=n(79),a="".startsWith;r(r.P+r.F*n(81)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(14)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(14)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(14)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(14)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(14)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(14)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(14)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(14)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(14)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(14)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(14)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(14)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(14)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(1),i=n(12),o=n(30);r(r.P+r.F*n(4)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(1),i=n(212);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(13)(r,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,n){var r=n(7)("toPrimitive"),i=Date.prototype;r in i||n(16)(i,r,n(215))},function(e,t,n){"use strict";var r=n(5),i=n(30);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(1);r(r.S,"Array",{isArray:n(56)})},function(e,t,n){"use strict";var r=n(21),i=n(1),o=n(12),a=n(111),s=n(82),u=n(8),l=n(83),c=n(84);i(i.S+i.F*!n(57)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,f,p=o(e),d="function"==typeof this?this:Array,h=arguments.length,y=h>1?arguments[1]:void 0,v=void 0!==y,g=0,m=c(p);if(v&&(y=r(y,h>2?arguments[2]:void 0,2)),null==m||d==Array&&s(m))for(n=new d(t=u(p.length));t>g;g++)l(n,g,v?y(p[g],g):p[g]);else for(f=m.call(p),n=new d;!(i=f.next()).done;g++)l(n,g,v?a(f,y,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(1),i=n(83);r(r.S+r.F*n(4)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(1),i=n(17),o=[].join;r(r.P+r.F*(n(49)!=Object||!n(20)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(1),i=n(70),o=n(27),a=n(36),s=n(8),u=[].slice;r(r.P+r.F*n(4)((function(){i&&u.call(i)})),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),l=a(t,n),c=s(l-i),f=new Array(c),p=0;p<c;p++)f[p]="String"==r?this.charAt(i+p):this[i+p];return f}})},function(e,t,n){"use strict";var r=n(1),i=n(22),o=n(12),a=n(4),s=[].sort,u=[1,2,3];r(r.P+r.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!n(20)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(1),i=n(26)(0),o=n(20)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(6),i=n(56),o=n(7)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(1),i=n(26)(1);r(r.P+r.F*!n(20)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(26)(2);r(r.P+r.F*!n(20)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(26)(3);r(r.P+r.F*!n(20)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(26)(4);r(r.P+r.F*!n(20)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(113);r(r.P+r.F*!n(20)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(1),i=n(113);r(r.P+r.F*!n(20)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(1),i=n(54)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(20)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(17),o=n(23),a=n(8),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(20)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(1);r(r.P,"Array",{copyWithin:n(114)}),n(40)("copyWithin")},function(e,t,n){var r=n(1);r(r.P,"Array",{fill:n(85)}),n(40)("fill")},function(e,t,n){"use strict";var r=n(1),i=n(26)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(40)("find")},function(e,t,n){"use strict";var r=n(1),i=n(26)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(40)(o)},function(e,t,n){n(45)("Array")},function(e,t,n){var r=n(3),i=n(73),o=n(11).f,a=n(38).f,s=n(80),u=n(58),l=r.RegExp,c=l,f=l.prototype,p=/a/g,d=/a/g,h=new l(p)!==p;if(n(10)&&(!h||n(4)((function(){return d[n(7)("match")]=!1,l(p)!=p||l(d)==d||"/a/i"!=l(p,"i")})))){l=function(e,t){var n=this instanceof l,r=s(e),o=void 0===t;return!n&&r&&e.constructor===l&&o?e:i(h?new c(r&&!o?e.source:e,t):c((r=e instanceof l)?e.source:e,r&&o?u.call(e):t),n?this:f,l)};for(var y=function(e){e in l||o(l,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},v=a(c),g=0;v.length>g;)y(v[g++]);f.constructor=l,l.prototype=f,n(13)(r,"RegExp",l)}n(45)("RegExp")},function(e,t,n){"use strict";n(117);var r=n(5),i=n(58),o=n(10),a=/./.toString,s=function(e){n(13)(RegExp.prototype,"toString",e,!0)};n(4)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(5),i=n(8),o=n(88),a=n(59);n(60)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=r(e),l=String(this);if(!u.global)return a(u,l);var c=u.unicode;u.lastIndex=0;for(var f,p=[],d=0;null!==(f=a(u,l));){var h=String(f[0]);p[d]=h,""===h&&(u.lastIndex=o(l,i(u.lastIndex),c)),d++}return 0===d?null:p}]}))},function(e,t,n){"use strict";var r=n(5),i=n(12),o=n(8),a=n(23),s=n(88),u=n(59),l=Math.max,c=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(60)("replace",2,(function(e,t,n,h){return[function(r,i){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=h(n,e,this,t);if(i.done)return i.value;var f=r(e),p=String(this),d="function"==typeof t;d||(t=String(t));var v=f.global;if(v){var g=f.unicode;f.lastIndex=0}for(var m=[];;){var b=u(f,p);if(null===b)break;if(m.push(b),!v)break;""===String(b[0])&&(f.lastIndex=s(p,o(f.lastIndex),g))}for(var _,k="",E=0,w=0;w<m.length;w++){b=m[w];for(var T=String(b[0]),S=l(c(a(b.index),p.length),0),A=[],O=1;O<b.length;O++)A.push(void 0===(_=b[O])?_:String(_));var P=b.groups;if(d){var R=[T].concat(A,S,p);void 0!==P&&R.push(P);var C=String(t.apply(void 0,R))}else C=y(T,p,S,A,P,t);S>=E&&(k+=p.slice(E,S)+C,E=S+T.length)}return k+p.slice(E)}];function y(e,t,r,o,a,s){var u=r+e.length,l=o.length,c=d;return void 0!==a&&(a=i(a),c=p),n.call(s,c,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>l){var p=f(c/10);return 0===p?n:p<=l?void 0===o[p-1]?i.charAt(1):o[p-1]+i.charAt(1):n}s=o[c-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(5),i=n(102),o=n(59);n(60)("search",1,(function(e,t,n,a){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),u=String(this),l=s.lastIndex;i(l,0)||(s.lastIndex=0);var c=o(s,u);return i(s.lastIndex,l)||(s.lastIndex=l),null===c?-1:c.index}]}))},function(e,t,n){"use strict";var r=n(80),i=n(5),o=n(52),a=n(88),s=n(8),u=n(59),l=n(87),c=n(4),f=Math.min,p=[].push,d="length",h=!c((function(){RegExp(4294967295,"y")}));n(60)("split",2,(function(e,t,n,c){var y;return y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[d]||2!="ab".split(/(?:ab)*/)[d]||4!=".".split(/(.?)(.?)/)[d]||".".split(/()()/)[d]>1||"".split(/.?/)[d]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,c+"g");(o=l.call(y,i))&&!((a=y.lastIndex)>f&&(u.push(i.slice(f,o.index)),o[d]>1&&o.index<i[d]&&p.apply(u,o.slice(1)),s=o[0][d],f=a,u[d]>=h));)y.lastIndex===o.index&&y.lastIndex++;return f===i[d]?!s&&y.test("")||u.push(""):u.push(i.slice(f)),u[d]>h?u.slice(0,h):u}:"0".split(void 0,0)[d]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):y.call(String(i),n,r)},function(e,t){var r=c(y,e,this,t,y!==n);if(r.done)return r.value;var l=i(e),p=String(this),d=o(l,RegExp),v=l.unicode,g=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(h?"y":"g"),m=new d(h?l:"^(?:"+l.source+")",g),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===p.length)return null===u(m,p)?[p]:[];for(var _=0,k=0,E=[];k<p.length;){m.lastIndex=h?k:0;var w,T=u(m,h?p:p.slice(k));if(null===T||(w=f(s(m.lastIndex+(h?0:k)),p.length))===_)k=a(p,k,v);else{if(E.push(p.slice(_,k)),E.length===b)return E;for(var S=1;S<=T.length-1;S++)if(E.push(T[S]),E.length===b)return E;k=_=w}}return E.push(p.slice(_)),E}]}))},function(e,t,n){var r=n(3),i=n(89).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(27)(a);e.exports=function(){var e,t,n,l=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var f=!0,p=document.createTextNode("");new o(l).observe(p,{characterData:!0}),n=function(){p.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(121),i=n(41);e.exports=n(63)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(121),i=n(41);e.exports=n(63)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(3),o=n(26)(0),a=n(13),s=n(31),u=n(101),l=n(122),c=n(6),f=n(41),p=n(41),d=!i.ActiveXObject&&"ActiveXObject"in i,h=s.getWeak,y=Object.isExtensible,v=l.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(c(e)){var t=h(e);return!0===t?v(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(f(this,"WeakMap"),e,t)}},b=e.exports=n(63)("WeakMap",g,m,l,!0,!0);p&&d&&(u((r=l.getConstructor(g,"WeakMap")).prototype,m),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=b.prototype,n=t[e];a(t,e,(function(t,i){if(c(t)&&!y(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var r=n(122),i=n(41);n(63)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(1),i=n(64),o=n(90),a=n(5),s=n(36),u=n(8),l=n(6),c=n(3).ArrayBuffer,f=n(52),p=o.ArrayBuffer,d=o.DataView,h=i.ABV&&c.isView,y=p.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(c!==p),{ArrayBuffer:p}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return h&&h(e)||l(e)&&v in e}}),r(r.P+r.U+r.F*n(4)((function(){return!new p(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==y&&void 0===t)return y.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(f(this,p))(u(i-r)),l=new d(this),c=new d(o),h=0;r<i;)c.setUint8(h++,l.getUint8(r++));return o}}),n(45)("ArrayBuffer")},function(e,t,n){var r=n(1);r(r.G+r.W+r.F*!n(64).ABV,{DataView:n(90).DataView})},function(e,t,n){n(29)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(29)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(29)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(29)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(29)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(29)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(29)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(29)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(29)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(1),i=n(22),o=n(5),a=(n(3).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(4)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),u=o(n);return a?a(r,t,u):s.call(r,t,u)}})},function(e,t,n){var r=n(1),i=n(37),o=n(22),a=n(5),s=n(6),u=n(4),l=n(103),c=(n(3).Reflect||{}).construct,f=u((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),p=!u((function(){c((function(){}))}));r(r.S+r.F*(f||p),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(p&&!f)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),h=Function.apply.call(e,d,t);return s(h)?h:d}})},function(e,t,n){var r=n(11),i=n(1),o=n(5),a=n(30);i(i.S+i.F*n(4)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(1),i=n(24).f,o=n(5);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(1),i=n(5),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(110)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){var r=n(24),i=n(39),o=n(15),a=n(1),s=n(6),u=n(5);a(a.S,"Reflect",{get:function e(t,n){var a,l,c=arguments.length<3?t:arguments[2];return u(t)===c?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:s(l=i(t))?e(l,n,c):void 0}})},function(e,t,n){var r=n(24),i=n(1),o=n(5);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(1),i=n(39),o=n(5);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(1),i=n(5),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{ownKeys:n(124)})},function(e,t,n){var r=n(1),i=n(5),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(11),i=n(24),o=n(39),a=n(15),s=n(1),u=n(32),l=n(5),c=n(6);s(s.S,"Reflect",{set:function e(t,n,s){var f,p,d=arguments.length<4?t:arguments[3],h=i.f(l(t),n);if(!h){if(c(p=o(t)))return e(p,n,s,d);h=u(0)}if(a(h,"value")){if(!1===h.writable||!c(d))return!1;if(f=i.f(d,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(d,n,f)}else r.f(d,n,u(0,s));return!0}return void 0!==h.set&&(h.set.call(d,s),!0)}})},function(e,t,n){var r=n(1),i=n(71);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(275),e.exports=n(9).Array.includes},function(e,t,n){"use strict";var r=n(1),i=n(54)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(40)("includes")},function(e,t,n){n(277),e.exports=n(9).Array.flatMap},function(e,t,n){"use strict";var r=n(1),i=n(278),o=n(12),a=n(8),s=n(22),u=n(112);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=u(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(40)("flatMap")},function(e,t,n){"use strict";var r=n(56),i=n(6),o=n(8),a=n(21),s=n(7)("isConcatSpreadable");e.exports=function e(t,n,u,l,c,f,p,d){for(var h,y,v=c,g=0,m=!!p&&a(p,d,3);g<l;){if(g in u){if(h=m?m(u[g],g,n):u[g],y=!1,i(h)&&(y=void 0!==(y=h[s])?!!y:r(h)),y&&f>0)v=e(t,n,h,o(h.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=h}v++}g++}return v}},function(e,t,n){n(280),e.exports=n(9).String.padStart},function(e,t,n){"use strict";var r=n(1),i=n(125),o=n(62),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(282),e.exports=n(9).String.padEnd},function(e,t,n){"use strict";var r=n(1),i=n(125),o=n(62),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(284),e.exports=n(9).String.trimLeft},function(e,t,n){"use strict";n(43)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){n(286),e.exports=n(9).String.trimRight},function(e,t,n){"use strict";n(43)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){n(288),e.exports=n(67).f("asyncIterator")},function(e,t,n){n(97)("asyncIterator")},function(e,t,n){n(290),e.exports=n(9).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(1),i=n(124),o=n(17),a=n(24),s=n(83);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,l=i(r),c={},f=0;l.length>f;)void 0!==(n=u(r,t=l[f++]))&&s(c,t,n);return c}})},function(e,t,n){n(292),e.exports=n(9).Object.values},function(e,t,n){var r=n(1),i=n(126)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){n(294),e.exports=n(9).Object.entries},function(e,t,n){var r=n(1),i=n(126)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";n(118),n(296),e.exports=n(9).Promise.finally},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(3),a=n(52),s=n(120);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){n(298),n(299),n(300),e.exports=n(9)},function(e,t,n){var r=n(3),i=n(1),o=n(62),a=[].slice,s=/MSIE .\./.test(o),u=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(1),i=n(89);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(86),i=n(35),o=n(13),a=n(3),s=n(16),u=n(44),l=n(7),c=l("iterator"),f=l("toStringTag"),p=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(d),y=0;y<h.length;y++){var v,g=h[y],m=d[g],b=a[g],_=b&&b.prototype;if(_&&(_[c]||s(_,c,p),_[f]||s(_,f,g),u[g]=p,m))for(v in r)_[v]||o(_,v,r[v],!0)}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var i=t&&t.prototype instanceof c?t:c,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function c(){}function f(){}function p(){}var d={};d[i]=function(){return this};var h=Object.getPrototypeOf,y=h&&h(h(w([])));y&&y!==t&&n.call(y,i)&&(d=y);var v=p.prototype=c.prototype=Object.create(d);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function m(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function w(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=v.constructor=p,p.constructor=f,p[a]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(m.prototype),m.prototype[o]=function(){return this},e.AsyncIterator=m,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new m(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(v),v[a]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){n(303),e.exports=n(127).global},function(e,t,n){var r=n(304);r(r.G,{global:n(91)})},function(e,t,n){var r=n(91),i=n(127),o=n(305),a=n(307),s=n(314),u=function(e,t,n){var l,c,f,p=e&u.F,d=e&u.G,h=e&u.S,y=e&u.P,v=e&u.B,g=e&u.W,m=d?i:i[t]||(i[t]={}),b=m.prototype,_=d?r:h?r[t]:(r[t]||{}).prototype;for(l in d&&(n=t),n)(c=!p&&_&&void 0!==_[l])&&s(m,l)||(f=c?_[l]:n[l],m[l]=d&&"function"!=typeof _[l]?n[l]:v&&c?o(f,r):g&&_[l]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):y&&"function"==typeof f?o(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[l]=f,e&u.R&&b&&!b[l]&&a(b,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(306);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(308),i=n(313);e.exports=n(93)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(309),i=n(310),o=n(312),a=Object.defineProperty;t.f=n(93)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(92);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(93)&&!n(128)((function(){return 7!=Object.defineProperty(n(311)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(92),i=n(91).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(92);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";(function(e){var t=n(48),r=n(2);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,o;return n=t,o=[{key:"install",value:function(){if(e.performance&&e.performance.now)t._logger.debug("No need to install polyfill");else{t._logger.debug("Installing polyfill");var n=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-n}}}}],(r=null)&&i(n.prototype,r),o&&i(n,o),t}();o(a,"id","performance.now"),o(a,"_logger",Object(r.b)("PerformanceNowPolyfill")),t.a.register(a)}).call(this,n(94))},function(e,t,n){(function(e,t){var n;(n=void 0!==e&&"[object process]"==={}.toString.call(e)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?t:self).Proxy||(n.Proxy=function(){function e(){return null}function t(e){return!!e&&("object"==typeof e||"function"==typeof e)}function n(e){if(null!==e&&!t(e))throw new TypeError("Object prototype may only be an Object or null: "+e)}var r=null,i=Object,o=!(!i.create&&{__proto__:null}instanceof i),a=i.create||(o?function(e){return n(e),{__proto__:e}}:function(e){function t(){}if(n(e),null===e)throw new SyntaxError("Native Object.create is required to create objects with null prototype");return t.prototype=e,new t}),s=i.getPrototypeOf||([].__proto__===Array.prototype?function(e){return t(e=e.__proto__)?e:null}:e),u=function(l,c){function f(){}if(void 0===(this&&this instanceof u?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!t(l)||!t(c))throw new TypeError("Cannot create proxy with a non-object as target or handler");r=function(){l=null,f=function(e){throw new TypeError("Cannot perform '"+e+"' on a proxy that has been revoked")}},setTimeout((function(){r=null}),0);var p=c;for(var d in c={get:null,set:null,apply:null,construct:null},p){if(!(d in c))throw new TypeError("Proxy polyfill does not support trap '"+d+"'");c[d]=p[d]}"function"==typeof p&&(c.apply=p.apply.bind(p)),p=s(l);var h=!1,y=!1;if("function"==typeof l){var v=function(){var e=this&&this.constructor===v,t=Array.prototype.slice.call(arguments);return f(e?"construct":"apply"),e&&c.construct?c.construct.call(this,l,t):!e&&c.apply?c.apply(l,this,t):e?(t.unshift(l),new(l.bind.apply(l,t))):l.apply(this,t)};h=!0}else l instanceof Array?(v=[],y=!0):v=o||null!==p?a(p):{};var g=c.get?function(e){return f("get"),c.get(this,e,v)}:function(e){return f("get"),this[e]},m=c.set?function(e,t){f("set"),c.set(this,e,t,v)}:function(e,t){f("set"),this[e]=t},b={};if(i.getOwnPropertyNames(l).forEach((function(e){if(!h&&!y||!(e in v)){var t=i.getOwnPropertyDescriptor(l,e);i.defineProperty(v,e,{enumerable:!!t.enumerable,get:g.bind(l,e),set:m.bind(l,e)}),b[e]=!0}})),d=!0,h||y){var _=i.setPrototypeOf||([].__proto__===Array.prototype?function(e,t){return n(t),e.__proto__=t,e}:e);p&&_(v,p)||(d=!1)}if(c.get||!d)for(var k in l)b[k]||i.defineProperty(v,k,{get:g.bind(l,k)});return i.seal(l),i.seal(v),v};return u.revocable=function(e,t){return{proxy:new u(e,t),revoke:r}},u}(),n.Proxy.revocable=n.Proxy.revocable)}).call(this,n(317),n(94))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,f=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!c){var e=s(p);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||c||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r,i;window,e.exports=(r=n(0),i=n(319),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=r},function(e,t){e.exports=i},function(e){e.exports=JSON.parse('{"recoverDecodingErrorDelay":3000,"recoverSwapAudioCodecDelay":3000,"abr":{"enabled":true,"restrictions":{}},"hlsConfig":{"fragLoadingMaxRetry":4,"maxMaxBufferLength":60}}')},function(e,t,n){"use strict";n.r(t),n.d(t,"VERSION",(function(){return N})),n.d(t,"NAME",(function(){return j}));var r,i=n(0),o=n(1),a=n.n(o),s=n(2);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(u(r={},a.a.ErrorDetails.MANIFEST_LOAD_ERROR,{category:i.Error.Category.MANIFEST,code:i.Error.Code.HTTP_ERROR}),u(r,a.a.ErrorDetails.MANIFEST_LOAD_TIMEOUT,{category:i.Error.Category.MANIFEST,code:i.Error.Code.TIMEOUT}),u(r,a.a.ErrorDetails.MANIFEST_PARSING_ERROR,{category:i.Error.Category.MANIFEST,code:i.Error.Code.HLSJS_CANNOT_PARSE}),u(r,a.a.ErrorDetails.LEVEL_LOAD_ERROR,{category:i.Error.Category.NETWORK,code:i.Error.Code.HTTP_ERROR}),u(r,a.a.ErrorDetails.LEVEL_LOAD_TIMEOUT,{category:i.Error.Category.NETWORK,code:i.Error.Code.TIMEOUT}),u(r,a.a.ErrorDetails.LEVEL_SWITCH_ERROR,{category:i.Error.Category.PLAYER,code:i.Error.Code.BITRATE_SWITCH_ISSUE}),u(r,a.a.ErrorDetails.FRAG_LOAD_ERROR,{category:i.Error.Category.NETWORK,code:i.Error.Code.HTTP_ERROR}),u(r,a.a.ErrorDetails.FRAG_LOOP_LOADING_ERROR,{category:i.Error.Category.NETWORK,code:i.Error.Code.HTTP_ERROR}),u(r,a.a.ErrorDetails.FRAG_LOAD_TIMEOUT,{category:i.Error.Category.NETWORK,code:i.Error.Code.TIMEOUT}),u(r,a.a.ErrorDetails.FRAG_PARSING_ERROR,{category:i.Error.Category.MEDIA,code:i.Error.Code.HLS_FRAG_PARSING_ERROR}),u(r,a.a.ErrorDetails.BUFFER_APPEND_ERROR,{category:i.Error.Category.MEDIA,code:i.Error.Code.HLS_BUFFER_APPEND_ISSUE}),u(r,a.a.ErrorDetails.BUFFER_APPENDING_ERROR,{category:i.Error.Category.MEDIA,code:i.Error.Code.HLS_BUFFER_APPENDING_ISSUE}),u(r,a.a.ErrorDetails.BUFFER_STALLED_ERROR,{category:i.Error.Category.MEDIA,code:i.Error.Code.HLS_BUFFER_STALLED_ERROR}),r);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=r.call(this,e),e&&e.readystatechange&&(t.readystatechange=e.readystatechange),t}return t=i,(n=[{key:"loadInternal",value:function(){var e,t=this,n=this.context;e=this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i,o=this.xhrSetup;try{if(o)try{i=o(e,n.url,n)}catch(t){e.open("GET",n.url,!0),i=o(e,n.url,n)}e.readyState||e.open("GET",n.url,!0)}catch(e){i=Promise.reject(e)}(i=i||Promise.resolve()).then((function(){n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=t.readystatechange.bind(t),e.onprogress=t.loadprogress.bind(t),e.responseType=n.responseType,t.requestTimeout=window.setTimeout(t.loadtimeout.bind(t),t.config.timeout),e.send()})).catch((function(r){t.callbacks.onError({code:e.status,text:r.message},n,e)}))}}])&&f(t.prototype,n),i}(a.a.DefaultConfig.loader);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k,E,w,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}(n);function n(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var o=(r=t.call(this,e)).load.bind(b(r)),a=n.redirectExternalStreamsHandler;return r.load=function(e,t,r){var s=e.url;"manifest"===e.type?i.Utils.Http.jsonp(s,a,{timeout:n.redirectExternalStreamsTimeout}).then((function(n){e.url=n,o(e,t,r)})).catch((function(){return o(e,t,r)})):o(e,t,r)},r}return n}(y);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}w=function(e,t){return t},(E="redirectExternalStreamsHandler")in(k=T)?Object.defineProperty(k,E,{value:w,enumerable:!0,configurable:!0,writable:!0}):k[E]=w;var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}(n);function n(e,r,o){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),n._logger.debug("Creating adapter. Hls version: "+a.a.version),L(D(u=t.call(this,e,r,o)),"_hlsjsLib",a.a),L(D(u),"_triedReloadWithRedirect",!1),L(D(u),"_startTime",0),L(D(u),"_lastTimeDetach",0),L(D(u),"_requestFilterError",!1),L(D(u),"_responseFilterError",!1),u._config=i.Utils.Object.mergeDeep({},s,u._config),u._init(),u}return R(n,null,[{key:"createAdapter",value:function(e,t,n){var r=i.Utils.Object.copyDeep(s);if(i.Utils.Object.hasPropertyPath(n,"sources.options")){var o=n.sources.options;r.forceRedirectExternalStreams=o.forceRedirectExternalStreams,r.redirectExternalStreamsHandler=o.redirectExternalStreamsHandler,r.redirectExternalStreamsTimeout=o.redirectExternalStreamsTimeout,T.redirectExternalStreamsHandler=r.redirectExternalStreamsHandler,T.redirectExternalStreamsTimeout=r.redirectExternalStreamsTimeout}if(i.Utils.Object.hasPropertyPath(n,"playback.startTime")&&i.Utils.Object.getPropertyPath(n,"playback.startTime")>-1&&(r.hlsConfig.startPosition=n.playback.startTime),i.Utils.Object.hasPropertyPath(n,"playback.useNativeTextTrack")&&(r.subtitleDisplay=i.Utils.Object.getPropertyPath(n,"playback.useNativeTextTrack")),i.Utils.Object.hasPropertyPath(n,"abr.fpsDroppedFramesInterval")&&(r.hlsConfig.fpsDroppedFramesInterval=n.abr.fpsDroppedFramesInterval),i.Utils.Object.hasPropertyPath(n,"abr.fpsDroppedMonitoringThreshold")&&(r.hlsConfig.fpsDroppedMonitoringThreshold=n.abr.fpsDroppedMonitoringThreshold),i.Utils.Object.hasPropertyPath(n,"abr.capLevelOnFPSDrop")&&(r.hlsConfig.capLevelOnFPSDrop=n.abr.capLevelOnFPSDrop),r.hlsConfig.enableCEA708Captions=n.playback.enableCEA708Captions,r.hlsConfig.captionsTextTrack1Label=n.playback.captionsTextTrack1Label,r.hlsConfig.captionsTextTrack1LanguageCode=n.playback.captionsTextTrack1LanguageCode,r.hlsConfig.captionsTextTrack2Label=n.playback.captionsTextTrack2Label,r.hlsConfig.captionsTextTrack2LanguageCode=n.playback.captionsTextTrack2LanguageCode,i.Utils.Object.hasPropertyPath(n,"abr")){var a=n.abr;"boolean"==typeof a.enabled&&(r.abr.enabled=a.enabled),"boolean"==typeof a.capLevelToPlayerSize&&(r.hlsConfig.capLevelToPlayerSize=a.capLevelToPlayerSize),a.defaultBandwidthEstimate&&(r.hlsConfig.abrEwmaDefaultEstimate=a.defaultBandwidthEstimate),a.restrictions&&(a.restrictions.minBitrate>0&&(r.hlsConfig.minAutoBitrate=a.restrictions.minBitrate),a.restrictions.maxBitrate<1/0&&(r.hlsConfig.capLevelToPlayerSize=!1,r.abr.restrictions=a.restrictions))}return i.Utils.Object.hasPropertyPath(n,"playback.options.html5.hls")&&i.Utils.Object.mergeDeep(r.hlsConfig,n.playback.options.html5.hls),r.network=n.network,new this(e,t,r)}},{key:"canPlayType",value:function(e){var t="string"==typeof e&&n._hlsMimeTypes.includes(e.toLowerCase())&&n.isMSESupported();return n._logger.debug("canPlayType result for mimeType:"+e+" is "+t.toString()),t}},{key:"canPlayDrm",value:function(){return n._logger.warn("canPlayDrm result is false"),!1}},{key:"isSupported",value:function(){var e=a.a.isSupported();return n._logger.debug("isSupported:"+e),e}}]),R(n,[{key:"_init",value:function(){this._config.forceRedirectExternalStreams&&(this._config.hlsConfig.pLoader=T),this._maybeSetFilters(),this._hls=new a.a(this._config.hlsConfig),this._capabilities.fpsControl=!0,this._hls.subtitleDisplay=this._config.subtitleDisplay,this._addBindings()}},{key:"_maybeSetFilters",value:function(){var e=this;if("function"==typeof i.Utils.Object.getPropertyPath(this._config,"network.requestFilter")&&(n._logger.debug("Register request filter"),i.Utils.Object.mergeDeep(this._config.hlsConfig,{loader:y,xhrSetup:function(t,n,r){var o,a={url:n,body:null,headers:{}};try{"manifest"===r.type&&(o=e._config.network.requestFilter(i.RequestType.MANIFEST,a)),r.frag&&"subtitle"!==r.frag.type&&(o=e._config.network.requestFilter(i.RequestType.SEGMENT,a))}catch(e){o=Promise.reject(e)}return(o=o||Promise.resolve(a)).then((function(e){r.url=e.url,t.open("GET",e.url,!0),Object.entries(e.headers).forEach((function(e){t.setRequestHeader.apply(t,function(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))}))})).catch((function(t){throw e._requestFilterError=!0,t}))}})),"function"==typeof i.Utils.Object.getPropertyPath(this._config,"network.responseFilter")){var t=this;n._logger.debug("Register response filter"),i.Utils.Object.mergeDeep(this._config.hlsConfig,{loader:y,readystatechange:function(e){var r=this,o=e.currentTarget,a=o.readyState,s=this.stats,u=this.context,l=this.config;if(!s.aborted&&a>=2)if(window.clearTimeout(this.requestTimeout),0===s.tfirst&&(s.tfirst=Math.max(performance.now(),s.trequest)),4===a){var c=o.status;if(c>=200&&c<300){var f,p;s.tload=Math.max(s.tfirst,performance.now()),p="arraybuffer"===u.responseType?(f=o.response).byteLength:(f=o.responseText).length,s.loaded=s.total=p;var d,h={url:o.responseURL,originalUrl:u.url,data:f,headers:i.Utils.Http.convertHeadersToDictionary(o.getAllResponseHeaders())};try{"manifest"===u.type&&(d=t._config.network.responseFilter(i.RequestType.MANIFEST,h)),u.frag&&"subtitle"!==u.frag.type&&(d=t._config.network.responseFilter(i.RequestType.SEGMENT,h))}catch(e){d=Promise.reject(e)}return(d=d||Promise.resolve(h)).then((function(e){r.callbacks.onSuccess(e,s,u,o)})).catch((function(e){t._responseFilterError=!0,r.callbacks.onError({code:c,text:e.message},u,o)}))}s.retry>=l.maxRetry||c>=400&&c<499?(n._logger.error("".concat(c," while loading ").concat(u.url)),this.callbacks.onError({code:c,text:o.statusText},u,o)):(n._logger.warn("".concat(c," while loading ").concat(u.url,", retrying in ").concat(this.retryDelay,"...")),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,l.maxRetryDelay),s.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),l.timeout)}})}}},{key:"_addBindings",value:function(){var e=this;this._hls.on(a.a.Events.ERROR,(function(t,n){return e._onError(n)})),this._hls.on(a.a.Events.MANIFEST_LOADED,(function(t,n){return e._onManifestLoaded(n)})),this._hls.on(a.a.Events.LEVEL_SWITCHED,this._onLevelSwitched.bind(this)),this._hls.on(a.a.Events.AUDIO_TRACK_SWITCHED,this._onAudioTrackSwitched.bind(this)),this._hls.on(a.a.Events.FPS_DROP,(function(t,n){return e._onFpsDrop(n)})),this._hls.on(a.a.Events.FRAG_PARSING_METADATA,(function(t,n){return e._onFragParsingMetadata(n)})),this._hls.on(a.a.Events.FRAG_LOADED,(function(t,n){return e._onFragLoaded(n)})),this._mediaAttachedPromise=new Promise((function(t){return e._onMediaAttached=t})),this._hls.on(a.a.Events.MEDIA_ATTACHED,(function(){return e._onMediaAttached()})),this._onRecoveredCallback=function(){return e._onRecovered()},this._onAddTrack=this._onAddTrack.bind(this),this._eventManager.listen(this._videoElement,"addtrack",this._onAddTrack),this._videoElement.textTracks.onaddtrack=this._onAddTrack}},{key:"_onFpsDrop",value:function(e){this._trigger(i.EventType.FPS_DROP,e)}},{key:"_onFragParsingMetadata",value:function(e){this._trigger("hlsFragParsingMetadata",e)}},{key:"_onAddTrack",value:function(e){if(!this._hls.subtitleTracks.length){var t=this._parseCEATextTrack(e.track);t&&(n._logger.debug("A CEA 608/708 caption has found",t),this._playerTracks.push(t),this._trigger(i.EventType.TRACKS_CHANGED,{tracks:this._playerTracks}))}}},{key:"attachMediaSource",value:function(){var e=this;this._hls||(this._videoElement&&this._videoElement.src&&(i.Utils.Dom.setAttribute(this._videoElement,"src",""),i.Utils.Dom.removeAttribute(this._videoElement,"src")),this._init(),isNaN(this._lastTimeDetach)||(this._eventManager.listenOnce(this._videoElement,i.EventType.LOADED_DATA,(function(){isNaN(e._lastTimeDetach)||(parseInt(e._lastTimeDetach)===parseInt(e.duration)?e.currentTime=0:e.currentTime=e._lastTimeDetach,e._lastTimeDetach=NaN)})),this._eventManager.listenOnce(this._videoElement,i.EventType.SEEKED,(function(){return e._lastTimeDetach=NaN}))))}},{key:"detachMediaSource",value:function(){this._hls&&(this._lastTimeDetach=this.currentTime,this._reset(),this._loadPromise=null,this._hls=null)}},{key:"handleMediaError",value:function(e){return e.code===e.MEDIA_ERR_DECODE&&(n._logger.debug("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",e.message),this._handleMediaError())}},{key:"load",value:function(e){var t=this;return this._loadPromise||(this._startTime=e,this._loadPromise=new Promise((function(e){t._resolveLoad=e,t._loadInternal()}))),this._loadPromise}},{key:"_loadInternal",value:function(){this._hls&&this._sourceObj&&this._sourceObj.url&&(this._hls.loadSource(this._sourceObj.url),this._hls.attachMedia(this._videoElement),this._trigger(i.EventType.ABR_MODE_CHANGED,{mode:this.isAdaptiveBitrateEnabled()?"auto":"manual"}))}},{key:"_reloadWithDirectManifest",value:function(){this._triedReloadWithRedirect=!0,this._reset(),this._config.hlsConfig.pLoader=T,this._hls=new a.a(this._config.hlsConfig),this._addBindings(),this._loadInternal()}},{key:"destroy",value:function(){var e=this;return O(I(n.prototype),"destroy",this).call(this).then((function(){n._logger.debug("destroy"),e._loadPromise=null,e._playerTracks=[],e._reset()}))}},{key:"_reset",value:function(){this._removeBindings(),this._requestFilterError=!1,this._responseFilterError=!1,this._hls.detachMedia(),this._hls.destroy()}},{key:"_parseTracks",value:function(){var e=this._parseAudioTracks(this._hls.audioTracks||[]),t=this._parseVideoTracks(this._hls.levels||[]),n=this._parseTextTracks(this._hls.subtitleTracks||[]);return e.concat(t).concat(n)}},{key:"_parseAudioTracks",value:function(e){for(var t=[],n=0;n<e.length;n++){var r={id:e[n].id,active:this._hls.audioTrack===e[n].id,label:e[n].name,language:e[n].lang,index:n};t.push(new i.AudioTrack(r))}return t}},{key:"_parseVideoTracks",value:function(e){for(var t=[],n=0;n<e.length;n++){var r={active:this._hls.startLevel===n,bandwidth:e[n].bitrate,width:e[n].width,height:e[n].height,language:"",index:n};t.push(new i.VideoTrack(r))}return t}},{key:"_parseTextTracks",value:function(e){for(var t=[],n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].default,label:e[n].name,kind:e[n].type.toLowerCase(),language:e[n].lang,index:n};t.push(new i.TextTrack(r))}return t}},{key:"_parseCEATextTrack",value:function(e){var t=null;if("captions"===e.kind){var n={id:e.id,active:"showing"===e.mode,label:e.label,kind:e.kind,language:e.language,index:this._playerTracks.filter((function(e){return e instanceof i.TextTrack})).length};t=new i.TextTrack(n)}return t}},{key:"selectAudioTrack",value:function(e){e instanceof i.AudioTrack&&!e.active&&this._hls.audioTracks&&(this._hls.audioTrack=e.id)}},{key:"selectVideoTrack",value:function(e){e instanceof i.VideoTrack&&(!e.active||this.isAdaptiveBitrateEnabled())&&this._hls.levels&&(this.isAdaptiveBitrateEnabled()&&this._trigger(i.EventType.ABR_MODE_CHANGED,{mode:"manual"}),this._hls.currentLevel=e.index)}},{key:"selectTextTrack",value:function(e){e instanceof i.TextTrack&&!e.active&&this._hls&&(this._hls.subtitleTracks.length?(this._hls.subtitleTrack=e.id,this._notifyTrackChanged(e)):this._selectNativeTextTrack(e))}},{key:"_selectNativeTextTrack",value:function(e){var t=Array.from(this._videoElement.textTracks).find((function(t){return t.language===e.language}));t&&(this._disableNativeTextTracks(),t.mode=this._config.subtitleDisplay?"showing":"hidden",this._notifyTrackChanged(e))}},{key:"_notifyTrackChanged",value:function(e){n._logger.debug("Text track changed",e),this._onTrackChanged(e)}},{key:"_disableNativeTextTracks",value:function(){Array.from(this._videoElement.textTracks).forEach((function(e){e.mode="disabled"}))}},{key:"hideTextTrack",value:function(){this._hls&&(this._hls.subtitleTracks.length?this._hls.subtitleTrack=-1:this._disableNativeTextTracks())}},{key:"enableAdaptiveBitrate",value:function(){this.isAdaptiveBitrateEnabled()||(this._trigger(i.EventType.ABR_MODE_CHANGED,{mode:"auto"}),this._hls.nextLevel=-1)}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._hls&&this._hls.autoLevelEnabled}},{key:"_getLevelDetails",value:function(){var e=this._hls.levels[this._hls.currentLevel]||this._hls.levels[this._hls.nextLevel]||this._hls.levels[this._hls.nextAutoLevel]||this._hls.levels[this._hls.nextLoadLevel];return e&&e.details?e.details:{}}},{key:"_getLiveEdge",value:function(){try{var e;return(e=this._hls.liveSyncPosition?this._hls.liveSyncPosition:this._hls.config.liveSyncDuration?this._videoElement.duration-this._hls.config.liveSyncDuration:this._videoElement.duration-this._hls.config.liveSyncDurationCount*this._getLevelDetails().targetduration)>0?e:this._videoElement.duration}catch(e){return n._logger.debug("Live edge calculation failed, fall back to duration"),this._videoElement.duration}}},{key:"seekToLiveEdge",value:function(){try{this._videoElement.currentTime=this._getLiveEdge()}catch(e){return}}},{key:"isLive",value:function(){try{return!!this._getLevelDetails().live}catch(e){return!1}}},{key:"_onManifestLoaded",value:function(e){var t=this;n._logger.debug("The source has been loaded successfully"),this._hls.config.autoStartLoad||this._hls.startLoad(this._startTime),this._playerTracks=this._parseTracks(),this._maybeApplyAbrRestrictions(),this._mediaAttachedPromise.then((function(){t._resolveLoad({tracks:t._playerTracks})}));var r=e.stats.tload-e.stats.trequest;this._trigger(i.EventType.MANIFEST_LOADED,{miliSeconds:r})}},{key:"_maybeApplyAbrRestrictions",value:function(){if(this._config.abr.enabled){if(this._config.abr.restrictions){var e=this._config.abr.restrictions;if(e.maxBitrate){var t=e.minBitrate?e.minBitrate:0;if(e.maxBitrate>t){var r=this._hls.levels.findIndex((function(t){return t.bitrate>e.maxBitrate}));r>0&&(r-=1),this._hls.autoLevelCapping=r}else n._logger.warn("Invalid maxBitrate restriction, maxBitrate must be greater than minBitrate",t,e.maxBitrate)}}}else this._hls.currentLevel=0}},{key:"_onLevelSwitched",value:function(e,t){var r=this._playerTracks.find((function(e){return e instanceof i.VideoTrack&&e.index===t.level}));n._logger.debug("Video track changed",r),this._onTrackChanged(r)}},{key:"_onAudioTrackSwitched",value:function(e,t){var r=this._playerTracks.find((function(e){return e instanceof i.AudioTrack&&e.id===t.id}));n._logger.debug("Audio track changed",r),this._onTrackChanged(r),this._handleWaitingUponAudioTrackSwitch()}},{key:"_handleWaitingUponAudioTrackSwitch",value:function(){var e=this;["IE","Edge"].includes(i.Env.browser.name)&&this._eventManager.listenOnce(this._videoElement,i.EventType.TIME_UPDATE,(function(){e._trigger(i.EventType.PLAYING)}))}},{key:"_getErrorDataObject",value:function(e){var t={};switch(t.name=e.details,t.name){case a.a.ErrorDetails.MANIFEST_LOAD_ERROR:case a.a.ErrorDetails.LEVEL_LOAD_ERROR:case a.a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:t.url=e.url,t.responseCode=e.response?e.response.code:null;break;case a.a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case a.a.ErrorDetails.LEVEL_LOAD_TIMEOUT:case a.a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:t.url=e.url;break;case a.a.ErrorDetails.MANIFEST_PARSING_ERROR:t.url=e.url,t.reason=e.reason;break;case a.a.ErrorDetails.LEVEL_SWITCH_ERROR:t.level=e.level,t.reason=e.reason;break;case a.a.ErrorDetails.FRAG_LOAD_ERROR:t.fragUrl=e.frag?e.frag.url:null,t.responseCode=e.response?e.response.code:null;break;case a.a.ErrorDetails.FRAG_LOAD_TIMEOUT:t.fragUrl=e.frag?e.frag.url:null;break;case a.a.ErrorDetails.FRAG_DECRYPT_ERROR:case a.a.ErrorDetails.FRAG_PARSING_ERROR:t.reason=e.reason;break;case a.a.ErrorDetails.KEY_LOAD_ERROR:t.fragDecryptedDataUri=e.frag&&e.frag.decryptdata?e.frag.decryptdata.uri:null,t.responseCode=e.response?e.response.code:null;break;case a.a.ErrorDetails.KEY_LOAD_TIMEOUT:t.fragDecryptedDataUri=e.frag&&e.frag.decryptdata?e.frag.decryptdata.uri:null;break;case a.a.ErrorDetails.BUFFER_ADD_CODEC_ERROR:t.mimeType=e.mimeType,t.errorMsg=e.err?e.err.message:null;break;case a.a.ErrorDetails.BUFFER_STALLED_ERROR:t.buffer=e.buffer}return(this._requestFilterError||this._responseFilterError)&&(t.reason=e.response.text),t}},{key:"_onError",value:function(e){var t=e.type,r=e.details,o=e.fatal,s=this._getErrorDataObject(e);if(o){var u;switch(t){case a.a.ErrorTypes.NETWORK_ERROR:var c;c=this._requestFilterError?i.Error.Code.REQUEST_FILTER_ERROR:this._responseFilterError?i.Error.Code.RESPONSE_FILTER_ERROR:i.Error.Code.HTTP_ERROR,![a.a.ErrorDetails.MANIFEST_LOAD_ERROR,a.a.ErrorDetails.MANIFEST_LOAD_TIMEOUT].includes(r)||this._triedReloadWithRedirect||this._config.forceRedirectExternalStreams||this._requestFilterError||this._responseFilterError?u=new i.Error(i.Error.Severity.CRITICAL,i.Error.Category.NETWORK,c,s):(u=new i.Error(i.Error.Severity.RECOVERABLE,i.Error.Category.NETWORK,c,s),this._reloadWithDirectManifest());break;case a.a.ErrorTypes.MEDIA_ERROR:u=this._handleMediaError()?new i.Error(i.Error.Severity.RECOVERABLE,i.Error.Category.MEDIA,i.Error.Code.HLS_FATAL_MEDIA_ERROR,s):new i.Error(i.Error.Severity.CRITICAL,i.Error.Category.MEDIA,i.Error.Code.HLS_FATAL_MEDIA_ERROR,s);break;default:u=new i.Error(i.Error.Severity.CRITICAL,i.Error.Category.PLAYER,i.Error.Code.HLS_FATAL_MEDIA_ERROR,s)}this._trigger(i.EventType.ERROR,u),u&&u.severity===i.Error.Severity.CRITICAL&&this.destroy()}else{var f=this._requestFilterError||this._responseFilterError?{category:i.Error.Category.NETWORK,code:this._requestFilterError?i.Error.Code.REQUEST_FILTER_ERROR:i.Error.Code.RESPONSE_FILTER_ERROR}:l[r]||{category:0,code:0},p=f.category,d=f.code;n._logger.warn(new i.Error(i.Error.Severity.RECOVERABLE,p,d,s))}this._requestFilterError=!1,this._responseFilterError=!1}},{key:"_handleMediaError",value:function(){var e=performance.now(),t=!0;return this._checkTimeDeltaHasPassed(e,this._recoverDecodingErrorDate,this._config.recoverDecodingErrorDelay)?(this._eventManager.listen(this._videoElement,i.EventType.LOADED_METADATA,this._onRecoveredCallback),this._recoverDecodingError()):this._checkTimeDeltaHasPassed(e,this._recoverSwapAudioCodecDate,this._config.recoverSwapAudioCodecDelay)?(this._eventManager.listen(this._videoElement,i.EventType.LOADED_METADATA,this._onRecoveredCallback),this._recoverSwapAudioCodec()):(t=!1,n._logger.error("cannot recover, last media error recovery failed")),t}},{key:"_onRecovered",value:function(){this._trigger(i.EventType.MEDIA_RECOVERED),this._videoElement.removeEventListener(i.EventType.LOADED_METADATA,this._onRecoveredCallback)}},{key:"_checkTimeDeltaHasPassed",value:function(e,t,n){return!t||e-t>n}},{key:"_recoverDecodingError",value:function(){this._recoverDecodingErrorDate=performance.now(),n._logger.warn("try to recover media Error"),this._hls.recoverMediaError()}},{key:"_recoverSwapAudioCodec",value:function(){this._recoverSwapAudioCodecDate=performance.now(),n._logger.warn("try to swap Audio Codec and recover media Error"),this._hls.swapAudioCodec(),this._hls.recoverMediaError()}},{key:"_removeBindings",value:function(){this._hls.off(a.a.Events.ERROR,this._onError),this._hls.off(a.a.Events.LEVEL_SWITCHED,this._onLevelSwitched),this._hls.off(a.a.Events.AUDIO_TRACK_SWITCHED,this._onAudioTrackSwitched),this._hls.off(a.a.Events.MANIFEST_LOADED,this._onManifestLoaded),this._hls.off(a.a.Events.FPS_DROP,this._onFpsDrop),this._videoElement.textTracks.onaddtrack=null,this._onRecoveredCallback=null,this._eventManager&&this._eventManager.removeAll()}},{key:"getStartTimeOfDvrWindow",value:function(){if(!this.isLive())return 0;try{var e=this._hls.levels[this._hls.nextLoadLevel].details,t=e.fragments,r=t.length,i=t[0].start+t[0].duration,o=t[r-1].start+t[r-1].duration,a=void 0!==this._hls.config.liveMaxLatencyDuration?this._hls.config.liveMaxLatencyDuration:this._hls.config.liveMaxLatencyDurationCount*e.targetduration;return Math.max(i-this._hls.config.maxFragLookUpTolerance,o-a)}catch(e){return n._logger.debug("Unable obtain the start of DVR window"),0}}},{key:"_onFragLoaded",value:function(e){var t=e.stats.tload-e.stats.trequest;this._trigger(i.EventType.FRAG_LOADED,{miliSeconds:t,bytes:e.stats.loaded,url:e.frag.url})}},{key:"_getLiveTargetBuffer",value:function(){return this._hls.config.liveSyncDuration?this._hls.config.liveSyncDuration:this._hls.config.liveSyncDurationCount*this._getLevelDetails().targetduration}},{key:"targetBuffer",get:function(){var e=NaN;return this._hls?(e=this.isLive()?this._getLiveTargetBuffer()-(this._videoElement.currentTime-this._getLiveEdge()):this._videoElement.duration-this._videoElement.currentTime,e=Math.min(e,this._hls.config.maxMaxBufferLength+this._getLevelDetails().targetduration)):NaN}}]),n}(i.BaseMediaSourceAdapter);L(M,"id","HlsAdapter"),L(M,"_logger",i.BaseMediaSourceAdapter.getLogger(M.id)),L(M,"_hlsMimeTypes",["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);var N="1.20.0-canary.4f901e3",j="@playkit-js/playkit-js-hls";t.default=M,M.isSupported()&&Object(i.registerMediaSourceAdapter)(M)}]))},function(e,t,n){var r;"undefined"!=typeof window&&(r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,a),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var r,i,o,a,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=i.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var l={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,f=c.substring(0,c.lastIndexOf("/")+1)+o.path;l.path=s.normalizePath(f)}else l.path=a.path,o.params||(l.params=a.params,o.query||(l.query=a.query));return null===l.path&&(l.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,r){var o={};o[r]=[];var a=t.toString(),s=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var u,l=s[1],c=new RegExp("(\\\\n|\\W)"+i(l)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=c.exec(a);)"dll-reference"!==u[3]&&o[r].push(u[3]);for(c=new RegExp("\\("+i(l)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=c.exec(a);)e[u[2]]||(o[r].push(u[1]),e[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var f,p=Object.keys(o),d=0;d<p.length;d++)for(var h=0;h<o[p[d]].length;h++)f=o[p[d]][h],isNaN(1*f)||(o[p[d]][h]=1*o[p[d]][h]);return o}function a(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},s=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};a(n);)for(var s=Object.keys(n),u=0;u<s.length;u++){var l=s[u],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&e[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var f=o(e,e[l][c],l),p=Object.keys(f),d=0;d<p.length;d++)n[p[d]]=n[p[d]]||[],n[p[d]]=n[p[d]].concat(f[p[d]])}}return r}(i,e),u="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),u=u+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var l=new window.Blob([u],{type:"text/javascript"});if(t.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),f=new window.Worker(c);return f.objectURL=c,f}},"./src/crypt/decrypter.js":
/*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),i=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),o=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],p=new Uint32Array(256),d=0,h=0,y=0;for(y=0;y<256;y++)p[y]=y<128?y<<1:y<<1^283;for(y=0;y<256;y++){var v=h^h<<1^h<<2^h<<3^h<<4;v=v>>>8^255&v^99,e[d]=v,t[v]=d;var g=p[d],m=p[g],b=p[m],_=257*p[v]^16843008*v;r[d]=_<<24|_>>>8,i[d]=_<<16|_>>>16,o[d]=_<<8|_>>>24,a[d]=_,_=16843009*b^65537*m^257*g^16843008*d,u[v]=_<<24|_>>>8,l[v]=_<<16|_>>>16,c[v]=_<<8|_>>>24,f[v]=_,d?(d=g^p[p[p[b^g]]],h^=p[p[h]]):d=h=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),f=this.invKeySchedule=new Uint32Array(l),p=this.sBox,d=this.rcon,h=this.invSubMix,y=h[0],v=h[1],g=h[2],m=h[3];for(o=0;o<l;o++)o<i?s=c[o]=t[o]:(u=s,o%i==0?(u=p[(u=u<<8|u>>>24)>>>24]<<24|p[u>>>16&255]<<16|p[u>>>8&255]<<8|p[255&u],u^=d[o/i|0]<<24):i>6&&o%i==4&&(u=p[u>>>24]<<24|p[u>>>16&255]<<16|p[u>>>8&255]<<8|p[255&u]),c[o]=s=(c[o-i]^u)>>>0);for(a=0;a<l;a++)o=l-a,u=3&a?c[o]:c[o-4],f[a]=a<4||o<=4?u:y[p[u>>>24]]^v[p[u>>>16&255]]^g[p[u>>>8&255]]^m[p[255&u]],f[a]=f[a]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n,r){for(var i,o,a,s,u,l,c,f,p,d,h,y,v,g,m,b,_,k=this.keySize+6,E=this.invKeySchedule,w=this.invSBox,T=this.invSubMix,S=T[0],A=T[1],O=T[2],P=T[3],R=this.uint8ArrayToUint32Array_(n),C=R[0],x=R[1],D=R[2],I=R[3],L=new Int32Array(e),M=new Int32Array(L.length),N=this.networkToHostOrderSwap;t<L.length;){for(p=N(L[t]),d=N(L[t+1]),h=N(L[t+2]),y=N(L[t+3]),u=p^E[0],l=y^E[1],c=h^E[2],f=d^E[3],v=4,g=1;g<k;g++)i=S[u>>>24]^A[l>>16&255]^O[c>>8&255]^P[255&f]^E[v],o=S[l>>>24]^A[c>>16&255]^O[f>>8&255]^P[255&u]^E[v+1],a=S[c>>>24]^A[f>>16&255]^O[u>>8&255]^P[255&l]^E[v+2],s=S[f>>>24]^A[u>>16&255]^O[l>>8&255]^P[255&c]^E[v+3],u=i,l=o,c=a,f=s,v+=4;i=w[u>>>24]<<24^w[l>>16&255]<<16^w[c>>8&255]<<8^w[255&f]^E[v],o=w[l>>>24]<<24^w[c>>16&255]<<16^w[f>>8&255]<<8^w[255&u]^E[v+1],a=w[c>>>24]<<24^w[f>>16&255]<<16^w[u>>8&255]<<8^w[255&l]^E[v+2],s=w[f>>>24]<<24^w[u>>16&255]<<16^w[l>>8&255]<<8^w[255&c]^E[v+3],v+=3,M[t]=N(i^C),M[t+1]=N(s^x),M[t+2]=N(a^D),M[t+3]=N(o^I),C=p,x=d,D=h,I=y,t+=4}return r?(m=M.buffer,b=m.byteLength,(_=b&&new DataView(m).getUint8(b-1))?m.slice(0,b-_):m):M.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),a=n("./src/errors.ts"),s=n("./src/utils/logger.js"),u=n("./src/events.js"),l=n("./src/utils/get-self-scope.js"),c=Object(l.getSelfScope)(),f=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=c.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,n,a){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new o),l.expandKey(t),a(l.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i(c,t)),this.fastAesKey.expandKey().then((function(i){new r(c,n).decrypt(e,i).catch((function(r){u.onWebCryptoError(r,e,t,n,a)})).then((function(e){a(e)}))})).catch((function(r){u.onWebCryptoError(r,e,t,n,a)}))}},t.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(u.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=f},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){"use strict";n.r(t);var r=n("./src/events.js"),i=n("./src/errors.ts"),o=n("./src/crypt/decrypter.js"),a=n("./src/polyfills/number-isFinite.js"),s=n("./src/utils/logger.js"),u=n("./src/utils/get-self-scope.js");function l(e,t){return 255===e[t]&&240==(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function f(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function p(e,t){return!!(t+1<e.length&&l(e,t))}function d(e,t){if(p(e,t)){var n=c(e,t);t+5<e.length&&(n=f(e,t));var r=t+n;if(r===e.length||r+1<e.length&&l(e,r))return!0}return!1}function h(e,t,n,o,a){if(!e.samplerate){var u=function(e,t,n,o){var a,u,l,c,f,p=navigator.userAgent.toLowerCase(),d=o,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[n+2])>>>6),!((u=(60&t[n+2])>>>2)>h.length-1))return c=(1&t[n+2])<<2,c|=(192&t[n+3])>>>6,s.logger.log("manifest codec:"+o+",ADTS data:type:"+a+",sampleingIndex:"+u+"["+h[u]+"Hz],channelConfig:"+c),/firefox/i.test(p)?u>=6?(a=5,f=new Array(4),l=u-3):(a=2,f=new Array(2),l=u):-1!==p.indexOf("android")?(a=2,f=new Array(2),l=u):(a=5,f=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&u>=6?l=u-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(u>=6&&1===c||/vivaldi/i.test(p))||!o&&1===c)&&(a=2,f=new Array(2)),l=u)),f[0]=a<<3,f[0]|=(14&u)>>1,f[1]|=(1&u)<<7,f[1]|=c<<3,5===a&&(f[1]|=(14&l)>>1,f[2]=(1&l)<<7,f[2]|=8,f[3]=0),{config:f,samplerate:h[u],channelCount:c,codec:"mp4a.40."+a,manifestCodec:d};e.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}(t,n,o,a);e.config=u.config,e.samplerate=u.samplerate,e.channelCount=u.channelCount,e.codec=u.codec,e.manifestCodec=u.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+u.samplerate+",nb channel:"+u.channelCount)}}function y(e){return 9216e4/e}function v(e,t,n,r,i){var o=function(e,t,n,r,i){var o,a,s=e.length;if(o=c(e,t),a=f(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:n+r*i}}(t,n,r,i,y(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,u=o.frameLength,l={unit:t.subarray(n+s,n+s+u),pts:a,dts:a};return e.samples.push(l),{sample:l,length:u+s}}}var g=n("./src/demux/id3.js"),m=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(g.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(d(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,n,r){for(var i=this._audioTrack,o=g.default.getID3Data(e,0)||[],u=g.default.getTimeStamp(o),l=Object(a.isFiniteNumber)(u)?90*u:9e4*t,c=0,f=l,d=e.length,y=o.length,m=[{pts:f,dts:f,data:o}];y<d-1;)if(p(e,y)&&y+5<d){h(i,this.observer,e,y,i.manifestCodec);var b=v(i,e,y,l,c);if(!b){s.logger.log("Unable to parse AAC frame");break}y+=b.length,f=b.sample.pts,c++}else g.default.isHeader(e,y)?(o=g.default.getID3Data(e,y),m.push({pts:f,dts:f,data:o}),y+=o.length):y++;this.remuxer.remux(i,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,n,r)},t.destroy=function(){},e}(),b=n("./src/demux/mp4demuxer.js"),_={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=r+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3,a=e[t+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==o){var s=3===n?3-r:3===r?3:4,u=1e3*_.BitratesMap[14*s+i-1],l=3===n?0:2===n?1:2,c=_.SamplingRateMap[3*l+o],f=e[t+3]>>6==3?1:2,p=_.SamplesCoefficients[n][r],d=_.BytesInSlot[r],h=8*p*d;return{sampleRate:c,channelCount:f,frameLength:parseInt(p*u/c+a,10)*d,samplesPerFrame:h}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},k=_,E=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},t.readSPS=function(){var e,t,n,r,i,o,a,s=0,u=0,l=0,c=0,f=this.readUByte.bind(this),p=this.readBits.bind(this),d=this.readUEG.bind(this),h=this.readBoolean.bind(this),y=this.skipBits.bind(this),v=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(f(),e=f(),p(5),y(3),f(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=d();if(3===b&&y(1),g(),g(),y(1),h())for(o=3!==b?8:12,a=0;a<o;a++)h()&&m(a<6?16:64)}g();var _=d();if(0===_)d();else if(1===_)for(y(1),v(),v(),t=d(),a=0;a<t;a++)v();g(),y(1),n=d(),r=d(),0===(i=p(1))&&y(1),y(1),h()&&(s=d(),u=d(),l=d(),c=d());var k=[1,1];if(h()&&h())switch(f()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(n+1)-2*s-2*u),height:(2-i)*(r+1)*16-(i?2:4)*(l+c),pixelRatio:k}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),w=function(){function e(e,t,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new o.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,n,r){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,(function(o){o=new Uint8Array(o),i.set(o,16),r||s.decryptAacSamples(e,t+1,n)}))},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},t.decryptAvcSample=function(e,t,n,r,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,(function(s){i.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(e,t,n+1,r)}))},t.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var o=i[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,o,a),!a)return}}}},e}(),T={video:1,audio:2,id3:3,text:4},S=function(){function e(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new w(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0||(n&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:T[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,n,o,a){var u,l,c,f,p,d=t.length,h=!1;this.contiguous=o;var y=this.pmtParsed,v=this._avcTrack,g=this._audioTrack,m=this._id3Track,b=v.pid,_=g.pid,k=m.pid,E=this._pmtId,w=v.pesData,T=g.pesData,S=m.pesData,A=this._parsePAT,O=this._parsePMT,P=this._parsePES,R=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),x=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),I=e._syncOffset(t);for(d-=(d+I)%188,u=I;u<d;u+=188)if(71===t[u]){if(l=!!(64&t[u+1]),c=((31&t[u+1])<<8)+t[u+2],(48&t[u+3])>>4>1){if((f=u+5+t[u+4])===u+188)continue}else f=u+4;switch(c){case b:l&&(w&&(p=P(w))&&R(p,!1),w={data:[],size:0}),w&&(w.data.push(t.subarray(f,u+188)),w.size+=u+188-f);break;case _:l&&(T&&(p=P(T))&&(g.isAAC?C(p):x(p)),T={data:[],size:0}),T&&(T.data.push(t.subarray(f,u+188)),T.size+=u+188-f);break;case k:l&&(S&&(p=P(S))&&D(p),S={data:[],size:0}),S&&(S.data.push(t.subarray(f,u+188)),S.size+=u+188-f);break;case 0:l&&(f+=t[f]+1),E=this._pmtId=A(t,f);break;case E:l&&(f+=t[f]+1);var L=O(t,f,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=L.avc)>0&&(v.pid=b),(_=L.audio)>0&&(g.pid=_,g.isAAC=L.isAAC),(k=L.id3)>0&&(m.pid=k),h&&!y&&(s.logger.log("reparse from beginning"),h=!1,u=I-188),y=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(p=P(w))?(R(p,!0),v.pesData=null):v.pesData=w,T&&(p=P(T))?(g.isAAC?C(p):x(p),g.pesData=null):(T&&T.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=T),S&&(p=P(S))?(D(p),m.pesData=null):m.pesData=S,null==this.sampleAes?this.remuxer.remux(g,v,m,this._txtTrack,n,o,a):this.decryptAndRemux(g,v,m,this._txtTrack,n,o,a)},t.decryptAndRemux=function(e,t,n,r,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,n,r,i,o,a)}))}else this.decryptAndRemuxAvc(e,t,n,r,i,o,a)},t.decryptAndRemuxAvc=function(e,t,n,r,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,n,r,i,o,a)}))}else this.remuxer.remux(e,t,n,r,i,o,a)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._parsePMT=function(e,t,n,r){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){s.logger.log("unknown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!r){s.logger.log("unknown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):s.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:s.logger.warn("HEVC stream type found, not supported for now");break;default:s.logger.log("unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},t._parsePES=function(e){var t,n,r,i,o,a,u,l,c=0,f=e.data;if(!e||0===e.size)return null;for(;f[0].length<19&&f.length>1;){var p=new Uint8Array(f[0].length+f[1].length);p.set(f[0]),p.set(f[1],f[0].length),f[0]=p,f.splice(1,1)}if(1===((t=f[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;if(192&(n=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&n?((u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(u-=8589934592),a-u>54e5&&(s.logger.warn(Math.round((a-u)/9e4)+"s delta between PTS and DTS, align them"),a=u)):u=a),l=(i=t[8])+9,e.size<=l)return null;e.size-=l,o=new Uint8Array(e.size);for(var d=0,h=f.length;d<h;d++){var y=(t=f[d]).byteLength;if(l){if(l>y){l-=y;continue}t=t.subarray(l),y-=l,l=0}o.set(t,c),c+=y}return r&&(r-=i+3),{data:o,pts:a,dts:u,len:r}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;if(isNaN(e.pts)){if(!r)return void t.dropped++;var i=n[r-1];e.pts=i.pts,e.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var n,r,i,o=this,a=this._avcTrack,s=this._parseAVCNALu(e.data),u=this.avcSample,l=!1,c=this.pushAccesUnit.bind(this),f=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,u&&s.length&&!a.audFound&&(c(u,a),u=this.avcSample=f(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:r=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.frame=!0;var s=t.data;if(l&&s.length>4){var p=new E(s).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(u.key=!0)}break;case 5:r=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,(n=new E(o.discardEPB(t.data))).readUByte();for(var d=0,h=0,y=!1,v=0;!y&&n.bytesAvailable>1;){d=0;do{d+=v=n.readUByte()}while(255===v);h=0;do{h+=v=n.readUByte()}while(255===v);if(4===d&&0!==n.bytesAvailable){if(y=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var m=n.readUByte(),b=31&m,_=[m,n.readUByte()];for(i=0;i<b;i++)_.push(n.readUByte()),_.push(n.readUByte()),_.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}else if(5===d&&0!==n.bytesAvailable){if(y=!0,h>16){var k=[];for(i=0;i<16;i++)k.push(n.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||k.push("-");var w=h-16,T=new Uint8Array(w);for(i=0;i<w;i++)T[i]=n.readUByte();o._insertSampleInOrder(o._txtTrack.samples,{pts:e.pts,payloadType:d,uuid:k.join(""),userDataBytes:T,userData:Object(g.utf8ArrayToStr)(T.buffer)})}}else if(h<n.bytesAvailable)for(i=0;i<h;i++)n.readUByte()}break;case 7:if(r=!0,l=!0,!a.sps){var S=(n=new E(t.data)).readSPS();a.width=S.width,a.height=S.height,a.pixelRatio=S.pixelRatio,a.sps=[t.data],a.duration=o._duration;var A=t.data.subarray(1,4),O="avc1.";for(i=0;i<3;i++){var P=A[i].toString(16);P.length<2&&(P="0"+P),O+=P}a.codec=O}break;case 8:r=!0,a.pps||(a.pps=[t.data]);break;case 9:r=!1,a.audFound=!0,u&&c(u,a),u=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&r&&u.units.push(t)})),t&&u&&(c(u,a),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},t._parseAVCNALu=function(e){var t,n,r,i,o=0,a=e.byteLength,s=this._avcTrack,u=s.naluState||0,l=u,c=[],f=-1;for(-1===u&&(f=0,i=31&e[0],u=0,o=1);o<a;)if(t=e[o++],u)if(1!==u)if(t)if(1===t){if(f>=0)r={data:e.subarray(f,o-u-1),type:i},c.push(r);else{var p=this._getLastNalUnit();if(p&&(l&&o<=4-l&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-l)),(n=o-u-1)>0)){var d=new Uint8Array(p.data.byteLength+n);d.set(p.data,0),d.set(e.subarray(0,n),p.data.byteLength),p.data=d}}o<a?(f=o,i=31&e[o],u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(f>=0&&u>=0&&(r={data:e.subarray(f,a),type:i,state:u},c.push(r)),0===c.length){var h=this._getLastNalUnit();if(h){var y=new Uint8Array(h.data.byteLength+e.byteLength);y.set(h.data,0),y.set(e,h.data.byteLength),h.data=y}}return s.naluState=u,c},t.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},t._parseAACPES=function(e){var t,n,o,a,u,l,c,f=this._audioTrack,d=e.data,g=e.pts,m=this.aacOverFlow,b=this.aacLastPTS;if(m){var _=new Uint8Array(m.byteLength+d.byteLength);_.set(m,0),_.set(d,m.byteLength),d=_}for(o=0,u=d.length;o<u-1&&!p(d,o);o++);if(!o||(o<u-1?(l="AAC PES did not start with ADTS header,offset:"+o,c=!1):(l="no ADTS header found in AAC PES",c=!0),s.logger.warn("parsing error:"+l),this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:l}),!c)){if(h(f,this.observer,d,o,this.audioCodec),n=0,t=y(f.samplerate),m&&b){var k=b+t;Math.abs(k-g)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((k-g)/90)),g=k)}for(;o<u;){if(p(d,o)){if(o+5<u){var E=v(f,d,o,g,n);if(E){o+=E.length,a=E.sample.pts,n++;continue}}break}o++}m=o<u?d.subarray(o,u):null,this.aacOverFlow=m,this.aacLastPTS=a}},t._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,i=0,o=e.pts;i<n;)if(k.isHeader(t,i)){var a=k.appendFrame(this._audioTrack,t,i,o,r);if(!a)break;i+=a.length,r++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),A=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,n,r=g.default.getID3Data(e,0);if(r&&void 0!==g.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(k.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,n,r){for(var i=g.default.getID3Data(e,0),o=g.default.getTimeStamp(i),a=o?90*o:9e4*t,s=i.length,u=e.length,l=0,c=0,f=this._audioTrack,p=[{pts:a,dts:a,data:i}];s<u;)if(k.isHeader(e,s)){var d=k.appendFrame(f,e,s,a,l);if(!d)break;s+=d.length,c=d.sample.pts,l++}else g.default.isHeader(e,s)?(i=g.default.getID3Data(e,s),p.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(f,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,n,r)},t.destroy=function(){},e}(),O=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),P=Math.pow(2,32)-1,R=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,u,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<o;i++)t.set(n[i],r),r+=n[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var r=Math.floor(n/(P+1)),i=Math.floor(n%(P+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var r=Math.floor(n/(P+1)),i=Math.floor(n%(P+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var n,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,o=[],a=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),u=t.width,l=t.height,c=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,f>>24,f>>16&255,f>>8&255,255&f])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,o=t.height,a=Math.floor(r/(P+1)),s=Math.floor(r%(P+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,n){var r=e.sdtp(t),i=t.id,o=Math.floor(n/(P+1)),a=Math.floor(n%(P+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),e.trun(t,r.length+16+20+8+16+8+8),r)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,o,a,s,u,l=t.samples||[],c=l.length,f=12+16*c,p=new Uint8Array(f);for(n+=8+f,p.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)o=(i=l[r]).duration,a=i.size,s=i.flags,u=i.cts,p.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return e.box(e.types.trun,p)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+r.byteLength)).set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}();function C(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=e*t*n;return r?Math.round(i):i}function x(e,t){return void 0===t&&(t=!1),C(e,1e3,1/9e4,t)}function D(e,t){return void 0===t&&(t=1),C(e,9e4,1/t)}var I,L=D(10),M=D(.2),N=function(){function e(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,n,i,o,a,u){if(this.ISGenerated||this.generateIS(e,t,o),this.ISGenerated){var l=e.samples.length,c=t.samples.length,f=o,p=o;if(l&&c){var d=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;f+=Math.max(0,d),p+=Math.max(0,-d)}if(l){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,o));var h,y=this.remuxAudio(e,f,a,u);c&&(y&&(h=y.endPTS-y.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,o)),this.remuxVideo(t,p,a,h,u))}else if(c){var v=this.remuxVideo(t,p,a,0,u);v&&e.codec&&this.remuxEmptyAudio(e,f,a,v)}}n.samples.length&&this.remuxID3(n,o),i.samples.length&&this.remuxText(i,o),this.observer.trigger(r.default.FRAG_PARSED)},t.generateIS=function(e,t,n){var o,a,u=this.observer,l=e.samples,c=t.samples,f=this.typeSupported,p="audio/mp4",d={},h={tracks:d},y=void 0===this._initPTS;if(y&&(o=a=1/0),e.config&&l.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(p="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),d.audio={container:p,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:R.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(o=a=l[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&c.length){var v=t.inputTimeScale;t.timescale=v,d.video={container:"video/mp4",codec:t.codec,initSegment:R.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(o=Math.min(o,c[0].pts-v*n),a=Math.min(a,c[0].dts-v*n),this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:o}))}Object.keys(d).length?(u.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,y&&(this._initPTS=o,this._initDTS=a)):u.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,n,o,a){var u,l,c,f,p,d,h,y=8,v=e.timescale,g=e.samples,m=[],b=g.length,_=this._PTSNormalize,k=this._initPTS,E=this.nextAvcDts,w=this.isSafari;if(0!==b){w&&(n|=g.length&&E&&(a&&Math.abs(t-E/v)<.1||Math.abs(g[0].pts-E-k)<v/5)),n||(E=t*v),g.forEach((function(e){e.pts=_(e.pts-k,E),e.dts=_(e.dts-k,E)})),g.sort((function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id}));var T=g.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*M)}),0);if(T<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+x(T,!0)+" ms to overcome this issue");for(var S=0;S<g.length;S++)g[S].dts+=T}var A=g[0];p=Math.max(A.dts,0),f=Math.max(A.pts,0);var O=p-E;n&&O&&(O>1?s.logger.log("AVC: "+x(O,!0)+" ms hole between fragments detected,filling it"):O<-1&&s.logger.log("AVC: "+x(-O,!0)+" ms overlapping between fragments detected"),p=E,g[0].dts=p,f=Math.max(f-O,E),g[0].pts=f,s.logger.log("Video: PTS/DTS adjusted: "+x(f,!0)+"/"+x(p,!0)+", delta: "+x(O,!0)+" ms")),A=g[g.length-1],h=Math.max(A.dts,0),d=Math.max(A.pts,0,h),w&&(u=Math.round((h-p)/(g.length-1)));for(var P=0,C=0,D=0;D<b;D++){for(var I=g[D],L=I.units,N=L.length,j=0,U=0;U<N;U++)j+=L[U].data.length;C+=j,P+=N,I.length=j,I.dts=w?p+D*u:Math.max(I.dts,p),I.pts=Math.max(I.pts,I.dts)}var F=C+4*P+8;try{l=new Uint8Array(F)}catch(e){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var B=new DataView(l.buffer);B.setUint32(0,F),l.set(R.types.mdat,4);for(var V=0;V<b;V++){for(var G=g[V],K=G.units,H=0,z=void 0,W=0,Y=K.length;W<Y;W++){var q=K[W],X=q.data,$=q.data.byteLength;B.setUint32(y,$),y+=4,l.set(X,y),y+=$,H+=4+$}if(w)z=Math.max(0,u*Math.round((G.pts-G.dts)/u));else{if(V<b-1)u=g[V+1].dts-G.dts;else{var J=this.config,Q=G.dts-g[V>0?V-1:V].dts;if(J.stretchShortVideoTrack){var Z=J.maxBufferHole,ee=Math.floor(Z*v),te=(o?f+o*v:this.nextAudioPts)-G.pts;te>ee?((u=te-Q)<0&&(u=Q),s.logger.log("It is approximately "+x(te,!1)+" ms to the next segment; using duration "+x(u,!1)+" ms for the last video frame.")):u=Q}else u=Q}z=Math.round(G.pts-G.dts)}m.push({size:H,duration:u,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=h+u;var ne=e.dropped;if(e.nbNalu=0,e.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var re=m[0].flags;re.dependsOn=2,re.isNonSync=0}e.samples=m,c=R.moof(e.sequenceNumber++,p,e),e.samples=[];var ie={data1:c,data2:l,startPTS:f/v,endPTS:(d+u)/v,startDTS:p/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:m.length,dropped:ne};return this.observer.trigger(r.default.FRAG_PARSING_DATA,ie),ie}},t.remuxAudio=function(e,t,n,o){var a,u,l,c,f,p,d=e.inputTimeScale,h=e.timescale,y=d/h,v=(e.isAAC?1024:1152)*y,g=this._PTSNormalize,m=this._initPTS,b=!e.isAAC&&this.typeSupported.mpeg,_=b?0:8,k=e.samples,E=[],w=this.nextAudioPts;if(n|=k.length&&w&&(o&&Math.abs(t-w/d)<.1||Math.abs(k[0].pts-w-m)<20*v),k.forEach((function(e){e.pts=e.dts=g(e.pts-m,t*d)})),0!==(k=k.filter((function(e){return e.pts>=0}))).length){if(n||(w=o?t*d:k[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,S=0,A=w;S<k.length;){var P,C=k[S];if((P=C.pts-A)<=-T*v)s.logger.warn("Dropping 1 audio frame @ "+x(A,!0)+" ms due to "+x(P,!0)+" ms overlap."),k.splice(S,1);else if(P>=T*v&&P<L&&A){var D=Math.round(P/v);s.logger.warn("Injecting "+D+" audio frames @ "+x(A,!0)+" ms due to "+x(A,!0)+" ms gap.");for(var I=0;I<D;I++){var M=Math.max(A,0);(u=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),u=C.unit.subarray()),k.splice(S,0,{unit:u,pts:M,dts:M}),A+=v,S++}C.pts=C.dts=A,A+=v,S++}else Math.abs(P),C.pts=C.dts=A,A+=v,S++}for(var N=k.length,j=0;N--;)j+=k[N].unit.byteLength;for(var U=0,F=k.length;U<F;U++){var B=k[U],V=B.unit,G=B.pts;if(void 0!==p)a.duration=Math.round((G-p)/y);else{var K=G-w,H=0;if(n&&e.isAAC&&K){if(K>0&&K<L)H=Math.round((G-w)/v),s.logger.log(x(K,!0)+" ms hole between AAC samples detected,filling it"),H>0&&((u=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(u=V.subarray()),j+=H*u.length);else if(K<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+x(w,!0)+" ms / "+x(G,!0)+" ms / "+x(-K,!0)+" ms"),j-=V.byteLength;continue}G=w}if(f=G,!(j>0))return;j+=_;try{l=new Uint8Array(j)}catch(e){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}b||(new DataView(l.buffer).setUint32(0,j),l.set(R.types.mdat,4));for(var z=0;z<H;z++)(u=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),u=V.subarray()),l.set(u,_),_+=u.byteLength,a={size:u.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(a)}l.set(V,_);var W=V.byteLength;_+=W,a={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(a),p=G}var Y=0;if((N=E.length)>=2&&(Y=E[N-2].duration,a.duration=Y),N){this.nextAudioPts=w=p+y*Y,e.samples=E,c=b?new Uint8Array:R.moof(e.sequenceNumber++,f/y,e),e.samples=[];var q=f/d,X=w/d,$={data1:c,data2:l,startPTS:q,endPTS:X,startDTS:q,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(r.default.FRAG_PARSING_DATA,$),$}return null}},t.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,o=i/(e.samplerate?e.samplerate:i),a=this.nextAudioPts,u=(void 0!==a?a:r.startDTS*i)+this._initDTS,l=r.endDTS*i+this._initDTS,c=1024*o,f=Math.ceil((l-u)/c),p=O.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),p){for(var d=[],h=0;h<f;h++){var y=u+h*c;d.push({unit:p,pts:y,dts:y})}e.samples=d,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t,n=e.samples.length,i=e.inputTimeScale,o=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)(t=e.samples[s]).pts=(t.pts-o)/i,t.dts=(t.dts-a)/i;this.observer.trigger(r.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},t.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,n=e.samples.length,i=e.inputTimeScale,o=this._initPTS;if(n){for(var a=0;a<n;a++)(t=e.samples[a]).pts=(t.pts-o)/i;this.observer.trigger(r.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}(),j=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,n,i,o,a,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(r.default.FRAG_PARSING_DATA,{data1:u,startPTS:o,startDTS:o,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(r.default.FRAG_PARSED)},e}(),U=Object(u.getSelfScope)();try{I=U.performance.now.bind(U.performance)}catch(e){s.logger.debug("Unable to use Performance API on this environment"),I=U.Date.now}var F=function(){function e(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,n,i,a,s,u,l,c,f,p,d){var h=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var y=this.decrypter;null==y&&(y=this.decrypter=new o.default(this.observer,this.config));var v=I();y.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var o=I();h.observer.trigger(r.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:o}}),h.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,a,s,u,l,c,f,p,d)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,a,s,u,l,c,f,p,d)},t.pushDecrypted=function(e,t,n,o,a,s,u,l,c,f,p,d){var h=this.demuxer;if(!h||(u||l)&&!this.probe(e)){for(var y=this.observer,v=this.typeSupported,g=this.config,_=[{demux:S,remux:N},{demux:b.default,remux:j},{demux:m,remux:N},{demux:A,remux:N}],k=0,E=_.length;k<E;k++){var w=_[k],T=w.demux.probe;if(T(e)){var O=this.remuxer=new w.remux(y,g,v,this.vendor);h=new w.demux(y,O,g,v),this.probe=T;break}}if(!h)return void y.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=h}var P=this.remuxer;(u||l)&&(h.resetInitSegment(n,o,a,f),P.resetInitSegment()),u&&(h.resetTimeStamp(d),P.resetTimeStamp(d)),"function"==typeof h.setDecryptData&&h.setDecryptData(t),h.append(e,s,c,p)},e}();t.default=F},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,n){"use strict";n.r(t);var r=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=n(/*! ../events */"./src/events.js"),o=n(/*! ../utils/logger */"./src/utils/logger.js"),a=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",(function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new r.default(t,a.typeSupported,s,a.vendor),Object(o.enableLogs)(s.debug),n("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,(function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)}))}},"./src/demux/id3.js":
/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,n){"use strict";n.r(t),n.d(t,"utf8ArrayToStr",(function(){return s}));var r,i=n(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),o=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);)i+=10,i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i;if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var n=0,r=[];e.isHeader(t,n);){for(var i=e._readSize(t,n+6),o=(n+=10)+i;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&r.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n),!0);n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var n=a();if(n){var r=n.decode(e);if(t){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var o,s,u,l=e.length,c="",f=0;f<l;){if(0===(o=e[f++])&&t)return c;if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(o);break;case 12:case 13:s=e[f++],c+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=e[f++],u=e[f++],c+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&u)<<0)}}return c},e}();function a(){var e=Object(i.getSelfScope)();return r||void 0===e.TextDecoder||(r=new e.TextDecoder("utf-8")),r}var s=o._utf8ArrayToStr;t.default=o},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! ../utils/logger */"./src/utils/logger.js"),i=n(/*! ../events */"./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,n,r,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:r,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var r,i,o,a,s,u,l=[];if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!n.length)return null;for(r=s;r<o;)u=(i=e.readUint32(t,r))>1?r+i:o,e.bin2str(t.subarray(r+4,r+8))===n[0]&&(1===n.length?l.push({data:t,start:r+8,end:u}):(a=e.findBox({data:t,start:r+8,end:u},n.slice(1))).length&&(l=l.concat(a))),r=u;return l},e.parseSegmentIndex=function(t){var n,r=e.findBox(t,["moov"])[0],i=r?r.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;n=[];var s=(a=a[0]).data[0];o=0===s?8:16;var u=e.readUint32(a,o);o+=4,o+=0===s?8:16,o+=2;var l=a.end+0,c=e.readUint16(a,o);o+=2;for(var f=0;f<c;f++){var p=o,d=e.readUint32(a,p);p+=4;var h=2147483647&d;if(1==(2147483648&d)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var y=e.readUint32(a,p);p+=4,n.push({referenceSize:h,subsegmentDuration:y,info:{duration:y/u,start:l,end:l+h-1}}),l+=h,o=p+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:n,moovEndOffset:i}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),u=e.findBox(t,["mdia","mdhd"])[0];if(u){a=0===(o=u.data[u.start])?12:20;var l=e.readUint32(u,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var f={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(f){var p=e.findBox(t,["mdia","minf","stbl","stsd"]);if(p.length){p=p[0];var d=e.bin2str(p.data.subarray(p.start+12,p.start+16));r.logger.log("MP4Demuxer:"+f+":"+d+" found")}n[s]={timescale:l,type:f},n[f]={timescale:l,id:s}}}}}})),n},e.getStartDTS=function(t,n){var r,i,o;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map((function(n){return e.findBox(n,["tfhd"]).map((function(r){var i,o;return i=e.readUint32(r,4),o=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map((function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r}))[0]/o}))}))),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map((function(n){return e.findBox(n,["tfhd"]).map((function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map((function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),u=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,u)}}))}))}))},t.append=function(t,n,r,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(a,t);this.initPTS=u=l-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(a,t,u),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,r,o,t)},t.destroy=function(){},e}();t.default=a},"./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,"ErrorTypes",(function(){return r})),n.d(t,"ErrorDetails",(function(){return i})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(r||(r={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(i||(i={}))},"./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"newCue",(function(){return vt}));var i,o,a=n("./node_modules/url-toolkit/src/url-toolkit.js"),s=n("./src/errors.ts"),u=n("./src/polyfills/number-isFinite.js"),l=n("./src/events.js"),c=n("./src/utils/logger.js"),f={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},p=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(f[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){c.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(o||(o={}));var d=n("./src/demux/mp4demuxer.js");function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y,v=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,n,r;return t=e,(n=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(a.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&h(t.prototype,n),r&&h(t,r),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(y||(y={}));var m=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[y.AUDIO]=!1,e[y.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,n,r,i=e.prototype;return i.setByteRange=function(e,t){var n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},i.addElementaryStream=function(e){this._elementaryStreams[e]=!0},i.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},i.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},i.setDecryptDataFromLevelKey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new v(e.baseuri,e.reluri)).method=e.method,n.iv=this.createInitializationVector(t)),n},t=e,(n=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(u.isFiniteNumber)(this.programDateTime))return null;var e=Object(u.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&g(t.prototype,n),r&&g(t,r),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,n,r;return t=e,(n=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(u.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&b(t.prototype,n),r&&b(t,r),e}(),k=/^(\d+)x(\d+)$/,E=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,w=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=k.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(E.lastIndex=0;null!==(t=E.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},e}(),T={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function S(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var A=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,O=/#EXT-X-MEDIA:(.*)/g,P=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),R=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,C=/\.(mp4|m4s|m4v|m4a)$/i,x=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},e.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var r,i=[];function o(e,t){["video","audio"].forEach((function(n){var r=e.filter((function(e){return function(e,t){var n=T[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)}));if(r.length){var i=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter((function(e){return-1===r.indexOf(e)}))}})),t.unknownCodecs=e}for(A.lastIndex=0;null!=(r=A.exec(t));){var a={},s=a.attrs=new w(r[1]);a.url=e.resolve(r[2],n);var u=s.decimalResolution("RESOLUTION");u&&(a.width=u.width,a.height=u.height),a.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a.name=s.NAME,o([].concat((s.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=e.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},e.parseMasterPlaylistMedia=function(t,n,r,i){var o;void 0===i&&(i=[]);var a=[],s=0;for(O.lastIndex=0;null!==(o=O.exec(t));){var u=new w(o[1]);if(u.TYPE===r){var l={id:s++,groupId:u["GROUP-ID"],name:u.NAME||u.LANGUAGE,type:r,default:"YES"===u.DEFAULT,autoselect:"YES"===u.AUTOSELECT,forced:"YES"===u.FORCED,lang:u.LANGUAGE};if(u.URI&&(l.url=e.resolve(u.URI,n)),i.length){var c=e.findGroup(i,l.groupId);l.audioCodec=c?c.codec:i[0].codec}a.push(l)}}return a},e.parseLevelPlaylist=function(e,t,n,r,i){var o,a,s,l=0,f=0,p=new _(t),d=0,h=null,y=new m,g=null;for(P.lastIndex=0;null!==(o=P.exec(e));){var b=o[1];if(b){y.duration=parseFloat(b);var k=(" "+o[2]).slice(1);y.title=k||null,y.tagList.push(k?["INF",b,k]:["INF",b])}else if(o[3]){if(Object(u.isFiniteNumber)(y.duration)){var E=l++;y.type=r,y.start=f,s&&(y.levelkey=s),y.sn=E,y.level=n,y.cc=d,y.urlId=i,y.baseurl=t,y.relurl=(" "+o[3]).slice(1),D(y,h),p.fragments.push(y),h=y,f+=y.duration,y=new m}}else if(o[4]){var T=(" "+o[4]).slice(1);h?y.setByteRange(T,h):y.setByteRange(T)}else if(o[5])y.rawProgramDateTime=(" "+o[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),null===g&&(g=p.fragments.length);else{if(!(o=o[0].match(R))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(a=1;a<o.length&&void 0===o[a];a++);var S=(" "+o[a+1]).slice(1),A=(" "+o[a+2]).slice(1);switch(o[a]){case"#":y.tagList.push(A?[S,A]:[S]);break;case"PLAYLIST-TYPE":p.type=S.toUpperCase();break;case"MEDIA-SEQUENCE":l=p.startSN=parseInt(S);break;case"TARGETDURATION":p.targetduration=parseFloat(S);break;case"VERSION":p.version=parseInt(S);break;case"EXTM3U":break;case"ENDLIST":p.live=!1;break;case"DIS":d++,y.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(S);break;case"KEY":var O=new w(S),x=O.enumeratedString("METHOD"),I=O.URI,L=O.hexadecimalInteger("IV");x&&(s=new v(t,I),I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(x)>=0&&(s.method=x,s.key=null,s.iv=L));break;case"START":var M=new w(S).decimalFloatingPoint("TIME-OFFSET");Object(u.isFiniteNumber)(M)&&(p.startTimeOffset=M);break;case"MAP":var N=new w(S);y.relurl=N.URI,N.BYTERANGE&&y.setByteRange(N.BYTERANGE),y.baseurl=t,y.level=n,y.type=r,y.sn="initSegment",p.initSegment=y,(y=new m).rawProgramDateTime=p.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+o)}}}return(y=h)&&!y.relurl&&(p.fragments.pop(),f-=y.duration),p.totalduration=f,p.averagetargetduration=f/p.fragments.length,p.endSN=l-1,p.startCC=p.fragments[0]?p.fragments[0].cc:0,p.endCC=d,!p.initSegment&&p.fragments.length&&p.fragments.every((function(e){return C.test(e.relurl)}))&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(y=new m).relurl=p.fragments[0].relurl,y.baseurl=t,y.level=n,y.type=r,y.sn="initSegment",p.initSegment=y,p.needSidxRanges=!0),g&&function(e,t){for(var n=e[t],r=t-1;r>=0;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(p.fragments,g),p},e}();function D(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(u.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var I=window.performance,L=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.MANIFEST_LOADING,l.default.LEVEL_LOADING,l.default.AUDIO_TRACK_LOADING,l.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.canHaveQualityLevels=function(e){return e!==i.AUDIO_TRACK&&e!==i.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case i.AUDIO_TRACK:return o.AUDIO;case i.SUBTITLE_TRACK:return o.SUBTITLE;default:return o.MAIN}},r.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n};var a=r.prototype;return a.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},a.getInternalLoader=function(e){return this.loaders[e.type]},a.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},a.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},a.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},a.onManifestLoading=function(e){this.load({url:e.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},a.onLevelLoading=function(e){this.load({url:e.url,type:i.LEVEL,level:e.level,id:e.id,responseType:"text"})},a.onAudioTrackLoading=function(e){this.load({url:e.url,type:i.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},a.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:i.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},a.load=function(e){var t=this.hls.config;c.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n,r,o,a,s=this.getInternalLoader(e);if(s){var u=s.context;if(u&&u.url===e.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case i.MANIFEST:n=t.manifestLoadingMaxRetry,r=t.manifestLoadingTimeOut,o=t.manifestLoadingRetryDelay,a=t.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:n=0,a=0,o=0,r=t.levelLoadingTimeOut;break;default:n=t.levelLoadingMaxRetry,r=t.levelLoadingTimeOut,o=t.levelLoadingRetryDelay,a=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var l={timeout:r,maxRetry:n,retryDelay:o,maxRetryDelay:a},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,l,f),!0},a.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);if(this.resetInternalLoader(n.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=I.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},a.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},a.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},a._handleMasterPlaylist=function(e,t,n,i){var o=this.hls,a=e.data,s=r.getResponseUrl(e,n),u=x.parseMasterPlaylist(a,s);if(u.length){var f=u.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=x.parseMasterPlaylistMedia(a,s,"AUDIO",f),d=x.parseMasterPlaylistMedia(a,s,"SUBTITLES");if(p.length){var h=!1;p.forEach((function(e){e.url||(h=!0)})),!1===h&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}o.trigger(l.default.MANIFEST_LOADED,{levels:u,audioTracks:p,subtitles:d,url:s,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,n,"no level found in manifest",i)},a._handleTrackOrLevelPlaylist=function(e,t,n,o){var a=this.hls,s=n.id,c=n.level,f=n.type,p=r.getResponseUrl(e,n),d=Object(u.isFiniteNumber)(s)?s:0,h=Object(u.isFiniteNumber)(c)?c:d,y=r.mapContextToLevelType(n),v=x.parseLevelPlaylist(e.data,p,h,y,d);if(v.tload=t.tload,f===i.MANIFEST){var g={url:p,details:v};a.trigger(l.default.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:p,stats:t,networkDetails:o})}if(t.tparsed=I.now(),v.needSidxRanges){var m=v.initSegment.url;this.load({url:m,isSidxRequest:!0,type:f,level:c,levelDetails:v,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=v,this._handlePlaylistLoaded(e,t,n,o)},a._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var n=d.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach((function(e,t){var n=e.info;if(i){var r=i.fragments[t];0===r.byteRange.length&&r.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),i&&i.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},a._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},a._handleNetworkError=function(e,t,n,r){var o,a;void 0===n&&(n=!1),void 0===r&&(r=null),c.logger.info("A network error occured while loading a "+e.type+"-type playlist");var u=this.getInternalLoader(e);switch(e.type){case i.MANIFEST:o=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case i.LEVEL:o=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case i.AUDIO_TRACK:o=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}u&&(u.abort(),this.resetInternalLoader(e.type));var f={type:s.ErrorTypes.NETWORK_ERROR,details:o,fatal:a,url:e.url,loader:u,context:e,networkDetails:t};r&&(f.response=r),this.hls.trigger(l.default.ERROR,f)},a._handlePlaylistLoaded=function(e,t,n,o){var a=n.type,s=n.level,u=n.id,c=n.levelDetails;if(c&&c.targetduration)if(r.canHaveQualityLevels(n.type))this.hls.trigger(l.default.LEVEL_LOADED,{details:c,level:s||0,id:u||0,stats:t,networkDetails:o});else switch(a){case i.AUDIO_TRACK:this.hls.trigger(l.default.AUDIO_TRACK_LOADED,{details:c,id:u,stats:t,networkDetails:o});break;case i.SUBTITLE_TRACK:this.hls.trigger(l.default.SUBTITLE_TRACK_LOADED,{details:c,id:u,stats:t,networkDetails:o})}else this._handleManifestParsingError(e,n,"invalid target duration",o)},r}(p),M=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.FRAG_LOADING)||this).loaders={},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.destroy=function(){var t=this.loaders;for(var n in t){var r=t[n];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},i.onFragLoading=function(e){var t=e.frag,n=t.type,r=this.loaders,i=this.hls.config,o=i.fLoader,a=i.loader;t.loaded=0;var s,l,f,p=r[n];p&&(c.logger.warn("abort previous fragment loader for type: "+n),p.abort()),p=r[n]=t.loader=i.fLoader?new o(i):new a(i),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var d=t.byteRangeStartOffset,h=t.byteRangeEndOffset;Object(u.isFiniteNumber)(d)&&Object(u.isFiniteNumber)(h)&&(s.rangeStart=d,s.rangeEnd=h),l={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},p.load(s,l,f)},i.loadsuccess=function(e,t,n,r){void 0===r&&(r=null);var i=e.data,o=n.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:i,frag:o,stats:t,networkDetails:r})},i.loaderror=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},i.loadtimeout=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},i.loadprogress=function(e,t,n,r){void 0===r&&(r=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},r}(p),N=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.destroy=function(){for(var t in this.loaders){var n=this.loaders[t];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},i.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n];if(t.decryptdata){var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;if(r&&(c.logger.warn("abort previous key loader for type:"+n),r.abort()),!i)return void c.logger.warn("key uri is falsy");t.loader=this.loaders[n]=new o.loader(o),this.decrypturl=i,this.decryptkey=null;var a={url:i,frag:t,responseType:"arraybuffer"},s={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(a,s,u)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},i.loadsuccess=function(e,t,n){var r=n.frag;r.decryptdata?(this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,delete this.loaders[r.type],this.hls.trigger(l.default.KEY_LOADED,{frag:r})):c.logger.error("after key load, decryptdata unset")},i.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},i.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},r}(p),j="NOT_LOADED",U="APPENDING",F="PARTIAL",B="OK",V=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.BUFFER_APPENDED,l.default.FRAG_BUFFERED,l.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=t.config,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,p.prototype.destroy.call(this),e.prototype.destroy.call(this)},i.getBufferedFrag=function(e,t){var n=this.fragments,r=Object.keys(n).filter((function(r){var i=n[r];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS}));if(0===r.length)return null;var i=r.pop();return n[i].body},i.detectEvictedFragments=function(e,t){var n,r,i=this;Object.keys(this.fragments).forEach((function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){n=s.time;for(var u=0;u<n.length;u++)if(r=n[u],!1===i.isTimeBuffered(r.startPTS,r.endPTS,t)){i.removeFragment(a.body);break}}}}))},i.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(e.hasElementaryStream(n)){var i=t.timeRanges[n];r.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},i.getBufferedTimes=function(e,t,n){for(var r,i,o=[],a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i){o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<i&&t>r)o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),a=!0;else if(t<=r)break}return{time:o,partial:a}},i.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},i.getPartialFragment=function(e){var t,n,r,i=this,o=null,a=0;return Object.keys(this.fragments).forEach((function(s){var u=i.fragments[s];i.isPartial(u)&&(n=u.body.startPTS-i.bufferPadding,r=u.body.endPTS+i.bufferPadding,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(o=u.body,a=t)))})),o},i.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],r=j;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?F:B:U),r},i.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},i.isTimeBuffered=function(e,t,n){for(var r,i,o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},i.onFragLoaded=function(e){var t=e.frag;Object(u.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)}))},i.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},i.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},i.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},i.removeAllFragments=function(){this.fragments=Object.create(null)},r}(p),G={search:function(e,t){for(var n=0,r=e.length-1,i=null,o=null;n<=r;){var a=t(o=e[i=(n+r)/2|0]);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null}},K=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var r,i=e.buffered,o=[];for(r=0;r<i.length;r++)o.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(o,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var r=[];if(n)for(var i=0;i<e.length;i++){var o=r.length;if(o){var a=r[o-1].end;e[i].start-a<n?e[i].end>a&&(r[o-1].end=e[i].end):r.push(e[i])}else r.push(e[i])}else r=e;for(var s,u=0,l=t,c=t,f=0;f<r.length;f++){var p=r[f].start,d=r[f].end;if(t+n>=p&&t<d)l=p,u=(c=d)-t;else if(t+n<p){s=p;break}}return{len:u,start:l,end:c,nextStart:s}},e}(),H=n("./node_modules/eventemitter3/index.js"),z=n("./node_modules/webworkify-webpack/index.js"),W=n("./src/demux/demuxer-inline.js");function Y(){return window.MediaSource||window.WebKitMediaSource}var q=n("./src/utils/get-self-scope.js"),X=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))},r}(H.EventEmitter),$=Object(q.getSelfScope)(),J=Y()||{isTypeSupported:function(){return!1}},Q=function(){function e(e,t){var n=this;this.hls=e,this.id=t;var r=this.observer=new X,i=e.config,o=function(t,r){(r=r||{}).frag=n.frag,r.id=n.id,e.trigger(t,r)};r.on(l.default.FRAG_DECRYPTED,o),r.on(l.default.FRAG_PARSING_INIT_SEGMENT,o),r.on(l.default.FRAG_PARSING_DATA,o),r.on(l.default.FRAG_PARSED,o),r.on(l.default.ERROR,o),r.on(l.default.FRAG_PARSING_METADATA,o),r.on(l.default.FRAG_PARSING_USERDATA,o),r.on(l.default.INIT_PTS_FOUND,o);var a={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){var f;c.logger.log("demuxing in webworker");try{f=this.w=z(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(t){e.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},f.postMessage({cmd:"init",typeSupported:a,vendor:u,id:t,config:JSON.stringify(i)})}catch(e){c.logger.warn("Error in worker:",e),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),f&&$.URL.revokeObjectURL(f.objectURL),this.demuxer=new W.default(r,a,i,u),this.w=void 0}}else this.demuxer=new W.default(r,a,i,u)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.push=function(e,t,n,r,i,o,a,s){var l=this.w,f=Object(u.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,p=i.decryptdata,d=this.frag,h=!(d&&i.cc===d.cc),y=!(d&&i.level===d.level),v=d&&i.sn===d.sn+1,g=!y&&v;if(h&&c.logger.log(this.id+":discontinuity detected"),y&&c.logger.log(this.id+":switch detected"),this.frag=i,l)l.postMessage({cmd:"demux",data:e,decryptdata:p,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:f,discontinuity:h,trackSwitch:y,contiguous:g,duration:o,accurateTimeOffset:a,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,p,t,n,r,f,h,y,g,o,a,s)}},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":$.URL.revokeObjectURL(this.w.objectURL);break;case l.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}();function Z(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function ee(e,t,n){var r=e[t],i=e[n],o=i.startPTS;Object(u.isFiniteNumber)(o)?n>t?(r.duration=o-r.start,r.duration<0&&c.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-o,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=n>t?r.start+r.duration:Math.max(r.start-i.duration,0)}function te(e,t,n,r,i,o){var a=n;if(Object(u.isFiniteNumber)(t.startPTS)){var s=Math.abs(t.startPTS-n);Object(u.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,a=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),o=Math.max(o,t.endDTS)}var l=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=a,t.endPTS=r,t.startDTS=i,t.endDTS=o,t.duration=r-n;var c,f,p,d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;for(c=d-e.startSN,(f=e.fragments)[c]=t,p=c;p>0;p--)ee(f,p,p-1);for(p=c;p<f.length-1;p++)ee(f,p,p+1);return e.PTSKnown=!0,l}function ne(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var n,r=0;if(re(e,t,(function(e,i){r=e.cc-i.cc,Object(u.isFiniteNumber)(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,n=i),t.PTSKnown=!0})),t.PTSKnown){if(r){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,o=0;o<i.length;o++)i[o].cc+=r}n?te(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(e,t){var n=t.startSN-e.startSN,r=e.fragments,i=t.fragments;if(!(n<0||n>r.length))for(var o=0;o<i.length;o++)i[o].start+=r[n].start}(e,t),t.PTSKnown=e.PTSKnown}}function re(e,t,n){if(e&&t)for(var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=r;a<=i;a++){var s=e.fragments[o+a],u=t.fragments[a];if(!s||!u)break;n(s,u,a)}}function ie(e,t,n){var r=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=r/2;return e&&t.endSN===e.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}var oe={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};function ae(e,t){t.fragments.forEach((function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}})),t.PTSKnown=!0}function se(e,t,n){!function(e,t,n){if(function(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}(e,n,t)){var r=function(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var i=function(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(n.details,t);r&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),ae(r.start,t))}}(e,n,t),!n.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var n=t.fragments[0].programDateTime,r=(e.fragments[0].programDateTime-n)/1e3+t.fragments[0].start;Object(u.isFiniteNumber)(r)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),ae(r,e))}}(n,t.details)}function ue(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(u.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<e.length;++r){var i=e[r];if(fe(t,n,i))return i}return null}function le(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&&!ce(n,r,i)?i:G.search(t,ce.bind(null,n,r))}function ce(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function fe(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}var pe=function(){function e(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,n=this.media,r=this.stalled,i=n.currentTime,o=n.seeking,a=this.seeking&&!o,s=!this.seeking&&o;if(this.seeking=o,i===e){if((s||a)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var u=K.bufferInfo(n,i,0),l=u.len>0,f=u.nextStart||0;if(l||f){if(o){if(u.len>2||!f||f-i>2)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(f,u.start||0)-i;if(p>0&&p<=2)return void this._trySkipBufferHole(null)}var d=self.performance.now();if(null!==r){var h=d-r;!o&&h>=250&&this._reportStall(u.len);var y=K.bufferInfo(n,i,t.maxBufferHole);this._tryFixBufferStall(y,h)}else this.stalled=d}}}else if(this.moved=!0,null!==r){if(this.stallReported){var v=self.performance.now()-r;c.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,o=r.getPartialFragment(i);o&&this._trySkipBufferHole(o)||e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,r=this.media,i=r.currentTime,o=0,a=0;a<r.buffered.length;a++){var u=r.buffered.start(a);if(i+t.maxBufferHole>=o&&i<u){var f=Math.max(u+.05,r.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+f),this.moved=!0,this.stalled=null,r.currentTime=f,e&&n.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+f,frag:e}),f}o=r.buffered.end(a)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var o=r+i*e.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+r+" to "+o),n.currentTime=o,t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var he=function(e){var t,n;function r(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(n=e.call.apply(e,[this,t].concat(i))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(de(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},i.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},i.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},i.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},i.doTick=function(){},r}(p),ye="STOPPED",ve="STARTING",ge="IDLE",me="PAUSED",be="KEY_LOADING",_e="FRAG_LOADING",ke="FRAG_LOADING_WAITING_RETRY",Ee="WAITING_TRACK",we="PARSING",Te="PARSED",Se="BUFFER_FLUSHING",Ae="ENDED",Oe="ERROR",Pe="WAITING_INIT_PTS",Re="WAITING_LEVEL",Ce=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ye},i._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===F||i===B}return!1},i.onMediaSeeking=function(){var e=this.config,t=this.media,n=this.mediaBuffer,r=this.state,i=t?t.currentTime:null,o=K.bufferInfo(n||t,i,this.config.maxBufferHole);if(Object(u.isFiniteNumber)(i)&&c.logger.log("media seeking to "+i.toFixed(3)),r===_e){var a=this.fragCurrent;if(0===o.len&&a){var s=e.maxFragLookUpTolerance,l=a.start-s,f=a.start+a.duration+s;i<l||i>f?(a.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ge):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===Ae&&(0===o.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ge);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=ye,this.fragmentTracker=null},i.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},r}(he);function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=ye,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,a,f,p=r.prototype;return p.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(c.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=ge,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ye},p.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},p.doTick=function(){switch(this.state){case Se:this.fragLoadError=0;break;case ge:this._doTickIdle();break;case Re:var e=this.levels[this.level];e&&e.details&&(this.state=ge);break;case ke:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ge)}this._checkBuffer(),this._checkFragmentChanged()},p._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var a,s=o.bitrate;a=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,a=Math.min(a,t.maxMaxBufferLength);var u=K.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),f=u.len;if(!(f>=a)){c.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+a.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var p=o.details;if(!p||p.live&&this.levelLastLoaded!==i)this.state=Re;else{if(this._streamEnded(u,p)){var d={};return this.altAudio&&(d.type="video"),this.hls.trigger(l.default.BUFFER_EOS,d),void(this.state=Ae)}this._fetchPayloadOrEos(r,u,p)}}}}},p._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,o=n.fragments,a=o.length;if(0!==a){var s,u=o[0].start,l=o[a-1].start+o[a-1].duration,f=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var p=this.config.initialLiveManifestSize;if(a<p)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+p);if(null===(s=this._ensureFragmentAtLivePoint(n,f,u,l,r,o,a)))return}else f<u&&(s=o[0]);s||(s=this._findFragment(u,r,a,o,f,l,n)),s&&(s.encrypted?(c.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(c.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+f.toFixed(3)),this._loadFragment(s)))}},p._ensureFragmentAtLivePoint=function(e,t,n,r,i,o,a){var s,u=this.hls.config,l=this.media,f=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-u.maxFragLookUpTolerance,r-f)){var p=this.liveSyncPosition=this.computeLivePosition(n,e);t=p,l&&!l.paused&&l.readyState&&l.duration>p&&p>l.currentTime&&(c.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+p.toFixed(3)),l.currentTime=p),this.nextLoadPosition=p}if(e.PTSKnown&&t>r&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),s=ue(o,i.endProgramDateTime,u.maxFragLookUpTolerance);else{var d=i.sn+1;if(d>=e.startSN&&d<=e.endSN){var h=o[d-e.startSN];i.cc===h.cc&&(s=h,c.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=G.search(o,(function(e){return i.cc-e.cc})))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}s||(s=o[Math.min(a-1,Math.round(a/2))],c.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},p._findFragment=function(e,t,n,r,i,o,a){var s,u=this.hls.config;if(s=i<o?le(t,r,i,i>o-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance):r[n-1]){var l=s.sn-a.startSN,f=t&&s.level===t.level,p=r[l-1],d=r[l+1];if(t&&s.sn===t.sn)if(f&&!s.backtracked)if(s.sn<a.endSN){var h=t.deltaPTS;h&&h>u.maxBufferHole&&t.dropped&&l?(s=p,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=d,c.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(d&&d.backtracked?(c.logger.warn("Already backtracked from fragment "+d.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+d.sn),s=d):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,p?(s=p).backtracked=!0:l&&(s=null)))}return s},p._loadKey=function(e){this.state=be,this.hls.trigger(l.default.KEY_LOADING,{frag:e})},p._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(u.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===j||t===F?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(l.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new Q(this.hls,"main")),this.state=_e):t===U&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},p.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,o.MAIN)},p.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},p._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),K.isBuffered(n,t)?e=this.getBufferedFrag(t):K.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},p.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},p.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,K.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},p.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n,r;if((n=this.getBufferedFrag(e.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((r=this.getBufferedFrag(e.currentTime+t))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},p.flushMainBuffer=function(e,t){this.state=Se;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,n)},p.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new pe(n,t,this.fragmentTracker,this.hls)},p.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},p.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(u.isFiniteNumber)(t)&&c.logger.log("media seeked to "+t.toFixed(3)),this.tick()},p.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},p.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},p.onLevelLoaded=function(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],o=t.totalduration,a=0;if(c.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+o),t.live){var s=i.details;s&&t.fragments.length>0?(ne(s,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,s),t.PTSKnown&&Object(u.isFiniteNumber)(a)?c.logger.log("live playlist sliding:"+a.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),se(this.fragPrevious,r,t))):(c.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,se(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=n,this.hls.trigger(l.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var f=t.startTimeOffset;Object(u.isFiniteNumber)(f)?(f<0&&(c.logger.log("negative start time offset "+f+", count from end of last fragment"),f=a+o+f),c.logger.log("start time offset found in playlist, adjust startPosition to "+f),this.startPosition=f):t.live?(this.startPosition=this.computeLivePosition(a,t),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Re&&(this.state=ge),this.tick()},p.onKeyLoaded=function(){this.state===be&&(this.state=ge,this.tick())},p.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,o=e.frag;if(this.state===_e&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var a=e.stats,s=r[t.level],u=s.details;if(this.bitrateTest=!1,this.stats=a,c.logger.log("Loaded "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level),o.bitrateTest&&n.nextLoadLevel)this.state=ge,this.startFragRequested=!1,a.tparsed=a.tbuffered=window.performance.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=ge,a.tparsed=a.tbuffered=window.performance.now(),u.initSegment.data=e.payload,n.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else{c.logger.log("Parsing "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level+", cc "+t.cc),this.state=we,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var f=!(i&&i.seeking)&&(u.PTSKnown||!u.live),p=u.initSegment?u.initSegment.data:[],d=this._getAudioCodec(s);(this.demuxer=this.demuxer||new Q(this.hls,"main")).push(e.payload,p,d,s.videoCodec,t,u.totalduration,f)}}this.fragLoadError=0},p.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===we){var r,i,o=e.tracks;if(o.audio&&this.altAudio&&delete o.audio,i=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(a="mp4a.40.2",c.logger.log("Android: force audio codec to "+a)),i.levelCodec=a,i.id=e.id}for(r in(i=o.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,o),o){i=o[r],c.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}},p.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"main"===e.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===we){var i=this.levels[this.level],o=n;if(Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),!0===e.hasAudio&&o.addElementaryStream(y.AUDIO),!0===e.hasVideo&&o.addElementaryStream(y.VIDEO),c.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped)if(o.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",o.sn);else{var a=i.details;if(!a||o.sn!==a.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",o.sn),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=ge,this.fragPrevious=o,void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",o.sn)}else o.backtracked=!1;var s=te(i.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),f=this.hls;f.trigger(l.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(n){n&&n.length&&t.state===we&&(t.appended=!0,t.pendingBuffering=!0,f.trigger(l.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))})),this.tick()}},p.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===we&&(this.stats.tparsed=window.performance.now(),this.state=Te,this._checkAppendedParsed())},p.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ge}var i=this.hls;i.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},p.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},p.onBufferCreated=function(e){var t,n,r=e.tracks,i=!1;for(var o in r){var a=r[o];"main"===a.id?(n=o,t=a,"video"===o&&(this.videoBuffer=r[o].buffer)):i=!0}i&&t?(c.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},p.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==we&&t!==Te||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},p._checkAppendedParsed=function(){if(!(this.state!==Te||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+oe.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=ge}this.tick()}},p.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&K.isBuffered(this.media,this.media.currentTime)&&K.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ke}else c.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Oe;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Oe&&(e.fatal?(this.state=Oe,c.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Re||(this.state=ge));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==we&&this.state!==Te||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ge):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},p._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},p._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},p.onFragLoadEmergencyAborted=function(){this.state=ge,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},p.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(y.VIDEO,e.buffered),this.state=ge,this.fragPrevious=null},p.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},p._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&n>=0&&(c.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},p._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},i=r,(a=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&xe(i.prototype,a),f&&xe(i,f),r}(Ce);function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.performance;var Le,Me=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.FRAG_LOADED,l.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Le=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a,u=r.prototype;return u.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},u.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},u.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},u.stopLoad=function(){this.canload=!1},u.onManifestLoaded=function(e){var t,n=[],r=[],i={},o=null,a=!1,u=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,a=a||!!e.videoCodec,u=u||!!e.audioCodec,Le&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(o=i[e.bitrate])?o.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&(u=!0,Z(o||e,"audio",t.AUDIO)),t.SUBTITLES&&Z(o||e,"text",t.SUBTITLES))})),a&&u&&(n=n.filter((function(e){return!!e.videoCodec}))),n=n.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||S(t,"audio"))&&(!n||S(n,"video"))})),e.audioTracks&&(r=e.audioTracks.filter((function(e){return!e.audioCodec||S(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),n.length>0){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var f=0;f<n.length;f++)if(n[f].bitrate===t){this._firstLevel=f,c.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(l.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:a,altAudio:r.some((function(e){return!!e.url}))})}else this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},u.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c.logger.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(l.default.LEVEL_SWITCHING,r)}var i=t[e],o=i.details;if(!o||o.live){var a=i.urlId;n.trigger(l.default.LEVEL_LOADING,{url:i.url[a],level:e,id:a})}}else n.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},u.onError=function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},u.recoverLevel=function(e,t,n,r){var i,o,a,s=this,u=this.hls.config,l=e.details,f=this._levels[t];if(f.loadError++,f.fragmentError=r,n){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),o),e.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+l+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=f.url.length)>1&&f.loadError<i?(f.urlId=(f.urlId+1)%i,f.details=void 0,c.logger.warn("level controller, "+l+" for level "+t+": switching to redundant URL-id "+f.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,c.logger.warn("level controller, "+l+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):r&&(c.logger.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},u.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},u.onLevelLoaded=function(e){var t=this,n=e.level,r=e.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var o=ie(i.details,r,e.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),o)}else this.clearTimer()}},u.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===t){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},u.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,r=e.url[n];c.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(l.default.LEVEL_LOADING,{url:r,level:t,id:n})}}},i=r,(o=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Ie(i.prototype,o),a&&Ie(i,a),r}(p),Ne=n("./src/demux/id3.js");function je(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function Ue(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Fe=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_METADATA,l.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.destroy=function(){p.prototype.destroy.call(this)},i.onMediaAttached=function(e){this.media=e.media,this.media},i.onMediaDetaching=function(){Ue(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return je(n,this.media),n}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=Ne.default.getID3Frames(n[i].data);if(o){var a=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;a===s?s+=1e-4:a>s&&(c.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),s=a+.25);for(var u=0;u<o.length;u++){var l=o[u];if(!Ne.default.isTimeStampFrame(l)){var f=new r(a,s,"");f.value=l,this.id3Track.addCue(f)}}}}},i.onLiveBackBufferReached=function(e){var t=e.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var r=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var n=0,r=e.length-1;n<=r;){var i=Math.floor((r+n)/2);if(t<e[i].endTime)r=i-1;else{if(!(t>e[i].endTime))return e[i];n=i+1}}return e[n].endTime-t<t-e[r].endTime?e[n]:e[r]}(n.cues,t);if(r)for(;n.cues[0]!==r;)n.removeCue(n.cues[0])}},r}(p),Be=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),Ve=function(){function e(e,t,n,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Be(t),this.fast_=new Be(n)}var t=e.prototype;return t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ke=window.performance,He=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=t,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a,f=r.prototype;return f.destroy=function(){this.clearTimer(),p.prototype.destroy.call(this)},f.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,r,i=this.hls,o=i.config,a=t.level;i.levels[a].details.live?(n=o.abrEwmaFastLive,r=o.abrEwmaSlowLive):(n=o.abrEwmaFastVoD,r=o.abrEwmaSlowVoD),this._bwEstimator=new Ve(i,r,n,o.abrEwmaDefaultEstimate)}},f._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=r.stats;if(t&&o&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var a=Ke.now()-o.trequest,s=Math.abs(t.playbackRate);if(a>500*n.duration/s){var u=e.levels,f=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),p=u[n.level],d=p.realBitrate?Math.max(p.realBitrate,p.bitrate):p.bitrate,h=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*d/8)),y=t.currentTime,v=(h-o.loaded)/f,g=(K.bufferInfo(t,y,e.config.maxBufferHole).end-y)/s;if(g<2*n.duration/s&&v>g){var m;for(m=n.level-1;m>i;m--){var b=u[m].realBitrate?Math.max(u[m].realBitrate,u[m].bitrate):u[m].bitrate;if(n.duration*b/(6.4*f)<g)break}void 0<v&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+v.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=m,this._bwEstimator.sample(a,o.loaded),r.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}}},f.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(u.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}},f.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&"main"===n.type&&Object(u.isFiniteNumber)(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var r=t.tparsed-t.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},f.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},f.clearTimer=function(){clearInterval(this.timer),this.timer=null},f._findBestLevel=function(e,t,n,r,i,o,a,s,u){for(var l=i;l>=r;l--){var f=u[l];if(f){var p=f.details,d=p?p.totalduration/p.fragments.length:t,h=!!p&&p.live,y=void 0;y=l<=e?a*n:s*n;var v=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,g=v*d/y;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(y)+"/"+v+"/"+d+"/"+o+"/"+g),y>v&&(!g||h&&!this.bitrateTestDelay||g<o))return l}}return-1},i=r,(o=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,l=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,p=(K.bufferInfo(o,u,r.maxBufferHole).end-u)/l,d=this._findBestLevel(a,s,f,i,t,p,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(d>=0)return d;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var h=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,y=r.abrBandWidthFactor,v=r.abrBandWidthUpFactor;if(0===p){var g=this.bitrateTestDelay;g&&(h=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-g,c.logger.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),y=v=1)}return d=this._findBestLevel(a,s,f,i,t,p+h,y,v,n),Math.max(d,0)}}])&&Ge(i.prototype,o),a&&Ge(i,a),r}(p),ze=Y(),We=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){c.logger.log("media source opened"),n.hls.trigger(l.default.MEDIA_ATTACHED,{media:n.media});var e=n.mediaSource;e&&e.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){c.logger.log("media source closed")},n._onMediaSourceEnded=function(){c.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var e=n.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+n.audioTimestampOffset),e.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var t=n.parent,r=n.segments.reduce((function(e,n){return n.parent===t?e+1:e}),0),i={},o=n.sourceBuffer;for(var a in o){var s=o[a];if(!s)throw Error("handling source buffer update end error: source buffer for "+a+" uninitilized and unable to update buffered TimeRanges.");i[a]=s.buffered}n.hls.trigger(l.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:i}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===r&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(e){c.logger.error("sourceBuffer error:",e),n.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=t.config,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.destroy=function(){p.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){c.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},i.onManifestParsed=function(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e.altAudio?2:1,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&ze){var n=this.mediaSource=new ze;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},i.onMediaDetaching=function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(l.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(n){t.pendingTracks[n]=e[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var r in e)if(!t[r]){var i=e[r];if(!i)throw Error("source buffer exists for track "+r+", however track does not");var o=i.levelCodec||i.codec,a=i.container+";codecs="+o;c.logger.log("creating sourceBuffer("+a+")");try{var u=t[r]=n.addSourceBuffer(a);u.addEventListener("updateend",this._onSBUpdateEnd),u.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:u,codec:o,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:a})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},i.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var n=this.sourceBuffer[t];n&&!n.ended&&(n.ended=!0,c.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),o=r.length-1;o>=0;o--){var a=r[o],s=n[a];if(s){var u=s.buffered;u.length>0&&i>u.start(0)&&this.removeBufferRange(a,s,0,i)&&this.hls.trigger(l.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},i.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var r=this.sourceBuffer[n];if(r&&!0===r.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(u.isFiniteNumber)(e))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(t+=i.buffered.length)}}catch(e){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}},i.doAppending=function(){var e=this.config,t=this.hls,n=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=n.shift();if(i)try{var o=r[i.type];if(!o)return void this._onSBUpdateEnd();if(o.updating)return void n.unshift(i);o.ended=!1,this.parent=i.parent,o.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(r){c.logger.error("error while trying to append buffer:"+r.message),n.unshift(i);var a={type:s.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===r.code?(this.segments=[],a.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,a.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),t.trigger(l.default.ERROR,a)}}}},i.flushBuffer=function(e,t,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var o=r[n];if(o){if(o.ended=!1,o.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,o,e,t))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},i.removeBufferRange=function(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),a=t.buffered.end(i),s=Math.max(o,n),u=Math.min(a,r);if(Math.min(u,a)-s>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),c.logger.log("sb remove "+e+" ["+s+","+u+"], of ["+o+","+a+"], pos:"+l),t.remove(s,u),!0}}}catch(e){c.logger.warn("removeBufferRange failed",e)}return!1},r}(p);function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qe=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_CODECS,l.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a,s=r.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return r.isLevelAllowed(i,t.restrictedLevels)&&i<=e}));return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r,i,o=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[a+1])||r.width!==i.width||r.height!==i.height)){o=a;break}}return o},i=r,a=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(o=[{key:"mediaWidth",get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e}}])&&Ye(i.prototype,o),a&&Ye(i,a),r}(p),Xe=window.performance,$e=function(e){var t,n;function r(t){return e.call(this,t,l.default.MEDIA_ATTACHING)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},i.checkFPS=function(e,t,n){var r=Xe.now();if(t){if(this.lastTime){var i=r-this.lastTime,o=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*o/i,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),s>0&&o>u.config.fpsDroppedMonitoringThreshold*a){var f=u.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=f)&&(f-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:u.currentLevel}),u.autoLevelCapping=f,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},i.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},r}(p),Je=window,Qe=Je.performance,Ze=Je.XMLHttpRequest,et=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:Qe.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new Ze;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,o=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(Qe.now(),r.trequest)),4===n){var a=t.status;if(a>=200&&a<300){var s,u;r.tload=Math.max(r.tfirst,Qe.now()),u="arraybuffer"===i.responseType?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=u;var l={url:t.responseURL,data:s};this.callbacks.onSuccess(l,r,i,t)}else r.retry>=o.maxRetry||a>=400&&a<499?(c.logger.error(a+" while loading "+i.url),this.callbacks.onError({code:a,text:t.statusText},i,t)):(c.logger.warn(a+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},t.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},e}();function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.AUDIO_TRACK_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.LEVEL_LOADED,l.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a,u=r.prototype;return u.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},u.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},u.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",e.id);else{if(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},u.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},u.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},u.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},u._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,r=t.type,i=t.id;this.hls.trigger(l.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(t)}},u.doTick=function(){this._updateTrack(this._trackId)},u._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},u._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:c.logger.warn("No default audio tracks defined")}var o=!1,a=function(){t.forEach((function(t){o||e.audioGroupId&&t.groupId!==e.audioGroupId||r&&r!==t.name||(e._setAudioTrack(t.id),o=!0)}))};a(),o||(r=null,a()),o||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},u._needsTrackLoading=function(e){var t=e.details,n=e.url;return!(t&&!t.live||!n)},u._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;c.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},u._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},u._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,r=t.language,i=t.groupId;c.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var o=e,a=0;a<this.tracks.length;a++)if(!this.trackIdBlacklist[a]&&this.tracks[a].name===n){o=a;break}o!==e?(c.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)):c.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},i=r,(o=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&tt(i.prototype,o),a&&tt(i,a),r}(he);function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var it=window.performance,ot=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_RESET,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=ye,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a,f=r.prototype;return f.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,c.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===Pe&&this.tick())},f.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=ge):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ve),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ye},f.doTick=function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case Oe:case me:case Se:break;case ve:this.state=Ee,this.loadedmetadata=!1;break;case ge:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,f=K.bufferInfo(a,e,i.maxBufferHole),p=K.bufferInfo(s,e,i.maxBufferHole),d=f.len,h=f.end,y=this.fragPrevious,v=Math.min(i.maxBufferLength,i.maxMaxBufferLength),g=Math.max(v,p.len),m=this.audioSwitch,b=this.trackId;if((d<g||m)&&b<o.length){if(void 0===(n=o[b].details)){this.state=Ee;break}if(!m&&this._streamEnded(f,n))return this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),void(this.state=Ae);var _,k=n.fragments,E=k.length,w=k[0].start,T=k[E-1].start+k[E-1].duration;if(m)if(n.live&&!n.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=e,n.PTSKnown&&e<w){if(!(f.end>w||f.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=w+.05}if(n.initSegment&&!n.initSegment.data)_=n.initSegment;else if(h<=w){if(_=k[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=function(e,t){return G.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(k,this.videoTrackCC)),n.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var S=f.nextStart?f.nextStart:w;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var A,O=i.maxFragLookUpTolerance,P=y?k[y.sn-k[0].sn+1]:void 0,R=function(e){var t=Math.min(O,e.duration);return e.start+e.duration-t<=h?1:e.start-t>h&&e.start?-1:0};h<T?(h>T-O&&(O=0),A=P&&!R(P)?P:G.search(k,R)):A=k[E-1],A&&(_=A,w=A.start,y&&_.level===y.level&&_.sn===y.sn&&(_.sn<n.endSN?(_=k[_.sn+1-n.startSN],c.logger.log("SN just loaded, load next one: "+_.sn)):_=null))}_&&(_.encrypted?(c.logger.log("Loading key for "+_.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+b),this.state=be,r.trigger(l.default.KEY_LOADING,{frag:_})):(c.logger.log("Loading "+_.sn+", cc: "+_.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+b+", currentTime:"+e+",bufferEnd:"+h.toFixed(3)),this.fragCurrent=_,(m||this.fragmentTracker.getState(_)===j)&&("initSegment"!==_.sn&&(this.startFragRequested=!0),Object(u.isFiniteNumber)(_.sn)&&(this.nextLoadPosition=_.start+_.duration),r.trigger(l.default.FRAG_LOADING,{frag:_}),this.state=_e)))}break;case Ee:(t=this.tracks[this.trackId])&&t.details&&(this.state=ge);break;case ke:var C=it.now(),x=this.retryDate,D=(a=this.media)&&a.seeking;(!x||C>=x||D)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ge);break;case Pe:var I=this.videoTrackCC;if(void 0===this.initPTS[I])break;var L=this.waitingFragment;if(L){var M=L.frag.cc;I!==M?(t=this.tracks[this.trackId]).details&&t.details.live&&(c.logger.warn("Waiting fragment CC ("+M+") does not match video track CC ("+I+")"),this.waitingFragment=null,this.state=ge):(this.state=_e,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ge}},f.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},f.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},f.onAudioTracksUpdated=function(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},f.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=me,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ge),this.tick()},f.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,o=0;if(c.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var a=r.details;a&&t.fragments.length>0?(ne(a,t),o=t.fragments[0].start,t.PTSKnown?c.logger.log("live audio playlist sliding:"+o.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(u.isFiniteNumber)(s)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(o,t),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Ee&&(this.state=ge),this.tick()},f.onKeyLoaded=function(){this.state===be&&(this.state=ge,this.tick())},f.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===_e&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,o=i.totalduration,a=t.level,s=t.sn,u=t.cc,f=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",p=this.stats=e.stats;if("initSegment"===s)this.state=ge,p.tparsed=p.tbuffered=it.now(),i.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:p,frag:t,id:"audio"}),this.tick();else{this.state=we,this.appended=!1,this.demuxer||(this.demuxer=new Q(this.hls,"audio"));var d=this.initPTS[u],h=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==d?(this.pendingBuffering=!0,c.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.demuxer.push(e.payload,h,f,null,t,o,!1,d)):(c.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=e,this.state=Pe)}}this.fragLoadError=0},f.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===we){var r,i=e.tracks;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,i),c.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,a))}this.tick()}}},f.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&r.sn===n.sn&&r.level===n.level&&this.state===we){var i=this.trackId,o=this.tracks[i],a=this.hls;Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(y.AUDIO),c.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(o.details,n,e.startPTS,e.endPTS);var f=this.audioSwitch,p=this.media,d=!1;if(f)if(p&&p.readyState){var h=p.currentTime;c.logger.log("switching audio track : currentTime:"+h),h>=e.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=Se,a.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,a.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,a.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:i});var v=this.pendingData;if(!v)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void a.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&v.push({type:e.type,data:t,parent:"audio",content:"data"})})),!d&&v.length&&(v.forEach((function(e){t.state===we&&(t.pendingBuffering=!0,t.hls.trigger(l.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},f.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===we&&(this.stats.tparsed=it.now(),this.state=Te,this._checkAppendedParsed())},f.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},f.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},f.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==we&&t!==Te||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},f._checkAppendedParsed=function(){if(!(this.state!==Te||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=it.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;r&&c.logger.log("audio buffered : "+oe.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ge}this.tick()}},f.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var o=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=it.now()+o,this.state=ke}else c.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Oe}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Oe&&(this.state=e.fatal?Oe:ge,c.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===we||this.state===Te)){var a=this.mediaBuffer,u=this.media.currentTime;if(a&&K.isBuffered(a,u)&&K.isBuffered(a,u+.5)){var f=this.config;f.maxMaxBufferLength>=f.maxBufferLength&&(f.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+f.maxMaxBufferLength+"s")),this.state=ge}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Se,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},f.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=Te):(this.state=ge,this.fragPrevious=null,this.tick())},i=r,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&rt(i.prototype,o),a&&rt(i,a),r}(Ce),at=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function i(t,i,o){var a=this,s={enumerable:!0};a.hasBeenReset=!1;var u="",l=!1,c=t,f=i,p=o,d=null,h="",y=!0,v="auto",g="start",m=50,b="middle",_=50,k="middle";Object.defineProperty(a,"id",r({},s,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(a,"pauseOnExit",r({},s,{get:function(){return l},set:function(e){l=!!e}})),Object.defineProperty(a,"startTime",r({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",r({},s,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",r({},s,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",r({},s,{get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",r({},s,{get:function(){return h},set:function(t){var n=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");h=n,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",r({},s,{get:function(){return y},set:function(e){y=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",r({},s,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",r({},s,{get:function(){return g},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",r({},s,{get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",r({},s,{get:function(){return b},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",r({},s,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",r({},s,{get:function(){return k},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");k=t,this.hasBeenReset=!0}})),a.displayState=void 0}return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),st=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function ut(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new st,this.regionList=[]}function lt(){this.values=Object.create(null)}function ct(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);2===a.length&&t(a[0],a[1])}}lt.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ft=new at(0,0,0),pt="middle"===ft.align?"middle":"center";function dt(e,t,n){var r=e;function i(){var t=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var r=new lt;ct(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start",pt,"end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start",pt,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",pt,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===ft.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",pt);var o=r.get("position","auto");"auto"===o&&50===ft.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function ht(e){return e.replace(/<br(?: \/)?>/gi,"\n")}ut.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=ht(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var i=(r=n()).match(/^(Ã¯Â»Â¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=n(),t.state){case"HEADER":/:/.test(r)?ct(r,(function(e,t){}),/:/):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new at(0,0,""),t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{dt(r,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r;continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var yt=ut;function vt(e,t,n,r){for(var i,o,a,s,u,l=window.VTTCue||TextTrackCue,c=0;c<r.rows.length;c++)if(a=!0,s=0,u="",!(i=r.rows[c]).isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&a?s++:(u+=i.chars[f].uchar,a=!1);i.cueStartTime=t,t===n&&(n+=1e-4),o=new l(t,n,ht(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=c+1:o.line=c>7?c-2:c+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100)),e.addCue(o)}}var gt,mt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},bt=function(e){var t=e;return mt.hasOwnProperty(e)&&(t=mt[e]),String.fromCharCode(t)},_t={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},kt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Et={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},wt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Tt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(gt||(gt={}));var St={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e],this.verboseLevel}},At=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Ot=function(){function e(e,t,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Pt=function(){function e(e,t,n,r,i,o){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Ot(t,n,r,i,o)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Rt=function(){function e(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new Pt);this.pos=0,this.currPenState=new Ot}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<100;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(St.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(St.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=bt(e);this.pos>=100?St.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<100;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Ct=function(){function e(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Rt);this.currRow=14,this.nrRollUpRows=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){St.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){St.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<15;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[r].cueStartTime;if(o&&St.time&&o<St.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(i.rows[r+a])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[l].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},t.setBkgData=function(e){St.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){St.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),St.log("INFO","Rolling up")}else St.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var o=this.rows[i].getTextString();o&&(r=i+1,e?t.push("Row "+r+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),xt=function(){function e(e,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ct,this.nonDisplayedMemory=new Ct,this.lastOutputScreen=new Ct,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,St.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";St.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(St.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){St.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){St.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){St.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){St.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){St.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){St.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){St.log("INFO","TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){St.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){St.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){St.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){St.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(St.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,St.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){St.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}St.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=St.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Dt=function(){function e(e,t,n){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=e||1,this.outputs=[t,n],this.channels=[new xt(1,t),new xt(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,r,i,o=!1;this.lastTime=e,St.setTime(e);for(var a=0;a<t.length;a+=2)r=127&t[a],i=127&t[a+1],0!==r||0!==i?(St.log("DATA","["+At([t[a],t[a+1]])+"] -> ("+At([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(o=this.parseChars(r,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(o):St.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,St.log("WARNING","Couldn't parse cleaned data "+At([r,i])+" orig: "+At([t[a],t[a+1]])))):this.dataCounters.padding+=2},t.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,St.log("DEBUG","Repeated command ("+At([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},t.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&t>=32&&t<=47&&((n=17===e?1:2)!==this.currChNr?(St.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),St.log("DEBUG","MIDROW ("+At([e,t])+")"),!0))},t.parsePAC=function(e,t){var n,r=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=t>=64&&t<=95?1===n?_t[e]:Et[e]:1===n?kt[e]:wt[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},t.interpretPAC=function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},t.parseChars=function(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){var o=t;o=17===i?t+80:18===i?t+112:t+144,St.log("INFO","Special char '"+bt(o)+"' in channel "+n),r=[o]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var a=At(r);St.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},t.parseBackgroundAttributes=function(e,t){var n,r,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=Tt[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},t.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),It=function(){function e(e,t){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e}(),Lt=function(e,t,n){return e.substr(n||0,t.length)===t},Mt=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},Nt={parse:function(e,t,n,r,i,o){var a,s=Object(Ne.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),l="00:00.000",c=0,f=0,p=0,d=[],h=!0,y=!1,v=new yt;v.oncue=function(e){var t=n[r],i=n.ccOffset;t&&t.new&&(void 0!==f?i=n.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(n,r,p)),p&&(i=p-n.presentationOffset),y&&(e.startTime+=i-f,e.endTime+=i-f),e.id=Mt(e.startTime.toString())+Mt(e.endTime.toString())+Mt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&d.push(e)},v.onparsingerror=function(e){a=e},v.onflush=function(){a&&o?o(a):i(d)},s.forEach((function(e){if(h){if(Lt(e,"X-TIMESTAMP-MAP=")){h=!1,y=!0,e.substr(16).split(",").forEach((function(e){Lt(e,"LOCAL:")?l=e.substr(6):Lt(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*n[r].start||0)<0&&(t+=8589934592),c-=t,f=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(u.isFiniteNumber)(t)&&Object(u.isFiniteNumber)(n)&&Object(u.isFiniteNumber)(r)&&Object(u.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,t+=6e4*r,t+=36e5*i}(l)/1e3,p=c/9e4}catch(e){y=!1,a=e}return}""===e&&(h=!1)}v.parse(e+"\n")})),v.flush()}};function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var Ft=function(e){var t,n;function r(t){var n;if((n=e.call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.FRAG_DECRYPTED,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.FRAG_LOADED,l.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties=void 0,n.cea608Parser=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=null,n.hls=t,n.config=t.config,n.Cues=t.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var r=new It(jt(n),"textTrack1"),i=new It(jt(n),"textTrack2");n.cea608Parser=new Dt(0,r,i)}return n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.addCues=function(e,t,n,r){for(var i,o,a,s,u=this.cueRanges,l=!1,c=u.length;c--;){var f=u[c],p=(i=f[0],o=f[1],a=t,s=n,Math.min(o,s)-Math.max(i,a));if(p>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],n),l=!0,p/(n-t)>.5))return}l||u.push([t,n]),this.Cues.newCue(this.captionsTracks[e],t,n,r)},i.onInitPtsFound=function(e){var t=this,n=e.frag,r=e.id,i=e.initPTS,o=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]=i),o.length&&(this.unparsedVttFrags=[],o.forEach((function(e){t.onFragLoaded(e)})))},i.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},i.createCaptionsTrack=function(e){var t=this.captionsProperties,n=this.captionsTracks,r=this.media,i=t[e],o=i.label,a=i.languageCode;if(!n[e]){var s=this.getExistingTrack(e);if(s)n[e]=s,Ue(n[e]),je(n[e],r);else{var u=this.createTextTrack("captions",o,a);u&&(u[e]=!0,n[e]=u)}}},i.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},i.destroy=function(){e.prototype.destroy.call(this)},i.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},i.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Ue(e[t]),delete e[t]}))},i.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},i._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Ue(t[n])}},i.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var i;if(r<n.length){for(var o=null,a=0;a<n.length;a++)if(Ut(n[a],e)){o=n[a];break}o&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)}))}},i.onFragLoaded=function(e){var t=e.frag,n=e.payload,r=this.cea608Parser,i=this.initPTS,o=this.lastSn,a=this.unparsedVttFrags;if("main"===t.type){var s=t.sn;t.sn!==o+1&&r&&r.reset(),this.lastSn=s}else if("subtitle"===t.type)if(n.byteLength){if(!Object(u.isFiniteNumber)(i[t.cc]))return a.push(e),void(i.length&&this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var c=t.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(t,n)}else this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},i._parseVTTs=function(e,t){var n=this.hls,r=this.prevCC,i=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:r,new:!0},this.prevCC=e.cc),Nt.parse(t,this.initPTS[e.cc],o,e.cc,(function(t){var r=i[e.level];"disabled"!==r.mode?(t.forEach((function(e){if(!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(n){c.logger.debug("Failed occurred on adding cues: "+n);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}})),n.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):n.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){c.logger.log("Failed to parse VTT cue: "+t),n.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},i.onFragDecrypted=function(e){var t=e.frag,n=e.payload;if("subtitle"===t.type){if(!Object(u.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,n)}},i.onFragParsingUserdata=function(e){if(this.enabled&&this.cea608Parser)for(var t=0;t<e.samples.length;t++){var n=e.samples[t].bytes;if(n){var r=this.extractCea608Data(n);this.cea608Parser.addData(e.samples[t].pts,r)}}},i.extractCea608Data=function(e){for(var t,n,r,i=31&e[0],o=2,a=[],s=0;s<i;s++)t=e[o++],n=127&e[o++],r=127&e[o++],0===n&&0===r||0!=(4&t)&&0==(3&t)&&(a.push(n),a.push(r));return a},r}(p);function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}var Gt,Kt=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADED,l.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a,s=r.prototype;return s.destroy=function(){p.prototype.destroy.call(this)},s.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(u.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(u.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Vt(this.media.textTracks).forEach((function(e){Ue(e)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.hls.trigger(l.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},s.onSubtitleTrackLoaded=function(e){var t=this,n=e.id,r=e.details,i=this.trackId,o=this.tracks,a=o[i];if(n>=o.length||n!==i||!a||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+n+" loaded"),r.live){var s=ie(a.details,r,e.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,n=this.hls,r=t[e];e<0||!r||r.details&&!r.details.live||(c.logger.log("Loading subtitle track "+e),n.trigger(l.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))},s._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,r=this.trackId;if(t){var i=Vt(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var o=i[r];o&&(o.mode="disabled")}var a=i[e];a&&(a.mode=n?"showing":"hidden")}},s._setSubtitleTrackInternal=function(e){var t=this.hls,n=this.tracks;!Object(u.isFiniteNumber)(e)||e<-1||e>=n.length||(this.trackId=e,c.logger.log("Switching to subtitle track "+e),t.trigger(l.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Vt(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},i=r,(o=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Bt(i.prototype,o),a&&Bt(i,a),r}(p),Ht=n("./src/crypt/decrypter.js"),zt=window.performance,Wt=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.ERROR,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.SUBTITLE_TRACKS_UPDATED,l.default.SUBTITLE_TRACK_SWITCH,l.default.SUBTITLE_TRACK_LOADED,l.default.SUBTITLE_FRAG_PROCESSED,l.default.LEVEL_UPDATED)||this).fragmentTracker=n,r.config=t.config,r.state=ye,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new Ht.default(t,t.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.onSubtitleFragProcessed=function(e){var t=e.frag,n=e.success;if(this.fragPrevious=t,this.state=ge,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,o=t.start,a=0;a<r.length;a++)if(o>=r[a].start&&o<=r[a].end){i=r[a];break}var s=t.start+t.duration;i?i.end=s:(i={start:o,end:s},r.push(i))}}},i.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=ge},i.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=ye)},i.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=ge)},i.onSubtitleTracksUpdated=function(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},i.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details,r=this.currentTrackId,i=this.tracks,o=i[r];t>=i.length||t!==r||!o||(n.live&&function(e,t,n){void 0===n&&(n=0);var r=-1;re(e,t,(function(e,t,n){t.start=e.start,r=n}));var i=t.fragments;if(r<0)i.forEach((function(e){e.start+=n}));else for(var o=r+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration}(o.details,n,this.lastAVStart),o.details=n,this.setInterval(500))},i.onKeyLoaded=function(){this.state===be&&(this.state=ge)},i.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===_e&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var o=zt.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,(function(e){var t=zt.now();i.trigger(l.default.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:o,tdecrypt:t}})}))}},i.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},i.doTick=function(){if(this.media)switch(this.state){case ge:var e=this.config,t=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var o,a=e.maxBufferHole,s=e.maxFragLookUpTolerance,u=Math.min(e.maxBufferLength,e.maxMaxBufferLength),f=K.bufferedInfo(this._getBuffered(),r.currentTime,a),p=f.end,d=f.len,h=i[t].details,y=h.fragments,v=y.length,g=y[v-1].start+y[v-1].duration;if(d>u)return;var m=this.fragPrevious;p<g?(m&&h.hasProgramDateTime&&(o=ue(y,m.endProgramDateTime,s)),o||(o=le(m,y,p,s))):o=y[v-1],o&&o.encrypted?(c.logger.log("Loading key for "+o.sn),this.state=be,this.hls.trigger(l.default.KEY_LOADING,{frag:o})):o&&n.getState(o)===j&&(this.fragCurrent=o,this.state=_e,this.hls.trigger(l.default.FRAG_LOADING,{frag:o}))}else this.state=ge},i.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},i._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},i.onMediaSeeking=function(){this.fragPrevious=null},r}(Ce);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Gt||(Gt={}));var Yt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xt=function(e){var t,n;function r(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHED,l.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n._onMediaEncrypted=function(e){c.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),n._attemptSetMediaKeys(),n._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},n._config=t.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i,o,a,u=r.prototype;return u.getLicenseServerUrl=function(e){switch(e){case Gt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},u._attemptKeySystemAccess=function(e,t,n){var r=this,i=function(e,t,n){switch(e){case Gt.WIDEVINE:return function(e,t){var n={videoCapabilities:[]};return t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[n]}(0,n);default:throw new Error("Unknown key-system: "+e)}}(e,0,n);c.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then((function(t){r._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){c.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},u._onMediaKeySystemAccessObtained=function(e,t){var n=this;c.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r),t.createMediaKeys().then((function(t){r.mediaKeys=t,c.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()})).catch((function(e){c.logger.error("Failed to create media-keys:",e)}))},u._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},u._onNewMediaKeySession=function(e){var t=this;c.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},u._onKeySessionMessage=function(e,t){c.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},u._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},u._generateRequestWithPreferredKeySession=function(e,t){var n=this,r=this._mediaKeysList[0];if(!r)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var i=r.mediaKeysSession;if(!i)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+e+'" init data type'),r.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then((function(){c.logger.debug("Key-session generation succeeded")})).catch((function(e){c.logger.error("Error generating key-session request:",e),n.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},u._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(t){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},u._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(e.response);else{if(c.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(n,r)}}},u._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case Gt.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},u._requestLicense=function(e,t){c.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);c.logger.log("Sending license request to URL: "+r);var o=this._generateLicenseRequestChallenge(n,e);i.send(o)}catch(e){c.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},u.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},u.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},u.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),n=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(Gt.WIDEVINE,t,n)}},i=r,(o=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&qt(i.prototype,o),a&&qt(i,a),r}(p);function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$t(e,t,n[t])}))}return e}({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:et,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:He,bufferController:We,capLevelController:qe,fpsController:$e,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Yt},{cueHandler:r,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"},{subtitleStreamController:Wt,subtitleTrackController:Kt,timelineController:Ft,audioStreamController:ot,audioTrackController:nt,emeController:Xt});function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t,n){return t&&en(e.prototype,t),n&&en(e,n),e}n.d(t,"default",(function(){return nn}));var nn=function(e){var t,n;function r(t){var n;void 0===t&&(t={}),(n=e.call(this)||this).config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var i=r.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qt(e,t,n[t])}))}return e}({},i,t);var o=Zt(n).config;if(void 0!==o.liveMaxLatencyDurationCount&&o.liveMaxLatencyDurationCount<=o.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==o.liveMaxLatencyDuration&&(void 0===o.liveSyncDuration||o.liveMaxLatencyDuration<=o.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(o.debug),n._autoLevelCapping=-1;var a=n.abrController=new o.abrController(Zt(n)),s=new o.bufferController(Zt(n)),u=n.capLevelController=new o.capLevelController(Zt(n)),l=new o.fpsController(Zt(n)),f=new L(Zt(n)),p=new M(Zt(n)),d=new N(Zt(n)),h=new Fe(Zt(n)),y=n.levelController=new Me(Zt(n)),v=new V(Zt(n)),g=[y,n.streamController=new De(Zt(n),v)],m=o.audioStreamController;m&&g.push(new m(Zt(n),v)),n.networkControllers=g;var b=[f,p,d,a,s,u,l,h,v];if(m=o.audioTrackController){var _=new m(Zt(n));n.audioTrackController=_,b.push(_)}if(m=o.subtitleTrackController){var k=new m(Zt(n));n.subtitleTrackController=k,g.push(k)}if(m=o.emeController){var E=new m(Zt(n));n.emeController=E,b.push(E)}return(m=o.subtitleStreamController)&&g.push(new m(Zt(n),v)),(m=o.timelineController)&&b.push(new m(Zt(n))),n.coreComponents=b,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.isSupported=function(){return function(){var e=Y();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r}()},tn(r,null,[{key:"version",get:function(){return"0.13.2"}},{key:"Events",get:function(){return l.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return r.defaultConfig?r.defaultConfig:Jt},set:function(e){r.defaultConfig=e}}]);var i=r.prototype;return i.destroy=function(){c.logger.log("destroy"),this.trigger(l.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},i.attachMedia=function(e){c.logger.log("attachMedia"),this.media=e,this.trigger(l.default.MEDIA_ATTACHING,{media:e})},i.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(l.default.MEDIA_DETACHING),this.media=null},i.loadSource=function(e){e=a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),c.logger.log("loadSource:"+e),this.url=e,this.trigger(l.default.MANIFEST_LOADING,{url:e})},i.startLoad=function(e){void 0===e&&(e=-1),c.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},i.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},i.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){c.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},tn(r,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),r}(X);nn.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":
/*!******************************************!*\
  !*** ./src/polyfills/number-isFinite.js ***!
  \******************************************/
/*! exports provided: isFiniteNumber */function(e,t,n){"use strict";n.r(t),n.d(t,"isFiniteNumber",(function(){return r}));var r=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/utils/get-self-scope.js":
/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! exports provided: getSelfScope */function(e,t,n){"use strict";function r(){return"undefined"==typeof window?self:window}n.r(t),n.d(t,"getSelfScope",(function(){return r}))},"./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,n){"use strict";n.r(t),n.d(t,"enableLogs",(function(){return c})),n.d(t,"logger",(function(){return f}));var r=n(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o;function s(e,t){return t="["+e+"] > "+t}var u=Object(r.getSelfScope)();function l(e){var t=u.console[e];return t?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=s(e,r[0])),t.apply(u.console,r)}:i}var c=function(e){if(u.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){a[t]=e[t]?e[t].bind(e):l(t)}))}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},f=a}}).default},e.exports=r())},function(e,t,n){var r,i;window,e.exports=(r=n(0),i=n(95),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=r},function(e,t){e.exports=i},function(e){e.exports=JSON.parse('{"shakaConfig":{"streaming":{"ignoreTextStreamFailures":true},"abr":{"enabled":true,"restrictions":{}}},"forceRedirectExternalStreams":false}')},function(e,t,n){"use strict";n.r(t),n.d(t,"VERSION",(function(){return V})),n.d(t,"NAME",(function(){return G}));var r,i,o=n(0),a=n(1),s=n.n(a);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c,f,p=(i=r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"isConfigured",value:function(e,t){return o.DrmScheme.WIDEVINE===t.keySystem&&!!e.find((function(e){return e.scheme===t.keySystem}))}},{key:"canPlayDrm",value:function(t){return e._logger.debug("Can play DRM scheme of: "+o.DrmScheme.WIDEVINE),!!t.find((function(e){return e.scheme===o.DrmScheme.WIDEVINE}))}},{key:"setDrmPlayback",value:function(t,n){e._logger.debug("Sets drm playback");var r=o.Env.browser.name,i=n.find((function(e){return e.scheme===o.DrmScheme.WIDEVINE}));i&&(t.drm={servers:l({},o.DrmScheme.WIDEVINE,i.licenseUrl),advanced:{}},"Chrome"===r&&(t.drm.advanced=l({},o.DrmScheme.WIDEVINE,{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"})))}}])&&u(t,n),e}(),l(r,"_logger",Object(o.getLogger)("Widevine")),i);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(f=c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"isConfigured",value:function(e,t){return o.DrmScheme.PLAYREADY===t.keySystem&&!!e.find((function(e){return e.scheme===t.keySystem}))}},{key:"canPlayDrm",value:function(t){return e._logger.debug("Can play DRM scheme of: "+o.DrmScheme.PLAYREADY),!!t.find((function(e){return e.scheme===o.DrmScheme.PLAYREADY}))}},{key:"setDrmPlayback",value:function(t,n){e._logger.debug("Sets drm playback");var r=n.find((function(e){return e.scheme===o.DrmScheme.PLAYREADY}));r&&(t.drm={servers:h({},o.DrmScheme.PLAYREADY,r.licenseUrl)})}}])&&d(t,n),e}(),h(c,"_logger",Object(o.getLogger)("PlayReady")),f),v=n(2);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}(i);function i(){return m(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"isTextVisible",value:function(){return!0}}])&&b(t.prototype,n),i}(s.a.text.SimpleTextDisplayer);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N="error",j="adaptation",U="buffering",F="drmsessionupdate",B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}(n);function n(e,r){var i,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O(this,n),n._logger.debug("Creating adapter. Shaka version: "+s.a.Player.version),M(I(a=t.call(this,e,r,u)),"_shakaLib",s.a),M(I(a),"_adapterEventsBindings",(M(i={},N,(function(e){return a._onError(e)})),M(i,j,(function(){return a._onAdaptation()})),M(i,U,(function(e){return a._onBuffering(e)})),M(i,F,(function(){return a._onDrmSessionUpdate()})),M(i,o.EventType.WAITING,(function(){return a._onWaiting()})),M(i,o.EventType.PLAYING,(function(){return a._onPlaying()})),i)),M(I(a),"_buffering",!1),M(I(a),"_waitingSent",!1),M(I(a),"_playingSent",!1),M(I(a),"_videoSizeUpdateTimer",null),M(I(a),"VIDEO_ERROR_CODE",3016),M(I(a),"_lastTimeDetach",0),M(I(a),"_requestFilterError",!1),M(I(a),"_responseFilterError",!1),a._setShakaConfig(),a._init(),a}return C(n,[{key:"setMaxBitrate",value:function(e){this._hasLowerOrEqualBitrate(e)&&this._shaka.configure({abr:{restrictions:{maxBandwidth:e}}})}},{key:"_getSortedTracks",value:function(){return this._shaka.getVariantTracks().map((function(e){return{id:e.id,bandwidth:e.bandwidth,active:e.active}})).sort((function(e,t){return e.bandwidth-t.bandwidth}))}},{key:"_hasLowerOrEqualBitrate",value:function(e){return this._getSortedTracks()[0].bandwidth<=e}}],[{key:"createAdapter",value:function(e,t,n){var r=o.Utils.Object.copyDeep(v);if(o.Utils.Object.hasPropertyPath(n,"playback.useNativeTextTrack")&&(r.textTrackVisibile=o.Utils.Object.getPropertyPath(n,"playback.useNativeTextTrack")),o.Utils.Object.hasPropertyPath(n,"sources.options")){var i=n.sources.options;r.forceRedirectExternalStreams=i.forceRedirectExternalStreams,r.redirectExternalStreamsHandler=i.redirectExternalStreamsHandler,r.redirectExternalStreamsTimeout=i.redirectExternalStreamsTimeout}if(o.Utils.Object.hasPropertyPath(n,"abr")){var a=n.abr;"boolean"==typeof a.enabled&&(r.shakaConfig.abr.enabled=a.enabled),"boolean"==typeof a.capLevelToPlayerSize&&(r.capLevelToPlayerSize=a.capLevelToPlayerSize),a.defaultBandwidthEstimate&&(r.shakaConfig.abr.defaultBandwidthEstimate=a.defaultBandwidthEstimate),a.restrictions&&(a.restrictions.minBitrate>0&&(r.shakaConfig.abr.restrictions.minBandwidth=a.restrictions.minBitrate),a.restrictions.maxBitrate<1/0&&(r.capLevelToPlayerSize=!1,r.shakaConfig.abr.restrictions.maxBandwidth=a.restrictions.maxBitrate))}return o.Utils.Object.hasPropertyPath(n,"playback.options.html5.dash")&&o.Utils.Object.mergeDeep(r.shakaConfig,n.playback.options.html5.dash),r.network=n.network,new this(e,t,r)}},{key:"canPlayType",value:function(e){var t="string"==typeof e&&e.toLowerCase()===n._dashMimeType&&n.isMSESupported();return n._logger.debug("canPlayType result for mimeType: "+e+" is "+t.toString()),t}},{key:"canPlayDrm",value:function(e,t){n._availableDrmProtocol=[];var r,i=S(n._drmProtocols);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.isConfigured(e,t)){n._availableDrmProtocol.push(o);break}}}catch(e){i.e(e)}finally{i.f()}if(!n._availableDrmProtocol.length){var a,s=S(n._drmProtocols);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.canPlayDrm(e)&&n._availableDrmProtocol.push(u)}}catch(e){s.e(e)}finally{s.f()}}return!!n._availableDrmProtocol.length}},{key:"isSupported",value:function(){var e=!1;window.VTTCue||(e=!0),s.a.polyfill.installAll();var t=s.a.Player.isBrowserSupported();return e&&(window.VTTCue=void 0),n._logger.debug("isSupported:"+t),t}}]),C(n,[{key:"_setShakaConfig",value:function(){var e={shakaConfig:{textDisplayFactory:function(e){return new w(e)}.bind(null,this._videoElement)}};this._config=o.Utils.Object.mergeDeep(e,v,this._config)}},{key:"_init",value:function(){s.a.polyfill.installAll(),this._shaka=new s.a.Player,this._maybeSetFilters(),this._maybeSetDrmConfig(),this._shaka.configure(this._config.shakaConfig),this._addBindings()}},{key:"_maybeGetRedirectedUrl",value:function(e){var t=this._config.forceRedirectExternalStreams,n=this._config.redirectExternalStreamsTimeout,r=this._config.redirectExternalStreamsHandler;return new Promise((function(i){if(!t)return i(e);o.Utils.Http.jsonp(e,r,{timeout:n}).then((function(e){i(e)})).catch((function(){return i(e)}))}))}},{key:"_maybeSetFilters",value:function(){var e=this;"function"==typeof o.Utils.Object.getPropertyPath(this._config,"network.requestFilter")&&(n._logger.debug("Register request filter"),this._shaka.getNetworkingEngine().registerRequestFilter((function(t,r){if(Object.values(o.RequestType).includes(t)){var i,a={url:r.uris[0],body:r.body,headers:r.headers};try{i=e._config.network.requestFilter(t,a)}catch(e){i=Promise.reject(e)}return(i=i||Promise.resolve(a)).then((function(e){r.uris=[e.url],r.headers=e.headers,"POST"===r.method?r.body=e.body:e.body&&n._logger.warn("Request with ".concat(r.method," method cannot have body"))})).catch((function(t){throw e._requestFilterError=!0,t}))}}))),"function"==typeof o.Utils.Object.getPropertyPath(this._config,"network.responseFilter")&&(n._logger.debug("Register response filter"),this._shaka.getNetworkingEngine().registerResponseFilter((function(t,n){if(Object.values(o.RequestType).includes(t)){var r,i={url:n.uri,originalUrl:n.ed,data:n.data,headers:n.headers};try{r=e._config.network.responseFilter(t,i)}catch(e){r=Promise.reject(e)}return(r=r||Promise.resolve(i)).then((function(e){n.data=e.data})).catch((function(t){throw e._responseFilterError=!0,t}))}})))}},{key:"_maybeSetDrmConfig",value:function(){if(this._sourceObj&&this._sourceObj.drmData){var e,t={},r=S(n._availableDrmProtocol);try{for(r.s();!(e=r.n()).done;)e.value.setDrmPlayback(t,this._sourceObj.drmData),this._config.shakaConfig.drm&&o.Utils.Object.mergeDeep(t.drm,this._config.shakaConfig.drm),o.Utils.Object.mergeDeep(this._config.shakaConfig,t)}catch(e){r.e(e)}finally{r.f()}}}},{key:"_maybeApplyAbrRestrictions",value:function(){var e=this;if(this._config.capLevelToPlayerSize){var t=this._getVideoTracks(),r=function(e){return Math.min.apply(null,t.map((function(t){return t[e]})))},i=r("width"),o=r("height"),a=function(){var t=e._videoHeight,r=e._videoWidth;"number"==typeof r&&"number"==typeof t&&(t>=o&&r>=i?(n._logger.debug("applying dimension restriction: width < ".concat(r,", height < ").concat(t)),e._shaka.configure({abr:{restrictions:{maxHeight:t,maxWidth:r}}})):(n._logger.debug("applying dimension restriction: width < ".concat(o,", height < ").concat(i)),e._shaka.configure({abr:{restrictions:{maxHeight:o,maxWidth:i}}})))};this._clearVideoUpdateTimer(),this._videoSizeUpdateTimer=setInterval(a,1e3),a()}}},{key:"attachMediaSource",value:function(){var e=this;this._shaka||(this._videoElement&&this._videoElement.src&&(o.Utils.Dom.setAttribute(this._videoElement,"src",""),o.Utils.Dom.removeAttribute(this._videoElement,"src")),this._init(),isNaN(this._lastTimeDetach)||(this._eventManager.listenOnce(this._videoElement,o.EventType.LOADED_DATA,(function(){isNaN(e._lastTimeDetach)||(parseInt(e._lastTimeDetach)===parseInt(e.duration)?e.currentTime=0:e.currentTime=e._lastTimeDetach,e._lastTimeDetach=NaN)})),this._eventManager.listenOnce(this._videoElement,o.EventType.SEEKED,(function(){return e._lastTimeDetach=NaN}))))}},{key:"detachMediaSource",value:function(){var e=this;this._shaka&&(this._lastTimeDetach=this.currentTime,this._reset().then((function(){e._shaka=null,e._loadPromise=null})))}},{key:"_clearVideoUpdateTimer",value:function(){this._videoSizeUpdateTimer&&(clearInterval(this._videoSizeUpdateTimer),this._videoSizeUpdateTimer=null)}},{key:"_addBindings",value:function(){var e=this;this._eventManager.listen(this._shaka,j,this._adapterEventsBindings.adaptation),this._eventManager.listen(this._shaka,N,this._adapterEventsBindings.error),this._eventManager.listen(this._shaka,U,this._adapterEventsBindings.buffering),this._eventManager.listen(this._shaka,F,this._adapterEventsBindings.drmsessionupdate),this._eventManager.listen(this._videoElement,o.EventType.WAITING,this._adapterEventsBindings.waiting),this._eventManager.listen(this._videoElement,o.EventType.PLAYING,this._adapterEventsBindings.playing),this._shaka.getNetworkingEngine().registerResponseFilter((function(t,n){switch(t){case s.a.net.NetworkingEngine.RequestType.SEGMENT:e._trigger(o.EventType.FRAG_LOADED,{miliSeconds:n.timeMs,bytes:n.data.byteLength,url:n.uri});break;case s.a.net.NetworkingEngine.RequestType.MANIFEST:e._trigger(o.EventType.MANIFEST_LOADED,{miliSeconds:n.timeMs})}}))}},{key:"load",value:function(e){var t=this;return this._loadPromise||(this._shaka.attach(this._videoElement),this._loadPromise=new Promise((function(r,i){if(t._sourceObj&&t._sourceObj.url){t._trigger(o.EventType.ABR_MODE_CHANGED,{mode:t.isAdaptiveBitrateEnabled()?"auto":"manual"});var a=e&&e>-1?e:void 0;t._maybeGetRedirectedUrl(t._sourceObj.url).then((function(e){return t._shaka.load(e,a)})).then((function(){var e={tracks:t._getParsedTracks()};t._maybeApplyAbrRestrictions(),n._logger.debug("The source has been loaded successfully"),r(e)})).catch((function(e){i(new o.Error(e.severity,e.category,e.code,e.data))}))}}))),this._loadPromise}},{key:"destroy",value:function(){var e=this;return P(L(n.prototype),"destroy",this).call(this).then((function(){return n._logger.debug("destroy"),e._loadPromise=null,e._reset()}))}},{key:"_reset",value:function(){return this._buffering=!1,this._waitingSent=!1,this._playingSent=!1,this._requestFilterError=!1,this._responseFilterError=!1,this._clearVideoUpdateTimer(),this._eventManager&&this._eventManager.removeAll(),this._shaka?(this._adapterEventsBindings={},this._shaka.destroy()):Promise.resolve()}},{key:"_getVideoTracks",value:function(){var e=this._shaka.getVariantTracks(),t=this._getActiveTrack();return e.filter((function(e){return e.audioId===t.audioId}))}},{key:"_getActiveTrack",value:function(){return this._shaka.getVariantTracks().filter((function(e){return e.active}))[0]}},{key:"_getAudioTracks",value:function(){var e=this._shaka.getVariantTracks(),t=this._shaka.getAudioLanguagesAndRoles();return t.forEach((function(t){var n=e.filter((function(e){return e.language===t.language})),r=n.map((function(e){return e.id})).join("_"),i=n.some((function(e){return e.active}));t.id=r,t.label=n[0].label,t.active=i})),t}},{key:"_getParsedTracks",value:function(){if(this._shaka){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),n=this._getParsedTextTracks();return e.concat(t).concat(n)}return[]}},{key:"_getParsedVideoTracks",value:function(){var e=this._getVideoTracks(),t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,bandwidth:e[n].bandwidth,width:e[n].width,height:e[n].height,active:e[n].active,index:n};t.push(new o.VideoTrack(r))}return t}},{key:"_getParsedAudioTracks",value:function(){var e=this._getAudioTracks(),t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].active,label:e[n].label,language:e[n].language,index:n};t.push(new o.AudioTrack(r))}return t}},{key:"_getParsedTextTracks",value:function(){var e=this._shaka.getTextTracks(),t=[];if(e)for(var n=0;n<e.length;n++){var r={kind:e[n].kind?e[n].kind+"s":"",active:!1,label:e[n].label,language:e[n].language,index:n};t.push(new o.TextTrack(r))}return t}},{key:"selectVideoTrack",value:function(e){if(this._shaka){var t=this._getVideoTracks();if(e instanceof o.VideoTrack&&t){var n=t[e.index];n&&(this.isAdaptiveBitrateEnabled()&&(this._shaka.configure({abr:{enabled:!1}}),this._trigger(o.EventType.ABR_MODE_CHANGED,{mode:"manual"})),n.active||(this._shaka.selectVariantTrack(t[e.index],!0),this._onTrackChanged(e)))}}}},{key:"selectAudioTrack",value:function(e){this._shaka&&e instanceof o.AudioTrack&&!e.active&&(this._shaka.selectAudioLanguage(e.language),this._onTrackChanged(e))}},{key:"selectTextTrack",value:function(e){this._shaka&&e instanceof o.TextTrack&&!e.active&&("subtitles"===e.kind||"captions"===e.kind)&&(this._shaka.setTextTrackVisibility(this._config.textTrackVisibile),this._shaka.selectTextLanguage(e.language),this._onTrackChanged(e))}},{key:"hideTextTrack",value:function(){this._shaka&&this._shaka.setTextTrackVisibility(!1)}},{key:"enableAdaptiveBitrate",value:function(){this._shaka&&!this.isAdaptiveBitrateEnabled()&&(this._trigger(o.EventType.ABR_MODE_CHANGED,{mode:"auto"}),this._shaka.configure({abr:{enabled:!0}}))}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._shaka&&this._shaka.getConfiguration().abr.enabled}},{key:"_getLiveEdge",value:function(){return this._shaka?this._shaka.seekRange().end:NaN}},{key:"seekToLiveEdge",value:function(){this._shaka&&this._videoElement.readyState>0&&(this._videoElement.currentTime=this._shaka.seekRange().end)}},{key:"isLive",value:function(){return!!this._shaka&&this._shaka.isLive()}},{key:"_onAdaptation",value:function(){var e=this._getParsedVideoTracks().filter((function(e){return e.active}))[0];n._logger.debug("Video track changed",e),this._onTrackChanged(e)}},{key:"_onError",value:function(e){if(e&&e.detail){var t=e.detail;if(t.code===this.VIDEO_ERROR_CODE)return;(this._requestFilterError||this._responseFilterError)&&t.data[0]instanceof s.a.util.Error&&(t=t.data[0],this._requestFilterError?this._requestFilterError=!1:this._responseFilterError=!1),this._trigger(o.EventType.ERROR,new o.Error(t.severity,t.category,t.code,t.data)),n._logger.error(t)}}},{key:"_onBuffering",value:function(e){e.buffering?this._waitingSent||(this._videoElement.dispatchEvent(new window.Event(o.EventType.WAITING)),this._buffering=!0):(this._buffering=!1,this._videoElement.paused||this._playingSent||this._videoElement.dispatchEvent(new window.Event(o.EventType.PLAYING)))}},{key:"_onDrmSessionUpdate",value:function(){this._trigger(o.EventType.DRM_LICENSE_LOADED,{licenseTime:this._shaka.getStats().licenseTime,scheme:o.DrmScheme.WIDEVINE})}},{key:"_onWaiting",value:function(){this._waitingSent=!0,this._playingSent=!1}},{key:"_onPlaying",value:function(){this._playingSent=!0,this._waitingSent=!1,this._buffering&&this._videoElement.dispatchEvent(new window.Event(o.EventType.WAITING))}},{key:"getStartTimeOfDvrWindow",value:function(){return this.isLive()&&this._shaka?this._shaka.seekRange().start:0}},{key:"_getCurrentSegmentLength",value:function(){var e=this._getActiveTrack(),t=e?e.id:NaN,n=0,r=this._shaka.getManifest().periods;if(!isNaN(t))for(var i=0;i<r.length;i++)for(var o=0;o<r[i].variants.length;o++){var a=r[i].variants[o];if(a.id===t){var s=a.video.findSegmentPosition(this._videoElement.currentTime),u=a.video.getSegmentReference(s);n=u.endTime-u.startTime}}return n}},{key:"_videoWidth",get:function(){var e,t=this._videoElement;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this._contentScaleFactor),e}},{key:"_videoHeight",get:function(){var e,t=this._videoElement;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this._contentScaleFactor),e}},{key:"_contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){n._logger.debug("failed reading devicePixelRatio, assume 1")}return e}},{key:"targetBuffer",get:function(){var e=NaN;return this._shaka?(this.isLive()?this._shaka.getManifest()&&(e=this._shaka.getManifest().presentationTimeline.getSegmentAvailabilityEnd()-this._shaka.getManifest().presentationTimeline.getSeekRangeEnd()-(this._videoElement.currentTime-this._getLiveEdge())):e=this._videoElement.duration-this._videoElement.currentTime,e=Math.min(e,this._shaka.getConfiguration().streaming.bufferingGoal+this._getCurrentSegmentLength())):NaN}}]),n}(o.BaseMediaSourceAdapter);M(B,"id","DashAdapter"),M(B,"_logger",o.BaseMediaSourceAdapter.getLogger(B.id)),M(B,"_dashMimeType","application/dash+xml"),M(B,"_drmProtocols",[p,y]),M(B,"_availableDrmProtocol",[]);var V="1.19.0-canary.136926f",G="@playkit-js/playkit-js-dash";t.default=B,B.isSupported()&&Object(o.registerMediaSourceAdapter)(B)}]))},function(e,t,n){var r=n(322),i=n(323);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var f=s(c),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(a[f].references++,a[f].updater(p)):a.push({identifier:c,updater:v(p,t),references:1}),r.push(c)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,f=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,y=0;function v(e,t){var n,r,i;if(t.singleton){var o=y++;n=h||(h=l(t)),r=p.bind(null,n,o,!1),i=p.bind(null,n,o,!0)}else n=l(t),r=d.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=u(e,t),l=0;l<n.length;l++){var c=s(n[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=o}}}},function(e,t,n){(t=n(324)(!1)).push([e.i,".kaltura-player-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: #000;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"getPlayers",(function(){return Pt})),n.d(t,"getPlayer",(function(){return Rt})),n.d(t,"core",(function(){return u})),n.d(t,"ui",(function(){return l})),n.d(t,"providers",(function(){return c})),n.d(t,"setup",(function(){return Dt})),n.d(t,"shaka",(function(){return f})),n.d(t,"cast",(function(){return Wt})),n.d(t,"playlist",(function(){return Yt})),n.d(t,"PLAYER_TYPE",(function(){return Xt})),n.d(t,"VERSION",(function(){return $t})),n.d(t,"PLAYER_NAME",(function(){return qt}));var r=n(48),i=(n(315),n(2));function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){Object.prototype.hasOwnProperty.call(t,"prepend")?e._logger.debug("No need to install polyfill on item",t):(e._logger.debug("Installing polyfill on item",t),Object.defineProperty(t,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}}))}))}}],(n=null)&&o(t.prototype,n),r&&o(t,r),e}();a(s,"id","prepend"),a(s,"_logger",Object(i.b)("PrependPolyfill")),r.a.register(s);n(316);var u=n(0),l=n(18),c=n(65),f=(n(318),n(320),n(95));var p="Must provide initial providers config",d="Must provide target id",h="Must provide DOM element with id of: ",y="The target id provided is already in use. Id: ";function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g,m,b,_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isLocalStorageAvailable",value:function(){if("undefined"==typeof Storage)return!1;try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}},{key:"setItem",value:function(t,n){e._validateKey(t);try{e._logger.debug("Sets item for key: "+t,n),localStorage.setItem("kaltura-player-js_"+t,n)}catch(t){e._isQuotaExceeded(t)?e._logger.error("Quota exceeded: "+t.message):e._logger.error(t.message)}}},{key:"getItem",value:function(t){e._validateKey(t);var n=null;try{return"string"==typeof(n=localStorage.getItem("kaltura-player-js_"+t))?JSON.parse(n):null}catch(e){return n}}},{key:"_isQuotaExceeded",value:function(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t}},{key:"_validateKey",value:function(e){if("string"!=typeof e||0===e.length)throw new Error("Invalid key")}},{key:"size",get:function(){return Object.keys(localStorage).filter((function(e){return e.startsWith("kaltura-player-js_")})).length}}],(n=null)&&v(t.prototype,n),r&&v(t,r),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}g=_,m="_logger",b=Object(i.b)("StorageWrapper"),m in g?Object.defineProperty(g,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[m]=b;var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isLocalStorageAvailable",value:function(){return _.isLocalStorageAvailable()}},{key:"attach",value:function(t){var n=this;e._logger.debug("Attach local storage");var r=new u.EventManager;r.listen(t,t.Event.UI.USER_CLICKED_MUTE,(function(){t.isCasting()||_.setItem(e.StorageKeys.MUTED,t.muted)})),r.listen(t,t.Event.UI.USER_CLICKED_UNMUTE,(function(){t.isCasting()||_.setItem(e.StorageKeys.MUTED,t.muted)})),r.listen(t,t.Event.UI.USER_CHANGED_VOLUME,(function(){t.isCasting()||(t.volume>0?_.setItem(e.StorageKeys.MUTED,!1):_.setItem(e.StorageKeys.MUTED,!0),_.setItem(e.StorageKeys.VOLUME,t.volume))})),r.listen(t,t.Event.UI.USER_SELECTED_AUDIO_TRACK,(function(t){var n=t.payload.audioTrack;_.setItem(e.StorageKeys.AUDIO_LANG,n.language)})),r.listen(t,t.Event.UI.USER_SELECTED_CAPTION_TRACK,(function(t){var n=t.payload.captionTrack;_.setItem(e.StorageKeys.TEXT_LANG,n.language)})),r.listen(t,t.Event.UI.USER_SELECTED_CAPTIONS_STYLE,(function(t){try{var r=JSON.stringify(t.payload.captionsStyle);_.setItem(e.StorageKeys.TEXT_STYLE,r)}catch(e){n._logger.error(e.message)}})),r.listen(t,t.Event.PLAYER_DESTROY,(function(){return r.destroy()}))}},{key:"getPlayerTextStyle",value:function(){return _.getItem(e.StorageKeys.TEXT_STYLE)}},{key:"hasStorage",value:function(){var e=_.size,t=0!==e;return t?this._logger.debug("Storage found with size of ",e):this._logger.debug("No storage found"),t}},{key:"getStorageConfig",value:function(){var t=e._getExistingValues(),n=e._buildStorageConfig(t);return this._logger.debug("Gets storage config",n),n}},{key:"_getExistingValues",value:function(){var t={};return Object.keys(e.StorageKeys).forEach((function(n){var r=e.StorageKeys[n],i=_.getItem(r);null!=i&&(t[r]=i)})),t}},{key:"_buildStorageConfig",value:function(e){var t=u.Utils.Object.mergeDeep({},e);return delete t.textStyle,{playback:t}}}],(n=null)&&k(t.prototype,n),r&&k(t,r),e}();function T(e,t){var n=function(e){var t=document.createElement("a");return t.href=e,t.hostname},r=n(t),i=!1,o="",a="";return e&&(e.flavors&&Array.isArray(e.flavors)?(o=(i=1===e.flavors.length)&&n(e.flavors[0].url),a=e.flavors[0].url):e.result&&(i=!0,o=n(e.result.url),a=e.result.url)),i&&r!==o?a:t}E(w,"StorageKeys",{MUTED:"muted",VOLUME:"volume",AUDIO_LANG:"audioLanguage",TEXT_LANG:"textLanguage",TEXT_STYLE:"textStyle"}),E(w,"_logger",Object(i.b)("StorageManager"));var S=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textStyle=t.textStyle,this.mediaInfo=t.getMediaInfo(),this.mediaConfig=t.getMediaConfig(),this.advertising=t.config.plugins&&t.config.plugins.ima,this.config=u.Utils.Object.mergeDeep({},t.config,{playback:{startTime:A(t),autoplay:0===t.currentTime||!t.paused,audioLanguage:O(u.TrackType.AUDIO,t),textLanguage:O(u.TrackType.TEXT,t)}})};function A(e){return e.isLive()?e.isDvr()?e.duration-e.currentTime<e.config.cast.dvrThreshold||!e.currentTime?-1:e.currentTime:-1:!e.isCasting()&&!e.currentTime&&e.config.playback.startTime>-1?e.config.playback.startTime:e.currentTime}function O(e,t){var n=t.getActiveTracks();if(n[e])return n[e].language;try{return t.config.playback["".concat(e,"Language")]}catch(e){return null}}var P="kaltura-player",R={CAST_SESSION_START_FAILED:"".concat(P,"-castsessionstartfailed"),CAST_SESSION_STARTING:"".concat(P,"-castsessionstarting"),CAST_SESSION_STARTED:"".concat(P,"-castsessionstarted"),CAST_SESSION_ENDING:"".concat(P,"-castsessionending"),CAST_SESSION_ENDED:"".concat(P,"-castsessionended"),CAST_AVAILABLE:"".concat(P,"-castavailable")};function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._friendlyName=n,this._resuming=r}var t,n,r;return t=e,(n=[{key:"deviceFriendlyName",get:function(){return this._friendlyName}},{key:"id",get:function(){return this._id}},{key:"resuming",get:function(){return this._resuming}}])&&C(t.prototype,n),r&&C(t,r),e}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(n,e);var t=N(n);function n(e,r,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(a=t.call(this))._playerConfig={},a._logger=Object(i.b)(e),a._remoteControl=o,a._castConfig=u.Utils.Object.mergeDeep({},a.constructor.defaultConfig,r),a._eventManager=new u.EventManager,a._logger.debug("Initialized"),a}return L(n,null,[{key:"isSupported",value:function(){return!0}}]),L(n,[{key:"loadMedia",value:function(e){return Promise.resolve()}},{key:"setMedia",value:function(e){}},{key:"getMediaInfo",value:function(){}},{key:"getMediaConfig",value:function(){}},{key:"configure",value:function(){}},{key:"ready",value:function(){return Promise.resolve()}},{key:"load",value:function(){}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}},{key:"isLive",value:function(){return!1}},{key:"isDvr",value:function(){return!1}},{key:"seekToLiveEdge",value:function(){}},{key:"getStartTimeOfDvrWindow",value:function(){return 0}},{key:"getTracks",value:function(e){return[]}},{key:"getActiveTracks",value:function(){return{audio:void 0,video:void 0,text:void 0}}},{key:"selectTrack",value:function(e){}},{key:"hideTextTrack",value:function(){}},{key:"enableAdaptiveBitrate",value:function(){}},{key:"isAdaptiveBitrateEnabled",value:function(){return!0}},{key:"setTextDisplaySettings",value:function(e){}},{key:"startCasting",value:function(){}},{key:"stopCasting",value:function(){}},{key:"isCasting",value:function(){return!0}},{key:"isCastAvailable",value:function(){return!0}},{key:"getCastSession",value:function(){return new x("","")}},{key:"isVr",value:function(){return!1}},{key:"toggleVrStereoMode",value:function(){}},{key:"isInVrStereoMode",value:function(){return!1}},{key:"ads",get:function(){return null}},{key:"textStyle",set:function(e){},get:function(){return new u.TextStyle}},{key:"buffered",get:function(){return[]}},{key:"currentTime",set:function(e){},get:function(){return 0}},{key:"duration",get:function(){return 0}},{key:"volume",set:function(e){},get:function(){return 1}},{key:"paused",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"seeking",get:function(){return!1}},{key:"muted",set:function(e){},get:function(){return!1}},{key:"src",get:function(){return""}},{key:"poster",get:function(){return""}},{key:"playbackRate",set:function(e){},get:function(){return 1}},{key:"engineType",get:function(){return""}},{key:"streamType",get:function(){return""}},{key:"type",get:function(){return n.Type}},{key:"config",get:function(){return this._playerConfig}}]),n}(u.FakeEventTarget);function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}F(B,"defaultConfig",{}),F(B,"Type","BaseRemotePlayer");var G=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_uis",[{template:function(e){return t.idleUI(e)},condition:function(e){return e.engine.isIdle}},{template:function(e){return t.errorUI(e)},condition:function(e){return e.engine.hasError}},{template:function(e){return t.adsUI(e)},condition:function(e){return e.engine.adBreak}},{template:function(e){return t.liveUI(e)},condition:function(e){return e.engine.isLive}},{template:function(e){return t.playbackUI(e)}}])}var t,n,r;return t=e,(n=[{key:"playbackUI",value:function(e){return l.Presets.playbackUI(e)}},{key:"idleUI",value:function(e){return l.Presets.idleUI(e)}},{key:"adsUI",value:function(e){return l.Presets.adsUI(e)}},{key:"liveUI",value:function(e){return l.Presets.liveUI(e)}},{key:"errorUI",value:function(e){return l.Presets.errorUI(e)}},{key:"uis",get:function(){return this._uis}}])&&V(t.prototype,n),r&&V(t,r),e}();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var i=q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}var Q=function(){function e(t){X(this,e),this._player=t}return J(e,[{key:"player",get:function(){return this._player}}]),e}(),Z=function(e){H(n,e);var t=W(n);function n(e,r,i){var o;return X(this,n),(o=t.call(this,e))._session=r,i&&(o._ui=i),o}return J(n,[{key:"ui",get:function(){return this._ui}},{key:"session",get:function(){return this._session}}]),n}(Q),ee=function(e){H(n,e);var t=W(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e))._snapshot=r,i}return J(n,[{key:"snapshot",get:function(){return this._snapshot}}]),n}(Q),te=function(e){H(n,e);var t=W(n);function n(e,r){var i;return X(this,n),(i=t.call(this,e))._available=r,i}return J(n,[{key:"available",get:function(){return this._available}}]),n}(Q);var ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n,r=e;for(var i in t){var o=void 0!==t[i]&&null!==t[i]?t[i]:"";"string"==typeof o&&o.indexOf('"')>-1&&(o=o.replace(/"/g,'\\"')),n=new RegExp("{{"+i+"}}","g"),r=r.replace(n,o)}return r}catch(e){return""}},re=/.*\/p\/\d+\/(?:[a-zA-Z]+\/\d+\/)*thumbnail\/entry_id\/\w+\/.*\d+/;function ie(e,t){var n=e.sources&&e.sources.poster;if("string"==typeof n&&re.test(n))try{var r={thumbnailUrl:n,ks:e.session.ks,width:t&&t.thumbsWidth||164,slices:t&&t.thumbsSlices||100};return ne("{{thumbnailUrl}}/width/{{width}}/vid_slices/{{slices}}/ks/{{ks}}",r)}catch(e){return""}return""}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ue=Object(i.b)("UIWrapper"),le=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_disabled",!1);var i,o,a,s=n.ui;return s.uiComponents=[].concat(oe(t._localPlayer.uiComponents||[]),oe(s.uiComponents||[])),s.disable?(this._disabled=!0,i=s.targetId,o=t.getView(),(a=document.getElementById(i))&&a.appendChild(o)):(this._uiManager=new l.UIManager(t,s),s.customPreset?this._uiManager.buildCustomUI(s.customPreset):this._uiManager.buildDefaultUI(),this._handleVr(n.plugins),this._handleExternalCSS(s)),new Proxy(this,{get:function(e,t){return r._disabled?function(){}:e[t]}})}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this._uiManager.destroy()}},{key:"reset",value:function(){this._resetErrorState()}},{key:"setConfig",value:function(e,t){this._uiManager.setConfig(e,t)}},{key:"_resetErrorState",value:function(){this.setConfig({hasError:!1},"engine")}},{key:"setSeekbarConfig",value:function(e,t){var n=u.Utils.Object.getPropertyPath(t,"components.seekbar"),r=function(e,t){return{thumbsSprite:ie(e,t),thumbsWidth:164,thumbsSlices:100}}(e,n);this.setConfig(u.Utils.Object.mergeDeep({},r,n),"seekbar")}},{key:"setLoadingSpinnerState",value:function(e){this.setConfig({show:e},"loading")}},{key:"_handleExternalCSS",value:function(e){e.css&&u.Utils.Dom.loadStyleSheetAsync(e.css).then((function(){ue.debug("external css was loaded successfully")}),(function(){ue.error("external css failed to load")}))}},{key:"_handleVr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.vr&&!e.vr.disable&&this._setStereoConfig(e.vr)}},{key:"_setStereoConfig",value:function(e){(e.toggleStereo||(u.Env.isMobile||u.Env.isTablet)&&!1!==e.toggleStereo)&&this.setConfig(u.Utils.Object.mergeDeep({},{vrStereoMode:!!e.startInStereo}),"vrStereo")}}])&&se(t.prototype,n),r&&se(t,r),e}();var ce=Object(i.b)("RemoteControl"),fe=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getPlayerSnapshot=me.bind(t),this.getUIWrapper=be.bind(t),this.onRemoteDeviceAvailable=ve.bind(t),this.onRemoteDeviceConnected=de.bind(t),this.onRemoteDeviceDisconnected=ye.bind(t),this.onRemoteDeviceConnecting=pe.bind(t),this.onRemoteDeviceDisconnecting=he.bind(t),this.onRemoteDeviceConnectFailed=ge.bind(t)};function pe(){ce.debug("onRemoteDeviceConnecting"),this.dispatchEvent(new u.FakeEvent(R.CAST_SESSION_STARTING))}function de(e){var t=this;ce.debug("onRemoteDeviceConnected",e);var n=e.player,r=e.ui,i=e.session;this._eventManager.removeAll(),Object.values(u.EventType).forEach((function(e){return t._eventManager.listen(n,e,(function(e){return t.dispatchEvent(e)}))}));var o=this.config;r&&u.Utils.Object.mergeDeep(o,{ui:{customPreset:r.uis}}),this.configure({playback:{muted:this.muted,volume:this.volume}}),this._localPlayer.reset(),this._uiWrapper.destroy(),this._remotePlayer=n,this._uiWrapper=new le(this,o),this.dispatchEvent(new u.FakeEvent(R.CAST_SESSION_STARTED,{session:i}))}function he(){ce.debug("onRemoteDeviceDisconnecting"),this.dispatchEvent(new u.FakeEvent(R.CAST_SESSION_ENDING))}function ye(e){var t=this;ce.debug("onRemoteDeviceDisconnected",e);var n=e.player,r=e.snapshot;if(this._remotePlayer&&this._remotePlayer===n&&(this._eventManager.removeAll(),_e.call(this,r),r)){this.dispatchEvent(new u.FakeEvent(R.CAST_SESSION_ENDED));var i,o=this.config.playback,a=!r.config.playback.autoplay,s=r.mediaInfo,l=r.mediaConfig;r.config.playback.autoplay=!0,ke.call(this,r.config.playback),this._eventManager.listenOnce(this,this.Event.Core.CHANGE_SOURCE_ENDED,(function(){Ee.call(t,r.config.sources)})),s?i=this.loadMedia(s):l&&(i=Promise.resolve(),this.setMedia(l)),i&&i.then((function(){t._eventManager.listenOnce(t,t.Event.Core.FIRST_PLAYING,(function(){t.textStyle=r.textStyle,ke.call(t,o),we.call(t,r.config.playback),a&&t.pause()}))}))}}function ve(e){ce.debug("onRemoteDeviceAvailable",e);var t=e.player,n=e.available;this.dispatchEvent(new u.FakeEvent(R.CAST_AVAILABLE,{type:t.type,available:n}))}function ge(){ce.debug("onRemoteDeviceConnectFailed"),this.dispatchEvent(new u.FakeEvent(R.CAST_SESSION_START_FAILED))}function me(){var e=new S(this);return ce.debug("getPlayerSnapshot",e),e}function be(){return ce.debug("getUIWrapper"),this._uiWrapper}function _e(e){var t=this;this._uiWrapper.destroy();var n=this._localPlayer.config;if(n.plugins&&n.plugins.ima){var r={};if(n.cast.advertising&&n.cast.advertising.vast){if(e.config.playback.startTime>0){var i=n.plugins.ima.adTagUrl;r={adTagUrl:""},this._eventManager.listen(this,u.EventType.FIRST_PLAYING,(function(){return t.configure({plugins:{ima:{adTagUrl:i}}})}))}}else r={delayInitUntilSourceSelected:!0};u.Utils.Object.mergeDeep(n,{plugins:{ima:r}}),this._localPlayer.destroy(),this._remotePlayer=null,this._localPlayer=Object(u.loadPlayer)(n)}else this._remotePlayer=null;Object.values(u.EventType).forEach((function(e){return t._eventManager.listen(t._localPlayer,e,(function(e){return t.dispatchEvent(e)}))})),this._uiWrapper=new le(this,this.config),this._uiWrapper.setConfig({isCastAvailable:this.isCastAvailable()},"engine")}function ke(e){var t=e.autoplay,n=e.startTime;this.configure({playback:{startTime:n,autoplay:t}})}function Ee(e){if(e.captions.length){var t=e.captions;this.configure({sources:{captions:t}})}}function we(e){if(e.audioLanguage){var t=this.getTracks(u.TrackType.AUDIO).find((function(t){return t.language===e.audioLanguage}));this.selectTrack(t)}if(e.textLanguage){var n=this.getTracks(u.TrackType.TEXT).find((function(t){return t.language===e.textLanguage}));this.selectTrack(n)}}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"register",value:function(t,n){"function"==typeof n?e._registry.has(t)?e._logger.debug("Remote player of type ".concat(t," is already registered")):(e._logger.debug("Register remote player of type ".concat(t)),e._registry.set(t,n)):e._logger.debug("remote player must be instance of BaseRemotePlayer")}},{key:"load",value:function(t,n){e._registry.forEach((function(r,i){e._logger.debug("Load remote player of type ".concat(i)),e._remotePlayers.set(i,new r(t,n))}))}},{key:"startCasting",value:function(t){e._logger.debug("Start casting");var n=e._getRemotePlayer(t);return n?n.startCasting():Promise.reject()}},{key:"isCastAvailable",value:function(t){var n=e._getRemotePlayer(t);return!!n&&(e._logger.debug("isCastAvailable: ".concat(n.isCastAvailable())),n.isCastAvailable())}},{key:"_getRemotePlayer",value:function(t){var n=e._remotePlayers;return t&&n.get(t)?n.get(t):n.size>0?Array.from(n.values())[0]:void 0}}],(n=null)&&Te(t.prototype,n),r&&Te(t,r),e}();Se(Ae,"_logger",Object(i.b)("RemotePlayerManager")),Se(Ae,"_registry",new Map),Se(Ae,"_remotePlayers",new Map);var Oe="kaltura.com",Pe="custom_data=",Re="signature=";function Ce(e,t){e.config.session&&e.config.session.id?function(e,t){var n=/:((?:[a-z0-9]|-)*)/i.exec(e.config.session.id);n&&n[1]&&xe(t,e.config.session.id.replace(n[1],u.Utils.Generator.guid()))}(e,t):function(e){var t=u.Utils.Generator.guid(),n=u.Utils.Generator.guid();xe(e,t+":"+n)}(t)}function xe(e,t){e.session=e.session||{},e.session.id=t}function De(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"playSessionId=";if(t){var r=new RegExp(n+"((?:[a-z0-9]|-)*:(?:[a-z0-9]|-)*)","i"),i=r.exec(e);i&&i[1]?e=e.replace(i[1],t):e+=Me(e)+n+t}return e}function Ie(){var e;try{e=window.parent.document.URL}catch(t){e=document.referrer}return e}function Le(e){if(-1===e.indexOf("referrer=")){var t=btoa(Ie().substr(0,1e3));e+=Me(e)+"referrer="+t}return e}function Me(e){return-1===e.indexOf("?")?"?":"&"}function Ne(e){return-1===e.indexOf("clientTag=html5:v")&&(e+=Me(e)+"clientTag=html5:v0.55.1-canary-12-b146c7e.0"),e}function je(e,t){Ce(e,t);var n=t.sources,r=t.session&&t.session.id;Object.values(u.StreamType).forEach((function(e){n[e]&&n[e].forEach((function(e){"string"==typeof e.url&&e.url.toLowerCase().indexOf("playmanifest/")>-1&&!e.localSource&&(e.url=De(e.url,r),e.url=Le(e.url),e.url=Ne(e.url)),e.drmData&&e.drmData.length&&e.drmData.forEach((function(e){"string"==typeof e.licenseUrl&&[Oe,Pe,Re].every((function(t){return e.licenseUrl.includes(t)}))&&(e.licenseUrl=De(e.licenseUrl,r,"sessionId="),e.licenseUrl=Ne(e.licenseUrl),e.licenseUrl=Le(e.licenseUrl),e.licenseUrl=function(e,t){var n=u.Utils.Object.getPropertyPath(t,"provider.uiConfId");return-1===e.indexOf("uiConfId=")&&"number"==typeof n&&(e+=Me(e)+"uiConfId="+n),e}(e.licenseUrl,t))}))}))}))}var Ue=[];function Fe(e){if(!e)throw new Error(p);!function(e){if(!e)throw new Error(d);var t=document.getElementById(e);if(!t)throw new Error(h+e);if(t.getElementsByClassName("kaltura-player-container").length>0)throw new Error(y+e)}(e.targetId),function(e){if(!e.partnerId){var t={url:"https://analytics.kaltura.com/api_v3/index.php?service=analytics&action=trackEvent&apiVersion=3.3.0&format=1&eventType=1&partnerId=2504201&entryId=1_3bwzbc9o&&eventIndex=1&position=0",mimetype:""};t.url=Le(t.url),t.url=Ne(t.url),t.url=De(t.url,u.Utils.Generator.guid()+":"+u.Utils.Generator.guid()),navigator.sendBeacon&&navigator.sendBeacon(t.url)}}(e.provider)}function Be(){var e=!1;if(!0===window.DEBUG_KALTURA_PLAYER)e=!0;else if(window.URLSearchParams){e=new URLSearchParams(window.location.search).has("debugKalturaPlayer")}else e=!!function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("debugKalturaPlayer");return e}function Ve(e){var t={};return function(e){var t=u.Utils.Object.getPropertyPath(window,"__kalturaplayerdata.UIConf");return null!=e&&(void 0!==t&&void 0!==t[e]||!1)}(e)&&(t=window.__kalturaplayerdata.UIConf[e]),t}function Ge(e){var t=function(e){var t=document.createElement("div");t.id=u.Utils.Generator.uniqueId(5),t.className="kaltura-player-container",t.setAttribute("tabindex","-1");var n=document.getElementById(e);return n&&t&&n.appendChild(t),t.id}(e.targetId),n={targetId:e.targetId,provider:{partnerId:e.provider.partnerId},ui:{targetId:t}};if(u.Utils.Object.mergeDeep(n,e),n.provider.uiConfId){var r=Ke(Ve(n.provider.uiConfId));n=u.Utils.Object.mergeDeep({},r,n)}return function(e){if(u.Env.isMacOS&&u.Env.isSafari||u.Env.isIOS){"boolean"!=typeof u.Utils.Object.getPropertyPath(e,"playback.preferNative.hls")&&u.Utils.Object.mergeDeep(e,{playback:{preferNative:{hls:!0}}})}}(n),function(e){if(u.Env.isMacOS&&u.Env.isSafari||u.Env.isIOS){"boolean"!=typeof u.Utils.Object.getPropertyPath(e,"playback.useNativeTextTrack")&&u.Utils.Object.mergeDeep(e,{playback:{useNativeTextTrack:!0}})}}(n),function(e){var t=u.Utils.Object.getPropertyPath(e,"plugins.kava");t||(t=u.Utils.Object.mergeDeep(e,{plugins:{kava:{}}}))}(n),function(e){if(u.Env.isSmartTV&&(Object(u.setCapabilities)(u.EngineType.HTML5,{autoplay:!0}),function(e){"boolean"!=typeof u.Utils.Object.getPropertyPath(e,"playback.playAdsWithMSE")&&(e=e.plugins&&e.plugins.imadai&&!e.plugins.imadai.disable?u.Utils.Object.createPropertyPath(e,"playback.playAdsWithMSE",!1):u.Utils.Object.createPropertyPath(e,"playback.playAdsWithMSE",!0));var t=u.Utils.Object.getPropertyPath(e,"plugins.ima.disableMediaPreload"),n=u.Utils.Object.getPropertyPath(e,"plugins.bumper.disableMediaPreload");e.plugins&&e.plugins.ima&&"boolean"!=typeof t&&(e=u.Utils.Object.createPropertyPath(e,"plugins.ima.disableMediaPreload",!0));e.plugins&&e.plugins.bumper&&"boolean"!=typeof n&&(e=u.Utils.Object.createPropertyPath(e,"plugins.bumper.disableMediaPreload",!0))}(e),function(e){"boolean"!=typeof u.Utils.Object.getPropertyPath(e,"playback.options.html5.hls.liveSyncDurationCount")&&u.Env.isSafari&&(e=u.Utils.Object.createPropertyPath(e,"playback.options.html5.hls.liveSyncDurationCount",2))}(e),e.plugins&&e.plugins.ima)){var t=u.Utils.Object.getPropertyPath(e,"plugins.ima.forceReloadMediaAfterAds"),n=u.Utils.Object.getPropertyPath(e,"plugins.ima.delayInitUntilSourceSelected");"boolean"!=typeof t&&(e=u.Utils.Object.createPropertyPath(e,"plugins.ima.forceReloadMediaAfterAds",!0)),"boolean"!=typeof n&&(e=u.Utils.Object.createPropertyPath(e,"plugins.ima.delayInitUntilSourceSelected",!0))}}(n),function(e){if("Edge"===u.Env.browser.name){u.Utils.Object.getPropertyPath(e,"drm.keySystem")||(e="Windows"===u.Env.os.name?u.Utils.Object.createPropertyPath(e,"drm.keySystem",u.DrmScheme.PLAYREADY):u.Utils.Object.createPropertyPath(e,"drm.keySystem",u.DrmScheme.WIDEVINE))}}(n),function(e){if(u.Env.isIOS&&e.plugins&&e.plugins.ima&&!e.plugins.ima.disable){var t=u.Utils.Object.getPropertyPath(e,"playback.playsinline"),n=u.Utils.Object.getPropertyPath(e,"plugins.ima.disableMediaPreload");!1===t&&"boolean"!=typeof n&&u.Utils.Object.createPropertyPath(e,"plugins.ima.disableMediaPreload",!0)}}(n),function(e){if(e.plugins&&e.plugins.imadai&&!e.plugins.imadai.disable){"boolean"!=typeof u.Utils.Object.getPropertyPath(e,"playback.options.html5.hls.autoStartLoad")&&u.Utils.Object.mergeDeep(e,{playback:{options:{html5:{hls:{autoStartLoad:!1}}}}})}}(n),function(e){var t=u.Utils.Object.getPropertyPath(e,"plugins.bumper"),n=u.Utils.Object.getPropertyPath(e,"plugins.imadai");if(t){var r={};"boolean"!=typeof t.playOnMainVideoTag&&(u.Env.isSmartTV||u.Env.isIOS&&e.playback&&!1===e.playback.playsinline)&&(r.playOnMainVideoTag=!0),n&&!n.disable&&(Array.isArray(t.position)||(r.position=[0]),"boolean"!=typeof t.disableMediaPreload&&(r.disableMediaPreload=!0)),u.Utils.Object.mergeDeep(e,{plugins:{bumper:r}})}}(n),function(e){var t=u.Utils.Object.getPropertyPath(e,"sources.options");t||(u.Utils.Object.mergeDeep(e,{sources:{options:{}}}),t=e.sources&&e.sources.options),t&&"function"!=typeof t.redirectExternalStreamsHandler&&(t.redirectExternalStreamsHandler=T)}(n),function(e){var t=u.Utils.Object.getPropertyPath(e,"plugins.vr");if(t&&!t.disable){"boolean"!=typeof u.Utils.Object.getPropertyPath(e,"playback.inBrowserFullscreen")&&u.Utils.Object.mergeDeep(e,{playback:{inBrowserFullscreen:!0}})}}(n),function(e){var t=u.Utils.Object.getPropertyPath(e,"playback.playsinline");"iPhone"===u.Env.device.model&&!1===t&&Object(u.setCapabilities)(u.EngineType.HTML5,{autoplay:!1,mutedAutoPlay:!1})}(n),n}function Ke(e){return function(){if(e.player){Ue.push({level:"warn",msg:"Path config.player will be deprecated soon. Please update your config structure as describe here: ".concat("https://github.com/kaltura/kaltura-player-js/blob/master/docs/configuration.md")});var t=u.Utils.Object.copyDeep(e.player);delete e.player,u.Utils.Object.mergeDeep(e,t)}}(),[["duration","sources.duration"],["type","sources.type"],["dvr","sources.dvr"],["id","sources.id"],["name","metadata.name"],["metadata.poster","sources.poster"],["metadata","sources.metadata"],["logLevel","log.level"],["ui.components.fullscreen.inBrowserFullscreenForIOS","playback.inBrowserFullscreen"]].forEach((function(t){return function(t,n){if(u.Utils.Object.hasPropertyPath(e,t))if(Ue.push({level:"warn",msg:"Path config.player.".concat(t," will be deprecated soon. Please update your config structure as describe here: ").concat("https://github.com/kaltura/kaltura-player-js/blob/master/docs/configuration.md")}),u.Utils.Object.hasPropertyPath(e,n))u.Utils.Object.deletePropertyPath(e,t);else{var r=u.Utils.Object.getPropertyPath(e,t),i=u.Utils.Object.createPropertyPath({},n,r);u.Utils.Object.mergeDeep(e,i),u.Utils.Object.deletePropertyPath(e,t)}}(t[0],t[1])})),e}function He(e){var t=e&&e.progressive;return!(!t||!t[0]||"video/youtube"!==t[0].mimetype)}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ye={youbora:{playerVersion:"{{pVersion}}",playerName:"{{pName}}",entryId:"{{entryId}}",entryName:"{{entryName}}",entryType:"{{entryType}}",sessionId:"{{sessionId}}",uiConfId:"{{uiConfId}}"},googleAnalytics:{entryId:"{{entryId}}",entryName:"{{entryName}}",uiConfId:"{{uiConfId}}",partnerId:"{{partnerId}}"},ottAnalytics:{entryId:"{{entryId}}",ks:"{{ks}}",isAnonymous:"{{isAnonymous}}",partnerId:"{{partnerId}}",serviceUrl:"{{serviceUrl}}"},ima:{playerVersion:"{{pVersion}}",playerName:"{{pName}}"},kava:{playerVersion:"{{pVersion}}",playerName:"{{pName}}",partnerId:"{{partnerId}}",playlistId:"{{playlistId}}",entryId:"{{entryId}}",entryType:"{{entryType}}",sessionId:"{{sessionId}}",ks:"{{ks}}",uiConfId:"{{uiConfId}}",referrer:"{{referrer}}",encodedReferrer:"{{encodedReferrer}}"},comscore:{playerVersion:"{{pVersion}}"},vr:{rootElement:"{{domRootElementId}}"}},qe=u.Utils.Object.copyDeep(Ye),Xe=new RegExp("{{.*}}"),$e=function(){return qe},Je=function(e){if(e){var t=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(t).reduce((function(t,n){var r=ze(n,2),i=r[0],o=r[1];return u.Utils.Object.isObject(o)?t[i]=e(o):"string"==typeof o&&Xe.test(o)?t[i]=o:t[i]=void 0,t}),{})}(e);qe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(t).reduce((function(t,n){var r=ze(n,2),i=r[0],o=r[1];return u.Utils.Object.isObject(o)?t[i]=e(o):o&&(t[i]=o),t}),{})}(u.Utils.Object.mergeDeep(qe,t))}};function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var et=function(e){return("number"==typeof e||"function"==typeof e||"string"==typeof e||"boolean"==typeof e)&&!Xe.test(e.toString())},tt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(t).reduce((function(t,n){var r=Qe(n,2),i=r[0],o=r[1];return"function"!=typeof o&&u.Utils.Object.isObject(o)?t[i]=e(o):Array.isArray(o)?t[i]=o.filter((function(e){return et(e)})):et(o)&&(t[i]=o),t}),{})},nt=function(e){var t={pVersion:e.productVersion?e.productVersion:"0.55.1-canary-12-b146c7e.0",pName:"kaltura-player-js"};e.targetId&&(t.domRootElementId=e.targetId),e.provider&&e.provider.env&&(t.serviceUrl=e.provider.env.serviceUrl,t.serviceUrl&&(t.embedBaseUrl=t.serviceUrl.replace("api_v3","")));var n,r={referrer:Ie(),encodedReferrer:(n=Ie(),encodeURIComponent(n))};return e.provider&&u.Utils.Object.mergeDeep(r,{ks:e.provider.ks,uiConfId:e.provider.uiConfId,partnerId:e.provider.partnerId}),e.session&&u.Utils.Object.mergeDeep(r,{sessionId:e.session.id,ks:e.session.ks,isAnonymous:e.session.isAnonymous,uiConfId:e.session.uiConfId,partnerId:e.session.partnerId}),e.sources&&u.Utils.Object.mergeDeep(r,{entryId:e.sources.id,entryName:e.sources.metadata&&e.sources.metadata.name,entryType:e.sources.type}),e.playlist&&u.Utils.Object.mergeDeep(r,{playlistId:e.playlist.id}),Object.keys(r).forEach((function(e){void 0===r[e]&&delete r[e]})),u.Utils.Object.mergeDeep(t,r),t};function rt(e,t){if(e){Je(e);var n=nt(t),r=u.Utils.Object.mergeDeep({},$e(),e);at(e,ot(ne(JSON.stringify(r),n)))}}function it(e,t){if(e){var n=nt(t),r=u.Utils.Object.mergeDeep({},{components:{share:{shareUrl:"{{embedBaseUrl}}/index.php/extwidget/preview/partner_id/{{partnerId}}/uiconf_id/{{uiConfId}}/entry_id/{{entryId}}/embed/dynamic",embedUrl:"{{embedBaseUrl}}/p/{{partnerId}}/embedPlaykitJs/uiconf_id/{{uiConfId}}?iframeembed=true&entry_id={{entryId}}"}}},e);at(e,ot(ne(JSON.stringify(r),n)))}}function ot(e){var t;try{t=JSON.parse(e,(function(e){try{return JSON.parse(this[e])}catch(t){return this[e]}}))}catch(e){t={}}return t}function at(e,t){var n=tt(t),r=tt(e);r&&n&&Object.keys(e).forEach((function(t){e&&e[t]&&(e[t]=u.Utils.Object.mergeDeep({},n[t],r[t]))}))}function st(e,t,n){var r=e.poster,i=t.poster,o=n.width,a=n.height;"string"==typeof r&&re.test(r)&&r===i&&(e.poster="".concat(r,"/height/").concat(a,"/width/").concat(o))}n(321);var ut={PLAYLIST_LOADED:"".concat("kaltura-player","-playlistloaded"),PLAYLIST_ITEM_CHANGED:"".concat("kaltura-player","-playlistitemchanged"),PLAYLIST_ENDED:"".concat("kaltura-player","-playlistended")};function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=["hls","dash","progressive"],ft=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sources=t,this._config=n}var t,n,r;return t=e,(n=[{key:"updateSources",value:function(e){var t=this;ct.forEach((function(n){t._sources&&(t._sources[n]=e[n])}))}},{key:"isPlayable",value:function(){var e=this;return!!ct.find((function(t){return e._sources&&e._sources[t]&&e._sources[t].length}))}},{key:"sources",get:function(){var e=this;return ct.forEach((function(t){e._sources&&e._sources[t]&&0===e._sources[t].length&&delete e._sources[t]})),this._sources}},{key:"config",get:function(){return this._config}}])&&lt(t.prototype,n),r&&lt(t,r),e}();function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id="",this._metadata={name:"",description:""},this._poster="",this._items=[],this._activeItemIndex=-1}var t,n,r;return t=e,(n=[{key:"configure",value:function(e){var t=this;this._id=e.id,this._poster=e.poster,this._metadata=e.metadata,e.items&&(this._items=[],e.items.forEach((function(e){t._items.push(new ft(e.sources,e.config))})))}},{key:"updateItemSources",value:function(e,t){this._items[e].updateSources(t)}},{key:"getNext",value:function(e){var t=e?(this._activeItemIndex+1)%this._items.length:this._activeItemIndex+1;return{item:this._items[t]||null,index:t}}},{key:"id",get:function(){return this._id}},{key:"items",get:function(){return this._items}},{key:"metadata",get:function(){return this._metadata}},{key:"poster",get:function(){return this._poster}},{key:"current",get:function(){return{item:this._items[this._activeItemIndex]||null,index:this._activeItemIndex}}},{key:"prev",get:function(){return{item:this._items[this._activeItemIndex-1]||null,index:this._activeItemIndex-1}}},{key:"activeItemIndex",set:function(e){this._activeItemIndex=e}}])&&pt(t.prototype,n),r&&pt(t,r),e}();function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_logger",Object(i.b)("PlaylistManager")),this._player=t,this._eventManager=new u.EventManager,this._playlist=new dt,this._options={autoContinue:!0,loop:!1},this._countdown={duration:10,showing:!0},this._mediaInfoList=[],this._playerOptions=n}var t,n,r;return t=e,(n=[{key:"configure",value:function(e,t){e&&(this._playlist.configure(e),u.Utils.Object.mergeDeep(this._options,e.options),u.Utils.Object.mergeDeep(this._countdown,e.countdown),e.items&&e.items.find((function(e){return!!e.sources}))&&(this._mediaInfoList=e.items.map((function(e,n){return t&&t.entries&&"object"===ht(t.entries[n])?t.entries[n]:{entryId:e.sources.id}})),this._player.dispatchEvent(new u.FakeEvent(ut.PLAYLIST_LOADED,{playlist:this})),this._addBindings(),this.playNext()))}},{key:"load",value:function(e,t,n){var r=this._getMergedPlaylistData(e,t);this.configure(r,n)}},{key:"reset",value:function(){this._eventManager.removeAll(),this._playlist=new dt,this._mediaInfoList=[]}},{key:"playNext",value:function(){this._logger.debug("playNext");var e=this._playlist.getNext(!0);e.item&&this._setItem(e.item,e.index)}},{key:"playPrev",value:function(){this._logger.debug("playPrev");var e=this._playlist.prev;e.item&&this._setItem(e.item,e.index)}},{key:"playItem",value:function(e){this._logger.debug("playItem(".concat(e,")"));var t=this._playlist.items[e];t&&this._setItem(t,e)}},{key:"_getMergedPlaylistData",value:function(e,t){var n=this;return{id:e.id,metadata:e.metadata,poster:e.poster,options:t?t.options:this._options,countdown:t?t.countdown:this.countdown,items:e.items.map((function(e,r){var i=u.Utils.Object.copyDeep(e);return u.Utils.Object.mergeDeep(i.sources,t&&t.items&&t.items[r]&&t.items[r].sources),Array.isArray(i.sources.poster)&&st(i.sources,e.sources,n._player.dimensions),{sources:i.sources,config:t&&t.items&&t.items[r]&&t.items[r].config}}))}}},{key:"_addBindings",value:function(){var e=this;this._eventManager.listen(this._player,this._player.Event.Core.PLAYBACK_ENDED,(function(){return e._onPlaybackEnded()}))}},{key:"_onPlaybackEnded",value:function(){var e=this._playlist.getNext(!1).item;e||this._player.dispatchEvent(new u.FakeEvent(ut.PLAYLIST_ENDED)),!this._playerOptions.ui.disable&&this.countdown.showing||(e&&this._options.autoContinue||this._options.loop)&&this.playNext()}},{key:"_setItem",value:function(e,t){var n=this;this._logger.debug("Playing item number ".concat(t),e);var r={loop:!1};return this._playlist.current.item&&(r.autoplay=!0),this._player.configure({playback:r}),this._playlist.activeItemIndex=t,e.isPlayable()?(this._player.reset(),this._player.setMedia({session:this._player.config.session,plugins:{},sources:e.sources}),this._player.dispatchEvent(new u.FakeEvent(ut.PLAYLIST_ITEM_CHANGED,{index:t,activeItem:e})),Promise.resolve()):this._mediaInfoList[t]?(this._player.reset(),this._player.configure({sources:e.sources}),this._player.loadMedia(this._mediaInfoList[t]).then((function(r){n._playlist.updateItemSources(t,r.sources),n._player.dispatchEvent(new u.FakeEvent(ut.PLAYLIST_ITEM_CHANGED,{index:t,activeItem:e}))}))):Promise.reject()}},{key:"destroy",value:function(){this._eventManager.destroy()}},{key:"items",get:function(){return this._playlist.items}},{key:"next",get:function(){return this._playlist.getNext(this._options.loop).item}},{key:"prev",get:function(){return this._playlist.prev.item}},{key:"id",get:function(){return this._playlist.id}},{key:"metadata",get:function(){return this._playlist.metadata}},{key:"poster",get:function(){return this._playlist.poster}},{key:"countdown",get:function(){if(this._playlist.current.item&&this._playlist.current.item.config){var e={duration:10,showing:!0};return u.Utils.Object.mergeDeep(e,this._countdown,this._playlist.current.item.config.countdown),e}return this._countdown}},{key:"options",get:function(){return this._options}}])&&yt(t.prototype,n),r&&yt(t,r),e}();function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tt(e);if(t){var i=Tt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Et(this,n)}}function Et(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?wt(e):t}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var At=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(a,e);var t,n,r,o=kt(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),St(wt(t=o.call(this)),"_mediaInfo",null),St(wt(t),"_remotePlayer",null),t._eventManager=new u.EventManager;var n=e.sources,r=u.Utils.Object.mergeDeep({},e,{sources:null});return t._localPlayer=Object(u.loadPlayer)(r),t._logger=Object(i.b)("KalturaPlayer"+u.Utils.Generator.uniqueId(5)),t._uiWrapper=new le(wt(t),e),t._provider=new c.Provider(e.provider,"0.55.1-canary-12-b146c7e.0"),t._playlistManager=new vt(wt(t),e),t._playlistManager.configure(e.playlist),Object.values(u.EventType).forEach((function(e){return t._eventManager.listen(t._localPlayer,e,(function(e){return t.dispatchEvent(e)}))})),t._localPlayer.configure({sources:n}),t}return t=a,(n=[{key:"loadMedia",value:function(e){var t=this;this._logger.debug("loadMedia",e),this._mediaInfo=e,this.reset(),this._localPlayer.loadingMedia=!0,this._uiWrapper.setLoadingSpinnerState(!0);var n=this._provider.getMediaConfig(e);return n.then((function(e){return t.setMedia(e)}),(function(e){return t._localPlayer.dispatchEvent(new u.FakeEvent(u.EventType.ERROR,new u.Error(u.Error.Severity.CRITICAL,u.Error.Category.PLAYER,u.Error.Code.LOAD_FAILED,e)))})).then((function(){t._maybeSetEmbedConfig()})),n}},{key:"setMedia",value:function(e){this._logger.debug("setMedia",e);var t=u.Utils.Object.copyDeep(e);u.Utils.Object.mergeDeep(t.sources,this._localPlayer.config.sources),u.Utils.Object.mergeDeep(t.session,this._localPlayer.config.session),Object.keys(this._localPlayer.config.plugins).forEach((function(e){t.plugins[e]=t.plugins[e]||{}})),st(t.sources,e.sources,this._localPlayer.dimensions),je(this,t),function(e,t){if(t.sources&&He(t.sources)){var n=e.config.playback,r=!1;n.streamPriority.forEach((function(e){"youtube"===e.engine&&(r=!0)})),r||n.streamPriority.push({engine:"youtube",format:"progressive"}),t.playback=n}}(this,t),He(t.sources)||this._uiWrapper.setSeekbarConfig(e,this._localPlayer.config.ui),this.configure(t)}},{key:"loadPlaylist",value:function(e,t){var n=this;this._logger.debug("loadPlaylist",e),this._uiWrapper.setLoadingSpinnerState(!0);var r=this._provider.getPlaylistConfig(e);return r.then((function(e){return n.setPlaylist(e,t)}),(function(e){return n._localPlayer.dispatchEvent(new u.FakeEvent(u.EventType.ERROR,new u.Error(u.Error.Severity.CRITICAL,u.Error.Category.PLAYER,u.Error.Code.LOAD_FAILED,e)))})),r}},{key:"loadPlaylistByEntryList",value:function(e,t){var n=this;this._logger.debug("loadPlaylistByEntryList",e),this._uiWrapper.setLoadingSpinnerState(!0);var r=this._provider.getEntryListConfig(e);return r.then((function(r){return n.setPlaylist(r,t,e)}),(function(e){return n._localPlayer.dispatchEvent(new u.FakeEvent(u.EventType.ERROR,new u.Error(u.Error.Severity.CRITICAL,u.Error.Category.PLAYER,u.Error.Code.LOAD_FAILED,e)))})),r}},{key:"setPlaylist",value:function(e,t,n){this._logger.debug("setPlaylist",e);var r={playlist:e,plugins:{}};Object.keys(this._localPlayer.config.plugins).forEach((function(e){r.plugins[e]={}})),rt(r.plugins,r),this._localPlayer.configure({plugins:r.plugins}),this._playlistManager.load(e,t,n)}},{key:"getMediaInfo",value:function(){return u.Utils.Object.copyDeep(this._mediaInfo)}},{key:"getMediaConfig",value:function(){var e={sources:this._localPlayer.config.sources,plugins:this._localPlayer.config.plugins};return u.Utils.Object.copyDeep(e)}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Ke(e);var t=u.Utils.Object.mergeDeep({},this.config,e);rt(e.plugins,t),this._localPlayer.configure(e);var n=e.ui;n&&(it(n,this.config),this._uiWrapper.setConfig(n)),e.playlist&&this._playlistManager.configure(e.playlist)}},{key:"ready",value:function(){return this._localPlayer.ready()}},{key:"load",value:function(){this._localPlayer.load()}},{key:"play",value:function(){this._localPlayer.play()}},{key:"pause",value:function(){this._localPlayer.pause()}},{key:"getView",value:function(){return this._localPlayer.getView()}},{key:"getVideoElement",value:function(){return this._localPlayer.getVideoElement()}},{key:"reset",value:function(){this._localPlayer.reset(),this._uiWrapper.reset()}},{key:"destroy",value:function(){var e=this.config.ui.targetId;this._localPlayer.destroy(),this._uiWrapper.destroy(),this._eventManager.destroy(),this._playlistManager.destroy();var t=document.getElementById(e);t&&t.parentNode&&u.Utils.Dom.removeChild(t.parentNode,t)}},{key:"isLive",value:function(){return this._localPlayer.isLive()}},{key:"isOnLiveEdge",value:function(){return this._localPlayer.isOnLiveEdge()}},{key:"isDvr",value:function(){return this._localPlayer.isDvr()}},{key:"seekToLiveEdge",value:function(){this._localPlayer.seekToLiveEdge()}},{key:"getStartTimeOfDvrWindow",value:function(){return this._localPlayer.getStartTimeOfDvrWindow()}},{key:"getTracks",value:function(e){return this._localPlayer.getTracks(e)}},{key:"getActiveTracks",value:function(){return this._localPlayer.getActiveTracks()}},{key:"selectTrack",value:function(e){this._localPlayer.selectTrack(e)}},{key:"hideTextTrack",value:function(){this._localPlayer.hideTextTrack()}},{key:"enableAdaptiveBitrate",value:function(){this._localPlayer.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return this._localPlayer.isAdaptiveBitrateEnabled()}},{key:"setTextDisplaySettings",value:function(e){this._localPlayer.setTextDisplaySettings(e)}},{key:"isFullscreen",value:function(){return this._localPlayer.isFullscreen()}},{key:"notifyEnterFullscreen",value:function(){this._localPlayer.notifyEnterFullscreen()}},{key:"notifyExitFullscreen",value:function(){this._localPlayer.notifyExitFullscreen()}},{key:"enterFullscreen",value:function(e){var t=e||this.config.ui.targetId;this._localPlayer.enterFullscreen(t)}},{key:"exitFullscreen",value:function(){this._localPlayer.exitFullscreen()}},{key:"enterPictureInPicture",value:function(){this._localPlayer.enterPictureInPicture()}},{key:"exitPictureInPicture",value:function(){this._localPlayer.exitPictureInPicture()}},{key:"isInPictureInPicture",value:function(){return this._localPlayer.isInPictureInPicture()}},{key:"isPictureInPictureSupported",value:function(){return this._localPlayer.isPictureInPictureSupported()}},{key:"getLogLevel",value:function(e){return this._localPlayer.getLogLevel(e)}},{key:"startCasting",value:function(e){return Ae.startCasting(e)}},{key:"isCastAvailable",value:function(e){return Ae.isCastAvailable(e)}},{key:"getCastSession",value:function(){return null}},{key:"stopCasting",value:function(){}},{key:"isCasting",value:function(){return!1}},{key:"isVr",value:function(){return this._localPlayer.isVr()}},{key:"toggleVrStereoMode",value:function(){this._localPlayer.toggleVrStereoMode()}},{key:"isInVrStereoMode",value:function(){return this._localPlayer.isInVrStereoMode()}},{key:"setLogLevel",value:function(e,t){this._localPlayer.setLogLevel(e,t)}},{key:"_maybeSetEmbedConfig",value:function(){var e=this.config.ui;e&&e.components&&e.components.share&&(it(e,this.config),this._uiWrapper.setConfig(e))}},{key:"textStyle",set:function(e){this._localPlayer.textStyle=e},get:function(){return this._localPlayer.textStyle}},{key:"buffered",get:function(){return this._localPlayer.buffered}},{key:"currentTime",set:function(e){this._localPlayer.currentTime=e},get:function(){return this._localPlayer.currentTime}},{key:"duration",get:function(){return this._localPlayer.duration}},{key:"volume",set:function(e){this._localPlayer.volume=e},get:function(){return this._localPlayer.volume}},{key:"paused",get:function(){return this._localPlayer.paused}},{key:"seeking",get:function(){return this._localPlayer.seeking}},{key:"playsinline",set:function(e){this._localPlayer.playsinline=e},get:function(){return this._localPlayer.playsinline}},{key:"muted",set:function(e){this._localPlayer.muted=e},get:function(){return this._localPlayer.muted}},{key:"src",get:function(){return this._localPlayer.src}},{key:"dimensions",get:function(){return this._localPlayer.dimensions}},{key:"poster",get:function(){return this._localPlayer.poster}},{key:"ended",get:function(){return this._localPlayer.ended}},{key:"playbackRate",set:function(e){this._localPlayer.playbackRate=e},get:function(){return this._localPlayer.playbackRate}},{key:"playbackRates",get:function(){return this._localPlayer.playbackRates}},{key:"defaultPlaybackRate",get:function(){return this._localPlayer.defaultPlaybackRate}},{key:"engineType",get:function(){return this._localPlayer.engineType}},{key:"streamType",get:function(){return this._localPlayer.streamType}},{key:"env",get:function(){return this._localPlayer.env}},{key:"config",get:function(){return this._localPlayer.config}},{key:"hasUserInteracted",get:function(){return this._localPlayer.hasUserInteracted}},{key:"loadingMedia",set:function(e){this._localPlayer.loadingMedia=e}},{key:"ads",get:function(){return this._localPlayer.ads}},{key:"plugins",get:function(){return this._localPlayer.plugins}},{key:"playlist",get:function(){return this._playlistManager}},{key:"Event",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({Cast:R,Core:u.EventType,Playlist:ut,UI:l.EventType},u.EventType)}},{key:"TextStyle",get:function(){return this._localPlayer.TextStyle}},{key:"State",get:function(){return this._localPlayer.State}},{key:"Track",get:function(){return this._localPlayer.Track}},{key:"LogLevelType",get:function(){return this._localPlayer.LogLevelType}},{key:"LogLevel",get:function(){return this._localPlayer.LogLevel}},{key:"AbrMode",get:function(){return this._localPlayer.AbrMode}},{key:"MediaType",get:function(){return this._localPlayer.MediaType}},{key:"StreamType",get:function(){return this._localPlayer.StreamType}},{key:"EngineType",get:function(){return this._localPlayer.EngineType}},{key:"Error",get:function(){return this._localPlayer.Error}}])&&bt(t.prototype,n),r&&bt(t,r),a}(u.FakeEventTarget),Ot={};function Pt(){return Ot}function Rt(e){return Ot[e]?Ot[e]:null}var Ct=["_remotePlayer","_listeners","_uiWrapper"],xt={get:function(e,t){if("destroy"===t){var n=e.config.targetId;delete Ot[n]}return t in u.FakeEventTarget.prototype||Ct.includes(t)?e[t]:e._remotePlayer&&t in e._remotePlayer?e._remotePlayer[t]:e[t]},set:function(e,t,n){return e._remotePlayer&&!Ct.includes(t)?t in e._remotePlayer&&(e._remotePlayer[t]=n):e[t]=n,!0}};function Dt(e){!function(e){!1!==u.Utils.Object.getPropertyPath(e,"log.playerVersion")&&(Object(i.d)(i.a.INFO),Object(i.b)().log("%c ".concat("kaltura-player-js"," ").concat("0.55.1-canary-12-b146c7e.0"),"color: #ff98f9;  font-size: large"),Object(i.b)().log("%c For more details see ".concat("https://github.com/kaltura/kaltura-player-js"),"color: #ff98f9;"))}(e),Fe(e=Ke(e));var t=Ge(e);!function(e){u.Utils.Object.getPropertyPath(e,"ui.log")||u.Utils.Object.createPropertyPath(e,"ui.log",{}),u.Utils.Object.getPropertyPath(e,"provider.log")||u.Utils.Object.createPropertyPath(e,"provider.log",{}),u.Utils.Object.getPropertyPath(e,"log")||u.Utils.Object.createPropertyPath(e,"log",{}),e.log&&"function"==typeof e.log.handler&&(Object(i.c)(e.log.handler),e.ui.log.handler=e.provider.log.handler=e.log.handler);var t=i.a.ERROR;e.log&&Be()?(t=i.a.DEBUG,e.log.level=i.a.DEBUG.name):e.log&&e.log.level&&i.a[e.log.level]&&(t=i.a[e.log.level]),e.ui.log.level=e.provider.log.level=t.name,Object(i.d)(t)}(t),Ue.forEach((function(e){return Object(i.b)("KalturaPlayer:Setup")[e.level](e.msg)})),rt(t.plugins,t),function(e){!e.disableUserCache&&w.isLocalStorageAvailable()&&w.hasStorage()&&u.Utils.Object.mergeDeep(e,w.getStorageConfig())}(t);var n=function(e){var t=new At(e),n=new Proxy(t,xt);return Ot[e.targetId]=n,n}(t);return function(e){if(w.isLocalStorageAvailable()){var t=w.getPlayerTextStyle();t&&(e.textStyle=u.Utils.Object.mergeDeep(new u.TextStyle,t))}}(n),function(e){w.isLocalStorageAvailable()&&w.attach(e)}(n),function(e,t){e.cast&&Ae.load(e.cast,new fe(t))}(t,n),function(e){if(u.Env.isIOS||u.Env.isIPadOS){var t=function t(){e.removeEventListener(e.Event.UI.UI_CLICKED,t),Object(u.setCapabilities)(u.EngineType.HTML5,{autoplay:!0})};e.addEventListener(e.Event.SOURCE_SELECTED,(function n(){e.removeEventListener(e.Event.SOURCE_SELECTED,n),e.addEventListener(e.Event.UI.UI_CLICKED,t)}))}}(n),n}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Lt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"toCastTextStyle",value:function(t){if(window.chrome&&window.chrome.cast){var n=new window.chrome.cast.media.TextTrackStyle;return n.fontFamily=t.fontFamily,n.backgroundColor=e.rgbToHex(t.backgroundColor),n.foregroundColor=e.rgbToHex(t.fontColor),n.fontScale=Number.parseFloat(t.fontSize)/100,n}return{}}},{key:"toPlayerTextStyle",value:function(t){var n=new u.TextStyle;return n.fontFamily=t.fontFamily,n.fontSize=100*t.fontScale+"%",n.fontColor=e.hexToRGB(t.foregroundColor),n.backgroundColor=e.hexToRGB(t.backgroundColor),n}},{key:"rgbToHex",value:function(e){var t="#"+("0"+parseInt(e[0],10).toString(16)).slice(-2)+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2);if(e[3]){var n=e[3];n=Math.round(100*n)/100,t+=(Math.round(255*n)+65536).toString(16).substr(-2).toUpperCase()}else t+="FF";return t.toUpperCase()}},{key:"hexToRGB",value:function(e){for(var t=[],n=(e=e.slice(1)).match(/.{1,2}/g),r=0;r<3;r++){var i=n&&n[r];i&&t.push(parseInt(i,16))}return t}}],(n=null)&&It(t.prototype,n),r&&It(t,r),e}();function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bt(e);if(t){var i=Bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ft(this,n)}}function Ft(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Gt={ACTION:"action",EVENT:"event"},Kt=function e(t){Vt(this,e),this.type=t},Ht=function(e){Nt(n,e);var t=Ut(n);function n(e,r){var i;return Vt(this,n),(i=t.call(this,Gt.EVENT)).event=e,i.payload=r,i}return n}(Kt),zt=function(e){Nt(n,e);var t=Ut(n);function n(e,r){var i;return Vt(this,n),(i=t.call(this,Gt.ACTION)).action=e,i.args=r,i}return n}(Kt),Wt={registerRemotePlayer:Ae.register,PlayerSnapshot:S,RemoteControl:fe,RemoteSession:x,BaseRemotePlayer:B,RemoteConnectedPayload:Z,RemoteDisconnectedPayload:ee,RemoteAvailablePayload:te,RemotePlayerUI:G,CastEventType:R,RemotePlayerType:{CHROMECAST:"chromecast"},TextStyleConverter:Lt,CustomEventMessage:Ht,CustomActionMessage:zt,CustomMessageType:Gt,CustomActionType:{SKIP_AD:"skipAd"},CustomMessage:Kt},Yt={PlaylistEventType:ut},qt="kaltura-player-js",Xt="ovp",$t="0.55.1-canary-12-b146c7e.0";r.a.installAll()}])}));
//# sourceMappingURL=kaltura-ovp-player.js.map